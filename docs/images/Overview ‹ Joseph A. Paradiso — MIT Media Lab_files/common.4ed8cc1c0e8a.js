var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,i){return t&&eachProp(t,function(t,r){!n&&hasProp(e,r)||(!i||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),mixin(e[r],t,n,i)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,i){var r=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return r.requireType=e,r.requireModules=i,n&&(r.originalError=n),r}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,i){var r,a,o,s,l,u,c,d,h,p,f,m=n&&n.split("/"),g=w.map,v=g&&g["*"];if(e&&(e=e.split("/"),u=e.length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[u])&&(e[u]=e[u].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&m&&(f=m.slice(0,m.length-1),e=f.concat(e)),t(e),e=e.join("/")),i&&g&&(m||v)){a=e.split("/");e:for(o=a.length;o>0;o-=1){if(l=a.slice(0,o).join("/"),m)for(s=m.length;s>0;s-=1)if((r=getOwn(g,m.slice(0,s).join("/")))&&(r=getOwn(r,l))){c=r,d=o;break e}!h&&v&&getOwn(v,l)&&(h=getOwn(v,l),p=o)}!c&&h&&(c=h,d=p),c&&(a.splice(0,d,c),e=a.join("/"))}return getOwn(w.pkgs,e)||e}function i(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===b.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=getOwn(w.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),b.require.undef(e),b.makeRequire(null,{skipMap:!0})([e]),!0}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,i,r){var o,s,l,u,c=null,d=t?t.name:null,h=e,p=!0,f="";return e||(p=!1,e="_@r"+(O+=1)),u=a(e),c=u[0],e=u[1],c&&(c=n(c,d,r),s=getOwn(I,c)),e&&(c?f=i?e:s&&s.normalize?s.normalize(e,function(e){return n(e,d,r)}):-1===e.indexOf("!")?n(e,d,r):e:(f=n(e,d,r),u=a(f),c=u[0],f=u[1],i=!0,o=b.nameToUrl(f))),l=!c||s||i?"":"_unnormalized"+(P+=1),{prefix:c,name:f,parentMap:t,unnormalized:!!l,url:o,originalName:h,isDefine:p,id:(c?c+"!"+f:f)+l}}function s(e){var t=e.id,n=getOwn(E,t);return n||(n=E[t]=new b.Module(e)),n}function l(e,t,n){var i=e.id,r=getOwn(E,i);!hasProp(I,i)||r&&!r.defineEmitComplete?(r=s(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(I[i])}function u(e,t){var n=e.requireModules,i=!1;t?t(e):(each(n,function(t){var n=getOwn(E,t);n&&(n.error=e,n.events.error&&(i=!0,n.emit("error",e)))}),i||req.onError(e))}function c(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(b.defQueueMap[t]=!0),x.push(e)}),globalDefQueue=[])}function d(e){delete E[e],delete C[e]}function h(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,each(e.depMaps,function(i,r){var a=i.id,o=getOwn(E,a);!o||e.depMatched[r]||n[a]||(getOwn(t,a)?(e.defineDep(r,I[a]),e.check()):h(o,t,n))}),n[i]=!0)}function p(){var e,t,n=1e3*w.waitSeconds,a=n&&b.startTime+n<(new Date).getTime(),o=[],s=[],l=!1,c=!0;if(!y){if(y=!0,eachProp(C,function(e){var n=e.map,u=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&a)r(u)?(t=!0,l=!0):(o.push(u),i(u));else if(!e.inited&&e.fetched&&n.isDefine&&(l=!0,!n.prefix))return c=!1}),a&&o.length)return e=makeError("timeout","Load timeout for modules: "+o,null,o),e.contextName=b.contextName,u(e);c&&each(s,function(e){h(e,{},{})}),a&&!t||!l||!isBrowser&&!isWebWorker||S||(S=setTimeout(function(){S=0,p()},50)),y=!1}}function f(e){hasProp(I,e[0])||s(o(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,i){e.detachEvent&&!isOpera?i&&e.detachEvent(i,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,b.onScriptLoad,"load","onreadystatechange"),m(t,b.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(c();x.length;){if(e=x.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}b.defQueueMap={}}var y,_,b,T,S,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},E={},C={},k={},x=[],I={},D={},A={},O=1,P=1;return T={require:function(e){return e.require?e.require:e.require=b.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?I[e.map.id]=e.exports:e.exports=I[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},_=function(e){this.events=getOwn(k,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},_.prototype={init:function(e,t,n,i){i=i||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=i.ignore,i.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,b.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();b.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,b.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,i=this.depExports,r=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{r=b.execCb(n,a,i,r)}catch(t){e=t}else r=b.execCb(n,a,i,r);if(this.map.isDefine&&void 0===r&&(t=this.module,t?r=t.exports:this.usingExports&&(r=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else r=a;if(this.exports=r,this.map.isDefine&&!this.ignore&&(I[n]=r,req.onResourceLoad)){var o=[];each(this.depMaps,function(e){o.push(e.normalizedMap||e)}),req.onResourceLoad(b,this.map,o)}d(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(b.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,i=o(e.prefix);this.depMaps.push(i),l(i,"defined",bind(this,function(i){var r,a,c,h=getOwn(A,this.map.id),p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,m=b.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(i.normalize&&(p=i.normalize(p,function(e){return n(e,f,!0)})||""),a=o(e.prefix+"!"+p,this.map.parentMap,!0),l(a,"defined",bind(this,function(e){this.map.normalizedMap=a,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((c=getOwn(E,a.id))&&(this.depMaps.push(a),this.events.error&&c.on("error",bind(this,function(e){this.emit("error",e)})),c.enable()))):h?(this.map.url=b.nameToUrl(h),void this.load()):(r=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(E,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&d(e.map.id)}),u(e)}),r.fromText=bind(this,function(n,i){var a=e.name,l=o(a),c=useInteractive;i&&(n=i),c&&(useInteractive=!1),s(l),hasProp(w.config,t)&&(w.config[a]=w.config[t]);try{req.exec(n)}catch(e){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}c&&(useInteractive=!0),this.depMaps.push(l),b.completeLoad(a),m([a],r)}),void i.load(e.name,m,r,w))})),b.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){C[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,i,r;if("string"==typeof e){if(e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(T,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,l(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?l(e,"error",bind(this,this.errback)):this.events.error&&l(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,i=E[n],hasProp(T,n)||!i||i.enabled||b.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(E,e.id);t&&!t.enabled&&b.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},b={config:w,contextName:e,registry:E,defined:I,urlFetched:D,defQueue:x,defQueueMap:{},Module:_,makeModuleMap:o,nextTick:req.nextTick,onError:u,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=w.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(A[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=b.makeShimExports(e)),n[t]=e}),w.shim=n),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(w.paths[n]=e.location),w.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(E,function(e,t){e.inited||e.map.unnormalized||(e.map=o(t,null,!0))}),(e.deps||e.callback)&&b.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,r){function a(n,i,l){var c,d,h;return r.enableBuildCallback&&i&&isFunction(i)&&(i.__requireJsBuild=!0),"string"==typeof n?isFunction(i)?u(makeError("requireargs","Invalid require call"),l):t&&hasProp(T,n)?T[n](E[t.id]):req.get?req.get(b,n,t,a):(d=o(n,t,!1,!0),c=d.id,hasProp(I,c)?I[c]:u(makeError("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),b.nextTick(function(){v(),h=s(o(null,t)),h.skipMap=r.skipMap,h.init(n,i,l,{enabled:!0}),p()}),a)}return r=r||{},mixin(a,{isBrowser:isBrowser,toUrl:function(e){var i,r=e.lastIndexOf("."),a=e.split("/")[0],o="."===a||".."===a;return-1!==r&&(!o||r>1)&&(i=e.substring(r,e.length),e=e.substring(0,r)),b.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return hasProp(I,o(e,t,!1,!0).id)},specified:function(e){return e=o(e,t,!1,!0).id,hasProp(I,e)||hasProp(E,e)}}),t||(a.undef=function(e){c();var n=o(e,t,!0),r=getOwn(E,e);r.undefed=!0,i(e),delete I[e],delete D[n.url],delete k[e],eachReverse(x,function(t,n){t[0]===e&&x.splice(n,1)}),delete b.defQueueMap[e],r&&(r.events.defined&&(k[e]=r.events),d(e))}),a},enable:function(e){getOwn(E,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,i,a=getOwn(w.shim,e)||{},o=a.exports;for(c();x.length;){if(n=x.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);f(n)}if(b.defQueueMap={},i=getOwn(E,e),!t&&!hasProp(I,e)&&i&&!i.inited){if(!(!w.enforceDefine||o&&getGlobal(o)))return r(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));f([e,a.deps||[],a.exportsFn])}p()},nameToUrl:function(e,t,n){var i,r,a,o,s,l,u,c=getOwn(w.pkgs,e);if(c&&(e=c),u=getOwn(A,e))return b.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(i=w.paths,r=e.split("/"),a=r.length;a>0;a-=1)if(o=r.slice(0,a).join("/"),l=getOwn(i,o)){isArray(l)&&(l=l[0]),r.splice(0,a,l);break}s=r.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+s}return w.urlArgs&&!/^blob\:/.test(s)?s+w.urlArgs(e,s):s},load:function(e,t){req.load(b,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);b.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!r(t.id)){var n=[];return eachProp(E,function(e,i){0!==i.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(i),!0})}),u(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},b.require=b.makeRequire(),b}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,i){var r,a,o=defContextName;return isArray(e)||"string"==typeof e||(a=e,isArray(t)?(e=t,t=n,n=i):e=[]),a&&a.context&&(o=a.context),r=getOwn(contexts,o),r||(r=contexts[o]=req.s.newContext(o)),a&&r.configure(a),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var i=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return i.type=e.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i},req.load=function(e,t,n){var i,r=e&&e.config||{};if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0||isOpera?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,r.onNodeCreated&&r.onNodeCreated(i,r,t,n),currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(i){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(i=currentlyAddingScript||getInteractiveScript())&&(e||(e=i.getAttribute("data-requiremodule")),r=contexts[i.getAttribute("data-requirecontext")]),r?(r.defQueue.push([e,t,n]),r.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("requirejs",function(){});var Sentry=function(e){function t(e,t){function n(){this.constructor=e}Pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function n(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}function a(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return f(e,Error)}}function o(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function s(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return"undefined"!=typeof Event&&f(e,Event)}function h(e){return"undefined"!=typeof Element&&f(e,Element)}function p(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function f(e,t){try{return e instanceof t}catch(e){return!1}}function m(e,t){try{for(var n=e,i=[],r=0,a=0,o=" > ".length,s=void 0;n&&r++<5&&!("html"===(s=g(n,t))||r>1&&a+i.length*o+s.length>=80);)i.push(s),a+=s.length,n=n.parentNode;return i.reverse().join(" > ")}catch(e){return"<unknown>"}}function g(e,t){var n,i,r,a,o,s,u,c=e,d=[];if(!c||!c.tagName)return"";d.push(c.tagName.toLowerCase());var h=(null===(n=t)||void 0===n?void 0:n.length)?t.filter(function(e){return c.getAttribute(e)}).map(function(e){return[e,c.getAttribute(e)]}):null;if(null===(i=h)||void 0===i?void 0:i.length)h.forEach(function(e){d.push("["+e[0]+'="'+e[1]+'"]')});else if(c.id&&d.push("#"+c.id),(r=c.className)&&l(r))for(a=r.split(/\s+/),u=0;u<a.length;u++)d.push("."+a[u]);var p=["type","name","title","alt"];for(u=0;u<p.length;u++)o=p[u],(s=c.getAttribute(o))&&d.push("["+o+'="'+s+'"]');return d.join("")}function v(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function y(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"..."}function _(e,t){if(!Array.isArray(e))return"";for(var n=[],i=0;i<e.length;i++){var r=e[i];try{n.push(String(r))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function b(e,t){return!!l(e)&&(n=t,"[object RegExp]"===Object.prototype.toString.call(n)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var n}function T(){return v()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:je}function S(){var e=T(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(n[0])+i(n[1])+i(n[2])+i(n[3])+i(n[4])+i(n[5])+i(n[6])+i(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function w(e){if(!e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+i}}function E(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function C(e){var t=T();if(!("console"in t))return e();var n=t.console,i={};["debug","info","warn","error","log","assert"].forEach(function(e){e in t.console&&n[e].__sentry_original__&&(i[e]=n[e],n[e]=n[e].__sentry_original__)});var r=e();return Object.keys(i).forEach(function(e){n[e]=i[e]}),r}function k(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function x(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach(function(n){e.exception.values[0].mechanism[n]=t[n]})}catch(e){}}function I(e){try{return e&&"function"==typeof e&&e.name||Ge}catch(e){return Ge}}function D(e,t,n){if(t in e){var i=e[t],r=n(i);if("function"==typeof r)try{r.prototype=r.prototype||{},Object.defineProperties(r,{__sentry_original__:{enumerable:!1,value:i}})}catch(e){}e[t]=r}}function A(e){if(a(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}if(d(e)){var r=e,o={};o.type=r.type;try{o.target=h(r.target)?m(r.target):Object.prototype.toString.call(r.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=h(r.currentTarget)?m(r.currentTarget):Object.prototype.toString.call(r.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var s in"undefined"!=typeof CustomEvent&&f(e,CustomEvent)&&(o.detail=r.detail),r)Object.prototype.hasOwnProperty.call(r,s)&&(o[s]=r[s]);return o}return e}function O(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function P(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var i=N(e,t);return O(i)>n?P(e,t-1,n):i}function L(e,t){return"domain"===t&&e&&"object"==typeof e&&e.v?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":c(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+I(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e;var n}function M(e,t,n,i){if(void 0===n&&(n=1/0),void 0===i&&(i=new Ye),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=L(e);return u(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var r=L(t,e);if(u(r))return r;var a=A(t),o=Array.isArray(t)?[]:{};if(i.memoize(t))return"[Circular ~]";for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=M(s,a[s],n-1,i));return i.unmemoize(t),o}function N(e,t){try{return JSON.parse(JSON.stringify(e,function(e,n){return M(e,n,t)}))}catch(e){return"**non-serializable**"}}function R(e,t){void 0===t&&(t=40);var n=Object.keys(A(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return y(n[0],t);for(var i=n.length;i>0;i--){var r=n.slice(0,i).join(", ");if(!(r.length>t))return i===n.length?r:y(r,t)}return""}function F(e){var t,i;if(c(e)){var r=e,a={};try{for(var o=n(Object.keys(r)),s=o.next();!s.done;s=o.next()){var l=s.value;void 0!==r[l]&&(a[l]=F(r[l]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}return a}return Array.isArray(e)?e.map(F):e}function j(){if(!("fetch"in T()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function U(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function B(){if(!j())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function H(e){if(!Qe[e])switch(Qe[e]=!0,e){case"console":!function(){"console"in Xe&&["debug","info","warn","error","log","assert"].forEach(function(e){e in Xe.console&&D(Xe.console,e,function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];q("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,Xe.console,n)}})})}();break;case"dom":!function(){if("document"in Xe){var e=q.bind(null,"dom"),t=z(e,!0);Xe.document.addEventListener("click",t,!1),Xe.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(function(t){var n=Xe[t]&&Xe[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(D(n,"addEventListener",function(t){return function(n,i,r){if("click"===n||"keypress"==n)try{var a=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},o=a[n]=a[n]||{refCount:0};if(!o.handler){var s=z(e);o.handler=s,t.call(this,n,s,r)}o.refCount+=1}catch(e){}return t.call(this,n,i,r)}}),D(n,"removeEventListener",function(e){return function(t,n,i){if("click"===t||"keypress"==t)try{var r=this.__sentry_instrumentation_handlers__||{},a=r[t];a&&(a.refCount-=1,a.refCount<=0&&(e.call(this,t,a.handler,i),a.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,i)}}))})}}();break;case"xhr":!function(){if("XMLHttpRequest"in Xe){var e=[],t=[],n=XMLHttpRequest.prototype;D(n,"open",function(n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var a=this,o=i[1];a.__sentry_xhr__={method:l(i[0])?i[0].toUpperCase():i[0],url:i[1]},l(o)&&"POST"===a.__sentry_xhr__.method&&o.match(/sentry_key/)&&(a.__sentry_own_request__=!0);var s=function(){if(4===a.readyState){try{a.__sentry_xhr__&&(a.__sentry_xhr__.status_code=a.status)}catch(e){}try{var n=e.indexOf(a);if(-1!==n){e.splice(n);var r=t.splice(n)[0];a.__sentry_xhr__&&void 0!==r[0]&&(a.__sentry_xhr__.body=r[0])}}catch(e){}q("xhr",{args:i,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:a})}};return"onreadystatechange"in a&&"function"==typeof a.onreadystatechange?D(a,"onreadystatechange",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(),e.apply(a,t)}}):a.addEventListener("readystatechange",s),n.apply(a,i)}}),D(n,"send",function(n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return e.push(this),t.push(i),q("xhr",{args:i,startTimestamp:Date.now(),xhr:this}),n.apply(this,i)}})}}();break;case"fetch":!function(){(function(){if(!j())return!1;var e=T();if(U(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(t=U(i.contentWindow.fetch)),n.head.removeChild(i)}catch(e){ze.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t})()&&D(Xe,"fetch",function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={args:t,fetchData:{method:$(t),url:W(t)},startTimestamp:Date.now()};return q("fetch",Le({},i)),e.apply(Xe,t).then(function(e){return q("fetch",Le(Le({},i),{endTimestamp:Date.now(),response:e})),e},function(e){throw q("fetch",Le(Le({},i),{endTimestamp:Date.now(),error:e})),e})}})}();break;case"history":!function(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t.length>2?t[2]:void 0;if(i){var r=Ve,a=String(i);Ve=a,q("history",{from:r,to:a})}return e.apply(this,t)}}if(t=T(),n=t.chrome,i=n&&n.app&&n.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState,!i&&r){var t,n,i,r,a=Xe.onpopstate;Xe.onpopstate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xe.location.href,i=Ve;if(Ve=n,q("history",{from:i,to:n}),a)try{return a.apply(this,e)}catch(e){}},D(Xe.history,"pushState",e),D(Xe.history,"replaceState",e)}}();break;case"error":Ze=Xe.onerror,Xe.onerror=function(e,t,n,i,r){return q("error",{column:i,error:r,line:n,msg:e,url:t}),!!Ze&&Ze.apply(this,arguments)};break;case"unhandledrejection":et=Xe.onunhandledrejection,Xe.onunhandledrejection=function(e){return q("unhandledrejection",e),!et||et.apply(this,arguments)};break;default:ze.warn("unknown instrumentation type:",e)}}function V(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(Ke[e.type]=Ke[e.type]||[],Ke[e.type].push(e.callback),H(e.type))}function q(e,t){var i,r;if(e&&Ke[e])try{for(var a=n(Ke[e]||[]),o=a.next();!o.done;o=a.next()){var s=o.value;try{s(t)}catch(t){ze.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+I(s)+"\nError: "+t)}}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}}function $(e){return void 0===e&&(e=[]),"Request"in Xe&&f(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function W(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in Xe&&f(e[0],Request)?e[0].url:String(e[0])}function z(e,t){return void 0===t&&(t=!1),function(n){if(n&&$e!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var i="keypress"===n.type?"input":n.type;void 0===qe?(e({event:n,name:i,global:t}),$e=n):function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}($e,n)&&(e({event:n,name:i,global:t}),$e=n),clearTimeout(qe),qe=Xe.setTimeout(function(){qe=void 0},Je)}}}function Y(){var e=T();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function G(e){Y().push(e)}function X(){var e=T();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function K(e){var t=X(),n=Z(t);return ee(t,e),n}function Q(){var e=X();return J(e)&&!Z(e).isOlderThan(ht)||ee(e,new pt),v()?function(e){var t,n,i;try{var r=null===(i=null===(n=null===(t=X().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===i?void 0:i.active;if(!r)return Z(e);if(!J(r)||Z(r).isOlderThan(ht)){var a=Z(e).getStackTop();ee(r,new pt(a.client,ct.clone(a.scope)))}return Z(r)}catch(t){return Z(e)}}(e):Z(e)}function J(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Z(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub?e.__SENTRY__.hub:(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new pt,e.__SENTRY__.hub)}function ee(e,t){
return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}function te(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Q();if(i&&i[e])return i[e].apply(i,r(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function ne(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return te("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function ie(e){te("withScope",e)}function re(e){return e.reduce(function(e,t){return e.every(function(e){return t.name!==e.name})&&e.push(t),e},[])}function ae(e){var t={};return function(e){var t=e.defaultIntegrations&&r(e.defaultIntegrations)||[],n=e.integrations,i=r(re(t));Array.isArray(n)?i=r(i.filter(function(e){return n.every(function(t){return t.name!==e.name})}),re(n)):"function"==typeof n&&(i=n(i),i=Array.isArray(i)?i:[i]);var a=i.map(function(e){return e.name});return-1!==a.indexOf("Debug")&&i.push.apply(i,r(i.splice(a.indexOf("Debug"),1))),i}(e).forEach(function(e){t[e.name]=e,function(e){-1===mt.indexOf(e.name)&&(e.setupOnce(G,Q),mt.push(e.name),ze.log("Integration installed: "+e.name))}(e)}),Object.defineProperty(t,"initialized",{value:!0}),t}function oe(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function se(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=r(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=r(e.sdk.packages||[],t.packages||[]),e):e}function le(e,t){var n=oe(t),i="aggregates"in e?"sessions":"session";return{body:JSON.stringify(Le(Le({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:i})+"\n"+JSON.stringify(e),type:i,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function ue(e,t){var n=oe(t),i=e.type||"event",r="transaction"===i||t.forceEnvelope(),a=e.debug_meta||{},o=a.transactionSampling,s=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(n[i[r]]=e[i[r]])}return n}(a,["transactionSampling"]),l=o||{},u=l.method,c=l.rate;0===Object.keys(s).length?delete e.debug_meta:e.debug_meta=s;var d={body:JSON.stringify(n?se(e,t.metadata.sdk):e),type:i,url:r?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(r){var h=JSON.stringify(Le(Le({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:i,sample_rates:[{id:u,rate:c}]})+"\n"+d.body;d.body=h}return d}function ce(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:At.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,i=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,a=n.split("\n"),o=[],s=0;s<a.length;s+=2){var l=null;(t=i.exec(a[s]))?l={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=r.exec(a[s]))&&(l={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),l&&(!l.func&&l.line&&(l.func=Et),o.push(l))}return o.length?{message:he(e),name:e.name,stack:o}:null}(e))return de(t,n)}catch(e){}try{if(t=function(e){var t,n;if(!e||!e.stack)return null;for(var r,a,o,s=[],l=e.stack.split("\n"),u=0;u<l.length;++u){if(a=Ct.exec(l[u])){var c=a[2]&&0===a[2].indexOf("native");a[2]&&0===a[2].indexOf("eval")&&(r=Dt.exec(a[2]))&&(a[2]=r[1],a[3]=r[2],a[4]=r[3]);var d=a[2]&&0===a[2].indexOf("address at ")?a[2].substr("address at ".length):a[2],h=a[1]||Et;t=i(Ot(h,d),2),h=t[0],d=t[1],o={url:d,func:h,args:c?[a[2]]:[],line:a[3]?+a[3]:null,column:a[4]?+a[4]:null}}else if(a=xt.exec(l[u]))o={url:a[2],func:a[1]||Et,args:[],line:+a[3],column:a[4]?+a[4]:null};else{if(!(a=kt.exec(l[u])))continue;a[3]&&a[3].indexOf(" > eval")>-1&&(r=It.exec(a[3]))?(a[1]=a[1]||"eval",a[3]=r[1],a[4]=r[2],a[5]=""):0!==u||a[5]||void 0===e.columnNumber||(s[0].column=e.columnNumber+1);var d=a[3],h=a[1]||Et;n=i(Ot(h,d),2),h=n[0],d=n[1],o={url:d,func:h,args:a[2]?a[2].split(","):[],line:a[4]?+a[4]:null,column:a[5]?+a[5]:null}}!o.func&&o.line&&(o.func=Et),s.push(o)}return s.length?{message:he(e),name:e.name,stack:s}:null}(e))return de(t,n)}catch(e){}return{message:he(e),name:e&&e.name,stack:[],failed:!0}}function de(e,t){try{return Le(Le({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function he(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function pe(e){var t=me(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function fe(e){return{exception:{values:[pe(e)]}}}function me(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",i=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==i.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,Pt).map(function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}}).reverse()}function ge(t,n,i){var r=ye(n,i&&i.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return x(r,{handled:!0,type:"generic"}),r.level=e.Severity.Error,i&&i.event_id&&(r.event_id=i.event_id),it.resolve(r)}function ve(t,n,i,r){void 0===i&&(i=e.Severity.Info);var a=_e(n,r&&r.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return a.level=i,r&&r.event_id&&(a.event_id=r.event_id),it.resolve(a)}function ye(e,t,n){var i,r;if(void 0===n&&(n={}),o(e)&&e.error)return i=fe(ce(e=e.error));if(s(e)||(r=e,"[object DOMException]"===Object.prototype.toString.call(r))){var l=e,u=l.name||(s(l)?"DOMError":"DOMException"),h=l.message?u+": "+l.message:u;return k(i=_e(h,t,n),h),"code"in l&&(i.tags=Le(Le({},i.tags),{"DOMException.code":""+l.code})),i}return a(e)?i=fe(ce(e)):c(e)||d(e)?(x(i=function(e,t,n){var i={exception:{values:[{type:d(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+R(e)}]},extra:{__serialized__:P(e)}};if(t){var r=me(ce(t).stack);i.stacktrace={frames:r}}return i}(e,t,n.rejection),{synthetic:!0}),i):(k(i=_e(e,t,n),""+e,void 0),x(i,{synthetic:!0}),i)}function _e(e,t,n){void 0===n&&(n={});var i={message:e};if(n.attachStacktrace&&t){var r=me(ce(t).stack);i.stacktrace={frames:r}}return i}function be(){var e,t;if(nt)return nt;if(U(Lt.fetch))return nt=Lt.fetch.bind(Lt);var n=Lt.document,i=Lt.fetch;if("function"==typeof(null===(e=n)||void 0===e?void 0:e.createElement))try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),(null===(t=r.contentWindow)||void 0===t?void 0:t.fetch)&&(i=r.contentWindow.fetch),n.head.removeChild(r)}catch(e){ze.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return nt=i.bind(Lt)}function Te(e,t){if("[object Navigator]"===Object.prototype.toString.call(Lt&&Lt.navigator)&&"function"==typeof Lt.navigator.sendBeacon)return Lt.navigator.sendBeacon.bind(Lt.navigator)(e,t);if(j()){be()(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}).then(null,function(e){console.error(e)})}}function Se(){return Vt>0}function we(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var i=function(){var i=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var r=i.map(function(e){return we(e,t)});return e.handleEvent?e.handleEvent.apply(this,r):e.apply(this,r)}catch(e){throw Vt+=1,setTimeout(function(){Vt-=1}),ie(function(n){n.addEventProcessor(function(e){var n=Le({},e);return t.mechanism&&(k(n,void 0,void 0),x(n,t.mechanism)),n.extra=Le(Le({},n.extra),{arguments:i}),n}),ne(e)}),e}};try{for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}catch(e){}e.prototype=e.prototype||{},i.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:i}),Object.defineProperties(i,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(i,"name").configurable&&Object.defineProperty(i,"name",{get:function(){return e.name}})}catch(e){}return i}function Ee(e){if(void 0===e&&(e={}),Ht.document)if(e.eventId)if(e.dsn){var t=Ht.document.createElement("script");t.async=!0,t.src=new ft(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad);var n=Ht.document.head||Ht.document.body;n&&n.appendChild(t)}else ze.error("Missing dsn option in showReportDialog call");else ze.error("Missing eventId option in showReportDialog call")}var Ce,ke,xe,Ie,De,Ae,Oe,Pe=function(e,t){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},Le=function(){return(Le=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};!function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Debug=2]="Debug",e[e.Verbose=3]="Verbose"}(Ce||(Ce={})),function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(ke||(ke={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(xe||(xe={})),(Ie=e.Severity||(e.Severity={})).Fatal="fatal",Ie.Error="error",Ie.Warning="warning",Ie.Log="log",Ie.Info="info",Ie.Debug="debug",Ie.Critical="critical",function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(e.Severity||(e.Severity={})),(De=e.Status||(e.Status={})).Unknown="unknown",De.Skipped="skipped",De.Success="success",De.RateLimit="rate_limit",De.Invalid="invalid",De.Failed="failed",function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(e.Status||(e.Status={})),function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"}(Ae||(Ae={})),function(e){e.BeforeSend="before_send",e.EventProcessor="event_processor",e.NetworkError="network_error",e.QueueOverflow="queue_overflow",e.RateLimitBackoff="ratelimit_backoff",e.SampleRate="sample_rate"}(Oe||(Oe={}));var Me=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e}),Ne=function(e){function n(t){var n=this.constructor,i=e.call(this,t)||this;return i.message=t,i.name=n.prototype.constructor.name,Me(i,n.prototype),i}return t(n,e),n}(Error),Re=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,Fe=function(){function e(e){"string"==typeof e?this.t(e):this.i(e),this.o()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,i=t.path,r=t.pass,a=t.port,o=t.projectId;return t.protocol+"://"+t.publicKey+(e&&r?":"+r:"")+"@"+n+(a?":"+a:"")+"/"+(i?i+"/":i)+o},e.prototype.t=function(e){var t=Re.exec(e);if(!t)throw new Ne("Invalid Dsn");var n=i(t.slice(1),6),r=n[0],a=n[1],o=n[2],s=void 0===o?"":o,l=n[3],u=n[4],c=void 0===u?"":u,d="",h=n[5],p=h.split("/");if(p.length>1&&(d=p.slice(0,-1).join("/"),h=p.pop()),h){var f=h.match(/^\d+/);f&&(h=f[0])}this.i({host:l,pass:s,path:d,projectId:h,port:c,protocol:r,publicKey:a})},e.prototype.i=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype.o=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach(function(t){if(!e[t])throw new Ne("Invalid Dsn: "+t+" missing")}),!this.projectId.match(/^\d+$/))throw new Ne("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new Ne("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new Ne("Invalid Dsn: Invalid port "+this.port)},e}(),je={},Ue=T(),Be="Sentry Logger ",He=function(){function e(){this.u=!1}return e.prototype.disable=function(){this.u=!1},e.prototype.enable=function(){this.u=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.u&&C(function(){Ue.console.log(Be+"[Log]: "+e.join(" "))})},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.u&&C(function(){Ue.console.warn(Be+"[Warn]: "+e.join(" "))})},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.u&&C(function(){Ue.console.error(Be+"[Error]: "+e.join(" "))})},e}();Ue.__SENTRY__=Ue.__SENTRY__||{};var Ve,qe,$e,We,ze=Ue.__SENTRY__.logger||(Ue.__SENTRY__.logger=new He),Ye=function(){function e(){this.s="function"==typeof WeakSet,this.h=this.s?new WeakSet:[]}return e.prototype.memoize=function(e){if(this.s)return!!this.h.has(e)||(this.h.add(e),!1);for(var t=0;t<this.h.length;t++)if(this.h[t]===e)return!0;return this.h.push(e),!1},e.prototype.unmemoize=function(e){if(this.s)this.h.delete(e);else for(var t=0;t<this.h.length;t++)if(this.h[t]===e){this.h.splice(t,1);break}},e}(),Ge="<anonymous>",Xe=T(),Ke={},Qe={},Je=1e3,Ze=null,et=null;!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(We||(We={}));var tt,nt,it=function(){function e(e){var t=this;this.l=We.PENDING,this.p=[],this.m=function(e){t.g(We.RESOLVED,e)},this.j=function(e){t.g(We.REJECTED,e)},this.g=function(e,n){t.l===We.PENDING&&(p(n)?n.then(t.m,t.j):(t.l=e,t._=n,t.k()))},this.S=function(e){t.p=t.p.concat(e),t.k()},this.k=function(){if(t.l!==We.PENDING){var e=t.p.slice();t.p=[],e.forEach(function(e){e.done||(t.l===We.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._),t.l===We.REJECTED&&e.onrejected&&e.onrejected(t._),e.done=!0)})}};try{e(this.m,this.j)}catch(e){this.j(e)}}return e.resolve=function(t){return new e(function(e){e(t)})},e.reject=function(t){return new e(function(e,n){n(t)})},e.all=function(t){return new e(function(n,i){if(Array.isArray(t))if(0!==t.length){var r=t.length,a=[];t.forEach(function(t,o){e.resolve(t).then(function(e){a[o]=e,0==(r-=1)&&n(a)}).then(null,i)})}else n([]);else i(new TypeError("Promise.all requires an array as input."))})},e.prototype.then=function(t,n){var i=this;return new e(function(e,r){i.S({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void r(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void r(e)}else r(t)}})})},e.prototype.catch=function(e){return this.then(function(e){return e},e)},e.prototype.finally=function(t){var n=this;return new e(function(e,i){var r,a;return n.then(function(e){a=!1,r=e,t&&t()},function(e){a=!0,r=e,t&&t()}).then(function(){a?i(r):e(r)})})},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),rt=function(){function e(e){this.O=e,this.D=[]}return e.prototype.isReady=function(){return void 0===this.O||this.length()<this.O},e.prototype.add=function(e){var t=this;if(!this.isReady())return it.reject(new Ne("Not adding Promise due to buffer limit reached."));var n=e();return-1===this.D.indexOf(n)&&this.D.push(n),n.then(function(){return t.remove(n)}).then(null,function(){return t.remove(n).then(null,function(){})}),n},e.prototype.remove=function(e){return this.D.splice(this.D.indexOf(e),1)[0]},e.prototype.length=function(){return this.D.length},e.prototype.drain=function(e){var t=this;return new it(function(n){var i=setTimeout(function(){e&&e>0&&n(!1)},e);it.all(t.D).then(function(){clearTimeout(i),n(!0)}).then(null,function(){n(!0)})})},e}(),at={nowSeconds:function(){return Date.now()/1e3}},ot=v()?function(){try{return(e=module,t="perf_hooks",e.require(t)).performance}catch(e){return}var e,t}():function(){var e=T().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),st=void 0===ot?at:{nowSeconds:function(){return(ot.timeOrigin+ot.now())/1e3}},lt=at.nowSeconds.bind(at),ut=st.nowSeconds.bind(st),ct=(function(){var e=T().performance;if(e&&e.now){var t=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,r=i<36e5,a=e.timing&&e.timing.navigationStart,o="number"==typeof a?Math.abs(a+t-n):36e5;(r||o<36e5)&&i<=o&&e.timeOrigin}}(),function(){function e(){this.T=!1,this.N=[],this.R=[],this.I=[],this.C={},this.M={},this.A={},this.q={}}return e.clone=function(t){var n=new e;return t&&(n.I=r(t.I),n.M=Le({},t.M),n.A=Le({},t.A),n.q=Le({},t.q),n.C=t.C,n.L=t.L,n.U=t.U,n.H=t.H,n.F=t.F,n.P=t.P,n.R=r(t.R),n.J=t.J),n},e.prototype.addScopeListener=function(e){this.N.push(e)},e.prototype.addEventProcessor=function(e){return this.R.push(e),this},e.prototype.setUser=function(e){return this.C=e||{},this.H&&this.H.update({user:e}),this.X(),this},e.prototype.getUser=function(){return this.C},e.prototype.getRequestSession=function(){return this.J},e.prototype.setRequestSession=function(e){return this.J=e,this},e.prototype.setTags=function(e){return this.M=Le(Le({},this.M),e),this.X(),this},e.prototype.setTag=function(e,t){var n;return this.M=Le(Le({},this.M),((n={})[e]=t,n)),this.X(),this},e.prototype.setExtras=function(e){return this.A=Le(Le({},this.A),e),this.X(),this},e.prototype.setExtra=function(e,t){var n;return this.A=Le(Le({},this.A),((n={})[e]=t,n)),this.X(),this},e.prototype.setFingerprint=function(e){return this.P=e,this.X(),this},e.prototype.setLevel=function(e){return this.L=e,this.X(),this},e.prototype.setTransactionName=function(e){return this.F=e,this.X(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this.q[e]:this.q=Le(Le({},this.q),((n={})[e]=t,n)),this.X(),this},e.prototype.setSpan=function(e){return this.U=e,this.X(),this},e.prototype.getSpan=function(){return this.U},e.prototype.getTransaction=function(){var e,t,n,i,r=this.getSpan();return(null===(e=r)||void 0===e?void 0:e.transaction)?null===(t=r)||void 0===t?void 0:t.transaction:(null===(i=null===(n=r)||void 0===n?void 0:n.spanRecorder)||void 0===i?void 0:i.spans[0])?r.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this.H=e:delete this.H,this.X(),this},e.prototype.getSession=function(){return this.H},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this.M=Le(Le({},this.M),t.M),this.A=Le(Le({},this.A),t.A),this.q=Le(Le({},this.q),t.q),t.C&&Object.keys(t.C).length&&(this.C=t.C),t.L&&(this.L=t.L),t.P&&(this.P=t.P),t.J&&(this.J=t.J)):c(t)&&(t=t,this.M=Le(Le({},this.M),t.tags),this.A=Le(Le({},this.A),t.extra),this.q=Le(Le({},this.q),t.contexts),t.user&&(this.C=t.user),t.level&&(this.L=t.level),t.fingerprint&&(this.P=t.fingerprint),t.requestSession&&(this.J=t.requestSession)),this},e.prototype.clear=function(){return this.I=[],this.M={},this.A={},this.C={},this.q={},this.L=void 0,this.F=void 0,this.P=void 0,this.J=void 0,this.U=void 0,this.H=void 0,this.X(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var i=Le({timestamp:lt()},e);return this.I=r(this.I,[i]).slice(-n),this.X(),this},e.prototype.clearBreadcrumbs=function(){return this.I=[],this.X(),this},e.prototype.applyToEvent=function(e,t){var n;if(this.A&&Object.keys(this.A).length&&(e.extra=Le(Le({},this.A),e.extra)),this.M&&Object.keys(this.M).length&&(e.tags=Le(Le({},this.M),e.tags)),this.C&&Object.keys(this.C).length&&(e.user=Le(Le({},this.C),e.user)),this.q&&Object.keys(this.q).length&&(e.contexts=Le(Le({},this.q),e.contexts)),this.L&&(e.level=this.L),this.F&&(e.transaction=this.F),this.U){e.contexts=Le({trace:this.U.getTraceContext()},e.contexts);var i=null===(n=this.U.transaction)||void 0===n?void 0:n.name;i&&(e.tags=Le({transaction:i},e.tags))}return this.B(e),e.breadcrumbs=r(e.breadcrumbs||[],this.I),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this.W(r(Y(),this.R),e,t)},e.prototype.W=function(e,t,n,i){var r=this;return void 0===i&&(i=0),new it(function(a,o){var s=e[i];if(null===t||"function"!=typeof s)a(t);else{var l=s(Le({},t),n);p(l)?l.then(function(t){return r.W(e,t,n,i+1).then(a)}).then(null,o):r.W(e,l,n,i+1).then(a).then(null,o)}})},e.prototype.X=function(){var e=this;this.T||(this.T=!0,this.N.forEach(function(t){t(e)}),this.T=!1)},e.prototype.B=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this.P&&(e.fingerprint=e.fingerprint.concat(this.P)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}()),dt=function(){function e(e){this.errors=0,this.sid=S(),this.duration=0,this.status=ke.Ok,this.init=!0,this.ignoreDuration=!1;var t=ut();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||ut(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:S()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===ke.Ok?this.update({status:ke.Exited}):this.update()},e.prototype.toJSON=function(){return F({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:F({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),ht=4,pt=function(){function e(e,t,n){void 0===t&&(t=new ct),void 0===n&&(n=ht),this.$=n,this.G=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this.$<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=ct.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1||!this.getStack().pop())},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this.G},e.prototype.getStackTop=function(){return this.G[this.G.length-1]},e.prototype.captureException=function(e,t){var n=this.K=S(),i=t;if(!t){var r=void 0;try{throw new Error("Sentry syntheticException")}catch(e){r=e}i={originalException:e,syntheticException:r}}return this.V("captureException",e,Le(Le({},i),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var i=this.K=S(),r=n;if(!n){var a=void 0;try{throw new Error(e)}catch(e){a=e}r={originalException:e,syntheticException:a}}return this.V("captureMessage",e,t,Le(Le({},r),{event_id:i})),i},e.prototype.captureEvent=function(e,t){var n=S();return"transaction"!==e.type&&(this.K=n),this.V("captureEvent",e,Le(Le({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this.K},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),i=n.scope,r=n.client;if(i&&r){var a=r.getOptions&&r.getOptions()||{},o=a.beforeBreadcrumb,s=void 0===o?null:o,l=a.maxBreadcrumbs,u=void 0===l?100:l;if(!(u<=0)){var c=lt(),d=Le({timestamp:c},e),h=s?C(function(){return s(d,t)}):d;null!==h&&i.addBreadcrumb(h,u)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,i=t.client;n&&i&&e(n)},e.prototype.run=function(e){var t=K(this);try{e(this)}finally{K(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return ze.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this.Y("startSpan",e)},e.prototype.startTransaction=function(e,t){return this.Y("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this.Y("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this.Z()},e.prototype.endSession=function(){var e,t,n,i,r;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this.Z(),null===(r=null===(i=this.getStackTop())||void 0===i?void 0:i.scope)||void 0===r||r.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,i=t.client,r=i&&i.getOptions()||{},a=r.release,o=r.environment,s=(T().navigator||{}).userAgent,l=new dt(Le(Le(Le({release:a,environment:o},n&&{user:n.getUser()}),s&&{userAgent:s}),e));if(n){var u=n.getSession&&n.getSession();u&&u.status===ke.Ok&&u.update({status:ke.Exited}),this.endSession(),n.setSession(l)}return l},e.prototype.Z=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var i=t.getSession&&t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}},e.prototype.V=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this.getStackTop(),o=a.scope,s=a.client;s&&s[e]&&(t=s)[e].apply(t,r(n,[o]))},e.prototype.Y=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=X().__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);ze.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}(),ft=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this.tt=new Fe(e),this.metadata=t,this.nt=n}return e.prototype.getDsn=function(){return this.tt},e.prototype.forceEnvelope=function(){return!!this.nt},e.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this.rt("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this.it()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this.nt:this.et()+"?"+this.it()},e.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),i=["Sentry sentry_version=7"];return i.push("sentry_client="+e+"/"+t),i.push("sentry_key="+n.publicKey),n.pass&&i.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":i.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",i=[];for(var r in i.push("dsn="+t.toString()),e)if("dsn"!==r)if("user"===r){if(!e.user)continue;e.user.name&&i.push("name="+encodeURIComponent(e.user.name)),e.user.email&&i.push("email="+encodeURIComponent(e.user.email))}else i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.length?n+"?"+i.join("&"):n},e.prototype.et=function(){return this.rt("envelope")},e.prototype.rt=function(e){return this.nt?this.nt:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},e.prototype.it=function(){var e,t={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return e=t,Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},e}(),mt=[],gt=function(){function e(e,t){this.ot={},this.ut=0,this.st=new e(t),this.ct=t,t.dsn&&(this.at=new Fe(t.dsn))}return e.prototype.captureException=function(e,t,n){var i=this,r=t&&t.event_id;return this.ft(this.ht().eventFromException(e,t).then(function(e){return i.vt(e,t,n)}).then(function(e){r=e})),r},e.prototype.captureMessage=function(e,t,n,i){var r=this,a=n&&n.event_id,o=u(e)?this.ht().eventFromMessage(String(e),t,n):this.ht().eventFromException(e,n);return this.ft(o.then(function(e){return r.vt(e,n,i)}).then(function(e){a=e})),a},e.prototype.captureEvent=function(e,t,n){var i=t&&t.event_id;return this.ft(this.vt(e,t,n).then(function(e){i=e})),i},e.prototype.captureSession=function(e){this.lt()?"string"!=typeof e.release?ze.warn("Discarded session because of missing or non-string release"):(this.dt(e),e.update({init:!1})):ze.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this.at},e.prototype.getOptions=function(){return this.ct},e.prototype.getTransport=function(){return this.ht().getTransport()},e.prototype.flush=function(e){var t=this;return this.pt(e).then(function(n){return t.getTransport().close(e).then(function(e){return n&&e})})},e.prototype.close=function(e){var t=this;return this.flush(e).then(function(e){return t.getOptions().enabled=!1,e})},e.prototype.setupIntegrations=function(){this.lt()&&!this.ot.initialized&&(this.ot=ae(this.ct))},e.prototype.getIntegration=function(e){try{return this.ot[e.id]||null}catch(t){return ze.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype.yt=function(e,t){var i,r,a=!1,o=!1,s=t.exception&&t.exception.values;if(s){o=!0;try{for(var l=n(s),u=l.next();!u.done;u=l.next()){var c=u.value.mechanism;if(c&&!1===c.handled){a=!0;break}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}}var d=e.status===ke.Ok;(d&&0===e.errors||d&&a)&&(e.update(Le(Le({},a&&{status:ke.Crashed}),{errors:e.errors||Number(o||a)})),this.captureSession(e))},e.prototype.dt=function(e){this.ht().sendSession(e)},e.prototype.pt=function(e){var t=this;return new it(function(n){var i=0,r=setInterval(function(){0==t.ut?(clearInterval(r),n(!0)):(i+=1,e&&i>=e&&(clearInterval(r),n(!1)))},1)})},e.prototype.ht=function(){return this.st},e.prototype.lt=function(){return!1!==this.getOptions().enabled&&void 0!==this.at},e.prototype.bt=function(e,t,n){var i=this,r=this.getOptions().normalizeDepth,a=void 0===r?3:r,o=Le(Le({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:S()),timestamp:e.timestamp||lt()});this.wt(o),this.gt(o);var s=t;n&&n.captureContext&&(s=ct.clone(s).update(n.captureContext));var l=it.resolve(o);return s&&(l=s.applyToEvent(o,n)),l.then(function(e){return"number"==typeof a&&a>0?i.Et(e,a):e})},e.prototype.Et=function(e,t){if(!e)return null;var n=Le(Le(Le(Le(Le({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(function(e){return Le(Le({},e),e.data&&{data:N(e.data,t)})})
}),e.user&&{user:N(e.user,t)}),e.contexts&&{contexts:N(e.contexts,t)}),e.extra&&{extra:N(e.extra,t)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var i=this.getOptions().xt;return(void 0===i?{}:i).ensureNoCircularStructures?N(n):n},e.prototype.wt=function(e){var t=this.getOptions(),n=t.environment,i=t.release,r=t.dist,a=t.maxValueLength,o=void 0===a?250:a;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==i&&(e.release=i),void 0===e.dist&&void 0!==r&&(e.dist=r),e.message&&(e.message=y(e.message,o));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=y(s.value,o));var l=e.request;l&&l.url&&(l.url=y(l.url,o))},e.prototype.gt=function(e){var t=Object.keys(this.ot);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=r(e.sdk.integrations||[],t))},e.prototype.jt=function(e){this.ht().sendEvent(e)},e.prototype.vt=function(e,t,n){return this._t(e,t,n).then(function(e){return e.event_id},function(e){ze.error(e)})},e.prototype._t=function(e,t,n){var i,r,a=this,o=this.getOptions(),s=o.beforeSend,l=o.sampleRate,u=this.getTransport();if(!this.lt())return it.reject(new Ne("SDK not enabled, will not capture event."));var c="transaction"===e.type;return!c&&"number"==typeof l&&Math.random()>l?(null===(r=(i=u).recordLostEvent)||void 0===r||r.call(i,Oe.SampleRate,"event"),it.reject(new Ne("Discarding event because it's not included in the random sample (sampling rate = "+l+")"))):this.bt(e,n,t).then(function(n){var i,r;if(null===n)throw null===(r=(i=u).recordLostEvent)||void 0===r||r.call(i,Oe.EventProcessor,e.type||"event"),new Ne("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||c||!s)return n;var o=s(n,t);return a.kt(o)}).then(function(t){var i,r;if(null===t)throw null===(r=(i=u).recordLostEvent)||void 0===r||r.call(i,Oe.BeforeSend,e.type||"event"),new Ne("`beforeSend` returned `null`, will not send event.");var o=n&&n.getSession&&n.getSession();return!c&&o&&a.yt(o,t),a.jt(t),t}).then(null,function(e){if(e instanceof Ne)throw e;throw a.captureException(e,{data:{__sentry__:!0},originalException:e}),new Ne("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)})},e.prototype.ft=function(e){var t=this;this.ut+=1,e.then(function(e){return t.ut-=1,e},function(e){return t.ut-=1,e})},e.prototype.kt=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(p(e))return e.then(function(e){if(!c(e)&&null!==e)throw new Ne(t);return e},function(e){throw new Ne("beforeSend rejected with "+e)});if(!c(e)&&null!==e)throw new Ne(t);return e},e}(),vt=function(){function t(){}return t.prototype.sendEvent=function(t){return it.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:e.Status.Skipped})},t.prototype.close=function(e){return it.resolve(!0)},t}(),yt=function(){function e(e){this.ct=e,this.ct.dsn||ze.warn("No DSN provided, backend will not do anything."),this.St=this.Ot()}return e.prototype.eventFromException=function(e,t){throw new Ne("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new Ne("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this.St.sendEvent(e).then(null,function(e){ze.error("Error while sending event: "+e)})},e.prototype.sendSession=function(e){this.St.sendSession?this.St.sendSession(e).then(null,function(e){ze.error("Error while sending session: "+e)}):ze.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this.St},e.prototype.Ot=function(){return new vt},e}(),_t="6.13.3",bt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){tt=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return tt.apply(n,e)}},e.id="FunctionToString",e}(),Tt=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],St=function(){function e(t){void 0===t&&(t={}),this.ct=t,this.name=e.id}return e.prototype.setupOnce=function(){G(function(t){var n=Q();if(!n)return t;var i=n.getIntegration(e);if(i){var r=n.getClient(),a=r?r.getOptions():{},o="function"==typeof i._mergeOptions?i._mergeOptions(a):{};return"function"!=typeof i.Dt?t:i.Dt(t,o)?null:t}return t})},e.prototype.Dt=function(e,t){return this.Tt(e,t)?(ze.warn("Event dropped due to being internal Sentry Error.\nEvent: "+E(e)),!0):this.Nt(e,t)?(ze.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+E(e)),!0):this.Rt(e,t)?(ze.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+E(e)+".\nUrl: "+this.It(e)),!0):!this.Ct(e,t)&&(ze.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+E(e)+".\nUrl: "+this.It(e)),!0)},e.prototype.Tt=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype.Nt=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this.Mt(e).some(function(e){return t.ignoreErrors.some(function(t){return b(e,t)})})},e.prototype.Rt=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this.It(e);return!!n&&t.denyUrls.some(function(e){return b(n,e)})},e.prototype.Ct=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this.It(e);return!n||t.allowUrls.some(function(e){return b(n,e)})},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:r(this.ct.whitelistUrls||[],this.ct.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:r(this.ct.blacklistUrls||[],this.ct.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:r(this.ct.ignoreErrors||[],e.ignoreErrors||[],Tt),ignoreInternal:void 0===this.ct.ignoreInternal||this.ct.ignoreInternal}},e.prototype.Mt=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,i=void 0===n?"":n,r=t.value,a=void 0===r?"":r;return[""+a,i+": "+a]}catch(t){return ze.error("Cannot extract message for event "+E(e)),[]}return[]},e.prototype.At=function(e){var t,n;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--){var r=e[i];if("<anonymous>"!==(null===(t=r)||void 0===t?void 0:t.filename)&&"[native code]"!==(null===(n=r)||void 0===n?void 0:n.filename))return r.filename||null}return null},e.prototype.It=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this.At(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this.At(n)}return null}catch(t){return ze.error("Cannot extract url for event "+E(e)),null}},e.id="InboundFilters",e}(),wt=Object.freeze({__proto__:null,FunctionToString:bt,InboundFilters:St}),Et="?",Ct=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,kt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. \/=]+)(?::(\d+))?(?::(\d+))?\s*$/i,xt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,It=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Dt=/\((\S*)(?::(\d+))(?::(\d+))\)/,At=/Minified React error #\d+;/i,Ot=function(e,t){var n=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return n||i?[-1!==e.indexOf("@")?e.split("@")[0]:Et,n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},Pt=50,Lt=T(),Mt={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},Nt=T(),Rt=function(){function t(e){var t=this;this.options=e,this.D=new rt(30),this.qt={},this.Lt={},this.Ut=new ft(e.dsn,e.Ht,e.tunnel),this.url=this.Ut.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&Nt.document&&Nt.document.addEventListener("visibilitychange",function(){"hidden"===Nt.document.visibilityState&&t.Ft()})}return t.prototype.sendEvent=function(e){throw new Ne("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(e){return this.D.drain(e)},t.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var i=Mt[t]+":"+e;ze.log("Adding outcome: "+i),this.Lt[i]=(null!=(n=this.Lt[i])?n:0)+1}},t.prototype.Ft=function(){if(this.options.sendClientReports){var e=this.Lt;if(this.Lt={},Object.keys(e).length){ze.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=this.Ut.getEnvelopeEndpointWithUrlEncodedAuth(),n=JSON.stringify({})+"\n"+JSON.stringify({type:"client_report"})+"\n"+JSON.stringify({timestamp:lt(),discarded_events:Object.keys(e).map(function(t){var n=i(t.split(":"),2),r=n[0];return{reason:n[1],category:r,quantity:e[t]}})});try{Te(t,n)}catch(e){ze.error(e)}}else ze.log("No outcomes to flush")}},t.prototype.Pt=function(t){var n=t.requestType,i=t.response,r=t.headers,a=t.resolve,o=t.reject,s=e.Status.fromHttpCode(i.status);this.Jt(r)&&ze.warn("Too many "+n+" requests, backing off until: "+this.Xt(n)),s!==e.Status.Success?o(i):a({status:s})},t.prototype.Xt=function(e){var t=Mt[e];return this.qt[t]||this.qt.all},t.prototype.Bt=function(e){return this.Xt(e)>new Date(Date.now())},t.prototype.Jt=function(e){var t,i,r,a,o=Date.now(),s=e["x-sentry-rate-limits"],l=e["retry-after"];if(s){try{for(var u=n(s.trim().split(",")),c=u.next();!c.done;c=u.next()){var d=c.value.split(":",2),h=parseInt(d[0],10),p=1e3*(isNaN(h)?60:h);try{for(var f=(r=void 0,n(d[1].split(";"))),m=f.next();!m.done;m=f.next()){var g=m.value;this.qt[g||"all"]=new Date(o+p)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}return!0}return!!l&&(this.qt.all=new Date(o+function(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var i=Date.parse(""+t);return isNaN(i)?6e4:i-e}(o,l)),!0)},t}(),Ft=function(e){function n(t,n){void 0===n&&(n=be());var i=e.call(this,t)||this;return i.Wt=n,i}return t(n,e),n.prototype.sendEvent=function(e){return this.$t(ue(e,this.Ut),e)},n.prototype.sendSession=function(e){return this.$t(le(e,this.Ut),e)},n.prototype.$t=function(e,t){var n=this;if(this.Bt(e.type))return this.recordLostEvent(Oe.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this.Xt(e.type)+" due to too many requests.",status:429});var i={body:e.body,method:"POST",referrerPolicy:B()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(i,this.options.fetchParameters),void 0!==this.options.headers&&(i.headers=this.options.headers),this.D.add(function(){return new it(function(t,r){n.Wt(e.url,i).then(function(i){var a={"x-sentry-rate-limits":i.headers.get("X-Sentry-Rate-Limits"),"retry-after":i.headers.get("Retry-After")};n.Pt({requestType:e.type,response:i,headers:a,resolve:t,reject:r})}).catch(r)})}).then(void 0,function(t){throw t instanceof Ne?n.recordLostEvent(Oe.QueueOverflow,e.type):n.recordLostEvent(Oe.NetworkError,e.type),t})},n}(Rt),jt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.sendEvent=function(e){return this.$t(ue(e,this.Ut),e)},n.prototype.sendSession=function(e){return this.$t(le(e,this.Ut),e)},n.prototype.$t=function(e,t){var n=this;return this.Bt(e.type)?(this.recordLostEvent(Oe.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this.Xt(e.type)+" due to too many requests.",status:429})):this.D.add(function(){return new it(function(t,i){var r=new XMLHttpRequest;for(var a in r.onreadystatechange=function(){if(4===r.readyState){var a={"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")};n.Pt({requestType:e.type,response:r,headers:a,resolve:t,reject:i})}},r.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(a)&&r.setRequestHeader(a,n.options.headers[a]);r.send(e.body)})}).then(void 0,function(t){throw t instanceof Ne?n.recordLostEvent(Oe.QueueOverflow,e.type):n.recordLostEvent(Oe.NetworkError,e.type),t})},n}(Rt),Ut=Object.freeze({__proto__:null,BaseTransport:Rt,FetchTransport:Ft,XHRTransport:jt}),Bt=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return t(i,n),i.prototype.eventFromException=function(e,t){return ge(this.ct,e,t)},i.prototype.eventFromMessage=function(t,n,i){return void 0===n&&(n=e.Severity.Info),ve(this.ct,t,n,i)},i.prototype.Ot=function(){if(!this.ct.dsn)return n.prototype.Ot.call(this);var e=Le(Le({},this.ct.transportOptions),{dsn:this.ct.dsn,tunnel:this.ct.tunnel,sendClientReports:this.ct.sendClientReports,Ht:this.ct.Ht});return this.ct.transport?new this.ct.transport(e):j()?new Ft(e):new jt(e)},i}(yt),Ht=T(),Vt=0,qt=function(){function t(e){this.name=t.id,this.Gt=!1,this.Kt=!1,this.ct=Le({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this.ct.onerror&&(ze.log("Global Handler attached: onerror"),this.zt()),this.ct.onunhandledrejection&&(ze.log("Global Handler attached: onunhandledrejection"),this.Vt())},t.prototype.zt=function(){var e=this;this.Gt||(V({callback:function(n){var i=n.error,r=Q(),a=r.getIntegration(t),o=i&&!0===i.__sentry_own_request__;if(a&&!Se()&&!o){var s=r.getClient(),u=void 0===i&&l(n.msg)?e.Qt(n.msg,n.url,n.line,n.column):e.Yt(ye(i||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);x(u,{handled:!1,type:"onerror"}),r.captureEvent(u,{originalException:i})}},type:"error"}),this.Gt=!0)},t.prototype.Vt=function(){var n=this;this.Kt||(V({callback:function(i){var r=i;try{"reason"in i?r=i.reason:"detail"in i&&"reason"in i.detail&&(r=i.detail.reason)}catch(e){}var a=Q(),o=a.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(!o||Se()||s)return!0;var l=a.getClient(),c=u(r)?n.Zt(r):ye(r,void 0,{attachStacktrace:l&&l.getOptions().attachStacktrace,rejection:!0});c.level=e.Severity.Error,x(c,{handled:!1,type:"onunhandledrejection"}),a.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this.Kt=!0)},t.prototype.Qt=function(e,t,n,i){var r,a=o(e)?e.message:e,s=a.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(r=s[1],a=s[2]);var l={exception:{values:[{type:r||"Error",value:a}]}};return this.Yt(l,t,n,i)},t.prototype.Zt=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},t.prototype.Yt=function(e,t,n,i){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var r=isNaN(parseInt(i,10))?void 0:i,a=isNaN(parseInt(n,10))?void 0:n,o=l(t)&&t.length>0?t:function(){var e=T();try{return e.document.location.href}catch(e){return""}}();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:r,filename:o,function:"?",in_app:!0,lineno:a}),e},t.id="GlobalHandlers",t}(),$t=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Wt=function(){function e(t){this.name=e.id,this.ct=Le({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=T();this.ct.setTimeout&&D(e,"setTimeout",this.tn.bind(this)),this.ct.setInterval&&D(e,"setInterval",this.tn.bind(this)),this.ct.requestAnimationFrame&&D(e,"requestAnimationFrame",this.nn.bind(this)),this.ct.XMLHttpRequest&&"XMLHttpRequest"in e&&D(XMLHttpRequest.prototype,"send",this.rn.bind(this)),this.ct.eventTarget&&(Array.isArray(this.ct.eventTarget)?this.ct.eventTarget:$t).forEach(this.in.bind(this))},e.prototype.tn=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=t[0];return t[0]=we(i,{mechanism:{data:{function:I(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype.nn=function(e){return function(t){return e.call(this,we(t,{mechanism:{data:{function:"requestAnimationFrame",handler:I(e)},handled:!0,type:"instrument"}}))}},e.prototype.in=function(e){var t=T(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(D(n,"addEventListener",function(t){return function(n,i,r){try{"function"==typeof i.handleEvent&&(i.handleEvent=we(i.handleEvent.bind(i),{mechanism:{data:{function:"handleEvent",handler:I(i),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,we(i,{mechanism:{data:{function:"addEventListener",handler:I(i),target:e},handled:!0,type:"instrument"}}),r)}}),D(n,"removeEventListener",function(e){return function(t,n,i){var r,a=n;try{var o=null===(r=a)||void 0===r?void 0:r.__sentry_wrapped__;o&&e.call(this,t,o,i)}catch(e){}return e.call(this,t,a,i)}}))},e.prototype.rn=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(function(e){e in i&&"function"==typeof i[e]&&D(i,e,function(t){var n={mechanism:{data:{function:e,handler:I(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=I(t.__sentry_original__)),we(t,n)})}),e.apply(this,t)}},e.id="TryCatch",e}(),zt=function(){function t(e){this.name=t.id,this.ct=Le({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(e){this.ct.sentry&&Q().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:E(e)},{event:e})},t.prototype.setupOnce=function(){var e=this;this.ct.console&&V({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.en.apply(e,r(t))},type:"console"}),this.ct.dom&&V({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.on.apply(e,r(t))},type:"dom"}),this.ct.xhr&&V({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.un.apply(e,r(t))},type:"xhr"}),this.ct.fetch&&V({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.sn.apply(e,r(t))},type:"fetch"}),this.ct.history&&V({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.cn.apply(e,r(t))},type:"history"})},t.prototype.en=function(t){var n={category:"console",data:{arguments:t.args,logger:"console"},level:e.Severity.fromString(t.level),message:_(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message="Assertion failed: "+(_(t.args.slice(1)," ")||"console.assert"),n.data.arguments=t.args.slice(1)}Q().addBreadcrumb(n,{input:t.args,level:t.level})},t.prototype.on=function(e){var t,n="object"==typeof this.ct.dom?this.ct.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?m(e.event.target,n):m(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&Q().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},t.prototype.un=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,i=t.url,r=t.status_code,a=t.body;Q().addBreadcrumb({category:"xhr",data:{method:n,url:i,status_code:r},type:"http"},{xhr:e.xhr,input:a})}},t.prototype.sn=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?Q().addBreadcrumb({category:"fetch",data:t.fetchData,level:e.Severity.Error,type:"http"},{data:t.error,input:t.args}):Q().addBreadcrumb({category:"fetch",data:Le(Le({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype.cn=function(e){var t=T(),n=e.from,i=e.to,r=w(t.location.href),a=w(n),o=w(i);a.path||(a=r),r.protocol===o.protocol&&r.host===o.host&&(i=o.relative),r.protocol===a.protocol&&r.host===a.host&&(n=a.relative),Q().addBreadcrumb({category:"navigation",data:{from:n,to:i}})},t.id="Breadcrumbs",t}(),Yt="cause",Gt=5,Xt=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this.an=t.key||Yt,this.O=t.limit||Gt}return e.prototype.setupOnce=function(){G(function(t,n){var i=Q().getIntegration(e);if(i){var r=i.fn&&i.fn.bind(i);return"function"==typeof r?r(t,n):t}return t})},e.prototype.fn=function(e,t){if(!(e.exception&&e.exception.values&&t&&f(t.originalException,Error)))return e;var n=this.hn(t.originalException,this.an);return e.exception.values=r(n,e.exception.values),e},e.prototype.hn=function(e,t,n){if(void 0===n&&(n=[]),!f(e[t],Error)||n.length+1>=this.O)return n;var i=pe(ce(e[t]));return this.hn(e[t],t,r([i],n))},e.id="LinkedErrors",e}(),Kt=T(),Qt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){G(function(t){var n,i,r;if(Q().getIntegration(e)){if(!Kt.navigator&&!Kt.location&&!Kt.document)return t;var a=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(i=Kt.location)||void 0===i?void 0:i.href),o=(Kt.document||{}).referrer,s=(Kt.navigator||{}).userAgent,l=Le(Le(Le({},null===(r=t.request)||void 0===r?void 0:r.headers),o&&{Referer:o}),s&&{"User-Agent":s}),u=Le(Le({},a&&{url:a}),{headers:l});return Le(Le({},t),{request:u})}return t})},e.id="UserAgent",e}(),Jt=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t(function(t){var i=n().getIntegration(e);if(i){try{if(i.Dt(t,i.vn))return ze.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return i.vn=t}return i.vn=t}return t})},e.prototype.Dt=function(e,t){return!(!t||!this.ln(e,t)&&!this.dn(e,t))},e.prototype.ln=function(e,t){var n=e.message,i=t.message;return!(!n&&!i||n&&!i||!n&&i||n!==i||!this.pn(e,t)||!this.yn(e,t))},e.prototype.mn=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},e.prototype.yn=function(e,t){var n=this.mn(e),i=this.mn(t);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(n=n,(i=i).length!==n.length)return!1;for(var r=0;r<i.length;r++){var a=i[r],o=n[r];if(a.filename!==o.filename||a.lineno!==o.lineno||a.colno!==o.colno||a.function!==o.function)return!1}return!0},e.prototype.bn=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},e.prototype.dn=function(e,t){var n=this.bn(t),i=this.bn(e);return!!(n&&i&&n.type===i.type&&n.value===i.value&&this.pn(e,t)&&this.yn(e,t))},e.prototype.pn=function(e,t){var n=e.fingerprint,i=t.fingerprint;if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;n=n,i=i;try{return!(n.join("")!==i.join(""))}catch(e){return!1}},e.id="Dedupe",e}(),Zt=Object.freeze({__proto__:null,GlobalHandlers:qt,TryCatch:Wt,Breadcrumbs:zt,LinkedErrors:Xt,UserAgent:Qt,Dedupe:Jt}),en=function(e){function n(t){return void 0===t&&(t={}),t.Ht=t.Ht||{},t.Ht.sdk=t.Ht.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:_t}],version:_t},e.call(this,Bt,t)||this}return t(n,e),n.prototype.showReportDialog=function(e){void 0===e&&(e={}),T().document&&(this.lt()?Ee(Le(Le({},e),{dsn:e.dsn||this.getDsn()})):ze.error("Trying to call showReportDialog with Sentry Client disabled"))},n.prototype.bt=function(t,n,i){return t.platform=t.platform||"javascript",e.prototype.bt.call(this,t,n,i)},n.prototype.jt=function(t){var n=this.getIntegration(zt);n&&n.addSentryBreadcrumb(t),e.prototype.jt.call(this,t)},n}(gt),tn=[new St,new bt,new Wt,new zt,new qt,new Xt,new Jt,new Qt],nn={},rn=T();rn.Sentry&&rn.Sentry.Integrations&&(nn=rn.Sentry.Integrations);var an=Le(Le(Le({},nn),wt),Zt);return e.BrowserClient=en,e.Hub=pt,e.Integrations=an,e.SDK_NAME="sentry.javascript.browser",e.SDK_VERSION=_t,e.Scope=ct,e.Transports=Ut,e.addBreadcrumb=function(e){te("addBreadcrumb",e)},e.addGlobalEventProcessor=G,e.captureEvent=function(e){return te("captureEvent",e)},e.captureException=ne,e.captureMessage=function(e,t){var n;try{throw new Error(e)}catch(e){n=e}return te("captureMessage",e,"string"==typeof t?t:void 0,Le({originalException:e,syntheticException:n},"string"!=typeof t?{captureContext:t}:void 0))},e.close=function(e){var t=Q().getClient();return t?t.close(e):(ze.warn("Cannot flush events and disable SDK. No client defined."),it.resolve(!1))},e.configureScope=function(e){te("configureScope",e)},e.defaultIntegrations=tn,e.eventFromException=ge,e.eventFromMessage=ve,e.flush=function(e){var t=Q().getClient();return t?t.flush(e):(ze.warn("Cannot flush events. No client defined."),it.resolve(!1))},e.forceLoad=function(){},e.getCurrentHub=Q,e.getHubFromCarrier=Z,e.init=function(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=tn),void 0===e.release){var t=T();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),function(e,t){var n;!0===t.debug&&ze.enable();var i=Q();null===(n=i.getScope())||void 0===n||n.update(t.initialScope);var r=new e(t);i.bindClient(r)}(en,e),e.autoSessionTracking&&function(){if(void 0!==T().document){var e=Q();"function"==typeof e.startSession&&"function"==typeof e.captureSession&&(e.startSession({ignoreDuration:!0}),e.captureSession(),V({callback:function(t){var n=t.from,i=t.to;void 0!==n&&n!==i&&(e.startSession({ignoreDuration:!0}),e.captureSession())},type:"history"}))}else ze.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}()},e.injectReportDialog=Ee,e.lastEventId=function(){return Q().lastEventId()},e.makeMain=K,e.onLoad=function(e){e()},e.setContext=function(e,t){te("setContext",e,t)},e.setExtra=function(e,t){te("setExtra",e,t)},e.setExtras=function(e){te("setExtras",e)},e.setTag=function(e,t){te("setTag",e,t)},e.setTags=function(e){te("setTags",e)},e.setUser=function(e){te("setUser",e)},e.showReportDialog=function(e){void 0===e&&(e={});var t=Q(),n=t.getScope();n&&(e.user=Le(Le({},n.getUser()),e.user)),e.eventId||(e.eventId=t.lastEventId());var i=t.getClient();i&&i.showReportDialog(e)},e.startTransaction=function(e,t){return te("startTransaction",Le({},e),t)},e.withScope=ie,e.wrap=function(e){return we(e)()},e}({});define("Sentry",function(e){return function(){return e.Sentry}}(this)),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t,n){var i,r,a=(n=n||de).createElement("script");if(a.text=e,t)for(i in he)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,r);n.head.appendChild(a).parentNode.removeChild(a)}function i(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ie[re.call(e)]||"object":typeof e}function r(e){var t=!!e&&"length"in e&&e.length,n=i(e);return!ue(e)&&!ce(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function a(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function o(e,t,n){return ue(t)?fe.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?fe.grep(e,function(e){return e===t!==n}):"string"!=typeof t?fe.grep(e,function(e){return-1<ne.call(t,e)!==n}):fe.filter(t,e,n)}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function l(e){return e}function u(e){throw e}function c(e,t,n,i){var r;try{e&&ue(r=e.promise)?r.call(e).done(t).fail(n):e&&ue(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}function d(){de.removeEventListener("DOMContentLoaded",d),e.removeEventListener("load",d),fe.ready()}function h(e,t){return t.toUpperCase()}function p(e){return e.replace(Ie,"ms-").replace(De,h)}function f(){this.expando=fe.expando+f.uid++}function m(e,t,n){var i,r;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Me,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n="true"===(r=n)||"false"!==r&&("null"===r?null:r===+r+""?+r:Le.test(r)?JSON.parse(r):r)}catch(e){}Pe.set(e,t,n)}else n=void 0;return n}function g(e,t,n,i){var r,a,o=20,s=i?function(){return i.cur()}:function(){return fe.css(e,t,"")},l=s(),u=n&&n[3]||(fe.cssNumber[t]?"":"px"),c=e.nodeType&&(fe.cssNumber[t]||"px"!==u&&+l)&&Re.exec(fe.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;o--;)fe.style(e,t,c+u),(1-a)*(1-(a=s()/l||.5))<=0&&(o=0),c/=a;c*=2,fe.style(e,t,c+u),n=n||[]}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function v(e,t){for(var n,i,r,a,o,s,l,u=[],c=0,d=e.length;c<d;c++)(i=e[c]).style&&(n=i.style.display,t?("none"===n&&(u[c]=Oe.get(i,"display")||null,u[c]||(i.style.display="")),""===i.style.display&&He(i)&&(u[c]=(l=o=a=void 0,o=(r=i).ownerDocument,s=r.nodeName,(l=Ve[s])||(a=o.body.appendChild(o.createElement(s)),l=fe.css(a,"display"),a.parentNode.removeChild(a),"none"===l&&(l="block"),Ve[s]=l)))):"none"!==n&&(u[c]="none",Oe.set(i,"display",n)));for(c=0;c<d;c++)null!=u[c]&&(e[c].style.display=u[c]);return e}function y(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&a(e,t)?fe.merge([e],n):n}function _(e,t){for(var n=0,i=e.length;n<i;n++)Oe.set(e[n],"globalEval",!t||Oe.get(t[n],"globalEval"))}function b(e,t,n,r,a){for(var o,s,l,u,c,d,h=t.createDocumentFragment(),p=[],f=0,m=e.length;f<m;f++)if((o=e[f])||0===o)if("object"===i(o))fe.merge(p,o.nodeType?[o]:o);else if(Xe.test(o)){for(s=s||h.appendChild(t.createElement("div")),l=(ze.exec(o)||["",""])[1].toLowerCase(),u=Ge[l]||Ge._default,s.innerHTML=u[1]+fe.htmlPrefilter(o)+u[2],d=u[0];d--;)s=s.lastChild;fe.merge(p,s.childNodes),(s=h.firstChild).textContent=""}else p.push(t.createTextNode(o));for(h.textContent="",f=0;o=p[f++];)if(r&&-1<fe.inArray(o,r))a&&a.push(o);else if(c=Ue(o),s=y(h.appendChild(o),"script"),c&&_(s),n)for(d=0;o=s[d++];)Ye.test(o.type||"")&&n.push(o);return h}function T(){return!0}function S(){return!1}function w(e,t){return e===function(){try{return de.activeElement}catch(e){}}()==("focus"===t)}function E(e,t,n,i,r,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)E(e,s,n,i,t[s],a);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=S;else if(!r)return e;return 1===a&&(o=r,(r=function(e){return fe().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=fe.guid++)),e.each(function(){fe.event.add(this,t,r,i,n)})}function C(e,t,n){n?(Oe.set(e,t,!1),fe.event.add(e,t,{namespace:!1,handler:function(e){var i,r,a=Oe.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(fe.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=Z.call(arguments),Oe.set(this,t,a),i=n(this,t),this[t](),a!==(r=Oe.get(this,t))||i?Oe.set(this,t,!1):r={},a!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else a.length&&(Oe.set(this,t,{value:fe.event.trigger(fe.extend(a[0],fe.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Oe.get(e,t)&&fe.event.add(e,t,T)}function k(e,t){return a(e,"table")&&a(11!==t.nodeType?t:t.firstChild,"tr")&&fe(e).children("tbody")[0]||e}function x(e){
return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function I(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function D(e,t){var n,i,r,a,o,s;if(1===t.nodeType){if(Oe.hasData(e)&&(s=Oe.get(e).events))for(r in Oe.remove(t,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)fe.event.add(t,r,s[r][n]);Pe.hasData(e)&&(a=Pe.access(e),o=fe.extend({},a),Pe.set(t,o))}}function A(e,t,i,r){t=ee(t);var a,o,s,l,u,c,d=0,h=e.length,p=h-1,f=t[0],m=ue(f);if(m||1<h&&"string"==typeof f&&!le.checkClone&&Je.test(f))return e.each(function(n){var a=e.eq(n);m&&(t[0]=f.call(this,n,a.html())),A(a,t,i,r)});if(h&&(o=(a=b(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=o),o||r)){for(l=(s=fe.map(y(a,"script"),x)).length;d<h;d++)u=a,d!==p&&(u=fe.clone(u,!0,!0),l&&fe.merge(s,y(u,"script"))),i.call(e[d],u,d);if(l)for(c=s[s.length-1].ownerDocument,fe.map(s,I),d=0;d<l;d++)u=s[d],Ye.test(u.type||"")&&!Oe.access(u,"globalEval")&&fe.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?fe._evalUrl&&!u.noModule&&fe._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):n(u.textContent.replace(Ze,""),u,c))}return e}function O(e,t,n){for(var i,r=t?fe.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||fe.cleanData(y(i)),i.parentNode&&(n&&Ue(i)&&_(y(i,"script")),i.parentNode.removeChild(i));return e}function P(e,t,n){var i,r,a,o,s=e.style;return(n=n||tt(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||Ue(e)||(o=fe.style(e,t)),!le.pixelBoxStyles()&&et.test(o)&&it.test(t)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0!==o?o+"":o}function L(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function M(e){return fe.cssProps[e]||ot[e]||(e in at?e:ot[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=rt.length;n--;)if((e=rt[n]+t)in at)return e}(e)||e)}function N(e,t,n){var i=Re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function R(e,t,n,i,r,a){var o="width"===t?1:0,s=0,l=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(l+=fe.css(e,n+Fe[o],!0,r)),i?("content"===n&&(l-=fe.css(e,"padding"+Fe[o],!0,r)),"margin"!==n&&(l-=fe.css(e,"border"+Fe[o]+"Width",!0,r))):(l+=fe.css(e,"padding"+Fe[o],!0,r),"padding"!==n?l+=fe.css(e,"border"+Fe[o]+"Width",!0,r):s+=fe.css(e,"border"+Fe[o]+"Width",!0,r));return!i&&0<=a&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-l-s-.5))||0),l}function F(e,t,n){var i=tt(e),r=(!le.boxSizingReliable()||n)&&"border-box"===fe.css(e,"boxSizing",!1,i),o=r,s=P(e,t,i),l="offset"+t[0].toUpperCase()+t.slice(1);if(et.test(s)){if(!n)return s;s="auto"}return(!le.boxSizingReliable()&&r||!le.reliableTrDimensions()&&a(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===fe.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===fe.css(e,"boxSizing",!1,i),(o=l in e)&&(s=e[l])),(s=parseFloat(s)||0)+R(e,t,n||(r?"border":"content"),o,i,s)+"px"}function j(e,t,n,i,r){return new j.prototype.init(e,t,n,i,r)}function U(){ht&&(!1===de.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(U):e.setTimeout(U,fe.fx.interval),fe.fx.tick())}function B(){return e.setTimeout(function(){dt=void 0}),dt=Date.now()}function H(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=Fe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function V(e,t,n){for(var i,r=(q.tweeners[t]||[]).concat(q.tweeners["*"]),a=0,o=r.length;a<o;a++)if(i=r[a].call(n,t,e))return i}function q(e,t,n){var i,r,a=0,o=q.prefilters.length,s=fe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=dt||B(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),a=0,o=u.tweens.length;a<o;a++)u.tweens[a].run(i);return s.notifyWith(e,[u,i,n]),i<1&&o?n:(o||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:fe.extend({},t),opts:fe.extend(!0,{specialEasing:{},easing:fe.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||B(),duration:n.duration,tweens:[],createTween:function(t,n){var i=fe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for((!function(e,t){var n,i,r,a,o;for(n in e)if(r=t[i=p(n)],a=e[n],Array.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(o=fe.cssHooks[i])&&"expand"in o)for(n in a=o.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}(c,u.opts.specialEasing));a<o;a++)if(i=q.prefilters[a].call(u,e,c,u.opts))return ue(i.stop)&&(fe._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return fe.map(c,V,u),ue(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),fe.fx.timer(fe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u}function $(e){return(e.match(Ee)||[]).join(" ")}function W(e){return e.getAttribute&&e.getAttribute("class")||""}function z(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Ee)||[]}function Y(e,t,n,r){var a;if(Array.isArray(t))fe.each(t,function(t,i){n||xt.test(e)?r(e,i):Y(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==i(t))r(e,t);else for(a in t)Y(e+"["+a+"]",t[a],n,r)}function G(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,a=t.toLowerCase().match(Ee)||[];if(ue(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function X(e,t,n,i){function r(s){var l;return a[s]=!0,fe.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var a={},o=e===jt;return r(t.dataTypes[0])||!a["*"]&&r("*")}function K(e,t){var n,i,r=fe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&fe.extend(!0,e,i),e}var Q=[],J=Object.getPrototypeOf,Z=Q.slice,ee=Q.flat?function(e){return Q.flat.call(e)}:function(e){return Q.concat.apply([],e)},te=Q.push,ne=Q.indexOf,ie={},re=ie.toString,ae=ie.hasOwnProperty,oe=ae.toString,se=oe.call(Object),le={},ue=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},ce=function(e){return null!=e&&e===e.window},de=e.document,he={type:!0,src:!0,nonce:!0,noModule:!0},pe="3.6.0",fe=function(e,t){return new fe.fn.init(e,t)};fe.fn=fe.prototype={jquery:pe,constructor:fe,length:0,toArray:function(){return Z.call(this)},get:function(e){return null==e?Z.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=fe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return fe.each(this,e)},map:function(e){return this.pushStack(fe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(fe.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(fe.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:te,sort:Q.sort,splice:Q.splice},fe.extend=fe.fn.extend=function(){var e,t,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[s]||{},s++),"object"==typeof o||ue(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(u&&i&&(fe.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[t],a=r&&!Array.isArray(n)?[]:r||fe.isPlainObject(n)?n:{},r=!1,o[t]=fe.extend(u,a,i)):void 0!==i&&(o[t]=i));return o},fe.extend({expando:"jQuery"+(pe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==re.call(e)||(t=J(e))&&("function"!=typeof(n=ae.call(t,"constructor")&&t.constructor)||oe.call(n)!==se))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){n(e,{nonce:t&&t.nonce},i)},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?fe.merge(n,"string"==typeof e?[e]:e):te.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ne.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,o=!n;r<a;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,n){var i,a,o=0,s=[];if(r(e))for(i=e.length;o<i;o++)null!=(a=t(e[o],o,n))&&s.push(a);else for(o in e)null!=(a=t(e[o],o,n))&&s.push(a);return ee(s)},guid:1,support:le}),"function"==typeof Symbol&&(fe.fn[Symbol.iterator]=Q[Symbol.iterator]),fe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ie["[object "+t+"]"]=t.toLowerCase()});var me=function(e){function t(e,t,n,i){var r,a,o,s,l,c,h,p=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&(I(t),t=t||D,O)){if(11!==f&&(l=me.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(p&&(o=p.getElementById(r))&&N(t,o)&&o.id===r)return n.push(o),n}else{if(l[2])return X.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&y.getElementsByClassName&&t.getElementsByClassName)return X.apply(n,t.getElementsByClassName(r)),n}if(y.qsa&&!q[e+" "]&&(!P||!P.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(h=e,p=t,1===f&&(se.test(e)||oe.test(e))){for((p=ge.test(e)&&u(t.parentNode)||t)===t&&y.scope||((s=t.getAttribute("id"))?s=s.replace(_e,be):t.setAttribute("id",s=R)),a=(c=S(e)).length;a--;)c[a]=(s?"#"+s:":scope")+" "+d(c[a]);h=c.join(",")}try{return X.apply(n,p.querySelectorAll(h)),n}catch(t){q(e,!0)}finally{s===R&&t.removeAttribute("id")}}}return E(e.replace(re,"$1"),t,n,i)}function n(){var e=[];return function t(n,i){return e.push(n+" ")>_.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function i(e){return e[R]=!0,e}function r(e){var t=D.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=n.length;i--;)_.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Se(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,a=e([],n.length,t),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function d(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,r=t.next,a=r||i,o=n&&"parentNode"===a,s=U++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r);return!1}:function(t,n,l){var u,c,d,h=[j,s];if(l){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=(d=t[R]||(t[R]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=c[a])&&u[0]===j&&u[1]===s)return h[2]=u[2];if((c[a]=h)[2]=e(t,n,l))return!0}return!1}}function p(e){return 1<e.length?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function f(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,i,r)||(o.push(a),u&&t.push(s)));return o}function m(e,n,r,a,o,s){return a&&!a[R]&&(a=m(a)),o&&!o[R]&&(o=m(o,s)),i(function(i,s,l,u){var c,d,h,p=[],m=[],g=s.length,v=i||function(e,n,i){for(var r=0,a=n.length;r<a;r++)t(e,n[r],i);return i}(n||"*",l.nodeType?[l]:l,[]),y=!e||!i&&n?v:f(v,p,e,l,u),_=r?o||(i?e:g||a)?[]:s:y;if(r&&r(y,_,l,u),a)for(c=f(_,m),a(c,[],l,u),d=c.length;d--;)(h=c[d])&&(_[m[d]]=!(y[m[d]]=h));if(i){if(o||e){if(o){for(c=[],d=_.length;d--;)(h=_[d])&&c.push(y[d]=h);o(null,_=[],c,u)}for(d=_.length;d--;)(h=_[d])&&-1<(c=o?Q(i,h):p[d])&&(i[c]=!(s[c]=h))}}else _=f(_===s?_.splice(g,_.length):_),o?o(null,s,_,u):X.apply(s,_)})}function g(e){for(var t,n,i,r=e.length,a=_.relative[e[0].type],o=a||_.relative[" "],s=a?1:0,l=h(function(e){return e===t},o,!0),u=h(function(e){return-1<Q(t,e)},o,!0),c=[function(e,n,i){var r=!a&&(i||n!==C)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];s<r;s++)if(n=_.relative[e[s].type])c=[h(p(c),n)];else{if((n=_.filter[e[s].type].apply(null,e[s].matches))[R]){for(i=++s;i<r&&!_.relative[e[i].type];i++);return m(1<s&&p(c),1<s&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(re,"$1"),n,s<i&&g(e.slice(s,i)),i<r&&g(e=e.slice(i)),i<r&&d(e))}c.push(n)}return p(c)}var v,y,_,b,T,S,w,E,C,k,x,I,D,A,O,P,L,M,N,R="sizzle"+1*new Date,F=e.document,j=0,U=0,B=n(),H=n(),V=n(),q=n(),$=function(e,t){return e===t&&(x=!0),0},W={}.hasOwnProperty,z=[],Y=z.pop,G=z.push,X=z.push,K=z.slice,Q=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Z="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",te="\\["+Z+"*("+ee+")(?:"+Z+"*([*^$|!~]?=)"+Z+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ee+"))|)"+Z+"*\\]",ne=":("+ee+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+te+")*)|.*)\\)|)",ie=new RegExp(Z+"+","g"),re=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g"),ae=new RegExp("^"+Z+"*,"+Z+"*"),oe=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),se=new RegExp(Z+"|>"),le=new RegExp(ne),ue=new RegExp("^"+ee+"$"),ce={ID:new RegExp("^#("+ee+")"),CLASS:new RegExp("^\\.("+ee+")"),TAG:new RegExp("^("+ee+"|[*])"),ATTR:new RegExp("^"+te),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},de=/HTML$/i,he=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,fe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ve=new RegExp("\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\([^\\r\\n\\f])","g"),ye=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},_e=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,be=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Te=function(){I()},Se=h(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{X.apply(z=K.call(F.childNodes),F.childNodes),z[F.childNodes.length].nodeType}catch(v){X={apply:z.length?function(e,t){G.apply(e,K.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}for(v in y=t.support={},T=t.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!de.test(t||n&&n.nodeName||"HTML")},I=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!=D&&9===i.nodeType&&i.documentElement&&(A=(D=i).documentElement,O=!T(D),F!=D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Te,!1):n.attachEvent&&n.attachEvent("onunload",Te)),y.scope=r(function(e){return A.appendChild(e).appendChild(D.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),y.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=fe.test(D.getElementsByClassName),y.getById=r(function(e){return A.appendChild(e).id=R,!D.getElementsByName||!D.getElementsByName(R).length}),y.getById?(_.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}}):(_.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},_.find.ID=function(e,t){if(void 0!==t.getElementById&&O){var n,i,r,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(r=t.getElementsByName(e),i=0;a=r[i++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),_.find.TAG=y.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},_.find.CLASS=y.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&O)return t.getElementsByClassName(e)},L=[],P=[],(y.qsa=fe.test(D.querySelectorAll))&&(r(function(e){var t;A.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+Z+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+Z+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+R+"-]").length||P.push("~="),(t=D.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||P.push("\\["+Z+"*name"+Z+"*="+Z+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||P.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||P.push(".#.+[+~]"),e.querySelectorAll("\\\f"),P.push("[\\r\\n\\f]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+Z+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&P.push(":enabled",":disabled"),A.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(y.matchesSelector=fe.test(M=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){y.disconnectedMatch=M.call(e,"*"),M.call(e,"[s!='']:x"),L.push("!=",ne)}),P=P.length&&new RegExp(P.join("|")),L=L.length&&new RegExp(L.join("|")),t=fe.test(A.compareDocumentPosition),N=t||fe.test(A.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return x=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!y.sortDetached&&t.compareDocumentPosition(e)===n?e==D||e.ownerDocument==F&&N(F,e)?-1:t==D||t.ownerDocument==F&&N(F,t)?1:k?Q(k,e)-Q(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return x=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!r||!a)return e==D?-1:t==D?1:r?-1:a?1:k?Q(k,e)-Q(k,t):0;if(r===a)return o(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?o(s[i],l[i]):s[i]==F?-1:l[i]==F?1:0}),D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(I(e),y.matchesSelector&&O&&!q[n+" "]&&(!L||!L.test(n))&&(!P||!P.test(n)))try{var i=M.call(e,n);if(i||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){q(n,!0)}return 0<t(n,D,null,[e]).length},t.contains=function(e,t){return(e.ownerDocument||e)!=D&&I(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=D&&I(e);var n=_.attrHandle[t.toLowerCase()],i=n&&W.call(_.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==i?i:y.attributes||!O?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(_e,be)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(x=!y.detectDuplicates,k=!y.sortStable&&e.slice(0),e.sort($),x){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return k=null,e},b=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=b(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=b(t);return n},(_=t.selectors={cacheLength:50,createPseudo:i,match:ce,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ce.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&le.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=B[e+" "];return t||(t=new RegExp("(^|"+Z+")"+e+"("+Z+"|$)"))&&B(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var a=t.attr(r,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&-1<a.indexOf(i):"$="===n?i&&a.slice(-i.length)===i:"~="===n?-1<(" "+a.replace(ie," ")+" ").indexOf(i):"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,h,p,f,m=a!==o?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,_=!1;if(g){if(a){for(;m;){for(h=t;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(_=(p=(u=(c=(d=(h=g)[R]||(h[R]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===j&&u[1])&&u[2],h=p&&g.childNodes[p];h=++p&&h&&h[m]||(_=p=0)||f.pop();)if(1===h.nodeType&&++_&&h===t){c[e]=[j,p,_];break}}else if(y&&(_=p=(u=(c=(d=(h=t)[R]||(h[R]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===j&&u[1]),!1===_)for(;(h=++p&&h&&h[m]||(_=p=0)||f.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((c=(d=h[R]||(h[R]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[j,_]),h!==t)););return(_-=r)===i||_%i==0&&0<=_/i}}},PSEUDO:function(e,n){var r,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[R]?a(n):1<a.length?(r=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=a(e,n),o=r.length;o--;)e[i=Q(e,r[o])]=!(t[i]=r[o])}):function(e){return a(e,0,r)}):a}},pseudos:{not:i(function(e){var t=[],n=[],r=w(e.replace(re,"$1"));return r[R]?i(function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return 0<t(e,n).length}}),contains:i(function(e){return e=e.replace(ve,ye),function(t){return-1<(t.textContent||b(t)).indexOf(e)}}),lang:i(function(e){return ue.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,ye).toLowerCase(),function(t){var n;do{if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[n<0?n+t:n]}),even:l(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=n<0?n+t:t<n?t:n;0<=--i;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=_.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})_.pseudos[v]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(v);return c.prototype=_.filters=_.pseudos,_.setFilters=new c,S=t.tokenize=function(e,n){var i,r,a,o,s,l,u,c=H[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=_.preFilter;s;){for(o in i&&!(r=ae.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(a=[])),i=!1,(r=oe.exec(s))&&(i=r.shift(),a.push({value:i,type:r[0].replace(re," ")}),s=s.slice(i.length)),_.filter)!(r=ce[o].exec(s))||u[o]&&!(r=u[o](r))||(i=r.shift(),a.push({value:i,type:o,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):H(e,l).slice(0)},w=t.compile=function(e,n){var r,a,o,s,l,u,c=[],d=[],h=V[e+" "];if(!h){for(n||(n=S(e)),r=n.length;r--;)(h=g(n[r]))[R]?c.push(h):d.push(h);(h=V(e,(a=d,s=0<(o=c).length,l=0<a.length,u=function(e,n,i,r,u){var c,d,h,p=0,m="0",g=e&&[],v=[],y=C,b=e||l&&_.find.TAG("*",u),T=j+=null==y?1:Math.random()||.1,S=b.length;for(u&&(C=n==D||n||u);m!==S&&null!=(c=b[m]);m++){if(l&&c){for(d=0,n||c.ownerDocument==D||(I(c),i=!O);h=a[d++];)if(h(c,n||D,i)){r.push(c);break}u&&(j=T)}s&&((c=!h&&c)&&p--,e&&g.push(c))}if(p+=m,s&&m!==p){for(d=0;h=o[d++];)h(g,v,n,i);if(e){if(0<p)for(;m--;)g[m]||v[m]||(v[m]=Y.call(r));v=f(v)}X.apply(r,v),u&&!e&&0<v.length&&1<p+o.length&&t.uniqueSort(r)}return u&&(j=T,C=y),g},s?i(u):u))).selector=e}return h},E=t.select=function(e,t,n,i){var r,a,o,s,l,c="function"==typeof e&&e,h=!i&&S(e=c.selector||e);if(n=n||[],1===h.length){if(2<(a=h[0]=h[0].slice(0)).length&&"ID"===(o=a[0]).type&&9===t.nodeType&&O&&_.relative[a[1].type]){if(!(t=(_.find.ID(o.matches[0].replace(ve,ye),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=ce.needsContext.test(e)?0:a.length;r--&&(o=a[r],!_.relative[s=o.type]);)if((l=_.find[s])&&(i=l(o.matches[0].replace(ve,ye),ge.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&d(a)))return X.apply(n,i),n;break}}return(c||w(e,h))(i,t,!O,n,!t||ge.test(e)&&u(t.parentNode)||t),n},y.sortStable=R.split("").sort($).join("")===R,y.detectDuplicates=!!x,I(),y.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||a(J,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);fe.find=me,fe.expr=me.selectors,fe.expr[":"]=fe.expr.pseudos,fe.uniqueSort=fe.unique=me.uniqueSort,fe.text=me.getText,fe.isXMLDoc=me.isXML,fe.contains=me.contains,fe.escapeSelector=me.escape;var ge=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&fe(e).is(n))break;i.push(e)}return i},ve=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},ye=fe.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;fe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?fe.find.matchesSelector(i,e)?[i]:[]:fe.find.matches(e,fe.grep(t,function(e){return 1===e.nodeType}))},fe.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(fe(e).filter(function(){for(t=0;t<i;t++)if(fe.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)fe.find(e,r[t],n);return 1<i?fe.uniqueSort(n):n},filter:function(e){return this.pushStack(o(this,e||[],!1))},not:function(e){return this.pushStack(o(this,e||[],!0))},is:function(e){return!!o(this,"string"==typeof e&&ye.test(e)?fe(e):e||[],!1).length}});var be,Te=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(fe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||be,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:Te.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof fe?t[0]:t,fe.merge(this,fe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:de,!0)),_e.test(i[1])&&fe.isPlainObject(t))for(i in t)ue(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=de.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ue(e)?void 0!==n.ready?n.ready(e):e(fe):fe.makeArray(e,this)}).prototype=fe.fn,be=fe(de);var Se=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};fe.fn.extend({has:function(e){var t=fe(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(fe.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,a=[],o="string"!=typeof e&&fe(e);if(!ye.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&fe.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?fe.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?ne.call(fe(e),this[0]):ne.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(fe.uniqueSort(fe.merge(this.get(),fe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),fe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ge(e,"parentNode")},parentsUntil:function(e,t,n){return ge(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},
prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return ge(e,"nextSibling")},prevAll:function(e){return ge(e,"previousSibling")},nextUntil:function(e,t,n){return ge(e,"nextSibling",n)},prevUntil:function(e,t,n){return ge(e,"previousSibling",n)},siblings:function(e){return ve((e.parentNode||{}).firstChild,e)},children:function(e){return ve(e.firstChild)},contents:function(e){return null!=e.contentDocument&&J(e.contentDocument)?e.contentDocument:(a(e,"template")&&(e=e.content||e),fe.merge([],e.childNodes))}},function(e,t){fe.fn[e]=function(n,i){var r=fe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=fe.filter(i,r)),1<this.length&&(we[e]||fe.uniqueSort(r),Se.test(e)&&r.reverse()),this.pushStack(r)}});var Ee=/[^\x20\t\r\n\f]+/g;fe.Callbacks=function(e){var t,n;e="string"==typeof e?(t=e,n={},fe.each(t.match(Ee)||[],function(e,t){n[t]=!0}),n):fe.extend({},e);var r,a,o,s,l=[],u=[],c=-1,d=function(){for(s=s||e.once,o=r=!0;u.length;c=-1)for(a=u.shift();++c<l.length;)!1===l[c].apply(a[0],a[1])&&e.stopOnFalse&&(c=l.length,a=!1);e.memory||(a=!1),r=!1,s&&(l=a?[]:"")},h={add:function(){return l&&(a&&!r&&(c=l.length-1,u.push(a)),function t(n){fe.each(n,function(n,r){ue(r)?e.unique&&h.has(r)||l.push(r):r&&r.length&&"string"!==i(r)&&t(r)})}(arguments),a&&!r&&d()),this},remove:function(){return fe.each(arguments,function(e,t){for(var n;-1<(n=fe.inArray(t,l,n));)l.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<fe.inArray(e,l):0<l.length},empty:function(){return l&&(l=[]),this},disable:function(){return s=u=[],l=a="",this},disabled:function(){return!l},lock:function(){return s=u=[],a||r||(l=a=""),this},locked:function(){return!!s},fireWith:function(e,t){return s||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),r||d()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h},fe.extend({Deferred:function(t){var n=[["notify","progress",fe.Callbacks("memory"),fe.Callbacks("memory"),2],["resolve","done",fe.Callbacks("once memory"),fe.Callbacks("once memory"),0,"resolved"],["reject","fail",fe.Callbacks("once memory"),fe.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return fe.Deferred(function(t){fe.each(n,function(n,i){var r=ue(e[i[4]])&&e[i[4]];a[i[1]](function(){var e=r&&r.apply(this,arguments);e&&ue(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,i,r){function a(t,n,i,r){return function(){var s=this,c=arguments,d=function(){var e,d;if(!(t<o)){if((e=i.apply(s,c))===n.promise())throw new TypeError("Thenable self-resolution");d=e&&("object"==typeof e||"function"==typeof e)&&e.then,ue(d)?r?d.call(e,a(o,n,l,r),a(o,n,u,r)):(o++,d.call(e,a(o,n,l,r),a(o,n,u,r),a(o,n,l,n.notifyWith))):(i!==l&&(s=void 0,c=[e]),(r||n.resolveWith)(s,c))}},h=r?d:function(){try{d()}catch(e){fe.Deferred.exceptionHook&&fe.Deferred.exceptionHook(e,h.stackTrace),o<=t+1&&(i!==u&&(s=void 0,c=[e]),n.rejectWith(s,c))}};t?h():(fe.Deferred.getStackHook&&(h.stackTrace=fe.Deferred.getStackHook()),e.setTimeout(h))}}var o=0;return fe.Deferred(function(e){n[0][3].add(a(0,e,ue(r)?r:l,e.notifyWith)),n[1][3].add(a(0,e,ue(t)?t:l)),n[2][3].add(a(0,e,ue(i)?i:u))}).promise()},promise:function(e){return null!=e?fe.extend(e,r):r}},a={};return fe.each(n,function(e,t){var o=t[2],s=t[5];r[t[1]]=o.add,s&&o.add(function(){i=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=o.fireWith}),r.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,n=t,i=Array(n),r=Z.call(arguments),a=fe.Deferred(),o=function(e){return function(n){i[e]=this,r[e]=1<arguments.length?Z.call(arguments):n,--t||a.resolveWith(i,r)}};if(t<=1&&(c(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||ue(r[n]&&r[n].then)))return a.then();for(;n--;)c(r[n],o(n),a.reject);return a.promise()}});var Ce=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;fe.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Ce.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},fe.readyException=function(t){e.setTimeout(function(){throw t})};var ke=fe.Deferred();fe.fn.ready=function(e){return ke.then(e).catch(function(e){fe.readyException(e)}),this},fe.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--fe.readyWait:fe.isReady)||(fe.isReady=!0)!==e&&0<--fe.readyWait||ke.resolveWith(de,[fe])}}),fe.ready.then=ke.then,"complete"===de.readyState||"loading"!==de.readyState&&!de.documentElement.doScroll?e.setTimeout(fe.ready):(de.addEventListener("DOMContentLoaded",d),e.addEventListener("load",d));var xe=function(e,t,n,r,a,o,s){var l=0,u=e.length,c=null==n;if("object"===i(n))for(l in a=!0,n)xe(e,t,l,n[l],!0,o,s);else if(void 0!==r&&(a=!0,ue(r)||(s=!0),c&&(s?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(fe(e),n)})),t))for(;l<u;l++)t(e[l],n,s?r:r.call(e[l],l,t(e[l],n)));return a?e:c?t.call(e):u?t(e[0],n):o},Ie=/^-ms-/,De=/-([a-z])/g,Ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};f.uid=1,f.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[p(t)]=n;else for(i in t)r[p(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][p(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(p):(t=p(t))in i?[t]:t.match(Ee)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||fe.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!fe.isEmptyObject(t)}};var Oe=new f,Pe=new f,Le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/[A-Z]/g;fe.extend({hasData:function(e){return Pe.hasData(e)||Oe.hasData(e)},data:function(e,t,n){return Pe.access(e,t,n)},removeData:function(e,t){Pe.remove(e,t)},_data:function(e,t,n){return Oe.access(e,t,n)},_removeData:function(e,t){Oe.remove(e,t)}}),fe.fn.extend({data:function(e,t){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=Pe.get(a),1===a.nodeType&&!Oe.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=p(i.slice(5)),m(a,i,r[i]));Oe.set(a,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){Pe.set(this,e)}):xe(this,function(t){var n;if(a&&void 0===t)return void 0!==(n=Pe.get(a,e))?n:void 0!==(n=m(a,e))?n:void 0;this.each(function(){Pe.set(this,e,t)})},null,t,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Pe.remove(this,e)})}}),fe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Oe.get(e,t),n&&(!i||Array.isArray(n)?i=Oe.access(e,t,fe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=fe.queue(e,t),i=n.length,r=n.shift(),a=fe._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,function(){fe.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Oe.get(e,n)||Oe.access(e,n,{empty:fe.Callbacks("once memory").add(function(){Oe.remove(e,[t+"queue",n])})})}}),fe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?fe.queue(this[0],e):void 0===t?this:this.each(function(){var n=fe.queue(this,e,t);fe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&fe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){fe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=fe.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=Oe.get(a[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Ne=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=new RegExp("^(?:([+-])=|)("+Ne+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],je=de.documentElement,Ue=function(e){return fe.contains(e.ownerDocument,e)},Be={composed:!0};je.getRootNode&&(Ue=function(e){return fe.contains(e.ownerDocument,e)||e.getRootNode(Be)===e.ownerDocument});var He=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&Ue(e)&&"none"===fe.css(e,"display")},Ve={};fe.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){He(this)?fe(this).show():fe(this).hide()})}});var qe,$e,We=/^(?:checkbox|radio)$/i,ze=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ye=/^$|^module$|\/(?:java|ecma)script/i;qe=de.createDocumentFragment().appendChild(de.createElement("div")),($e=de.createElement("input")).setAttribute("type","radio"),$e.setAttribute("checked","checked"),$e.setAttribute("name","t"),qe.appendChild($e),le.checkClone=qe.cloneNode(!0).cloneNode(!0).lastChild.checked,qe.innerHTML="<textarea>x</textarea>",le.noCloneChecked=!!qe.cloneNode(!0).lastChild.defaultValue,qe.innerHTML="<option></option>",le.option=!!qe.lastChild;var Ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,le.option||(Ge.optgroup=Ge.option=[1,"<select multiple='multiple'>","</select>"]);var Xe=/<|&#?\w+;/,Ke=/^([^.]*)(?:\.(.+)|)/;fe.event={global:{},add:function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f,m,g=Oe.get(e);if(Ae(e))for(n.handler&&(n=(a=n).handler,r=a.selector),r&&fe.find.matchesSelector(je,r),n.guid||(n.guid=fe.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==fe&&fe.event.triggered!==t.type?fe.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(Ee)||[""]).length;u--;)p=m=(s=Ke.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p&&(d=fe.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,d=fe.event.special[p]||{},c=fe.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&fe.expr.match.needsContext.test(r),namespace:f.join(".")},a),(h=l[p])||((h=l[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,f,o)||e.addEventListener&&e.addEventListener(p,o)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),fe.event.global[p]=!0)},remove:function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f,m,g=Oe.hasData(e)&&Oe.get(e);if(g&&(l=g.events)){for(u=(t=(t||"").match(Ee)||[""]).length;u--;)if(p=m=(s=Ke.exec(t[u])||[])[1],f=(s[2]||"").split(".").sort(),p){for(d=fe.event.special[p]||{},h=l[p=(i?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,g.handle)||fe.removeEvent(e,p,g.handle),delete l[p])}else for(p in l)fe.event.remove(e,p+t[u],n,i,!0);fe.isEmptyObject(l)&&Oe.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,a,o,s=new Array(arguments.length),l=fe.event.fix(e),u=(Oe.get(this,"events")||Object.create(null))[l.type]||[],c=fe.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(o=fe.event.handlers.call(this,l,u),t=0;(r=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==a.namespace&&!l.rnamespace.test(a.namespace)||(l.handleObj=a,l.data=a.data,void 0!==(i=((fe.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,s))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,i,r,a,o,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&1<=e.button))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(a=[],o={},n=0;n<l;n++)void 0===o[r=(i=t[n]).selector+" "]&&(o[r]=i.needsContext?-1<fe(r,this).index(u):fe.find(r,this,null,[u]).length),o[r]&&a.push(i);a.length&&s.push({elem:u,handlers:a})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(fe.Event.prototype,e,{enumerable:!0,configurable:!0,get:ue(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[fe.expando]?e:new fe.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return We.test(t.type)&&t.click&&a(t,"input")&&C(t,"click",T),!1},trigger:function(e){var t=this||e;return We.test(t.type)&&t.click&&a(t,"input")&&C(t,"click"),!0},_default:function(e){var t=e.target;return We.test(t.type)&&t.click&&a(t,"input")&&Oe.get(t,"click")||a(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},fe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},fe.Event=function(e,t){if(!(this instanceof fe.Event))return new fe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?T:S,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&fe.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[fe.expando]=!0},fe.Event.prototype={constructor:fe.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=T,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=T,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=T,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},fe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},fe.event.addProp),fe.each({focus:"focusin",blur:"focusout"},function(e,t){fe.event.special[e]={setup:function(){return C(this,e,w),!1},trigger:function(){return C(this,e),!0},_default:function(){return!0},delegateType:t}}),fe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){fe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=e.relatedTarget,r=e.handleObj;return i&&(i===this||fe.contains(this,i))||(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),fe.fn.extend({on:function(e,t,n,i){return E(this,e,t,n,i)},one:function(e,t,n,i){return E(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,fe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=S),this.each(function(){fe.event.remove(this,e,n,t)})}});var Qe=/<script|<style|<link/i,Je=/checked\s*(?:[^=]|=\s*.checked.)/i,Ze=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;fe.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,a,o,s,l,u,c=e.cloneNode(!0),d=Ue(e);if(!(le.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||fe.isXMLDoc(e)))for(o=y(c),i=0,r=(a=y(e)).length;i<r;i++)s=a[i],l=o[i],"input"===(u=l.nodeName.toLowerCase())&&We.test(s.type)?l.checked=s.checked:"input"!==u&&"textarea"!==u||(l.defaultValue=s.defaultValue);if(t)if(n)for(a=a||y(e),o=o||y(c),i=0,r=a.length;i<r;i++)D(a[i],o[i]);else D(e,c);return 0<(o=y(c,"script")).length&&_(o,!d&&y(e,"script")),c},cleanData:function(e){for(var t,n,i,r=fe.event.special,a=0;void 0!==(n=e[a]);a++)if(Ae(n)){if(t=n[Oe.expando]){if(t.events)for(i in t.events)r[i]?fe.event.remove(n,i):fe.removeEvent(n,i,t.handle);n[Oe.expando]=void 0}n[Pe.expando]&&(n[Pe.expando]=void 0)}}}),fe.fn.extend({detach:function(e){return O(this,e,!0)},remove:function(e){return O(this,e)},text:function(e){return xe(this,function(e){return void 0===e?fe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return A(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||k(this,e).appendChild(e)})},prepend:function(){return A(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return A(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(fe.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return fe.clone(this,e,t)})},html:function(e){return xe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Qe.test(e)&&!Ge[(ze.exec(e)||["",""])[1].toLowerCase()]){e=fe.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(fe.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return A(this,arguments,function(t){var n=this.parentNode;fe.inArray(this,e)<0&&(fe.cleanData(y(this)),n&&n.replaceChild(t,this))},e)}}),fe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){fe.fn[e]=function(e){for(var n,i=[],r=fe(e),a=r.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),fe(r[o])[t](n),te.apply(i,n.get());return this.pushStack(i)}});var et=new RegExp("^("+Ne+")(?!px)[a-z%]+$","i"),tt=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},nt=function(e,t,n){var i,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=a[r];return i},it=new RegExp(Fe.join("|"),"i");!function(){function t(){if(c){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",je.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,l=12===n(t.marginLeft),c.style.right="60%",o=36===n(t.right),r=36===n(t.width),c.style.position="absolute",a=12===n(c.offsetWidth/3),je.removeChild(u),c=null}}function n(e){return Math.round(parseFloat(e))}var i,r,a,o,s,l,u=de.createElement("div"),c=de.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",le.clearCloneStyle="content-box"===c.style.backgroundClip,fe.extend(le,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,n,i,r;return null==s&&(t=de.createElement("table"),n=de.createElement("tr"),i=de.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",i.style.height="9px",i.style.display="block",je.appendChild(t).appendChild(n).appendChild(i),r=e.getComputedStyle(n),s=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===n.offsetHeight,je.removeChild(t)),s}}))}();var rt=["Webkit","Moz","ms"],at=de.createElement("div").style,ot={},st=/^(none|table(?!-c[ea]).+)/,lt=/^--/,ut={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"};fe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=P(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=p(t),l=lt.test(t),u=e.style;if(l||(t=M(s)),o=fe.cssHooks[t]||fe.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:u[t];"string"==(a=typeof n)&&(r=Re.exec(n))&&r[1]&&(n=g(e,t,r),a="number"),null!=n&&n==n&&("number"!==a||l||(n+=r&&r[3]||(fe.cssNumber[s]?"":"px")),le.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,a,o,s=p(t);return lt.test(t)||(t=M(s)),(o=fe.cssHooks[t]||fe.cssHooks[s])&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=P(e,t,i)),"normal"===r&&t in ct&&(r=ct[t]),""===n||n?(a=parseFloat(r),!0===n||isFinite(a)?a||0:r):r}}),fe.each(["height","width"],function(e,t){fe.cssHooks[t]={get:function(e,n,i){if(n)return!st.test(fe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?F(e,t,i):nt(e,ut,function(){return F(e,t,i)})},set:function(e,n,i){var r,a=tt(e),o=!le.scrollboxSize()&&"absolute"===a.position,s=(o||i)&&"border-box"===fe.css(e,"boxSizing",!1,a),l=i?R(e,t,i,s,a):0;return s&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-R(e,t,"border",!1,a)-.5)),l&&(r=Re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=fe.css(e,t)),N(0,n,l)}}}),fe.cssHooks.marginLeft=L(le.reliableMarginLeft,function(e,t){if(t)return(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-nt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),fe.each({margin:"",padding:"",border:"Width"},function(e,t){fe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+Fe[i]+t]=a[i]||a[i-2]||a[0];return r}},"margin"!==e&&(fe.cssHooks[e+t].set=N)}),fe.fn.extend({css:function(e,t){return xe(this,function(e,t,n){var i,r,a={},o=0;if(Array.isArray(t)){for(i=tt(e),r=t.length;o<r;o++)a[t[o]]=fe.css(e,t[o],!1,i);return a}return void 0!==n?fe.style(e,t,n):fe.css(e,t)},e,t,1<arguments.length)}}),((fe.Tween=j).prototype={constructor:j,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||fe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(fe.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=fe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}}).init.prototype=j.prototype,(j.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=fe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){fe.fx.step[e.prop]?fe.fx.step[e.prop](e):1!==e.elem.nodeType||!fe.cssHooks[e.prop]&&null==e.elem.style[M(e.prop)]?e.elem[e.prop]=e.now:fe.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},fe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},fe.fx=j.prototype.init,fe.fx.step={};var dt,ht,pt,ft,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;fe.Animation=fe.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return g(n.elem,e,Re.exec(t),n),n}]},tweener:function(e,t){ue(e)?(t=e,e=["*"]):e=e.match(Ee);for(var n,i=0,r=e.length;i<r;i++)n=e[i],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,a,o,s,l,u,c,d="width"in t||"height"in t,h=this,p={},f=e.style,m=e.nodeType&&He(e),g=Oe.get(e,"fxshow");for(i in n.queue||(null==(o=fe._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always(function(){h.always(function(){o.unqueued--,fe.queue(e,"fx").length||o.empty.fire()})})),t)if(r=t[i],mt.test(r)){if(delete t[i],a=a||"toggle"===r,r===(m?"hide":"show")){if("show"!==r||!g||void 0===g[i])continue;m=!0}p[i]=g&&g[i]||fe.style(e,i)}if((l=!fe.isEmptyObject(t))||!fe.isEmptyObject(p))for(i in d&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(u=g&&g.display)&&(u=Oe.get(e,"display")),"none"===(c=fe.css(e,"display"))&&(u?c=u:(v([e],!0),u=e.style.display||u,c=fe.css(e,"display"),v([e]))),("inline"===c||"inline-block"===c&&null!=u)&&"none"===fe.css(e,"float")&&(l||(h.done(function(){f.display=u}),null==u&&(c=f.display,u="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1,p)l||(g?"hidden"in g&&(m=g.hidden):g=Oe.access(e,"fxshow",{display:u}),a&&(g.hidden=!m),m&&v([e],!0),h.done(function(){for(i in m||v([e]),Oe.remove(e,"fxshow"),p)fe.style(e,i,p[i])})),l=V(m?g[i]:0,i,h),i in g||(g[i]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),fe.speed=function(e,t,n){var i=e&&"object"==typeof e?fe.extend({},e):{complete:n||!n&&t||ue(e)&&e,duration:e,easing:n&&t||t&&!ue(t)&&t};return fe.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in fe.fx.speeds?i.duration=fe.fx.speeds[i.duration]:i.duration=fe.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){ue(i.old)&&i.old.call(this),i.queue&&fe.dequeue(this,i.queue)},i},fe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(He).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=fe.isEmptyObject(e),a=fe.speed(t,n,i),o=function(){var t=q(this,fe.extend({},e),a);(r||Oe.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",a=fe.timers,o=Oe.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&gt.test(r)&&i(o[r]);for(r=a.length;r--;)a[r].elem!==this||null!=e&&a[r].queue!==e||(a[r].anim.stop(n),t=!1,a.splice(r,1));!t&&n||fe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Oe.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],a=fe.timers,o=i?i.length:0;for(n.finish=!0,fe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),fe.each(["toggle","show","hide"],function(e,t){var n=fe.fn[t];fe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,i,r)}}),fe.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){fe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),fe.timers=[],fe.fx.tick=function(){var e,t=0,n=fe.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||fe.fx.stop(),dt=void 0},fe.fx.timer=function(e){fe.timers.push(e),fe.fx.start()},fe.fx.interval=13,fe.fx.start=function(){ht||(ht=!0,U())},fe.fx.stop=function(){ht=null},fe.fx.speeds={slow:600,fast:200,_default:400},fe.fn.delay=function(t,n){return t=fe.fx&&fe.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},pt=de.createElement("input"),ft=de.createElement("select").appendChild(de.createElement("option")),pt.type="checkbox",le.checkOn=""!==pt.value,le.optSelected=ft.selected,(pt=de.createElement("input")).value="t",pt.type="radio",le.radioValue="t"===pt.value;var vt,yt=fe.expr.attrHandle;fe.fn.extend({attr:function(e,t){return xe(this,fe.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){fe.removeAttr(this,e)})}}),fe.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?fe.prop(e,t,n):(1===a&&fe.isXMLDoc(e)||(r=fe.attrHooks[t.toLowerCase()]||(fe.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void fe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=fe.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!le.radioValue&&"radio"===t&&a(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(Ee);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?fe.removeAttr(e,n):e.setAttribute(n,n),n}},fe.each(fe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=yt[t]||fe.find.attr;yt[t]=function(e,t,i){var r,a,o=t.toLowerCase();return i||(a=yt[o],yt[o]=r,r=null!=n(e,t,i)?o:null,yt[o]=a),r}});var _t=/^(?:input|select|textarea|button)$/i,bt=/^(?:a|area)$/i;fe.fn.extend({prop:function(e,t){return xe(this,fe.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[fe.propFix[e]||e]})}}),fe.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&fe.isXMLDoc(e)||(t=fe.propFix[t]||t,r=fe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=fe.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),le.optSelected||(fe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),fe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fe.propFix[this.toLowerCase()]=this}),fe.fn.extend({addClass:function(e){var t,n,i,r,a,o,s,l=0;if(ue(e))return this.each(function(t){fe(this).addClass(e.call(this,t,W(this)))});if((t=z(e)).length)for(;n=this[l++];)if(r=W(n),i=1===n.nodeType&&" "+$(r)+" "){for(o=0;a=t[o++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(s=$(i))&&n.setAttribute("class",s)}return this},
removeClass:function(e){var t,n,i,r,a,o,s,l=0;if(ue(e))return this.each(function(t){fe(this).removeClass(e.call(this,t,W(this)))});if(!arguments.length)return this.attr("class","");if((t=z(e)).length)for(;n=this[l++];)if(r=W(n),i=1===n.nodeType&&" "+$(r)+" "){for(o=0;a=t[o++];)for(;-1<i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");r!==(s=$(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):ue(e)?this.each(function(n){fe(this).toggleClass(e.call(this,n,W(this),t),t)}):this.each(function(){var t,r,a,o;if(i)for(r=0,a=fe(this),o=z(e);t=o[r++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=W(this))&&Oe.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Oe.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+$(W(n))+" ").indexOf(t))return!0;return!1}});var Tt=/\r/g;fe.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=ue(e),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,fe(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=fe.map(r,function(e){return null==e?"":e+""})),(t=fe.valHooks[this.type]||fe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=fe.valHooks[r.type]||fe.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Tt,""):null==n?"":n:void 0}}),fe.extend({valHooks:{option:{get:function(e){var t=fe.find.attr(e,"value");return null!=t?t:$(fe.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,s="select-one"===e.type,l=s?null:[],u=s?o+1:r.length;for(i=o<0?u:s?o:0;i<u;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!a(n.parentNode,"optgroup"))){if(t=fe(n).val(),s)return t;l.push(t)}return l},set:function(e,t){for(var n,i,r=e.options,a=fe.makeArray(t),o=r.length;o--;)((i=r[o]).selected=-1<fe.inArray(fe.valHooks.option.get(i),a))&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),fe.each(["radio","checkbox"],function(){fe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<fe.inArray(fe(e).val(),t)}},le.checkOn||(fe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),le.focusin="onfocusin"in e;var St=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};fe.extend(fe.event,{trigger:function(t,n,i,r){var a,o,s,l,u,c,d,h,p=[i||de],f=ae.call(t,"type")?t.type:t,m=ae.call(t,"namespace")?t.namespace.split("."):[];if(o=h=s=i=i||de,3!==i.nodeType&&8!==i.nodeType&&!St.test(f+fe.event.triggered)&&(-1<f.indexOf(".")&&(f=(m=f.split(".")).shift(),m.sort()),u=f.indexOf(":")<0&&"on"+f,(t=t[fe.expando]?t:new fe.Event(f,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:fe.makeArray(n,[t]),d=fe.event.special[f]||{},r||!d.trigger||!1!==d.trigger.apply(i,n))){if(!r&&!d.noBubble&&!ce(i)){for(l=d.delegateType||f,St.test(l+f)||(o=o.parentNode);o;o=o.parentNode)p.push(o),s=o;s===(i.ownerDocument||de)&&p.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=p[a++])&&!t.isPropagationStopped();)h=o,t.type=1<a?l:d.bindType||f,(c=(Oe.get(o,"events")||Object.create(null))[t.type]&&Oe.get(o,"handle"))&&c.apply(o,n),(c=u&&o[u])&&c.apply&&Ae(o)&&(t.result=c.apply(o,n),!1===t.result&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),n)||!Ae(i)||u&&ue(i[f])&&!ce(i)&&((s=i[u])&&(i[u]=null),fe.event.triggered=f,t.isPropagationStopped()&&h.addEventListener(f,wt),i[f](),t.isPropagationStopped()&&h.removeEventListener(f,wt),fe.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=fe.extend(new fe.Event,n,{type:e,isSimulated:!0});fe.event.trigger(i,null,t)}}),fe.fn.extend({trigger:function(e,t){return this.each(function(){fe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return fe.event.trigger(e,t,n,!0)}}),le.focusin||fe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){fe.event.simulate(t,e.target,fe.event.fix(e))};fe.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=Oe.access(i,t);r||i.addEventListener(e,n,!0),Oe.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=Oe.access(i,t)-1;r?Oe.access(i,t,r):(i.removeEventListener(e,n,!0),Oe.remove(i,t))}}});var Et=e.location,Ct={guid:Date.now()},kt=/\?/;fe.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(t){}return i=n&&n.getElementsByTagName("parsererror")[0],n&&!i||fe.error("Invalid XML: "+(i?fe.map(i.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var xt=/\[\]$/,It=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;fe.param=function(e,t){var n,i=[],r=function(e,t){var n=ue(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!fe.isPlainObject(e))fe.each(e,function(){r(this.name,this.value)});else for(n in e)Y(n,e[n],t,r);return i.join("&")},fe.fn.extend({serialize:function(){return fe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=fe.prop(this,"elements");return e?fe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!fe(this).is(":disabled")&&At.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!We.test(e))}).map(function(e,t){var n=fe(this).val();return null==n?null:Array.isArray(n)?fe.map(n,function(e){return{name:t.name,value:e.replace(It,"\r\n")}}):{name:t.name,value:n.replace(It,"\r\n")}}).get()}});var Ot=/%20/g,Pt=/#.*$/,Lt=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,Rt=/^\/\//,Ft={},jt={},Ut="*/".concat("*"),Bt=de.createElement("a");Bt.href=Et.href,fe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ut,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":fe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?K(K(e,fe.ajaxSettings),t):K(fe.ajaxSettings,e)},ajaxPrefilter:G(Ft),ajaxTransport:G(jt),ajax:function(t,n){function i(t,n,i,s){var u,h,p,b,T,S=n;c||(c=!0,l&&e.clearTimeout(l),r=void 0,o=s||"",w.readyState=0<t?4:0,u=200<=t&&t<300||304===t,i&&(b=function(e,t,n){for(var i,r,a,o,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)a=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){a=r;break}o||(o=r)}a=a||o}if(a)return a!==l[0]&&l.unshift(a),n[a]}(f,w,i)),!u&&-1<fe.inArray("script",f.dataTypes)&&fe.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),b=function(e,t,n,i){var r,a,o,s,l,u={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(o=u[l+" "+a]||u["* "+a]))for(r in u)if((s=r.split(" "))[1]===a&&(o=u[l+" "+s[0]]||u["* "+s[0]])){!0===o?o=u[r]:!0!==u[r]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}(f,b,w,u),u?(f.ifModified&&((T=w.getResponseHeader("Last-Modified"))&&(fe.lastModified[a]=T),(T=w.getResponseHeader("etag"))&&(fe.etag[a]=T)),204===t||"HEAD"===f.type?S="nocontent":304===t?S="notmodified":(S=b.state,h=b.data,u=!(p=b.error))):(p=S,!t&&S||(S="error",t<0&&(t=0))),w.status=t,w.statusText=(n||S)+"",u?v.resolveWith(m,[h,S,w]):v.rejectWith(m,[w,S,p]),w.statusCode(_),_=void 0,d&&g.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?h:p]),y.fireWith(m,[w,S]),d&&(g.trigger("ajaxComplete",[w,f]),--fe.active||fe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,a,o,s,l,u,c,d,h,p,f=fe.ajaxSetup({},n),m=f.context||f,g=f.context&&(m.nodeType||m.jquery)?fe(m):fe.event,v=fe.Deferred(),y=fe.Callbacks("once memory"),_=f.statusCode||{},b={},T={},S="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Mt.exec(o);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)w.always(e[w.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||S;return r&&r.abort(t),i(0,t),this}};if(v.promise(w),f.url=((t||f.url||Et.href)+"").replace(Rt,Et.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Ee)||[""],null==f.crossDomain){u=de.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=u.protocol+"//"+u.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=fe.param(f.data,f.traditional)),X(Ft,f,n,w),c)return w;for(h in(d=fe.event&&f.global)&&0==fe.active++&&fe.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Nt.test(f.type),a=f.url.replace(Pt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ot,"+")):(p=f.url.slice(a.length),f.data&&(f.processData||"string"==typeof f.data)&&(a+=(kt.test(a)?"&":"?")+f.data,delete f.data),!1===f.cache&&(a=a.replace(Lt,"$1"),p=(kt.test(a)?"&":"?")+"_="+Ct.guid+++p),f.url=a+p),f.ifModified&&(fe.lastModified[a]&&w.setRequestHeader("If-Modified-Since",fe.lastModified[a]),fe.etag[a]&&w.setRequestHeader("If-None-Match",fe.etag[a])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Ut+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(m,w,f)||c))return w.abort();if(S="abort",y.add(f.complete),w.done(f.success),w.fail(f.error),r=X(jt,f,n,w)){if(w.readyState=1,d&&g.trigger("ajaxSend",[w,f]),c)return w;f.async&&0<f.timeout&&(l=e.setTimeout(function(){w.abort("timeout")},f.timeout));try{c=!1,r.send(b,i)}catch(t){if(c)throw t;i(-1,t)}}else i(-1,"No Transport");return w},getJSON:function(e,t,n){return fe.get(e,t,n,"json")},getScript:function(e,t){return fe.get(e,void 0,t,"script")}}),fe.each(["get","post"],function(e,t){fe[t]=function(e,n,i,r){return ue(n)&&(r=r||i,i=n,n=void 0),fe.ajax(fe.extend({url:e,type:t,dataType:r,data:n,success:i},fe.isPlainObject(e)&&e))}}),fe.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),fe._evalUrl=function(e,t,n){return fe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){fe.globalEval(e,t,n)}})},fe.fn.extend({wrapAll:function(e){var t;return this[0]&&(ue(e)&&(e=e.call(this[0])),t=fe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ue(e)?this.each(function(t){fe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=fe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ue(e);return this.each(function(n){fe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){fe(this).replaceWith(this.childNodes)}),this}}),fe.expr.pseudos.hidden=function(e){return!fe.expr.pseudos.visible(e)},fe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},fe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Ht={0:200,1223:204},Vt=fe.ajaxSettings.xhr();le.cors=!!Vt&&"withCredentials"in Vt,le.ajax=Vt=!!Vt,fe.ajaxTransport(function(t){var n,i;if(le.cors||Vt&&!t.crossDomain)return{send:function(r,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(o,r[o]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Ht[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(r){if(n)throw r}},abort:function(){n&&n()}}}),fe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),fe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return fe.globalEval(e),e}}}),fe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),fe.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=fe("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),de.head.appendChild(t[0])},abort:function(){n&&n()}}});var qt,$t=[],Wt=/(=)\?(?=&|$)|\?\?/;fe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||fe.expando+"_"+Ct.guid++;return this[e]=!0,e}}),fe.ajaxPrefilter("json jsonp",function(t,n,i){var r,a,o,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=ue(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+r):!1!==t.jsonp&&(t.url+=(kt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||fe.error(r+" was not called"),o[0]},t.dataTypes[0]="json",a=e[r],e[r]=function(){o=arguments},i.always(function(){void 0===a?fe(e).removeProp(r):e[r]=a,t[r]&&(t.jsonpCallback=n.jsonpCallback,$t.push(r)),o&&ue(a)&&a(o[0]),o=a=void 0}),"script"}),le.createHTMLDocument=((qt=de.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qt.childNodes.length),fe.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(le.createHTMLDocument?((i=(t=de.implementation.createHTMLDocument("")).createElement("base")).href=de.location.href,t.head.appendChild(i)):t=de),a=!n&&[],(r=_e.exec(e))?[t.createElement(r[1])]:(r=b([e],t,a),a&&a.length&&fe(a).remove(),fe.merge([],r.childNodes)));var i,r,a},fe.fn.load=function(e,t,n){var i,r,a,o=this,s=e.indexOf(" ");return-1<s&&(i=$(e.slice(s)),e=e.slice(0,s)),ue(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<o.length&&fe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,o.html(i?fe("<div>").append(fe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},fe.expr.pseudos.animated=function(e){return fe.grep(fe.timers,function(t){return e===t.elem}).length},fe.offset={setOffset:function(e,t,n){var i,r,a,o,s,l,u=fe.css(e,"position"),c=fe(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),a=fe.css(e,"top"),l=fe.css(e,"left"),("absolute"===u||"fixed"===u)&&-1<(a+l).indexOf("auto")?(o=(i=c.position()).top,r=i.left):(o=parseFloat(a)||0,r=parseFloat(l)||0),ue(t)&&(t=t.call(e,n,fe.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):c.css(d)}},fe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){fe.offset.setOffset(this,e,t)});var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===fe.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===fe.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=fe(e).offset()).top+=fe.css(e,"borderTopWidth",!0),r.left+=fe.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-fe.css(i,"marginTop",!0),left:t.left-r.left-fe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===fe.css(e,"position");)e=e.offsetParent;return e||je})}}),fe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;fe.fn[e]=function(i){return xe(this,function(e,i,r){var a;if(ce(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===r)return a?a[t]:e[i];a?a.scrollTo(n?a.pageXOffset:r,n?r:a.pageYOffset):e[i]=r},e,i,arguments.length)}}),fe.each(["top","left"],function(e,t){fe.cssHooks[t]=L(le.pixelPosition,function(e,n){if(n)return n=P(e,t),et.test(n)?fe(e).position()[t]+"px":n})}),fe.each({Height:"height",Width:"width"},function(e,t){fe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){fe.fn[i]=function(r,a){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===a?"margin":"border");return xe(this,function(t,n,r){var a;return ce(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===r?fe.css(t,n,s):fe.style(t,n,r,s)},t,o?r:void 0,o)}})}),fe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){fe.fn[t]=function(e){return this.on(t,e)}}),fe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),fe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){fe.fn[t]=function(e,n){return 0<arguments.length?this.on(t,null,e,n):this.trigger(t)}});var zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;fe.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),ue(e))return i=Z.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(Z.call(arguments)))}).guid=e.guid=e.guid||fe.guid++,r},fe.holdReady=function(e){e?fe.readyWait++:fe.ready(!0)},fe.isArray=Array.isArray,fe.parseJSON=JSON.parse,fe.nodeName=a,fe.isFunction=ue,fe.isWindow=ce,fe.camelCase=p,fe.type=i,fe.now=Date.now,fe.isNumeric=function(e){var t=fe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},fe.trim=function(e){return null==e?"":(e+"").replace(zt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return fe});var Yt=e.jQuery,Gt=e.$;return fe.noConflict=function(t){return e.$===fe&&(e.$=Gt),t&&e.jQuery===fe&&(e.jQuery=Yt),fe},void 0===t&&(e.jQuery=e.$=fe),fe}),define("utils/jqDomUtils",["jquery"],function(e){"use strict";var t=e.fn.append,n=e.fn.prepend,i=e.fn.remove;e.fn.append=function(){var e=t.apply(this,arguments);return this.trigger("domchange",this),e},e.fn.prepend=function(){var e=n.apply(this,arguments);return this.trigger("domchange",this),e},e.fn.remove=function(){return this.trigger("domchange",this),i.apply(this,arguments)}}),define("utils/globalElements",["jquery"],function(e){"use strict";return{doc:e(document),win:e(window),html:e("html"),body:e("body"),scrollTarget:e("html, body")}}),define("managers/eventManager",[],function(){"use strict";function e(){var e,t,n;e=this,t={listeners:{}},n={addListener:function(e,n){return t.listeners[e]||(t.listeners[e]=[]),t.listeners[e].push(n),n},removeListener:function(e,n){var i,r=t.listeners[e];if(r)for(i=r.length;i>=0;i-=1)if(r[i]===n)return r.splice(i,1)[0]},emit:function(e){var n=t.listeners[e],i=n?n.length:null,r=0;if(n&&i)for(;r<i;)n[r++].apply(this,Array.prototype.slice.call(arguments,1))}},e.addListener=n.addListener,e.removeListener=n.removeListener,e.emit=n.emit}return new e}),function(e){"function"==typeof define&&define.amd?define("easing",["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}e.easing.jswing=e.easing.swing;var n=Math.pow,i=Math.sqrt,r=Math.sin,a=Math.cos,o=Math.PI,s=1.70158,l=1.525*s,u=2*o/3,c=2*o/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-n(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-n(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-n(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-n(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-n(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-n(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-n(-2*e+2,5)/2},easeInSine:function(e){return 1-a(e*o/2)},easeOutSine:function(e){return r(e*o/2)},easeInOutSine:function(e){return-(a(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:n(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-n(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?n(2,20*e-10)/2:(2-n(2,-20*e+10))/2},easeInCirc:function(e){return 1-i(1-n(e,2))},easeOutCirc:function(e){return i(1-n(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-i(1-n(2*e,2)))/2:(i(1-n(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-n(2,10*e-10)*r((10*e-10.75)*u)},easeOutElastic:function(e){return 0===e?0:1===e?1:n(2,-10*e)*r((10*e-.75)*u)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-n(2,20*e-10)*r((20*e-11.125)*c)/2:n(2,-20*e+10)*r((20*e-11.125)*c)/2+1},easeInBack:function(e){return 2.70158*e*e*e-s*e*e},easeOutBack:function(e){return 1+2.70158*n(e-1,3)+s*n(e-1,2)},easeInOutBack:function(e){return e<.5?n(2*e,2)*(7.189819*e-l)/2:(n(2*e-2,2)*((l+1)*(2*e-2)+l)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return e<.5?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})}),function(e){"function"==typeof define&&define.amd?define("mousewheel",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var o=t||window.event,s=l.call(arguments,1),u=0,d=0,h=0,p=0,f=0,m=0;if(t=e.event.fix(o),t.type="mousewheel","detail"in o&&(h=-1*o.detail),"wheelDelta"in o&&(h=o.wheelDelta),"wheelDeltaY"in o&&(h=o.wheelDeltaY),"wheelDeltaX"in o&&(d=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(d=-1*h,h=0),u=0===h?d:h,"deltaY"in o&&(h=-1*o.deltaY,u=h),"deltaX"in o&&(d=o.deltaX,0===h&&(u=-1*d)),0!==h||0!==d){if(1===o.deltaMode){var g=e.data(this,"mousewheel-line-height");u*=g,h*=g,d*=g}else if(2===o.deltaMode){var v=e.data(this,"mousewheel-page-height");u*=v,h*=v,d*=v}if(p=Math.max(Math.abs(h),Math.abs(d)),(!a||p<a)&&(a=p,i(o,p)&&(a/=40)),i(o,p)&&(u/=40,d/=40,h/=40),u=Math[u>=1?"floor":"ceil"](u/a),d=Math[d>=1?"floor":"ceil"](d/a),h=Math[h>=1?"floor":"ceil"](h/a),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=t.clientX-y.left,m=t.clientY-y.top}return t.deltaX=d,t.deltaY=h,t.deltaFactor=a,t.offsetX=f,t.offsetY=m,t.deltaMode=0,s.unshift(t,u,d,h),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){a=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var r,a,o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=o.length;u;)e.event.fixHooks[o[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("utils/functionUtil",[],function(){"use strict";var e={};return e.debounce=function(e,t,n){var i,r;return t||(t=100),function(){var a=this,o=arguments,s=function(){i=null,n||(r=e.apply(a,o))},l=n&&!i;return clearTimeout(i),i=setTimeout(s,t),l&&(r=e.apply(a,o)),r}},e.throttle=function(t,n,i){var r,a,o,s,l=null,u=0;return i||(i={}),s=function(){u=!1===i.leading?0:e.now(),l=null,o=t.apply(r,a),l||(r=a=null)},function(){var c,d=e.now();return u||!1!==i.leading||(u=d),c=n-(d-u),r=this,a=arguments,c<=0||c>n?(l&&(clearTimeout(l),l=null),u=d,o=t.apply(r,a),l||(r=a=null)):l||!1===i.trailing||(l=setTimeout(s,c)),o}},e.now=Date.now||function(){return(new Date).getTime()},e}),define("services/AnchorLinkObserver",["jquery","managers/eventManager"],function(e,t){"use strict";var n=function(i){var r,a,o,s;r=e.extend({$e:null,selector:"body"},i),a={name:"AnchorLinkObserver",$e:r.$e||e(r.selector)},o={init:function(){a.$e.on("click",'a[href^="#"]',s.anchorLinkClick),a.$e.on("click","a[href]",s.hrefLinkClick)}},s={anchorLinkClick:function(i){var r,o;r=e(this.hash,a.$e),1===r.length&&(i.preventDefault(),o={hash:this.hash,$anchor:e(this),$target:r},t.emit(n.eventTypes.ANCHOR_CLICK,o))},hrefLinkClick:function(i){var r,a;a=this.href,a.length&&!this.hash.length&&(r={href:a,$anchor:e(this),event:i},t.emit(n.eventTypes.HREF_CLICK,r))}},o.init()};return n.eventTypes={ANCHOR_CLICK:"anchorLinkClick",HREF_CLICK:"hrefLinkClick"},n.on={hrefLinkClick:function(e){t.addListener(n.eventTypes.HREF_CLICK,e)}},n}),define("services/scroller",["jquery","easing","mousewheel","utils/functionUtil","utils/globalElements","managers/eventManager","services/AnchorLinkObserver"],function(e,t,n,i,r,a,o){"use strict";return new function(t){var n,s,l,u,c,d,h;n=this,s=e.extend({scrollDuration:800,scrollEasing:"easeInOutCubic",compressedHeaderHeight:80},t),l={SCROLL:"scrollerScroll"},u={name:"Scroller",scrollTop:0,isWheeling:!1,wheelingTimeout:null},c={win:r.win,doc:r.doc,scrollTarget:r.scrollTarget},d={init:function(){d.updateScrollTop(),c.doc.on("scroll",h.scroll),c.doc.on("mousewheel",h.mousewheel),a.addListener(o.eventTypes.ANCHOR_CLICK,h.anchorLinkClick)},scrollToYPos:function(t,n){var i=!1;c.scrollTarget.stop(!0,!1).animate({scrollTop:t},{duration:s.scrollDuration,easing:s.scrollEasing,complete:function(){e.isFunction(n)&&!i&&(i=!0,n())}})},scrollToElement:function(e,t){var n=e.offset().top-s.compressedHeaderHeight;return d.scrollToYPos(n,t)},getScrollTarget:function(){return c.scrollTarget},getScrollTop:function(){return u.scrollTop},updateScrollTop:function(){u.scrollTop=c.doc.scrollTop()},handleScrollOrMousewheelEvent:i.throttle(function(){d.updateScrollTop(),a.emit(l.SCROLL,{scrollTop:u.scrollTop})},75),onScroll:function(e){return a.addListener(l.SCROLL,e)},offScroll:function(e){return a.removeListener(l.SCROLL,e)}},h={scroll:function(){u.isWheeling||d.handleScrollOrMousewheelEvent()},mousewheel:function(){u.isWheeling=!0,u.wheelingTimeout&&clearTimeout(u.wheelingTimeout),u.wheelingTimeout=setTimeout(function(){u.isWheeling=!1},100),d.handleScrollOrMousewheelEvent()},anchorLinkClick:function(e){var t=e.$target,n=t.attr("id");d.scrollToElement(t,function(){n&&t.removeAttr("id"),window.location.hash=e.hash,n&&t.attr("id",n)})}},n.o=s,n.eventTypes=l,n.scrollToYPos=d.scrollToYPos,n.scrollToElement=d.scrollToElement,n.getScrollTarget=d.getScrollTarget,n.getScrollTop=d.getScrollTop,n.onScroll=d.onScroll,n.offScroll=d.offScroll,d.init()}}),define("services/layout",["jquery","utils/functionUtil","utils/globalElements","managers/eventManager"],function(e,t,n,i){"use strict";return new function(r){var a,o,s,l,u,c,d,h;a=this,e.extend({},r),o={RESIZE:"layoutResize"},s={FULL:{columnCount:4,columnUnitCount:4,minWidth:1081},MEDIUM:{columnCount:3,columnUnitCount:4,maxWidth:1080,minWidth:761},SMALL:{columnCount:2,columnUnitCount:4,maxWidth:760,minWidth:421},TINY:{columnCount:1,columnUnitCount:4,maxWidth:420}},l={BASE_UNIT:10},u={name:"Layout",info:null},c={win:n.win},d={init:function(){d.updateInfo(),c.win.on("resize",h.resize)},updateInfo:function(){var e=c.win,t=e.width(),n=e.height(),i=d.deriveBreakpoint(t),r=d.deriveColumnWidth(t,i),a=d.deriveColumnUnit(r,i);u.info={width:t,height:n,breakpoint:i,columnWidth:r,columnUnit:a}},deriveBreakpoint:function(t){var n;return e.each(s,function(e,i){if(i.minWidth){if(t>=i.minWidth){if(!i.maxWidth)return n=i,!1;if(t<=i.maxWidth)return n=i,!1}}else if(i.maxWidth&&t<=i.maxWidth)return n=i,!1}),n},deriveColumnWidth:function(e,t){return Math.ceil(e/t.columnCount)},deriveColumnUnit:function(e,t){return Math.ceil(e/t.columnUnitCount)},getInfo:function(){return u.info},onResize:function(e){return i.addListener(o.RESIZE,e)},offResize:function(e){return i.removeListener(o.RESIZE,e)},trigger:function(){d.updateInfo(),i.emit(o.RESIZE,u.info)},breakpointIs:function(e){return u.info.breakpoint===s[e]},getFullWidth:function(){var e,t,n;return e=u.info.breakpoint,t=u.info.columnWidth,n=e.columnCount,t*n},getColumnWidth:function(){return u.info.columnWidth},hasTouchSupport:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}},h={resize:t.debounce(function(){d.trigger()},25)},a.eventTypes=o,
a.breakpoints=s,a.dimensions=l,a.getInfo=d.getInfo,a.onResize=d.onResize,a.offResize=d.offResize,a.trigger=d.trigger,a.breakpointIs=d.breakpointIs,a.getFullWidth=d.getFullWidth,a.getColumnWidth=d.getColumnWidth,a.hasTouchSupport=d.hasTouchSupport,d.init()}}),define("utils/statesUtil",["jquery"],function(e){"use strict";var t={};return t.markup={READY:"state-ready",ACTIVE:"state-active",INACTIVE:"state-inactive",OPEN:"state-open",CLOSED:"state-closed",SELECTED:"state-selected",CURRENT:"state-current",HIGHLIGHT:"state-highlight",FOCUS:"state-focus",BLUR:"state-blur",HOVER:"state-hover",HAS_VALUE:"state-has-value",PLACEHOLDER:"state-placeholder",SHOW:"state-show",HIDE:"state-hide",VISIBLE:"state-visible",INVISIBLE:"state-invisible",DISABLED:"state-disabled",ENABLED:"state-enabled",INVALID:"state-invalid",VALID:"state-valid",COLLAPSE:"state-collapse",EXPAND:"state-expand",INITED:"state-inited",SETUP:"state-setup",FULL_SCREEN:"state-full-screen",PROCESSING:"state-processing"},t.extend=function(n){var i={};e.extend(i,t.markup,n),e.extend(n,i)},t.m=t.markup,t}),define("ui/Header",["jquery","utils/globalElements","managers/eventManager","services/scroller","services/layout","utils/statesUtil"],function(e,t,n,i,r,a){"use strict";var o=function(a){var s,l,u,c,d,h;s=this,l=e.extend({$e:null,selector:""},a),u=o.markup,c={name:"Header",$e:l.$e||e(l.selector),compressThreshold:null,isCompressed:null},t.win,d={init:function(){c.isCompressed=c.$e.hasClass(u.COMPRESSED),d.updateFromDimensions(r.getInfo()),c.$e.on("click",".global-header-nav a[data-target]",h.targetNavLinkClick),i.onScroll(h.scroll),r.onResize(h.resize)},destroy:function(){c.$e.off("click",".global-header-nav a[data-target]",h.targetNavLinkClick),i.offScroll(h.scroll),r.offResize(h.resize)},updateFromDimensions:function(e){c.compressThreshold=e.height/3,d.updatePositionState(i.getScrollTop())},updatePositionState:function(e){c.isCompressed?e<c.compressThreshold&&(c.$e.removeClass(u.COMPRESSED),c.isCompressed=!1):e>=c.compressThreshold&&(c.$e.addClass(u.COMPRESSED),c.isCompressed=!0)},isCompressed:function(){return c.isCompressed}},h={targetNavLinkClick:function(t){var i,r;t.preventDefault(),i=e(this).data("target"),r={target:i},n.emit(o.eventTypes.TARGET_NAV_ITEM_CLICK,r)},scroll:function(e){d.updatePositionState(e.scrollTop)},resize:function(e){d.updateFromDimensions(e)}},s.isCompressed=d.isCompressed,s.destroy=d.destroy,d.init()};return o.eventTypes={TARGET_NAV_ITEM_CLICK:"headerTargetNavItemClick"},o.markup={COMPRESSED:"state-compressed"},a.extend(o.markup),o}),define("utils/keycodes",{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}),define("ui/Drawer",["jquery","utils/globalElements","managers/eventManager","ui/Header","utils/keycodes","utils/statesUtil"],function(e,t,n,i,r,a){"use strict";var o=function(a){var s,l,u,c,d,h,p;s=this,l=e.extend({$e:null,selector:""},a),u=o.markup,c={name:"Drawer",$e:l.$e||e(l.selector),currentPane:null},d={body:t.body,panes:e(".global-drawer-pane",c.$e)},h={init:function(){n.addListener(i.eventTypes.TARGET_NAV_ITEM_CLICK,p.headerTargetNavItemClick),c.$e.on("keydown",p.keydown)},destroy:function(){n.removeListener(i.eventTypes.TARGET_NAV_ITEM_CLICK,p.headerTargetNavItemClick),c.$e.off("keydown",p.keydown)},activatePane:function(e){var t;c.currentPane&&(d.body.removeClass(u.GLOBAL_DRAWER_PANE_PREFIX+c.currentPane),d.panes.removeClass(u.CURRENT)),e?(t=d.panes.filter('[data-pane="'+e+'"]'),t.addClass(u.CURRENT),c.currentPane=e,d.body.addClass(u.GLOBAL_DRAWER_PANE_PREFIX+e),h.setPaneFocus(t)):c.currentPane=null},setPaneFocus:function(e){var t=e.find("input:visible:first");t.length>0?t.focus():c.$e.focus()},open:function(e){h.activatePane(e),d.body.addClass(u.GLOBAL_DRAWER_OPEN)},close:function(){d.body.removeClass(u.GLOBAL_DRAWER_OPEN),h.activatePane(null)},isOpen:function(){return d.body.hasClass(u.GLOBAL_DRAWER_OPEN)}},p={headerTargetNavItemClick:function(e){var t,n;t=e.target,n=c.currentPane,h.isOpen()&&n&&n===t?h.close():h.open(t)},keydown:function(e){e.which===r.ESCAPE&&h.isOpen()&&h.close()}},s.destroy=h.destroy,h.init()};return o.markup={GLOBAL_DRAWER_OPEN:"state-drawer-open",GLOBAL_DRAWER_PANE_PREFIX:"state-drawer-pane-",CURRENT:"state-current"},a.extend(o.markup),o}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("handlebars",[],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(){var e=v();return e.compile=function(t,n){return c.compile(t,n,e)},e.precompile=function(t,n){return c.precompile(t,n,e)},e.AST=l.default,e.Compiler=c.Compiler,e.JavaScriptCompiler=h.default,e.Parser=u.parser,e.parse=u.parse,e.parseWithoutProcessing=u.parseWithoutProcessing,e}var r=n(1).default;t.__esModule=!0;var a=n(2),o=r(a),s=n(45),l=r(s),u=n(46),c=n(51),d=n(52),h=r(d),p=n(49),f=r(p),m=n(44),g=r(m),v=o.default.create,y=i();y.create=i,g.default(y),y.Visitor=f.default,y.default=y,t.default=y,e.exports=t.default},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict";function i(){var e=new s.HandlebarsEnvironment;return p.extend(e,s),e.SafeString=u.default,e.Exception=d.default,e.Utils=p,e.escapeExpression=p.escapeExpression,e.VM=m,e.template=function(t){return m.template(t,e)},e}var r=n(3).default,a=n(1).default;t.__esModule=!0;var o=n(4),s=r(o),l=n(37),u=a(l),c=n(6),d=a(c),h=n(5),p=r(h),f=n(38),m=r(f),g=n(44),v=a(g),y=i();y.create=i,v.default(y),y.default=y,t.default=y,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__esModule=!0},function(e,t,n){"use strict";function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var r=n(1).default;t.__esModule=!0,t.HandlebarsEnvironment=i;var a=n(5),o=n(6),s=r(o),l=n(10),u=n(30),c=n(32),d=r(c),h=n(33);t.VERSION="4.7.7";t.COMPILER_REVISION=8;t.LAST_COMPATIBLE_COMPILER_REVISION=7;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};t.REVISION_CHANGES=p;var f="[object Object]";i.prototype={constructor:i,logger:d.default,log:d.default.log,registerHelper:function(e,t){if(a.toString.call(e)===f){if(t)throw new s.default("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===f)a.extend(this.partials,e);else{if(void 0===t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===f){if(t)throw new s.default("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){h.resetLoggedProperties()}};var m=d.default.log;t.log=m,t.createFrame=a.createFrame,t.logger=d.default},function(e,t){"use strict";function n(e){return c[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function r(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function a(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(d,n):e}function o(e){return!e&&0!==e||!(!m(e)||0!==e.length)}function s(e){var t=i({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=i,t.indexOf=r,t.escapeExpression=a,t.isEmpty=o,t.createFrame=s,t.blockParams=l,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,h=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=f;var m=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=m},function(e,t,n){"use strict";function i(e,t){var n=t&&t.loc,o=void 0,s=void 0,l=void 0,u=void 0;n&&(o=n.start.line,s=n.end.line,l=n.start.column,u=n.end.column,e+=" - "+o+":"+l);for(var c=Error.prototype.constructor.call(this,e),d=0;d<a.length;d++)this[a[d]]=c[a[d]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=o,this.endLineNumber=s,r?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=l,this.endColumn=u))}catch(e){}}var r=n(7).default;t.__esModule=!0;var a=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];i.prototype=new Error,t.default=i,e.exports=t.default},function(e,t,n){e.exports={default:n(8),__esModule:!0}},function(e,t,n){var i=n(9);e.exports=function(e,t,n){return i.setDesc(e,t,n)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";function i(e){s.default(e),u.default(e),d.default(e),p.default(e),m.default(e),v.default(e),_.default(e)}function r(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])}var a=n(1).default;t.__esModule=!0,t.registerDefaultHelpers=i,t.moveHelperToHooks=r;var o=n(11),s=a(o),l=n(12),u=a(l),c=n(25),d=a(c),h=n(26),p=a(h),f=n(27),m=a(f),g=n(28),v=a(g),y=n(29),_=a(y)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(5);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,a=n.fn;if(!0===t)return a(this);if(!1===t||null==t)return r(this);if(i.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=i.createFrame(n.data);o.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)})},e.exports=t.default},function(e,t,n){(function(i){"use strict";var r=n(13).default,a=n(1).default;t.__esModule=!0;var o=n(5),s=n(6),l=a(s);t.default=function(e){e.registerHelper("each",function(e,t){function n(t,n,i){d&&(d.key=t,d.index=n,d.first=0===n,d.last=!!i,h&&(d.contextPath=h+t)),c+=a(e[t],{data:d,blockParams:o.blockParams([e[t],t],[h+t,null])})}if(!t)throw new l.default("Must pass iterator to #each");var a=t.fn,s=t.inverse,u=0,c="",d=void 0,h=void 0;if(t.data&&t.ids&&(h=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(d=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var p=e.length;u<p;u++)u in e&&n(u,u,u===e.length-1);else if(i.Symbol&&e[i.Symbol.iterator]){for(var f=[],m=e[i.Symbol.iterator](),g=m.next();!g.done;g=m.next())f.push(g.value);e=f;for(var p=e.length;u<p;u++)n(u,u,u===e.length-1)}else!function(){var t=void 0;r(e).forEach(function(e){void 0!==t&&n(t,u-1),t=e,u++}),void 0!==t&&n(t,u-1,!0)}();return 0===u&&(c=s(this)),c})},e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){e.exports={default:n(14),__esModule:!0}},function(e,t,n){n(15),e.exports=n(21).Object.keys},function(e,t,n){var i=n(16);n(18)("keys",function(e){return function(t){return e(i(t))}})},function(e,t,n){var i=n(17);e.exports=function(e){return Object(i(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var i=n(19),r=n(21),a=n(24);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],o={};o[e]=t(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},function(e,t,n){var i=n(20),r=n(21),a=n(22),o="prototype",s=function(e,t,n){var l,u,c,d=e&s.F,h=e&s.G,p=e&s.S,f=e&s.P,m=e&s.B,g=e&s.W,v=h?r:r[t]||(r[t]={}),y=h?i:p?i[t]:(i[t]||{})[o];h&&(n=t);for(l in n)(u=!d&&y&&l in y)&&l in v||(c=u?y[l]:n[l],v[l]=h&&"function"!=typeof y[l]?n[l]:m&&u?a(c,i):g&&y[l]==c?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[o]=e[o],t}(c):f&&"function"==typeof c?a(Function.call,c):c,f&&((v[o]||(v[o]={}))[l]=c))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,e.exports=s},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(23);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var i=n(1).default;t.__esModule=!0;var r=n(6),a=i(r);t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,n){"use strict";var i=n(1).default;t.__esModule=!0;var r=n(5),a=n(6),o=i(a);t.default=function(e){e.registerHelper("if",function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,n){return e?n.lookupProperty(e,t):e})},e.exports=t.default},function(e,t,n){"use strict";var i=n(1).default;t.__esModule=!0;var r=n(5),a=n(6),o=i(a);t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=r.createFrame(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default},function(e,t,n){"use strict";function i(e){o.default(e)}var r=n(1).default;t.__esModule=!0,t.registerDefaultDecorators=i;var a=n(31),o=r(a)},function(e,t,n){"use strict";t.__esModule=!0;var i=n(5);t.default=function(e){e.registerDecorator("inline",function(e,t,n,r){var a=e;return t.partials||(t.partials={},a=function(r,a){var o=n.partials;n.partials=i.extend({},o,t.partials);var s=e(r,a);return n.partials=o,s}),t.partials[r.args[0]]=r.fn,a})},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var i=n(5),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=i.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];console[t].apply(console,i)}}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=l(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=l(null);return n.__proto__=!1,{properties:{whitelist:d.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:d.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}}function r(e,t,n){return"function"==typeof e?a(t.methods,n):a(t.properties,n)}function a(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(o(t),!1)}function o(e){!0!==f[e]&&(f[e]=!0,p.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}function s(){u(f).forEach(function(e){delete f[e]})}var l=n(34).default,u=n(13).default,c=n(3).default;t.__esModule=!0,t.createProtoAccessControl=i,t.resultIsAllowed=r,t.resetLoggedProperties=s;var d=n(36),h=n(32),p=c(h),f=l(null)},function(e,t,n){e.exports={default:n(35),__esModule:!0}},function(e,t,n){var i=n(9);e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.extend.apply(void 0,[r(null)].concat(t))}var r=n(34).default;t.__esModule=!0,t.createNewLookupObject=i;var a=n(5)},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=T.COMPILER_REVISION;if(!(t>=T.LAST_COMPATIBLE_COMPILER_REVISION&&t<=T.COMPILER_REVISION)){if(t<T.LAST_COMPATIBLE_COMPILER_REVISION){var i=T.REVISION_CHANGES[n],r=T.REVISION_CHANGES[t];throw new b.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new b.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){function n(n,i,r){r.hash&&(i=y.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,r);var a=y.extend({},r,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=t.VM.invokePartial.call(this,n,i,a);if(null==o&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),o=r.partials[r.name](i,a)),null!=o){if(r.indent){for(var s=o.split("\n"),l=0,u=s.length;l<u&&(s[l]||l+1!==u);l++)s[l]=r.indent+s[l];o=s.join("\n")}return o}throw new b.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(t){function n(t){return""+e.main(o,t,o.helpers,o.partials,a,l,s)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=r.data;i._setup(r),!r.partial&&e.useData&&(a=u(t,a));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(n=c(e.main,n,o,r.depths||[],a,l))(t,r)}if(!t)throw new b.default("No environment passed to template");if(!e||!e.main)throw new b.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r=e.compiler&&7===e.compiler[0],o={strict:function(e,t,n){if(!(e&&t in e))throw new b.default('"'+t+'" not defined in '+e,{loc:n});return o.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n?n:Object.prototype.hasOwnProperty.call(e,t)?n:E.resultIsAllowed(n,o.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++){if(null!=(e[i]&&o.lookupProperty(e[i],t)))return e[i][t]}},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:y.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,r){var o=this.programs[e],s=this.fn(e);return t||r||i||n?o=a(this,e,s,t,n,i,r):o||(o=this.programs[e]=a(this,e,s)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=y.extend({},t,e)),n},nullContext:p({}),noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){if(n.partial)o.protoAccessControl=n.protoAccessControl,o.helpers=n.helpers,o.partials=n.partials,o.decorators=n.decorators,o.hooks=n.hooks;else{var i=y.extend({},t.helpers,n.helpers);d(i,o),o.helpers=i,e.usePartial&&(o.partials=o.mergeIfNeeded(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(o.decorators=y.extend({},t.decorators,n.decorators)),o.hooks={},o.protoAccessControl=E.createProtoAccessControl(n);var a=n.allowCallsToHelperMissing||r;S.moveHelperToHooks(o,"helperMissing",a),S.moveHelperToHooks(o,"blockHelperMissing",a)}},i._child=function(t,n,i,r){if(e.useBlockParams&&!i)throw new b.default("must pass block params");if(e.useDepths&&!r)throw new b.default("must pass parent depths");return a(o,t,e[t],n,0,i,r)},i}function a(e,t,n,i,r,a,o){function s(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,a&&[r.blockParams].concat(a),s)}return s=c(n,s,e,o,i,a),s.program=t,s.depth=o?o.length:0,s.blockParams=r||0,s}function o(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function s(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==l&&function(){n.data=T.createFrame(n.data);var e=n.fn;r=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=T.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=y.extend({},n.partials,e.partials))}(),void 0===e&&r&&(e=r),void 0===e)throw new b.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?T.createFrame(t):{},t.root=e),t}function c(e,t,n,i,r,a){if(e.decorator){var o={};t=e.decorator(t,o,n,i&&i[0],r,a,i),y.extend(t,o)}return t}function d(e,t){f(e).forEach(function(n){var i=e[n];e[n]=h(i,t)})}function h(e,t){var n=t.lookupProperty;return w.wrapHelper(e,function(e){return y.extend({lookupProperty:n},e)})}var p=n(39).default,f=n(13).default,m=n(3).default,g=n(1).default;t.__esModule=!0,t.checkRevision=i,t.template=r,t.wrapProgram=a,t.resolvePartial=o,t.invokePartial=s,t.noop=l;var v=n(5),y=m(v),_=n(6),b=g(_),T=n(4),S=n(10),w=n(43),E=n(33)},function(e,t,n){e.exports={default:n(40),__esModule:!0}},function(e,t,n){n(41),e.exports=n(21).Object.seal},function(e,t,n){var i=n(42);n(18)("seal",function(e){return function(t){return e&&i(t)?e(t):t}})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";function n(e,t){return"function"!=typeof e?e:function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}t.__esModule=!0,t.wrapHelper=n},function(e,t){(function(n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,i=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=i),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t){"use strict";t.__esModule=!0;var n={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!n.helpers.scopedId(e)&&!e.depth}}};t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){return"Program"===e.type?e:(l.default.yy=f,f.locInfo=function(e){return new f.SourceLocation(t&&t.srcName,e)},l.default.parse(e))}function r(e,t){var n=i(e,t);return new c.default(t).accept(n)}var a=n(1).default,o=n(3).default;t.__esModule=!0,t.parseWithoutProcessing=i,t.parse=r;var s=n(47),l=a(s),u=n(48),c=a(u),d=n(50),h=o(d),p=n(5);t.parser=l.default;var f={};p.extend(f,h)},function(e,t){"use strict";t.__esModule=!0;var n=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,n,i,r,a,o){var s=a.length-1;switch(r){case 1:return a[s-1];case 2:this.$=i.prepareProgram(a[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=a[s];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(a[s]),strip:i.stripFlags(a[s],a[s]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:a[s],value:a[s],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(a[s-2],a[s-1],a[s],this._$);break;case 12:this.$={path:a[s-3],params:a[s-2],hash:a[s-1]};break;case 13:this.$=i.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!1,this._$);break;case 14:this.$=i.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!0,this._$);break;case 15:this.$={open:a[s-5],path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:i.stripFlags(a[s-5],a[s])};break;case 16:case 17:this.$={path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:i.stripFlags(a[s-5],a[s])};break;case 18:this.$={strip:i.stripFlags(a[s-1],a[s-1]),program:a[s]};break;case 19:var l=i.prepareBlock(a[s-2],a[s-1],a[s],a[s],!1,this._$),u=i.prepareProgram([l],a[s-1].loc);u.chained=!0,this.$={strip:a[s-2].strip,program:u,chain:!0};break;case 20:this.$=a[s];break;case 21:this.$={path:a[s-1],strip:i.stripFlags(a[s-2],a[s])};break;case 22:case 23:this.$=i.prepareMustache(a[s-3],a[s-2],a[s-1],a[s-4],i.stripFlags(a[s-4],a[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:a[s-3],params:a[s-2],hash:a[s-1],indent:"",strip:i.stripFlags(a[s-4],a[s]),loc:i.locInfo(this._$)};break;case 25:this.$=i.preparePartialBlock(a[s-2],a[s-1],a[s],this._$);break;case 26:this.$={path:a[s-3],params:a[s-2],hash:a[s-1],strip:i.stripFlags(a[s-4],a[s])};break;case 27:case 28:this.$=a[s];break;case 29:this.$={type:"SubExpression",path:a[s-3],params:a[s-2],hash:a[s-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:a[s],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(a[s-2]),value:a[s],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(a[s-1]);break;case 33:case 34:this.$=a[s];break;case 35:this.$={type:"StringLiteral",value:a[s],original:a[s],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(a[s]),original:Number(a[s]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===a[s],original:"true"===a[s],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 40:case 41:this.$=a[s];break;case 42:this.$=i.preparePath(!0,a[s],this._$);break;case 43:this.$=i.preparePath(!1,a[s],this._$);break;case 44:a[s-2].push({part:i.id(a[s]),original:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 45:this.$=[{part:i.id(a[s]),original:a[s]}];break;case 46:this.$=[];break;case 47:a[s-1].push(a[s]);break;case 48:this.$=[];break;case 49:a[s-1].push(a[s]);break;case 50:this.$=[];break;case 51:a[s-1].push(a[s]);break;case 58:this.$=[];break;case 59:a[s-1].push(a[s]);break;case 64:this.$=[];break;case 65:a[s-1].push(a[s]);break;case 70:this.$=[];break;case 71:a[s-1].push(a[s]);break;case 78:this.$=[];break;case 79:a[s-1].push(a[s]);break;case 82:this.$=[];break;case 83:a[s-1].push(a[s]);break;case 86:this.$=[];break;case 87:a[s-1].push(a[s]);break;case 90:this.$=[];break;case 91:a[s-1].push(a[s]);break;case 94:this.$=[];break;case 95:a[s-1].push(a[s]);break;case 98:this.$=[a[s]];break;case 99:a[s-1].push(a[s]);break;case 100:this.$=[a[s]];break;case 101:a[s-1].push(a[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],
29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=this,n=[0],i=[null],r=[],a=this.table,o="",s=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;r.push(c);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,p,f,m,g,v,y,_,b,T={};;){if(f=n[n.length-1],this.defaultActions[f]?m=this.defaultActions[f]:(null!==h&&void 0!==h||(h=function(){var e;return e=t.lexer.lex()||1,"number"!=typeof e&&(e=t.symbols_[e]||e),e}()),m=a[f]&&a[f][h]),void 0===m||!m.length||!m[0]){var S="";if(!u){b=[];for(v in a[f])this.terminals_[v]&&v>2&&b.push("'"+this.terminals_[v]+"'");S=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+b.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:b})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+f+", token: "+h);switch(m[0]){case 1:n.push(h),i.push(this.lexer.yytext),r.push(this.lexer.yylloc),n.push(m[1]),h=null,p?(h=p,p=null):(l=this.lexer.yyleng,o=this.lexer.yytext,s=this.lexer.yylineno,c=this.lexer.yylloc,u>0&&u--);break;case 2:if(y=this.productions_[m[1]][1],T.$=i[i.length-y],T._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},d&&(T._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),void 0!==(g=this.performAction.call(T,o,l,s,this.yy,m[1],i,r)))return g;y&&(n=n.slice(0,-1*y*2),i=i.slice(0,-1*y),r=r.slice(0,-1*y)),n.push(this.productions_[m[1]][0]),i.push(T.$),r.push(T._$),_=a[n[n.length-2]][n[n.length-1]],n.push(_);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,r;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(!(n=this._input.match(this.rules[a[o]]))||t&&!(n[0].length>t[0].length)||(t=n,i=o,this.options.flex));o++);return t?(r=t[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function r(e,n){return t.yytext=t.yytext.substring(e,t.yyleng-n+e)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(r(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(t.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return t.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return t.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return t.yytext=t.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=e}function r(e,t,n){void 0===t&&(t=e.length);var i=e[t-1],r=e[t-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function a(e,t,n){void 0===t&&(t=-1);var i=e[t+1],r=e[t+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function o(e,t,n){var i=e[null==t?0:t+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function s(e,t,n){var i=e[null==t?e.length-1:t-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}var l=n(1).default;t.__esModule=!0;var u=n(49),c=l(u);i.prototype=new c.default,i.prototype.Program=function(e){var t=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=e.body,l=0,u=i.length;l<u;l++){var c=i[l],d=this.accept(c);if(d){var h=r(i,l,n),p=a(i,l,n),f=d.openStandalone&&h,m=d.closeStandalone&&p,g=d.inlineStandalone&&h&&p;d.close&&o(i,l,!0),d.open&&s(i,l,!0),t&&g&&(o(i,l),s(i,l)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(i[l-1].original)[1])),t&&f&&(o((c.program||c.inverse).body),s(i,l)),t&&m&&(o(i,l),s((c.inverse||c.program).body))}}return e},i.prototype.BlockStatement=i.prototype.DecoratorBlock=i.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,n=e.program&&e.inverse,i=n,l=n;if(n&&n.chained)for(i=n.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var u={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:a(t.body),closeStandalone:r((i||t).body)};if(e.openStrip.close&&o(t.body,null,!0),n){var c=e.inverseStrip;c.open&&s(t.body,null,!0),c.close&&o(i.body,null,!0),e.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&r(t.body)&&a(i.body)&&(s(t.body),o(i.body))}else e.closeStrip.open&&s(t.body,null,!0);return u},i.prototype.Decorator=i.prototype.MustacheStatement=function(e){return e.strip},i.prototype.PartialStatement=i.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(){this.parents=[]}function r(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function a(e){r.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function o(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var s=n(1).default;t.__esModule=!0;var l=n(6),u=s(l);i.prototype={constructor:i,mutating:!1,acceptKey:function(e,t){var n=this.accept(e[t]);if(this.mutating){if(n&&!i.prototype[n.type])throw new u.default('Unexpected node type "'+n.type+'" found when accepting '+t+" on "+e.type);e[t]=n}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new u.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,n=e.length;t<n;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,n--)},accept:function(e){if(e){if(!this[e.type])throw new u.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:r,Decorator:r,BlockStatement:a,DecoratorBlock:a,PartialStatement:o,PartialBlockStatement:function(e){o.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=i,e.exports=t.default},function(e,t,n){"use strict";function i(e,t){if(t=t.path?t.path.original:t,e.path.original!==t){var n={loc:e.path.loc};throw new g.default(e.path.original+" doesn't match "+t,n)}}function r(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function a(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e}function o(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(e,t,n){n=this.locInfo(n);for(var i=e?"@":"",r=[],a=0,o=0,s=t.length;o<s;o++){var l=t[o].part,u=t[o].original!==l;if(i+=(t[o].separator||"")+l,u||".."!==l&&"."!==l&&"this"!==l)r.push(l);else{if(r.length>0)throw new g.default("Invalid path: "+i,{loc:n});".."===l&&a++}}return{type:"PathExpression",data:e,depth:a,parts:r,original:i,loc:n}}function u(e,t,n,i,r,a){var o=i.charAt(3)||i.charAt(2),s="{"!==o&&"&"!==o;return{type:/\*/.test(i)?"Decorator":"MustacheStatement",path:e,params:t,hash:n,escaped:s,strip:r,loc:this.locInfo(a)}}function c(e,t,n,r){i(e,n),r=this.locInfo(r);var a={type:"Program",body:t,strip:{},loc:r};return{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:a,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}}function d(e,t,n,r,a,o){r&&r.path&&i(e,r);var s=/\*/.test(e.open);t.blockParams=e.blockParams;var l=void 0,u=void 0;if(n){if(s)throw new g.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),u=n.strip,l=n.program}return a&&(a=l,l=t,t=a),{type:s?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:l,openStrip:e.strip,inverseStrip:u,closeStrip:r&&r.strip,loc:this.locInfo(o)}}function h(e,t){if(!t&&e.length){var n=e[0].loc,i=e[e.length-1].loc;n&&i&&(t={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:e,strip:{},loc:t}}function p(e,t,n,r){return i(e,n),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}}var f=n(1).default;t.__esModule=!0,t.SourceLocation=r,t.id=a,t.stripFlags=o,t.stripComment=s,t.preparePath=l,t.prepareMustache=u,t.prepareRawBlock=c,t.prepareBlock=d,t.prepareProgram=h,t.preparePartialBlock=p;var m=n(6),g=f(m)},function(e,t,n){"use strict";function i(){}function r(e,t,n){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new d.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i=n.parse(e,t),r=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(r,t)}function a(e,t,n){function i(){var i=n.parse(e,t),r=(new n.Compiler).compile(i,t),a=(new n.JavaScriptCompiler).compile(r,t,void 0,!0);return n.template(a)}function r(e,t){return a||(a=i()),a.call(this,e,t)}if(void 0===t&&(t={}),null==e||"string"!=typeof e&&"Program"!==e.type)throw new d.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=h.extend({},t),"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var a=void 0;return r._setup=function(e){return a||(a=i()),a._setup(e)},r._child=function(e,t,n,r){return a||(a=i()),a._child(e,t,n,r)},r}function o(e,t){if(e===t)return!0;if(h.isArray(e)&&h.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}}function s(e){if(!e.path.parts){var t=e.path;e.path={type:"PathExpression",data:!1,depth:0,parts:[t.original+""],original:t.original+"",loc:t.loc}}}var l=n(34).default,u=n(1).default;t.__esModule=!0,t.Compiler=i,t.precompile=r,t.compile=a;var c=n(6),d=u(c),h=n(5),p=n(45),f=u(p),m=[].slice;i.prototype={compiler:i,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;n<t;n++){var i=this.opcodes[n],r=e.opcodes[n];if(i.opcode!==r.opcode||!o(i.args,r.args))return!1}t=this.children.length;for(var n=0;n<t;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=h.extend(l(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=new this.compiler,n=t.compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||n.usePartial,this.children[i]=n,this.useDepths=this.useDepths||n.useDepths,i},accept:function(e){if(!this[e.type])throw new d.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,n=t.length,i=0;i<n;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){s(e);var t=e.program,n=e.inverse;t=t&&this.compileProgram(t),n=n&&this.compileProgram(n);var i=this.classifySexpr(e);"helper"===i?this.helperSexpr(e,t,n):"simple"===i?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,n),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),n=this.setupFullMustacheParams(e,t,void 0),i=e.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var n=e.params;if(n.length>1)throw new d.default("Unsupported number of partial arguments: "+n.length,e);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=e.name.original,r="SubExpression"===e.name.type;r&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var a=e.indent||"";this.options.preventIndent&&a&&(this.opcode("appendContent",a),a=""),this.opcode("invokePartial",r,i,a),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){s(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,n){var i=e.path,r=i.parts[0],a=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",r,a)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),r=e.path,a=r.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",i.length,a);else{if(this.options.knownHelpersOnly)throw new d.default("You specified knownHelpersOnly, but used the unknown helper "+a,e);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",i.length,r.original,f.default.helpers.simpleId(r))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],n=f.default.helpers.scopedId(e),i=!e.depth&&!n&&this.blockParamIndex(t);i?this.opcode("lookupBlockParam",i,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,n):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,n=0,i=t.length;for(this.opcode("pushHash");n<i;n++)this.pushParam(t[n].value);for(;n--;)this.opcode("assignToHash",t[n].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:m.call(arguments,1),
loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=f.default.helpers.simpleId(e.path),n=t&&!!this.blockParamIndex(e.path.parts[0]),i=!n&&f.default.helpers.helperExpression(e),r=!n&&(i||t);if(r&&!i){var a=e.path.parts[0],o=this.options;o.knownHelpers[a]?i=!0:o.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,n=e.length;t<n;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var n=void 0;if(!e.parts||f.default.helpers.scopedId(e)||e.depth||(n=this.blockParamIndex(e.parts[0])),n){var i=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,n,i){var r=e.params;return this.pushParams(r),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.accept(e.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(e){for(var t=0,n=this.options.blockParams.length;t<n;t++){var i=this.options.blockParams[t],r=i&&h.indexOf(i,e);if(i&&r>=0)return[t,r]}}}},function(e,t,n){"use strict";function i(e){this.value=e}function r(){}function a(e,t,n,i){var r=t.popStack(),a=0,o=n.length;for(e&&o--;a<o;a++)r=t.nameLookup(r,n[a],i);return e?[t.aliasable("container.strict"),"(",r,", ",t.quotedString(n[a]),", ",JSON.stringify(t.source.currentLocation)," )"]:r}var o=n(13).default,s=n(1).default;t.__esModule=!0;var l=n(4),u=n(6),c=s(u),d=n(5),h=n(53),p=s(h);r.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=l.COMPILER_REVISION;return[e,l.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,n){return d.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:n?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,n,i){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var r=e.opcodes,a=void 0,o=void 0,s=void 0,l=void 0;for(s=0,l=r.length;s<l;s++)a=r[s],this.source.currentLocation=a.loc,o=o||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=o,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(i);if(this.isChild)return u;var d={compiler:this.compilerInfo(),main:u};this.decorators&&(d.main_d=this.decorators,d.useDecorators=!0);var h=this.context,p=h.programs,f=h.decorators;for(s=0,l=p.length;s<l;s++)p[s]&&(d[s]=p[s],f[s]&&(d[s+"_d"]=f[s],d.useDecorators=!0));return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),i?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName}),d.map=d.map&&d.map.toString()):d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new p.default(this.options.srcName),this.decorators=new p.default(this.options.srcName)},createFunctionContext:function(e){var t=this,n="",i=this.stackVars.concat(this.registers.list);i.length>0&&(n+=", "+i.join(", "));var r=0;o(this.aliases).forEach(function(e){var i=t.aliases[e];i.children&&i.referenceCount>1&&(n+=", alias"+ ++r+"="+e,i.children[0]="alias"+r)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(n);return e?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(e){var t=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,a=void 0,o=void 0;return this.source.each(function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,o=e):(a&&(r?a.prepend("buffer += "):i=!0,o.add(";"),a=o=void 0),r=!0,t||(n=!1))}),n?a?(a.prepend("return "),o.add(";")):r||this.source.push('return "";'):(e+=", buffer = "+(i?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(i?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(e,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(t,"call",n))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var n=this.topStack();t.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n,i){var r=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[r++])),this.resolvePath("context",e,r,t,n)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,n){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,n)},resolvePath:function(e,t,n,i,r){var o=this;if(this.options.strict||this.options.assumeObjects)return void this.push(a(this.options.strict&&r,this,t,e));for(var s=t.length;n<s;n++)this.replaceStack(function(r){var a=o.nameLookup(r,t[n],e);return i?[" && ",a]:[" != null ? ",a," : ",r]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var n=this.nameLookup("decorators",t,"decorator"),i=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(e,t,n){var i=this.popStack(),r=this.setupHelper(e,t),a=[];n&&a.push(r.name),a.push(i),this.options.strict||a.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(a,"||"),")"],s=this.source.functionCall(o,"call",r.callParams);this.push(s)},itemsSeparatedBy:function(e,t){var n=[];n.push(e[0]);for(var i=1;i<e.length;i++)n.push(t,e[i]);return n},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,e,t),r=this.lastHelper=this.nameLookup("helpers",e,"helper"),a=["(","(helper = ",r," || ",n,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",a,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(e,t,n){var i=[],r=this.setupParams(t,1,i);e&&(t=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",r.decorators="container.decorators",e?i.unshift(t):i.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(e){var t=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var a=this.hash;n&&(a.contexts[e]=n),i&&(a.types[e]=i),r&&(a.ids[e]=r),a.values[e]=t},pushId:function(e,t,n){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:r,compileChildren:function(e,t){for(var n=e.children,i=void 0,r=void 0,a=0,o=n.length;a<o;a++){i=n[a],r=new this.compiler;var s=this.matchExistingProgram(i);if(null==s){this.context.programs.push("");var l=this.context.programs.length;i.index=l,i.name="program"+l,this.context.programs[l]=r.compile(i,t,this.context,!this.precompile),this.context.decorators[l]=r.decorators,this.context.environments[l]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams,i.useDepths=this.useDepths,i.useBlockParams=this.useBlockParams}else i.index=s.index,i.name="program"+s.index,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;t<n;t++){var i=this.context.environments[t];if(i&&i.equals(e))return i}},programExpression:function(e){var t=this.environment.children[e],n=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof i||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],n=void 0,r=void 0,a=void 0;if(!this.isInline())throw new c.default("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof i)n=[o.value],t=["(",n],a=!0;else{r=!0;var s=this.incrStack();t=["((",this.push(s)," = ",o,")"],n=this.topStack()}var l=e.call(this,n);a||this.popStack(),r&&this.stackSlot--,this.push(t.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r instanceof i)this.compileStack.push(r);else{var a=this.incrStack();this.pushSource([a," = ",r,";"]),this.compileStack.push(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof i)return n.value;if(!t){if(!this.stackSlot)throw new c.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof i?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,n){var i=[];return{params:i,paramsInit:this.setupHelperArgs(t,e,i,n),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(i)}},setupParams:function(e,t,n){var i={},r=[],a=[],o=[],s=!n,l=void 0;s&&(n=[]),i.name=this.quotedString(e),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var u=this.popStack(),c=this.popStack();(c||u)&&(i.fn=c||"container.noop",i.inverse=u||"container.noop");for(var d=t;d--;)l=this.popStack(),n[d]=l,this.trackIds&&(o[d]=this.popStack()),this.stringParams&&(a[d]=this.popStack(),r[d]=this.popStack());return s&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(o)),this.stringParams&&(i.types=this.source.generateArray(a),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(e,t,n,i){var r=this.setupParams(e,t,n);return r.loc=JSON.stringify(this.source.currentLocation),r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):n?(n.push(r),""):r}},function(){for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),t=r.RESERVED_WORDS={},n=0,i=e.length;n<i;n++)t[e[n]]=!0}(),r.isValidJavaScriptVariableName=function(e){return!r.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=r,e.exports=t.default},function(e,t,n){"use strict";function i(e,t,n){if(o.isArray(e)){for(var i=[],r=0,a=e.length;r<a;r++)i.push(t.wrap(e[r],n));return i}return"boolean"==typeof e||"number"==typeof e?e+"":e}function r(e){this.srcFile=e,this.source=[]}var a=n(13).default;t.__esModule=!0;var o=n(5),s=void 0;s||(s=function(e,t,n,i){this.src="",i&&this.add(i)},s.prototype={add:function(e){o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,n=this.source.length;t<n;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new s(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof s?e:(e=i(e,this,t),new s(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,n){return n=this.generateList(n),this.wrap([e,t?"."+t+"(":"(",n,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,n=[];a(e).forEach(function(r){var a=i(e[r],t);"undefined"!==a&&n.push([t.quotedString(r),":",a])});var r=this.generateList(n);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),n=0,r=e.length;n<r;n++)n&&t.add(","),t.add(i(e[n],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}},t.default=r,e.exports=t.default}])}),define("utils/stringUtil",[],function(){"use strict";var e={};return e.camelCaseify=function(t){var n=t.split("-"),i=n.shift();return n=n.map(function(t){return e.capitalize(t)}),i+n.join("")},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.decapitalize=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},e.slugify=function(e){return $.trim(e.replace(/\W/g," ")).replace(/\s\s+/g," ").replace(/\s/g,"-").toLowerCase()},e}),define("factories/moduleFactory",["jquery","handlebars","utils/stringUtil","utils/statesUtil"],function(e,t,n,i){"use strict";return function(r){var a,o,s,l;return a={setup:function(){var e;return a.buildModule(),e=function(){r.internal.explicitInit||a.init()},"function"==typeof r.fn.afterSetup?r.fn.afterSetup(e):e(),o},init:function(){r.internal.$e.data(r.internal.name+"Inited")||("function"==typeof r.fn.beforeInit&&r.fn.beforeInit(),a.bindEvents(),a.applyInitedState(),r.fn.init(),"function"==typeof r.fn.afterInit&&r.fn.afterInit(),r.internal.$e.trigger("initComplete"))},isInited:function(){return r.internal.$e.hasClass(s.INITED)&&!!r.internal.$e.data(r.internal.name+"Inited")},buildModule:function(){var e;a.ensureRootEl(),r.internal.$e.length&&(e=n.decapitalize(r.internal.name)+"Instance",a.extend({fn:l,m:s}),a.getComponents(),a.getTemplates(),a.getModuleVariants(),a.extendModuleWithApi(),r.internal.$e.addClass(s.SETUP),r.internal.$e.data(e,r.self))},ensureRootEl:function(){r.internal.$e&&r.internal.$e.length||(r.internal.$e=r.o.$e||e(r.o.selector))},extend:function(t){return e.each(t,function(t,n){var i={};r[t]?(e.extend(!0,i,n,r[t]),e.extend(!0,r[t],i)):r[t]=n}),o},getComponents:function(){r&&r.internal.components&&e.each(r.internal.components,function(t,n){var i;i=a.getDomEl(n),i.length&&(r.elements[t]=i,n.constructor&&i.each(function(t,i){var r,a;r=e(i),r.hasClass(s.INITED)||(a=e.extend({$e:r},n.moduleOptions),new n.constructor(a))}))})},getTemplates:function(){r.internal.templates&&e.each(r.internal.templates,function(n,i){var o,s;o=a.getDomEl(i),"handlebars"===o.first().data("type")?s=t.compile(o.first().html()):(s=e(),o.each(function(t,n){s=s.add(e(n).html())})),("function"==typeof s||s.length)&&(r.templates[n]=s)})},getDomEl:function(t,n){var i,o,s,l,u,c;return n=n||{},i="find",o=t.selector,c=r.internal.$componentsRoot||r.internal.$e,0===o.indexOf("!")?(o=o.replace("!",""),u=e(o)):(0===o.indexOf("^")&&(o=o.replace("^",""),i="closest",s=o.split(" "),o=s[0],l=s.slice(1)),u=c[i](o),l&&l.length&&(u=u.find(l.join(" ")))),t.ignoreNested&&(u=a.removeNestedComponents(u,o)),t.directChildrenOnly&&(u=a.reduceToDirectChildren(u,r.o.selector)),u},removeNestedComponents:function(t,n){var i,r;return i=[],r=[],t.each(function(t,a){i.indexOf(a)<0&&(r.push(a),e(a).find(n).each(function(e,t){var n=r.indexOf(t);n>-1?r.splice(n,e):i.push(t)}),e.each(r,function(e,t){i.indexOf(t)>-1&&r.splice(e,1)}))}),e(r)},reduceToDirectChildren:function(t,n){var i;return i=[],t.each(function(t,a){var o;o=e(a).closest(n),o[0]===r.internal.$e[0]&&i.push(a)}),e(i)},getModuleVariants:function(){var e,t;r.internal.$e.length&&(e=r.internal.$e[0].className,t=e.match(/variant-([^\s]+)/g),r.internal.isVariant=r.internal.isVariant||{},t&&t.forEach(function(e){e=e.replace(/variant-/,""),e=n.camelCaseify(e),r.internal.isVariant[e]=!0}))},bindEvents:function(){r.internal.events&&e.each(r.internal.events,function(e,t){a.bindEvent(e,t)}),r.internal.$e.on("modremove."+r.internal.name,function(e,t){t===r.internal.$e[0]&&(a.destroy(),a.removeEl())})},bindEvent:function(t,n){var i,a,o,s,l,u,c;if(i=t.split(" "),a=i.shift(),o=i.slice(0),l=r.handlers[n],u=r.internal.$componentsRoot||r.internal.$e,o.length)if(0===o[0].indexOf("@")){if(s=o[0].replace("@",""),!r.internal.components[s])return;o[0]=r.internal.components[s].selector}else 0===o[0].indexOf("!")&&(c=o.shift().replace("!",""),u="window"===c?e(window):r.elements[c]);if(u){if(a.indexOf(".")<0&&(a=a+"."+r.internal.name),!e.isFunction(l))throw"[moduleFactory] : Event handler is with name "+n+" undefined. Module:"+r.internal.name;o.length?(u.off(a,o.join(" "),l),u.on(a,o.join(" "),l)):(u.off(a,l),u.on(a,l))}},unbindEvents:function(){r.internal.events&&(e.each(r.internal.events,function(t,n){var i,a,o,s,l,u,c;if(i=t.split(" "),a=i.shift(),o=i.slice(0),l=r.handlers[n],u=r.internal.$componentsRoot||r.internal.$e,o.length)if(0===o[0].indexOf("@")){if(s=o[0].replace("@",""),!r.internal.components[s])return;o[0]=r.internal.components[s].selector}else 0===o[0].indexOf("!")&&(c=o.shift().replace("!",""),u="window"===c?e(window):r.elements[c]);if(u){if(a.indexOf(".")<0&&(a=a+"."+r.internal.name),!e.isFunction(l))throw"[moduleFactory] : Event handler is with name "+n+" undefined. Module:"+r.internal.name;o.length?u.off(a,o.join(" "),l):u.off(a,l)}}),r.internal.$e.off("modremove."+r.internal.name))},reBindEvents:function(){a.unbindEvents(),a.bindEvents()},extendModuleWithApi:function(){e.extend(r.self,l),r.self.init=a.init,r.self.destroy=a.destroy,r.self.removeEl=a.removeEl,r.self.removeChildren=a.removeChildren,r.api&&e.extend(r.self,r.api)},getEl:function(){return r?r.internal.$e:e()},destroy:function(e){var t,i;e=e||{},i=r.internal.$componentsRoot||r.internal.$e,!r||r.destroyed||r.removed||(e.removeChildren&&a.removeChildren(),r.destroyed=!0,t=n.decapitalize(r.internal.name)+"Instance","function"==typeof r.fn.beforeDestroy&&r.fn.beforeDestroy(),a.unbindEvents(),i.trigger("destroy",r),i.data(t,null),i.data(r.internal.name+"Inited",!1),"function"==typeof r.fn.destroy&&r.fn.destroy())},removeEl:function(){!r||r.removed||r.internal.$e[0].isRemoving||(r.destroyed||a.destroy(),r.internal.$e[0].isRemoving=!0,r.removed=!0,a.removeChildren(),r.internal.$e.trigger("moderemove",r.internal.$e[0]),r.internal.$e.remove(),r=null)},removeChildren:function(){var t;t=r.internal.$componentsRoot||r.internal.$e,t.find("."+s.INITED).each(function(t,n){var i=e(n);n.isRemoving||i.trigger("modremove",n),n.isRemoving=!0})},applyInitedState:function(){r.internal.$e.data(r.internal.name+"Inited",!0),r.internal.$e.addClass(s.INITED)}},s={},i.extend(s),l={getEl:a.getEl,getComponents:a.getComponents,isInited:a.isInited,reBindEvents:a.reBindEvents,destroy:a.destroy},o={create:a.setup,extend:a.extend}}});var jss=function(){function e(e){for(var t=e.cssRules||e.rules||[],n={},i=0;i<t.length;i++){var r=a(t[i].selectorText);n[r]||(n[r]=[]),n[r].push({sheet:e,index:i,style:t[i].style})}return n}function t(e,t){var n=e.cssRules||e.rules||[],i=[];t=t.toLowerCase();for(var r=0;r<n.length;r++){var a=n[r].selectorText;!a||a!=t&&a!=d(t)&&a!=h(t)||i.push({sheet:e,index:r,style:n[r].style})}return i}function n(e,t){var n=e.cssRules||e.rules||[],a=n.length;return r(e,t,n,a)||i(e,t,a),{sheet:e,index:a,style:n[a].style}}function i(e,t,n){e.insertRule?e.insertRule(t+" { }",n):e.addRule(t,null,n)}function r(e,t,n,r){var s,l;if(_.exec(t))s=t,l=o(t);else{if(!b.exec(t))return!1;s=a(t),l=t}return v||(i(e,s,r),n.length<=r&&(v=!0)),v&&i(e,l,r),!0}function a(e){return e.replace(b,function(e,t,n,i){return t+"::"+i})}function o(e){return e.replace(_,function(e,t,n){return":"+n})}function s(e){var t=e.sheet;t.deleteRule?t.deleteRule(e.index):t.removeRule&&t.removeRule(e.index)}function l(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function u(e){for(var t={},n=0;n<e.length;n++)l(t,c(e[n].style));return t}function c(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=e[f(e[n])];return t}function d(e){for(var t="",n=0;null!=(match=y.exec(e))&&""!==match[0];)t+=e.substring(n,match.index),t+=e.substr(match.index+match[1].length,match[2].length),t+=e.substr(match.index,match[1].length),n=match.index+match[0].length;return t+=e.substr(n)}function h(e){return _.exec(e)?o(e):e}function p(e,t){for(var n in t){var i=t[n],r=i.indexOf(" !important");e.style.removeProperty(n),r>0?e.style.setProperty(n,i.substr(0,r),"important"):e.style.setProperty(n,i)}}function f(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function m(e){var t={};for(var n in e)t[g(n)]=e[n];return t}function g(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}var v,y=/((?:\.|#)[^\.\s#]+)((?:\.|#)[^\.\s#]+)/g,_=/(::)(before|after|first-line|first-letter|selection)/,b=/([^:])(:)(before|after|first-line|first-letter|selection)/,T=function(e){this.doc=e,this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.sheets=this.doc.styleSheets||[]};T.prototype={get:function(n){if(!this.defaultSheet)return{};if(n)return u(t(this.defaultSheet,n));var i=e(this.defaultSheet);for(n in i)i[n]=u(i[n]);return i},getAll:function(e){for(var n={},i=0;i<this.sheets.length;i++)l(n,u(t(this.sheets[i],e)));return n},set:function(e,i){this.defaultSheet||(this.defaultSheet=this._createSheet()),i=m(i);var r=t(this.defaultSheet,e);r.length||(r=[n(this.defaultSheet,e)]);for(var a=0;a<r.length;a++)p(r[a],i)},remove:function(e){if(this.defaultSheet){if(!e)return this._removeSheet(this.defaultSheet),void delete this.defaultSheet;for(var n=t(this.defaultSheet,e),i=0;i<n.length;i++)s(n[i]);return n.length}},_createSheet:function(){var e=this.doc.createElement("style");return e.type="text/css",e.rel="stylesheet",this.head.appendChild(e),e.sheet},_removeSheet:function(e){var t=e.ownerNode;t.parentNode.removeChild(t)}};var S=new T(document);return S.forDocument=function(e){return new T(e)},S}();"undefined"!=typeof module&&module.exports&&(module.exports=jss),define("jss",function(e){return function(){return e.jss}}(this)),define("utils/arrayUtil",[],function(){"use strict";var e={};return e.shuffle=function(t){var n=t.slice(0),i=!0;t.sort(function(){return.5-Math.random()}),t.forEach(function(e,t){e!==n[t]&&(i=!1)}),i&&e.shuffle(t)},e.contains=function(e){return this.indexOf(e)>=0},e.excludes=function(e){return this.indexOf(e)<0},e.union=function(e,t){var n=e;return $.each(t,function(e,t){n.indexOf(t)<0&&n.push(t)}),n},e}),function(e){function t(t,i,r){return r=m(i,r),this.on("click.pjax",t,function(t){var i=r;i.container||(i=e.extend({},r),i.container=e(this).attr("data-pjax")),n(t,i)})}function n(t,n,i){i=m(n,i);var a=t.currentTarget,o=e(a);if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==a.protocol||location.hostname!==a.hostname||a.href.indexOf("#")>-1&&f(a)==f(location)||t.isDefaultPrevented())){var s={url:a.href,container:o.attr("data-pjax"),target:a},l=e.extend({},s,i),u=e.Event("pjax:click");o.trigger(u,[l]),u.isDefaultPrevented()||(r(l),t.preventDefault(),o.trigger("pjax:clicked",[l]))}}function i(t,n,i){i=m(n,i);var a=t.currentTarget,o=e(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:(o.attr("method")||"GET").toUpperCase(),url:o.attr("action"),container:o.attr("data-pjax"),target:a};if("GET"!==s.type&&void 0!==window.FormData)s.data=new FormData(a),s.processData=!1,s.contentType=!1;else{if(o.find(":file").length)return;s.data=o.serializeArray()}r(e.extend({},s,i)),t.preventDefault()}function r(t){function n(n,i,r){r||(r={}),r.relatedTarget=t.target;var a=e.Event(n,r);return s.trigger(a,i),!a.isDefaultPrevented()}t=e.extend(!0,{},e.ajaxSettings,r.defaults,t),e.isFunction(t.url)&&(t.url=t.url());var i=p(t.url).hash,a=e.type(t.container);if("string"!==a)throw"expected string value for 'container' option; got "+a;var s=t.context=e(t.container);if(!s.length)throw"the container selector '"+t.container+"' did not match anything";t.data||(t.data={}),e.isArray(t.data)?t.data.push({name:"_pjax",value:t.container}):t.data._pjax=t.container;var l;t.beforeSend=function(e,r){if("GET"!==r.type&&(r.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",t.container),!n("pjax:beforeSend",[e,r]))return!1;r.timeout>0&&(l=setTimeout(function(){n("pjax:timeout",[e,t])&&e.abort("timeout")},r.timeout),r.timeout=0);var a=p(r.url);i&&(a.hash=i),t.requestUrl=h(a)},t.complete=function(e,i){l&&clearTimeout(l),n("pjax:complete",[e,i,t]),n("pjax:end",[e,t])},t.error=function(e,i,r){var a=y("",e,t),s=n("pjax:error",[e,i,r,t]);"GET"==t.type&&"abort"!==i&&s&&o(a.url)},t.success=function(a,l,u){var d=r.state,h="function"==typeof e.pjax.defaults.version?e.pjax.defaults.version():e.pjax.defaults.version,f=u.getResponseHeader("X-PJAX-Version"),m=y(a,u,t),g=p(m.url);if(i&&(g.hash=i,m.url=g.href),h&&f&&h!==f)return void o(m.url);if(!m.contents)return void o(m.url);if(r.state={id:t.id||c(),url:m.url,title:m.title,container:t.container,fragment:t.fragment,timeout:t.timeout},(t.push||t.replace)&&window.history.replaceState(r.state,m.title,m.url),e.contains(s,document.activeElement))try{document.activeElement.blur()}catch(e){}m.title&&(document.title=m.title),n("pjax:beforeReplace",[m.contents,t],{state:r.state,previousState:d}),s.html(m.contents);var v=s.find("input[autofocus], textarea[autofocus]").last()[0];v&&document.activeElement!==v&&v.focus(),_(m.scripts);var b=t.scrollTo;if(i){var T=decodeURIComponent(i.slice(1)),S=document.getElementById(T)||document.getElementsByName(T)[0];S&&(b=e(S).offset().top)}"number"==typeof b&&e(window).scrollTop(b),n("pjax:success",[a,l,u,t])},r.state||(r.state={id:c(),url:window.location.href,title:document.title,container:t.container,fragment:t.fragment,timeout:t.timeout},
window.history.replaceState(r.state,document.title)),u(r.xhr),r.options=t;var f=r.xhr=e.ajax(t);return f.readyState>0&&(t.push&&!t.replace&&(b(r.state.id,[t.container,d(s)]),window.history.pushState(null,"",t.requestUrl)),n("pjax:start",[f,t]),n("pjax:send",[f,t])),r.xhr}function a(t,n){var i={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return r(e.extend(i,m(t,n)))}function o(e){window.history.replaceState(null,"",r.state.url),window.location.replace(e)}function s(t){k||u(r.xhr);var n,i=r.state,a=t.state;if(a&&a.container){if(k&&x==a.url)return;if(i){if(i.id===a.id)return;n=i.id<a.id?"forward":"back"}var s=D[a.id]||[],l=s[0]||a.container,c=e(l),h=s[1];if(c.length){i&&T(n,i.id,[l,d(c)]);var p=e.Event("pjax:popstate",{state:a,direction:n});c.trigger(p);var f={id:a.id,url:a.url,container:l,push:!1,fragment:a.fragment,timeout:a.timeout,scrollTo:!1};if(h){c.trigger("pjax:start",[null,f]),r.state=a,a.title&&(document.title=a.title);var m=e.Event("pjax:beforeReplace",{state:a,previousState:i});c.trigger(m,[h,f]),c.html(h),c.trigger("pjax:end",[null,f])}else r(f);c[0].offsetHeight}else o(location.href)}k=!1}function l(t){var n=e.isFunction(t.url)?t.url():t.url,i=t.type?t.type.toUpperCase():"GET",r=e("<form>",{method:"GET"===i?"GET":"POST",action:n,style:"display:none"});"GET"!==i&&"POST"!==i&&r.append(e("<input>",{type:"hidden",name:"_method",value:i.toLowerCase()}));var a=t.data;if("string"==typeof a)e.each(a.split("&"),function(t,n){var i=n.split("=");r.append(e("<input>",{type:"hidden",name:i[0],value:i[1]}))});else if(e.isArray(a))e.each(a,function(t,n){r.append(e("<input>",{type:"hidden",name:n.name,value:n.value}))});else if("object"==typeof a){var o;for(o in a)r.append(e("<input>",{type:"hidden",name:o,value:a[o]}))}e(document.body).append(r),r.submit()}function u(t){t&&t.readyState<4&&(t.onreadystatechange=e.noop,t.abort())}function c(){return(new Date).getTime()}function d(t){var n=t.clone();return n.find("script").each(function(){this.src||e._data(this,"globalEval",!1)}),n.contents()}function h(e){return e.search=e.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),e.href.replace(/\?($|#)/,"$1")}function p(e){var t=document.createElement("a");return t.href=e,t}function f(e){return e.href.replace(/#.*/,"")}function m(t,n){return t&&n?(n=e.extend({},n),n.container=t,n):e.isPlainObject(t)?t:{container:t}}function g(e,t){return e.filter(t).add(e.find(t))}function v(t){return e.parseHTML(t,document,!0)}function y(t,n,i){var r={},a=/<html/i.test(t),o=n.getResponseHeader("X-PJAX-URL");r.url=o?h(p(o)):i.requestUrl;var s,l;if(a){l=e(v(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var u=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i);s=null!=u?e(v(u[0])):l}else s=l=e(v(t));if(0===l.length)return r;if(r.title=g(s,"title").last().text(),i.fragment){var c=l;"body"!==i.fragment&&(c=g(c,i.fragment).first()),c.length&&(r.contents="body"===i.fragment?c:c.contents(),r.title||(r.title=c.attr("title")||c.data("title")))}else a||(r.contents=l);return r.contents&&(r.contents=r.contents.not(function(){return e(this).is("title")}),r.contents.find("title").remove(),r.scripts=g(r.contents,"script[src]").remove(),r.contents=r.contents.not(r.scripts)),r.title&&(r.title=e.trim(r.title)),r}function _(t){if(t){var n=e("script[src]");t.each(function(){var t=this.src;if(!n.filter(function(){return this.src===t}).length){var i=document.createElement("script"),r=e(this).attr("type");r&&(i.type=r),i.src=e(this).attr("src"),document.head.appendChild(i)}})}}function b(e,t){D[e]=t,O.push(e),S(A,0),S(O,r.defaults.maxCacheLength)}function T(e,t,n){var i,a;D[t]=n,"forward"===e?(i=O,a=A):(i=A,a=O),i.push(t),t=a.pop(),t&&delete D[t],S(i,r.defaults.maxCacheLength)}function S(e,t){for(;e.length>t;)delete D[e.shift()]}function w(){return e("meta").filter(function(){var t=e(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function E(){e.fn.pjax=t,e.pjax=r,e.pjax.enable=e.noop,e.pjax.disable=C,e.pjax.click=n,e.pjax.submit=i,e.pjax.reload=a,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:w},e(window).on("popstate.pjax",s)}function C(){e.fn.pjax=function(){return this},e.pjax=l,e.pjax.enable=E,e.pjax.disable=e.noop,e.pjax.click=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e(window).off("popstate.pjax",s)}var k=!0,x=window.location.href,I=window.history.state;I&&I.container&&(r.state=I),"state"in window.history&&(k=!1);var D={},A=[],O=[];e.event.props&&e.inArray("state",e.event.props)<0?e.event.props.push("state"):"state"in e.Event.prototype||e.event.addProp("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),e.support.pjax?E():C()}(jQuery),define("pjax",["jquery"],function(e){return function(){return e.jQuery.pjax}}(this)),define("ui/Paginator",["jquery","pjax","managers/eventManager"],function(e,t,n){"use strict";var i=function(t){var r,a,o,s;r=e.extend({$e:null,selector:"[data-pjax-pagination]",previousSelector:"[data-pjax-pagination-previous]",nextSelector:"[data-pjax-pagination-next]",paginationContainer:".pagination"},t),a={name:"Paginator",$e:r.$e||e(r.selector)},o={init:function(){a.$e.on("click",r.previousSelector,s.paginationButtonClick),a.$e.on("click",r.nextSelector,s.paginationButtonClick),a.$e.on("pjax:success",s.pjaxSuccess)},hideClickedButton:function(t){e(t.currentTarget).closest(r.paginationContainer).remove()}},s={paginationButtonClick:function(t){e.pjax.click(t,{container:a.$e,fragment:r.selector,scrollTo:!1,append:!0,timeout:6e3}),o.hideClickedButton(t)},pjaxSuccess:function(){n.emit(i.eventTypes.PAGE_ADDED,{$e:a.$e})}},o.init()};return i.eventTypes={PAGE_ADDED:"paginatorPageAdded"},i.onPageAdded=function(e){n.addListener(i.eventTypes.PAGE_ADDED,e)},i}),define("ui/FeedPaginator",["jquery","pjax","managers/eventManager"],function(e,t,n){"use strict";var i=function(t){var r,a,o,s;r=e.extend({$e:null,selector:"[data-feed-pagination]",pksSelector:"[data-extra-pks]",nextSelector:"[data-feed-pagination-next]",paginationContainer:".pagination"},t),a={name:"FeedPaginator",$e:r.$e||e(r.selector),pagedPks:[],editable:!1},o={init:function(){var e=a.$e.find(r.pksSelector);a.$e.on("click",r.nextSelector,s.moreClick),a.pagedPks=e.data("extraPks"),a.editable=e.data("editable"),a.listStyle=e.data("listStyle")},insertFeedItems:function(e){a.$e.find(r.paginationContainer).before(e)},hideClickedButton:function(){e(r.nextSelector).remove()}},s={moreClick:function(){e.get("/feed_items/",{pks:a.pagedPks.shift(),listStyle:a.listStyle,editable:!!a.editable},s.nextPageSuccess)},nextPageSuccess:function(e){o.insertFeedItems(e),0===a.pagedPks.length&&o.hideClickedButton(),n.emit(i.eventTypes.PAGE_ADDED,{$e:a.$e})}},o.init()};return i.eventTypes={PAGE_ADDED:"feedPaginatorPageAdded"},i.onPageAdded=function(e){n.addListener(i.eventTypes.PAGE_ADDED,e)},i}),define("forms/widgets/DropMenu",["jquery","utils/globalElements","factories/moduleFactory","utils/keycodes"],function(e,t,n,i){"use strict";var r=null,a=function(o){var s,l,u,c,d,h,p,f;s=this,u=a.markup,l=e.extend({menuControl:".drop-menu-control",menuItemsWrapper:".drop-menu-items-wrap",menuItem:".drop-menu-item",onSelect:function(){},viewportEdgePadding:40,selfToggle:!1,autocomplete:!1},o),c={name:"DropMenu",$e:l.$e||e(l.selector),closeDelay:100,closeTimeout:null,maxVisibleItems:6.5,heights:{full:0,max:0},components:{menuControl:{selector:l.menuControl},menuItemsWrapper:{selector:l.menuItemsWrapper},menuItem:{selector:l.menuItem}},events:{keyup:"keyup",mouseenter:"mouseenter",mouseleave:"mouseleave","mousewheel @menuItemsWrapper":"menuItemsWrapperMousewheel","DOMMouseScroll @menuItemsWrapper":"menuItemsWrapperMousewheel","mouseenter @menuItem":"menuItemMouseenter","mouseleave @menuItem":"menuItemMouseleave","click @menuItem":"menuItemClick","click @menuControl":"menuControlClick"},keyHandlers:[{event:"keyup",which:i.UP,handler:"upKeyup"},{event:"keyup",which:i.DOWN,handler:"downKeyup"},{event:"keyup",which:i.SPACE,handler:"spaceKeyup"},{event:"keyup",which:i.ENTER,handler:"enterKeyup"},{event:"keyup",which:i.ESCAPE,handler:"escapeKeyup"}]},d={allOptions:null},h={init:function(){h.setup()},destroy:function(){h.closeMenu({force:!0})},setup:function(){h.setHeight(),h.closeMenu(),h.cacheOptions(),h.setReady()},reset:function(){h.unsetReady(),h.unsetHeight(),h.unsetMaxHeight(),h.setup()},update:function(){h.getComponents(),h.setHeight(),h.setScrollState()},cacheOptions:function(){d.menuItem&&(d.allOptions=d.menuItem.clone())},isOpen:function(){return c.$e.hasClass(u.OPEN)},isActive:function(){return c.$e.hasClass(u.ACTIVE)},setOpen:function(){c.$e.addClass(u.OPEN)},unsetOpen:function(){c.$e.removeClass(u.OPEN)},setInvisible:function(){d.menuItemsWrapper.addClass(u.INVISIBLE)},unsetInvisible:function(){d.menuItemsWrapper.removeClass(u.INVISIBLE)},setReady:function(){c.$e.addClass(u.READY)},unsetReady:function(){c.$e.removeClass(u.READY)},setGlobalOpen:function(){t.body.addClass(u.GLOBAL_OPEN),d.menuItemsWrapper.hasClass(u.ABOVE)&&t.body.addClass(u.ABOVE)},unsetGlobalOpen:function(){t.body.removeClass(u.GLOBAL_OPEN),t.body.removeClass(u.ABOVE)},bindWindowScroll:function(){t.win.on("scroll.DropMenu",function(){h.determineWrapperPosition()})},unbindWindowScroll:function(){t.win.off("scroll.DropMenu")},bindWindowClick:function(){t.win.on("click.DropMenu",function(){h.closeMenu()})},unbindWindowClick:function(){t.win.off("click.DropMenu")},setOpenInstance:function(){r&&r.close(),r=s},unsetOpenInstance:function(){r===s&&(r=null)},setCloseDelay:function(e,t){var n;e=e||{},n=e.delay?c.closeDelay:0,c.closeTimeout=setTimeout(t,n)},clearCloseDelay:function(){c.closeTimeout&&(clearTimeout(c.closeTimeout),c.closeTimeout=null)},setHeight:function(){var e;h.isOpen()?(h.getComponentDimensions(),e=c.components.menuItemsWrapper.bounds,d.menuItemsWrapper.height(e.height),c.heights.full=e.height,h.setMaxHeight()):(h.unsetMaxHeight(),d.menuItemsWrapper.css("height",0))},setMaxHeight:function(){var e,t;e=c.components.menuItem.bounds,t=d.menuItem&&d.menuItem.length>7?c.maxVisibleItems*e.height:null,c.heights.max=t,d.menuItemsWrapper.css({"max-height":t})},unsetHeight:function(){d.menuItemsWrapper.css("height","auto")},unsetMaxHeight:function(){d.menuItemsWrapper.css({"max-height":""})},setScrollState:function(){c.$e.toggleClass(u.SCROLLMENU,!!c.heights.max&&c.heights.full>c.heights.max)},unsetScrollState:function(){c.$e.removeClass(u.SCROLLMENU)},getComponentDimensions:function(t){t=t||{},h.setInvisible(),h.unsetHeight(),h.unsetMaxHeight(),e.each(c.components,function(t,n){var i,r;r=d[t],r=r&&r.filter?r.filter(":visible"):[],r.length&&(i=r.length>1&&!e(r[1]).hasClass("drop-menu-items-wrap")?r[1]:r[0],n.bounds=i.getBoundingClientRect())}),h.unsetInvisible()},openMenu:function(){h.isOpen()||(h.setOpenInstance(),h.clearCloseDelay(),h.getComponentDimensions(),h.determineWrapperPosition(),h.setGlobalOpen(),h.bindWindowScroll(),h.bindWindowClick(),h.unsetScrollState(),requestAnimationFrame(function(){h.setOpen(),h.setHeight(),h.setScrollState()}))},closeMenu:function(e){e=e||{},h.isActive()&&!e.force||(h.clearCloseDelay(),h.setCloseDelay(e,function(){h.unbindWindowScroll(),h.unbindWindowClick(),h.unsetGlobalOpen(),h.unsetOpenInstance(),h.unsetOpen(),h.setHeight(),h.resetItemHighlightStates(),h.resetItemSelectedStates(),h.unsetScrollState()}))},toggleMenu:function(e){e=e||{},h.isOpen()?h.closeMenu(e):h.openMenu(e)},determineWrapperPosition:function(){},getHighlightItem:function(){return d.menuItem?d.menuItem.filter(function(t,n){return e(n).hasClass(u.HIGHLIGHT)}):[]},setHighlightItem:function(e){e.hasClass(u.NOOP)||(h.resetItemHighlightStates(),e.addClass(u.HIGHLIGHT))},unsetHighlightItem:function(e){e.hasClass(u.NOOP)||e.removeClass(u.HIGHLIGHT)},setHighlightPrevItem:function(){var e,t;e=h.getHighlightItem(),e.length?(t=e.prev(c.components.menuItem.selector),t.length||(t=c.$e.find(c.components.menuItem.selector).last())):t=c.$e.find(c.components.menuItem.selector).last(),h.setHighlightItem(t),h.isOpen()||h.openMenu()},setHighlightNextItem:function(){var e,t;e=h.getHighlightItem(),e.length?(t=e.next(c.components.menuItem.selector),t.length||(t=c.$e.find(c.components.menuItem.selector).first())):t=c.$e.find(c.components.menuItem.selector).first(),h.setHighlightItem(t),h.isOpen()||h.openMenu()},getSelectedItem:function(){return d.menuItem.filter(function(t,n){return e(n).hasClass(u.SELECTED)})},selectItemByEl:function(e){e.length&&!e.hasClass(u.NOOP)&&(h.resetItemSelectedStates(),e.addClass(u.SELECTED),h.closeMenu({force:!0}))},selectItemByVal:function(e){var t=d.menuItem.filter('[data-value="'+e+'"]');t.hasClass(u.NOOP)||h.selectItemByEl(t)},filter:function(e){d.menuItem.each(e),h.reset(),h.getComponents()},unfilter:function(){d.menuItemsWrapper.html(d.allOptions),h.getComponents()},resetItemHighlightStates:function(){d.menuItem&&d.menuItem.removeClass(u.HIGHLIGHT)},resetItemSelectedStates:function(){d.menuItem&&d.menuItem.removeClass(u.SELECTED)}},p={keyup:function(t){var n=this;e.each(c.keyHandlers,function(e,i){"keyup"===i.event&&t.which===i.which&&p[i.handler].call(n,t)})},mouseenter:function(){c.$e.addClass(u.ACTIVE)},mouseleave:function(){c.$e.removeClass(u.ACTIVE)},menuControlClick:function(e){var t=e.originalEvent||e;l.selfToggle&&(t.dropMenuClick=!0,h.toggleMenu({force:h.isOpen()}))},menuItemsWrapperMousewheel:function(e){var t=e.originalEvent.wheelDelta||-e.originalEvent.detail,n=t>0?"up":"down";("up"===n&&0===this.scrollTop||"down"===n&&this.scrollTop===this.scrollHeight-this.offsetHeight)&&e.preventDefault()},menuItemMouseenter:function(){h.setHighlightItem(e(this))},menuItemMouseleave:function(){h.unsetHighlightItem(e(this))},menuItemClick:function(t){var n=e(this);(t.originalEvent||t).dropMenuClick=!0,n.hasClass(u.NOOP)||(h.selectItemByEl(n),l.onSelect(n))},upKeyup:function(e){e.preventDefault(),h.setHighlightPrevItem()},downKeyup:function(e){e.preventDefault(),h.setHighlightNextItem()},spaceKeyup:function(){var e=h.getHighlightItem();e.length&&!e.hasClass(u.NOOP)&&(h.selectItemByEl(e),l.onSelect(e))},enterKeyup:function(e){var t=h.getHighlightItem();e.originalEvent.intercepted=!0,h.selectItemByEl(t),l.onSelect(t)},escapeKeyup:function(){h.closeMenu({force:!0})}},f={toggle:h.toggleMenu,open:h.openMenu,close:h.closeMenu,selectItemByEl:h.selectItemByEl,selectItemByVal:h.selectItemByVal,reset:h.reset,filter:h.filter,unfilter:h.unfilter,isOpen:h.isOpen,isActive:h.isActive,update:h.update},n({self:s,o:l,m:u,internal:c,elements:d,fn:h,handlers:p,api:f}).create()};return a.markup={ABOVE:"state-above",SCROLLMENU:"state-scroll-menu",GLOBAL_OPEN:"state-dropmenu-open",NOOP:"noop",DOWN_ONLY:"variant-down-only"},a}),define("ui/Slideshow",["jquery","factories/moduleFactory","utils/keycodes"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h,p;a=this,s=i.markup,o=e.extend({$e:null,selector:".slideshow",data:null,modal:null},r),l={name:"Slideshow",$e:o.$e||e(o.selector),data:o.data,currentIndex:0,modal:o.modal,templates:{slideshow:{selector:"!.slideshow-template"}},components:{prevImage:{selector:".prev-image"},nextImage:{selector:".next-image"},imageWrapper:{selector:".image-wrapper"},currentIndex:{selector:".current-index"},totalCount:{selector:".total-count"},imageCaption:{selector:".slideshow-image-caption"},imageTitleBody:{selector:".slideshow-meta-body .slideshow-image-title"},imageTitleFooter:{selector:".slideshow-meta-footer .slideshow-image-title"}},events:{"click @prevImage":"prevImageClick","click @nextImage":"nextImageClick"}},u={},c={},d={init:function(){l.data&&d.render()},render:function(){d.unbindWindowKeyEvents(),l.$e.html(c.slideshow(l.data)),d.getComponents(),d.updateView(),l.modal&&(l.modal.modal.addClass(s.FULL_SCREEN),l.modal.modal.addClass(s.SLIDESHOW_MODAL)),d.bindToWindowKeyEvents()},bindToWindowKeyEvents:function(){e(window).on("keydown.slideshow",function(e){h.windowKeydown(e)})},unbindWindowKeyEvents:function(){e(window).off("keydown.slideshow")},update:function(e){l.data=e,d.render()},setPositionState:function(t,n){var i=e(n);t===l.currentIndex?(i.removeClass(s.OUT_LEFT),i.removeClass(s.OUT_RIGHT)):t<l.currentIndex?i.addClass(s.OUT_LEFT):t>l.currentIndex&&i.addClass(s.OUT_RIGHT)},updateView:function(){u.imageWrapper&&(u.imageWrapper.each(d.setPositionState),u.imageCaption.each(d.setPositionState),u.imageTitleBody.each(d.setPositionState),u.imageTitleFooter.each(d.setPositionState),u.currentIndex.html(l.currentIndex+1),u.totalCount.html(u.imageWrapper.length),u.prevImage.removeClass(s.DISABLED),u.nextImage.removeClass(s.DISABLED),0===l.currentIndex?u.prevImage.addClass(s.DISABLED):l.currentIndex===u.imageWrapper.length-1&&u.nextImage.addClass(s.DISABLED))},showPrevImage:function(){l.currentIndex=Math.max(0,l.currentIndex-1),d.updateView()},showNextImage:function(){l.currentIndex=Math.min(u.imageWrapper.length-1,l.currentIndex+1),d.updateView()},beforeDestroy:function(){d.unbindWindowKeyEvents()}},h={prevImageClick:function(){d.showPrevImage()},nextImageClick:function(){d.showNextImage()},windowKeydown:function(e){e.which===n.LEFT?d.showPrevImage():e.which===n.RIGHT&&d.showNextImage()}},p={update:d.update},t({self:a,o:o,internal:l,elements:u,templates:c,fn:d,handlers:h,m:s,api:p}).create()};return i.markup={SHALLOW_PADDING:"variant-shallow-padding",SLIDESHOW_MODAL:"variant-slideshow-modal",OUT_LEFT:"state-out-left",OUT_RIGHT:"state-out-right"},i}),define("ui/ItemContainer",["jquery","factories/moduleFactory","ui/Paginator","ui/FeedPaginator","forms/widgets/DropMenu","ui/Slideshow"],function(e,t,n,i,r,a){"use strict";var o=function(s){var l,u,c,d,h,p,f,m;l=this,c=o.markup,u=e.extend({$e:null,selector:"."+c.CONTAINER,itemSelector:"."+c.ITEM,layout:null,onPageAdded:e.noop},s),d={name:"ItemContainer",$e:u.$e||e(u.selector),components:{item:{selector:u.itemSelector},launchSlideshow:{selector:".launch-slideshow"},itemAnchor:{selector:u.itemSelector+" a"},editDrop:{selector:".module .edit-drop, .listing-layout-item .edit-drop",constructor:r,moduleOptions:{selfToggle:!0}},feedFieldset:{selector:'fieldset[name="feed"]'},removeModule:{selector:".remove-module"},moduleDisplaySize:{selector:".module .display-size"}},events:{"mouseenter @item":"itemMouseenter","mouseleave @item":"itemMouseleave","click @item":"itemClick","click @itemAnchor":"itemAnchorClick",prependitem:"prependItem",appenditem:"appendItem","change @moduleDisplaySize":"moduleDisplaySizeChange","click @removeModule":"removeModuleClick",removetier:"removeTier","click @launchSlideshow":"launchSlideshow"}},h={},p={init:function(){n.onPageAdded(f.paginatorPageAdded),i.onPageAdded(f.feedPaginatorPageAdded)},isEditable:function(){return d.$e.hasClass(c.EDITABLE)},prependItem:function(e){u.layout.prependItems(e),p.getComponents(),p.isEditable()&&e.trigger("new:fieldset")},appendItem:function(e){u.layout.appendItems(e),p.getComponents(),p.isEditable()&&e.trigger("new:fieldset")},removeModule:function(t){var n,i,r,a;n=e(t),i=n.closest("fieldset."+c.ITEM),r=i.data("fieldsetInstance"),a=r.getData(),d.$e.trigger("removeitem",a),p.trackDeletedItemPk(a.items[0].pk),r.removeEl()},trackDeletedItemPk:function(e){var t,n;h.feedFieldset&&(n=h.feedFieldset.data("fieldsetInstance"),(t=n.getVal("deleted_pks"))&&(t.push(e),n.setVals({deleted_pks:t})))},updateModuleDisplaySize:function(t){var n,i,r,a;n=e(t),i=n.closest("."+c.MODULE),r=n.data("customRadioInstance"),a=r.getVal(),i.toggleClass(c.LARGE_MODULE,"LARGE"===a),i.trigger("sizechange")},launchSlideshow:function(t){var n,i,r,o,s,l;n=e(t),i=e('<div class="slideshow-wrapper" />'),o=n.data("images"),s=n.data("galleryTitle"),l=n.data("galleryTags"),r=u.modalsManager.launchModal({content:i}),new a({$e:i,data:{readView:!0,gallery_title:s,images:o,tags:l},modal:r})}},f={itemMouseenter:function(){e(this).addClass(c.HOVER)},itemMouseleave:function(){e(this).removeClass(c.HOVER)},itemClick:function(t){var n=e(this).data("href");!n||t.interceptedByAnchor||t.originalEvent.dropMenuClick||(t.preventDefault(),t.metaKey?window.open(n,"_blank"):window.location.assign(n))},itemAnchorClick:function(e){e.interceptedByAnchor=!0},prependItem:function(t,n){var i=e(n);p.prependItem(i)},appendItem:function(t,n){var i=e(n);p.appendItem(i)},feedPaginatorPageAdded:function(e){f.paginatorPageAdded(e)},paginatorPageAdded:function(t){var n,i;n=t.$e,e.contains(n[0],d.$e[0])&&(i=e(),n.find("."+c.CONTAINER+":not(."+c.SETUP+")").each(function(){var t=e(this);i=i.add(t.find(u.itemSelector).detach()),t.remove()}),i.length&&u.layout.appendItems(i))},removeModuleClick:function(e){e.stopPropagation(),p.removeModule(this)},moduleDisplaySizeChange:function(){p.updateModuleDisplaySize(this)},launchSlideshow:function(e){e.stopPropagation(),p.launchSlideshow(e.currentTarget)},removeTier:function(e,t){p.trackDeletedItemPk(t.items[0].pk)}},m={isEditable:p.isEditable,appendItem:p.appendItem,prependItem:p.prependItem},t({self:l,o:u,m:c,internal:d,elements:h,fn:p,handlers:f,api:m}).create()};return o.markup={CONTAINER:"item-container",ITEM:"container-item",MODULE:"module",ITEM_FIELDSET:'fieldset[name="items[]"]',EDITABLE:"state-editable",LARGE_MODULE:"variant-x2"},o}),define("ui/ShelfPacker",["jquery","factories/moduleFactory","services/layout"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,o=i.markup,s=e.extend({$e:null,selector:"."+o.ITEM_SHELF,itemsPerShelf:n.getFullWidth()/n.getInfo().columnWidth,shelfWidth:n.getFullWidth(),stamps:[],itemSelector:"."+o.SHELF_ITEM,isSortable:!1},r),l={name:"ShelfPacker",$e:s.$e||e(s.selector),slotCount:0,lastEmptySlotIndex:0,slots:[],stamps:[],sortedItems:[],shelfItems:[],lastSwap:[],shelfTopOffsets:[0],lastShelfBottomOffset:0,slotSize:{height:s.shelfWidth/s.itemsPerShelf,width:s.shelfWidth/s.itemsPerShelf},components:{item:{selector:s.itemSelector}},events:{"dragstart @item":"itemDragstart","drag @item":"itemDrag","dragend @item":"itemDragend","dragenter @item":"itemDragenter","dragleave @item":"itemDragleave"}},u={draggingItem:null},c={init:function(){c.setupContainer(),c.prepStamps(),c.packStamps(),c.sortItems(),c.prepItems(),c.packItems(),c.autoHeightLastRow(),c.updateContainerHeight(),l.$e.addClass(o.STATE_PACKED)},repack:function(){c.resetPositions(),c.packStamps(),c.packItems(),c.autoHeightLastRow(),c.updateContainerHeight()},setupContainer:function(){l.$e.css({width:s.shelfWidth,left:0,top:0,position:"relative"})},prepStamps:function(){var e,t,n,i,r;e=l.$e[0].getBoundingClientRect(),s.stamps.forEach(function(a){a&&(t=a[0].getBoundingClientRect(),t.top<e.bottom&&t.bottom>e.top&&t.left<e.right&&t.right>e.left&&(i=e.left-t.left,r=e.top-t.top,n={stamp:!0,xSlots:Math.round((t.width-i)/l.slotSize.width),ySlots:Math.ceil((t.height-r)/l.slotSize.height)},l.slotCount+=n.xSlots*n.ySlots,l.stamps.push(n)))}),!l.stamps.length&&s.itemsPerShelf>2&&u.item&&u.item.length<s.itemsPerShelf&&(l.stamps.push({stamp:!0,xSlots:1,ySlots:1}),l.slotCount+=1)},sortItems:function(){var t,n,i,r,a,o;for(l.sortedItems=[],t=[],n=[],i=0,u.item&&u.item.each(function(i,r){var a,o,s;for(a=e(r),s=a.data("index"),o=void 0===s?i:s;n[o];)o+=1;t[o]={el:r,data:a.data("item")}}),r=0;r<t.length;r++)o=t[r],o?(a=i+r,l.sortedItems[a]=o.el,n[a]=o.data):i-=1;l.shelfItems=n},prepItems:function(){l.sortedItems.forEach(function(t,n){var i,r;i=e(t),i.hasClass(o.PROMO_TIER)||i.hasClass(o.VARIANT_FULL)?r=c.prepPromoTier(i,n):(i.hasClass(o.VARIANT_WITH_IMG),i.hasClass(o.VARIANT_X2),i.hasClass(o.STATE_Y2),r={$e:i,xSlots:Math.round(i.width()/l.slotSize.width),ySlots:Math.ceil(i.height()/l.slotSize.height),slotIndex:null,index:i.data("index")||n},1===s.itemsPerShelf&&(r.useItemHeight=!0,r.height=i.height(),r.ySlots=1)),l.shelfItems[n]=r,l.slotCount+=r.xSlots+r.ySlots,s.isSortable&&(i.attr("draggable",!0),i.attr("ondragstart","event.dataTransfer.setData('text/plain', '');")),i.data("index",n),i.data("item",r)})},prepPromoTier:function(e,t){return{$e:e,xSlots:s.itemsPerShelf,ySlots:1,minXSlots:Math.min(s.itemsPerShelf,3),slotIndex:null,index:e.data("index")||t,useItemHeight:!0,height:e.height(),useMinXSlots:!1,fullRow:!0}},prepackSlots:function(){l.slots=new Array(l.slotCount)},packStamps:function(){l.stamps.forEach(function(e){c.packSlots(e,l.lastEmptySlotIndex,!0),c.fillSlots(e)})},packItems:function(){l.shelfItems.forEach(function(e){c.packSlots(e,l.lastEmptySlotIndex,!0),c.fillSlots(e)}),c.calculateShelfTopOffsets(),l.shelfItems.forEach(function(e){c.positionItem(e)})},packSlots:function(e,t,n){var i;n=n||!1,i=c.itemWillFit(e,t),i?(e.slotIndex=t,n&&(l.lastEmptySlotIndex=c.getNextEmptySlot())):c.packSlots(e,t+1)},itemWillFit:function(e,t){var n,i,r,a,u,c,d,h,p;if(a=e.minXSlots||e.xSlots,n=!1,u=!1,c=!1,1===s.itemsPerShelf)return void 0===l.slots[t];if(void 0!==l.slots[t]||t%s.itemsPerShelf+a>s.itemsPerShelf)n=!1;else if(1===e.xSlots&&1===e.ySlots)n=!0;else{for(u=!0,c=!0,d=s.itemsPerShelf-t%s.itemsPerShelf,h=0,i=0;i<d&&void 0===l.slots[t+i];i++)h+=1;if(u=a<=h,e.fullRow&&(0===(p=t%s.itemsPerShelf)||1===p&&l.slots[t-1]&&l.slots[t-1].stamp||(u=!1)),u&&e.ySlots>1)for(i=0;i<e.xSlots;i++)for(r=1;r<e.ySlots;r++)c=!!c&&void 0===l.slots[t+i+s.itemsPerShelf*r];n=u&&c,n&&e.minXSlots&&(e.useMinXSlots=h!==s.itemsPerShelf&&h===e.minXSlots,e.$e.toggleClass(o.VARIANT_MIN_FULL,e.useMinXSlots))}return n},fillSlots:function(e){var t,n,i;for(i=e.useMinXSlots?e.minXSlots:e.xSlots,t=0;t<i;t++)if(l.slots[e.slotIndex+t]=e,e.ySlots>1)for(n=1;n<e.ySlots;n++)l.slots[e.slotIndex+t+s.itemsPerShelf*n]=e},getNextEmptySlot:function(){var e,t;for(t=0,e=l.lastEmptySlotIndex;e<l.slots.length;e++)if(void 0===l.slots[e]&&0===t){t=e;break}return t},calculateShelfTopOffsets:function(){var e,t;e=l.shelfItems.slice(0),l.shelfTopOffsets=[0],t=0,e.sort(function(e,t){var n,i,r;return r=s.itemsPerShelf,n=Math.floor(e.slotIndex/r),i=Math.floor(t.slotIndex/r),n-i}),e.forEach(function(e){var n,i,r,a,o,u;for(i=s.itemsPerShelf,n=Math.floor(e.slotIndex/i),t=n,r=l.shelfTopOffsets[n],o=n,u=[];void 0===r;)u.push(o),o-=1,r=l.shelfTopOffsets[o];u.forEach(function(e){l.shelfTopOffsets[e]=r}),l.shelfTopOffsets[n]=r,e.useItemHeight?(a=e.$e.height()-l.slotSize.height,l.shelfTopOffsets[n+1]=r+a):l.shelfTopOffsets[n+1]=r})},positionItem:function(e){var t,n,i,r,a,o,u,c;a=s.itemsPerShelf,o=l.slotSize.height,u=l.slotSize.width,t=Math.floor(e.slotIndex/a),n=t*a,c=l.shelfTopOffsets[t],i=t*o+c+"px",r=(e.slotIndex-n)*u+"px",e.$e.css({transform:"translate3d("+r+", "+i+", 0)"})},autoHeightLastRow:function(){var e,t,n,i,r,a,u,d,h,p,f,m;for(t=s.itemsPerShelf,a=c.getUsedShelfCount(),i=a*t,r=i-t,h=-l.slotSize.height,n=[],e=r;e<=i;e++)(u=l.slots[e])&&!u.stamp&&n.push(u);for(e=0;e<n.length;e++)d=n[e],d.$e.removeClass(o.VARIANT_AUTO_HEIGHT),p=d.$e.height(),d.$e.addClass(o.VARIANT_AUTO_HEIGHT),f=d.$e.height(),(m=f-p)>h&&(h=m);l.lastShelfBottomOffset=h},updateContainerHeight:function(){var e,t,n,i,r;for(e=c.getUsedShelfCount(),n=e,i=l.shelfTopOffsets[n],r=l.lastShelfBottomOffset;void 0===i;)n-=1,i=l.shelfTopOffsets[n];t=e*l.slotSize.height+i+r,l.$e.css({height:t+"px"}),l.$e.closest(o.STREAM_BLOCK).toggleClass(o.VARIANT_AUTO_HEIGHT,0!==r)},getUsedShelfCount:function(){var e,t,n,i,r,a,o;for(e=l.slots.length/s.itemsPerShelf,e=Math.ceil(e),t=0,n=0;n<e;n++){for(r=n*s.itemsPerShelf,a=!1,i=0;i<s.itemsPerShelf;i++)o=l.slots[r+i],a=a||o&&!o.stamp;a&&(t+=1)}return t},swapItems:function(e,t){var n,i,r,a,o,s,u,d,h;if(o=!0,e&&t)return n=e.data("index"),i=t.data("index"),n!==i&&(n!==l.lastSwap[1]||i!==l.lastSwap[0])&&(r=l.shelfItems[n],a=l.shelfItems[i],l.shelfItems[i]=r,l.shelfItems[n]=a,e.data("index",i),t.data("index",n),r.xSlots===a.xSlots&&r.ySlots===a.ySlots&&(o=!1,s=e.attr("style"),u=t.attr("style"),d=r.slotIndex,h=a.slotIndex,e.attr("style",u),t.attr("style",s),r.slotIndex=h,a.slotIndex=d),(r.useItemHeight||a.useItemHeight)&&(o=!0),clearTimeout(l.lastSwapTimeout),l.lastSwap=[n,i],l.lastSwapTimeout=setTimeout(function(){l.lastSwap=[]},100),c.sortItems(),{requiresRepack:o})},resetPositions:function(){l.slots=[],l.lastEmptySlotIndex=0},reset:function(){var t,i;s.shelfWidth=n.getFullWidth(),s.itemsPerShelf=s.shelfWidth/n.getInfo().columnWidth,l.shelfItems=[],l.stamps=[],l.slots=[],l.slotCount=0,l.slotSize={height:s.shelfWidth/s.itemsPerShelf,width:s.shelfWidth/s.itemsPerShelf},l.shelfTopOffsets=[0],u.item&&(t=0,i=-1,u.item.each(function(n,r){var a,o;a=e(r),o=a.data("index"),void 0!==o?(a.data("index",o+t),i=o+t):(a.data("index",i+1),i+=1,t+=1)})),c.resetPositions(),c.init()},getElements:function(){return l.sortedItems},remove:function(e){u.item=u.item.not(e),c.reset()},hardReset:function(){c.getComponents(),c.reset()}},d={itemDragstart:function(){var t;t=e(this),u.draggingItem=t,t.addClass(o.DRAGGING)},itemDrag:function(){},itemDragend:function(){var t;t=e(this),t.removeClass(o.DRAGGING)},itemDragenter:function(){var t;(t=c.swapItems(u.draggingItem,e(this)))&&t.requiresRepack&&c.repack()},itemDragleave:function(){},handleResize:function(){c.reset()}},h={handleResize:d.handleResize,getElements:c.getElements,remove:c.remove,hardReset:c.hardReset},t({self:a,o:s,m:o,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={ITEM_SHELF:"item-shelf",SHELF_ITEM:"shelf-item",PROMO_TIER:"promo-tier",MODULE_HEAD:"module-head",STREAM_BLOCK:"stream-block",VARIANT_WITH_IMG:"variant-with-img",VARIANT_X2:"variant-x2",VARIANT_FULL:"variant-full",VARIANT_MIN_FULL:"variant-min-full",VARIANT_AUTO_HEIGHT:"variant-auto-height",STATE_PACKED:"state-packed",DRAGGING:"state-dragging",STATE_Y2:"state-y2",EDITABLE:"state-editable"},i}),define("ui/ModuleLayout",["jquery","factories/moduleFactory","jss","services/layout","utils/stringUtil","utils/arrayUtil","ui/ItemContainer","ui/ShelfPacker"],function(e,t,n,i,r,a,o,s){"use strict";var l=function(u){var c,d,h,p,f,m,g,v;c=this,h=l.markup,d=e.extend({$e:null,selector:"."+h.CONTAINER,moduleComponents:["head","body"],cyclicBackgroundIndexes:[1,2,3,4,5,6],baseUnit:i.dimensions.BASE_UNIT,columnWidth:function(){return i.getInfo().columnWidth},maxHeightY2:function(){return 1.75*d.columnWidth()-3*d.baseUnit},jssRules:function(){var e=i.breakpoints,t=i.getInfo(),n=t.breakpoint,r=t.columnWidth,a=t.columnUnit,o=n.columnCount,s=r*n.columnCount;return{".rail":{"margin-top":function(){return n===e.FULL||n===e.MEDIUM?0-a:0}()+"px"},".module-layout":{width:s+"px"},".module":{position:"absolute",left:"0px",top:"0px"},".module, .rail":{width:r+"px"},".module.variant-x2":{width:function(){return n===e.FULL||n===e.MEDIUM?2*r:r}()+"px"},".module.variant-x3":{width:function(){return n===e.FULL||n===e.MEDIUM?3*r:r}()+"px"},".module.variant-full":{width:s+"px"},".module .module-head":{height:r+"px"},".module .module-body":{height:function(){return o>1?r+"px":"auto"}()},".module.variant-x2 .module-head":{height:function(){return n===e.FULL||n===e.MEDIUM?2*r:r}()+"px"},".module.state-y2 .module-body":{height:function(){return o>1?2*r+"px":"auto"}()}}}},u),p={name:"ModuleLayout",$e:d.$e||e(d.selector),shelfPacker:null,modules:[],domChangeTimeout:null,components:{module:{selector:"."+h.MODULE},rail:{selector:"!."+h.RAIL},globalPage:{selector:"!."+h.GLOBAL_PAGE},itemsFieldset:{selector:"."+h.ITEMS_FIELDSET},itemContainer:{selector:"."+h.ITEM_CONTAINER},promoTier:{selector:"."+h.PROMO_TIER}},events:{"modremove @module":"moduleRemove","dragend @module":"moduleDragEnd","sizechange @module":"moduleSizeChange","domchange !globalPage":"relatedDomChange","change !globalPage":"relatedDomChange"},itemContainer:null},f={},m={init:function(){m.initPacker(),m.isZeroState()||(a.shuffle(d.cyclicBackgroundIndexes),m.updateModuleStyles(),m.cacheModuleOrder(),m.processModules(),m.applyCyclicBackgrounds(),i.onResize(g.resize),m.isSortable()&&m.setOrderedFieldsetsMethod()),p.itemContainer=new o(e.extend({$e:p.$e,layout:c,itemSelector:"."+h.MODULE,modalsManager:l._core.getInstance("modalsManager")},u))},isEditable:function(){
return p.itemContainer.isEditable()},isSortable:function(){return p.$e.hasClass(h.SORTABLE)},isZeroState:function(){return!!p.$e.find("."+h.ZERO_BLOCK).length},getContainer:function(){return f.itemsFieldset||p.$e},initPacker:function(){p.shelfPacker=new s({$e:p.$e,itemSelector:"."+h.MODULE,isSortable:m.isSortable(),stamps:[f.rail]})},setOrderedFieldsetsMethod:function(){var t;(t=m.getItemsFieldset())&&t.data("orderedFieldsets",function(){return e(p.shelfPacker.getElements())})},getItemsFieldset:function(){return f.itemsFieldset||e()},reflow:function(e){e&&(m.updateModuleStyles(),m.processModules()),m.cacheModuleOrder(),m.applyCyclicBackgrounds()},updateModuleStyles:function(){var t=d.jssRules();e.each(t,function(e,t){n.remove(e),n.set(e,t)})},cacheModuleOrder:function(){var e=[];p.shelfPacker.getElements().forEach(function(t,n){p.modules.forEach(function(i){i[0]===t&&(e[n]=i)})}),p.modules=e},processModules:function(){var t=i.getInfo().breakpoint;p.modules=[],p.shelfPacker.getElements().forEach(function(n){var i=e(n);e.extend(i,{components:{},hasVariant:{},contentGuards:{},heights:{contentGuards:{}}}),m.getModuleComponents(i),m.getModuleVariants(i),m.getModuleContentGuards(i),m.resetHeight(i),m.getModuleHeights(i),m.handleContentHeights(i,t),m.applyContentGuards(i),i.hasVariant.list&&t.columnCount>1&&m.heightToNextCol(i),p.modules.push(i)}),p.shelfPacker.hardReset()},getModuleComponents:function(e){d.moduleComponents.forEach(function(t){var n=e.find("."+h.MODULE_COMPONENTS[t]);n.length&&(e.components[t]=n)})},getModuleVariants:function(e){var t=e[0].className,n=t.match(/variant-([^\s]+)/g);n&&n.forEach(function(t){t=t.replace(/variant-/,""),t=r.camelCaseify(t),e.hasVariant[t]=!0})},getModuleContentGuards:function(t){e.each(t.components,function(e,n){var i=n.find("."+h.MODULE_CONTENT_GUARD);i.length&&(t.contentGuards[e]=i)})},getModuleHeights:function(t){e.each(t.components,function(e,n){var i;t.heights[e]={height:n.height(),scrollHeight:n[0].scrollHeight},t.contentGuards[e]&&(i=t.contentGuards[e],t.heights.contentGuards[e]={height:i.height(),scrollHeight:i[0].scrollHeight})})},handleContentHeights:function(e,t){e.components.body&&t.columnCount>1&&e.heights.body.scrollHeight>d.columnWidth()&&!e.hasVariant.list&&(e.addClass(h.STATE_Y2),m.getModuleHeights(e))},applyContentGuards:function(t){e.each(t.contentGuards,function(e,n){var i,r,a=t.heights.contentGuards[e].scrollHeight,o=t.heights[e].height;r=m.calcGuardedMaxHeight(o,n),i=a>r,n.toggleClass(h.GUARDED,i),n.css("max-height",r)})},applyCyclicBackgrounds:function(){var e,t,n=0;p.modules.forEach(function(i){!i.components.head||i.hasVariant.withImg||i.hasVariant.withGradient||i.hasVariant.person||i.hasVariant.group||(e=d.cyclicBackgroundIndexes[n],t=i.attr("class").match(/state\-bg\-./g),t&&i.removeClass(t[0]),i.addClass(h.CYCLIC_BG+e),(n+=1)===d.cyclicBackgroundIndexes.length&&(n=0))})},calcGuardedMaxHeight:function(t,n){var i,r=0,a=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-bottom"),10);return n.siblings().each(function(t,n){var i=e(n),a=i.outerHeight(!0);r+=a}),i=t,i-=a,i-=o,i-=r},resetHeight:function(t){t.removeClass(h.STATE_Y2),t.removeClass(h.HEIGHT_ADJUSTED),t.removeClass(h.HEIGHT_ADJUSTED_TO_TIER),t.css("height",""),t.contentGuards&&e.each(t.contentGuards,function(e,t){t.css("max-height","")})},heightToNextCol:function(e){var t=e.outerHeight(),n=parseInt(e.css("margin-top"),10),i=d.columnWidth(),r=(t-n)/i;e.css({height:Math.ceil(r)*i-n}),e.addClass(h.HEIGHT_ADJUSTED)},appendModules:function(e){m.getContainer().append(e),m.onDomChange(e)},prependModules:function(e){m.getContainer().prepend(e),m.onDomChange(e)},onDomChange:function(t){clearTimeout(p.domChangeTimeout),p.domChangeTimeout=setTimeout(function(){m.reflow(!0)},50),p.shelfPacker.hardReset(),m.isEditable()&&t&&t.each(function(t,n){e(n).first().trigger("new:fieldset")})}},g={resize:function(){p.shelfPacker.handleResize(),m.processModules(),m.reflow(!0)},moduleRemove:function(){this.moduleRemoving||(this.moduleRemoving=!0,p.shelfPacker.remove(this),m.reflow())},moduleDragEnd:function(){m.getItemsFieldset().trigger("orderfieldsets"),m.reflow()},moduleSizeChange:function(){m.reflow(!0),p.shelfPacker.handleResize()},relatedDomChange:function(){clearTimeout(p.domChangeTimeout),p.domChangeTimeout=setTimeout(function(){p.shelfPacker.hardReset(),m.reflow()},50)}},v={getContainer:m.getContainer,appendItems:m.appendModules,prependItems:m.prependModules},t({self:c,o:d,m:h,internal:p,elements:f,fn:m,handlers:g,api:v}).create()};return l.markup={CONTAINER:"module-layout",GLOBAL_PAGE:"global-page",RAIL:"rail",MODULE:"module",MODULE_CONTENT_GUARD:"module-content-guard",MODULE_COMPONENTS:{head:"module-head",body:"module-body"},ITEMS_FIELDSET:"items-fieldset",ITEM_CONTAINER:"item-container",PROMO_TIER:"promo-tier",ZERO_BLOCK:"zero-block",GUARDED:"state-guarded",STATE_Y2:"state-y2",HEIGHT_ADJUSTED:"state-height-adjusted",CYCLIC_BG:"state-bg-",DRAGGING:"state-dragging",SORTABLE:"state-sortable",EDITABLE:o.markup.EDITABLE,HEIGHT_ADJUSTED_TO_TIER:"state-height-adjusted-to-tier"},l}),define("ui/ListingLayout",["jquery","factories/moduleFactory","ui/ItemContainer"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:"."+s.CONTAINER,itemSelector:"."+s.LISTING_ITEM},r),l={name:"ListingLayout",$e:o.$e||e(o.selector),components:{},events:{},itemContainer:null},u={},c={init:function(){l.itemContainer=new n(e.extend({$e:l.$e,layout:a,itemSelector:o.itemSelector},r))},getContainer:function(){return l.$e},appendItems:function(t){var n,i;n=c.getContainer(),i=n.find(o.itemSelector).last(),i.length?i.after(t):n.append(t),l.itemContainer.isEditable()&&t.each(function(t,n){e(n).first().trigger("new:fieldset")})},prependItems:function(t){var n,i;n=c.getContainer(),i=n.find(o.itemSelector).first(),i.length?i.before(t):n.prepend(t),l.itemContainer.isEditable()&&t.each(function(t,n){e(n).first().trigger("new:fieldset")})}},d={},h={getContainer:c.getContainer,appendItems:c.appendItems,prependItems:c.prependItems},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={CONTAINER:"listing-layout",LISTING_ITEM:"listing-layout-item"},i}),define("services/ExternalLinkObserver",["jquery"],function(e){"use strict";return function(t,n){var i,r,a,o;i=e.extend({$e:null,selector:"body"},t),r={name:"ExternalLinkObserver",$e:i.$e||e(i.selector),linksInModal:i.linksInModal||!1,coreInstances:n,nonHTMLURLRegex:new RegExp(".(pdf|doc|docx|ppt|pptx|xls|xlsx)$"),localLinkRegex:new RegExp("/"+window.location.host+"/"),qualifiedURLRegex:new RegExp("^[A-Za-z]{3,7}://")},a={init:function(){var e=r.linksInModal?"a":'a[target!="_blank"]';r.$e.on("click",e,o.linkClick)},checkAndHandleExternalLink:function(t){var n=e(t),i=t.href,a=null,o=null,s=null;if(i&&r.qualifiedURLRegex.test(i)&&!r.localLinkRegex.test(i)){if(r.linksInModal||n.data("showInModal"))return o=new URL(location),"https:"===o.protocol&&(s=new URL(i),s.protocol="https:",i=s.toString()),r.nonHTMLURLRegex.test(i)||(a=r.coreInstances.modalsManager.launchModal({content:'<iframe src="'+i+'" height="100%" width="100%"></iframe>'}),a.modal.addClass("variant-external-link-modal")),!1;n.attr("target","_blank")}return!0}},o={linkClick:function(){return a.checkAndHandleExternalLink(this)}},a.init()}}),define("utils/transitionUtil",[],function(){"use strict";var e={end:"transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd"};return{oneEnd:function(t,n){t.one(e.end,n)},onEnd:function(t,n){t.on(e.end,n)}}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define("parsley",["jquery"],t):(e=e||self).parsley=t(e.jQuery)}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(){}function o(){this.__id__=S.generateID()}function s(t){e.extend(!0,this,t)}function l(e,t){this.__class__="ValidatorRegistry",this.locale="en",this.init(e||{},t||{})}function u(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function c(e,t){return function(n){for(var i=arguments.length,a=new Array(1<i?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return a.pop(),t.apply(void 0,[n].concat(r((s=e,a.map(S.parse[s])))));var s}}function d(e){return{validateDate:c("date",e),validateNumber:c("number",e),requirementType:e.length<=2?"string":["string","string"],priority:30}}function h(t,n,i){this.__class__="Form",this.element=t,this.$element=e(t),this.domOptions=n,this.options=i,this.parent=window.Parsley,this.fields=[],this.validationResult=null}function p(e,t,i,r,a){var o=window.Parsley._validatorRegistry.validators[t],l=new s(o);n(this,{validator:l,name:t,requirements:i,priority:r=r||e.options[t+"Priority"]||l.priority,isDomConstraint:a=!0===a}),this._parseRequirements(e.options)}function f(t,n,i,r){this.__class__="Field",this.element=t,this.$element=e(t),void 0!==r&&(this.parent=r),this.options=i,this.domOptions=n,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()}function m(){this.__class__="FieldMultiple"}function g(i,r,a){this.element=i,this.$element=e(i);var o=this.$element.data("Parsley");if(o)return void 0!==a&&o.parent===window.Parsley&&(o.parent=a,o._resetOptions(o.options)),"object"===t(r)&&n(o.options,r),o;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==a&&"Form"!==a.__class__)throw new Error("Parent instance must be a Form instance");return this.parent=a||window.Parsley,this.init(r)}function v(){S.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")}function y(e,t){return e.parsleyAdaptedCallback||(e.parsleyAdaptedCallback=function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(this),e.apply(t||O,n)}),e.parsleyAdaptedCallback}function _(e){return 0===e.lastIndexOf(P,0)?e.substr(P.length):e}var b=1,T={},S={attr:function(e,t,n){var i,r,a,o=new RegExp("^"+t,"i");if(void 0===n)n={};else for(i in n)n.hasOwnProperty(i)&&delete n[i];if(!e)return n;for(i=(a=e.attributes).length;i--;)(r=a[i])&&r.specified&&o.test(r.name)&&(n[this.camelize(r.name.slice(t.length))]=this.deserializeValue(r.value));return n},checkAttr:function(e,t,n){return e.hasAttribute(t+n)},setAttr:function(e,t,n,i){e.setAttribute(this.dasherize(t+n),String(i))},getType:function(e){return e.getAttribute("type")||"text"},generateID:function(){return""+b++},deserializeValue:function(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?JSON.parse(e):e:t):e}catch(t){return e}},camelize:function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},dasherize:function(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var e;window.console&&"function"==typeof window.console.warn&&(e=window.console).warn.apply(e,arguments)},warnOnce:function(e){T[e]||(T[e]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){T={}},trimString:function(e){return e.replace(/^\s+|\s+$/g,"")},parse:{date:function(e){var t=e.match(/^(\d{4,})-(\d\d)-(\d\d)$/);if(!t)return null;var n=i(t.map(function(e){return parseInt(e,10)}),4),r=(n[0],n[1]),a=n[2],o=n[3],s=new Date(r,a-1,o);return s.getFullYear()!==r||s.getMonth()+1!==a||s.getDate()!==o?null:s},string:function(e){return e},integer:function(e){return isNaN(e)?null:parseInt(e,10)},number:function(e){if(isNaN(e))throw null;return parseFloat(e)},boolean:function(e){return!/^\s*false\s*$/i.test(e)},object:function(e){return S.deserializeValue(e)},regexp:function(e){var t="";return e=/^\/.*\/(?:[gimy]*)$/.test(e)?(t=e.replace(/.*\/([gimy]*)$/,"$1"),e.replace(new RegExp("^/(.*?)/"+t+"$"),"$1")):"^"+e+"$",new RegExp(e,t)}},parseRequirement:function(e,t){var n=this.parse[e||"string"];if(!n)throw'Unknown requirement specification: "'+e+'"';var i=n(t);if(null===i)throw"Requirement is not a ".concat(e,': "').concat(t,'"');return i},namespaceEvents:function(t,n){return(t=this.trimString(t||"").split(/\s+/))[0]?e.map(t,function(e){return"".concat(e,".").concat(n)}).join(" "):""},difference:function(t,n){var i=[];return e.each(t,function(e,t){-1==n.indexOf(t)&&i.push(t)}),i},all:function(t){return e.when.apply(e,r(t).concat([42,42]))},objectCreate:Object.create||function(e){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=t(e))throw TypeError("Argument must be an object");a.prototype=e;var n=new a;return a.prototype=null,n},_SubmitSelector:'input[type="submit"], button:submit'},w={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"};o.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){function t(){var t=e.Deferred();return!0!==n.validationResult&&t.reject(),t.resolve().promise()}var n=this;return[t,t]},actualizeOptions:function(){return S.attr(this.element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(e){for(var t in this.domOptions=S.objectCreate(this.parent.options),this.options=S.objectCreate(this.domOptions),e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);this.actualizeOptions()},_listeners:null,on:function(e,t){return this._listeners=this._listeners||{},(this._listeners[e]=this._listeners[e]||[]).push(t),this},subscribe:function(t,n){e.listenTo(this,t.toLowerCase(),n)},off:function(e,t){var n=this._listeners&&this._listeners[e];if(n)if(t)for(var i=n.length;i--;)n[i]===t&&n.splice(i,1);else delete this._listeners[e];return this},unsubscribe:function(t){e.unsubscribeTo(this,t.toLowerCase())},trigger:function(e,t,n){t=t||this;var i,r=this._listeners&&this._listeners[e];if(r)for(var a=r.length;a--;)if(!1===(i=r[a].call(t,t,n)))return i;return!this.parent||this.parent.trigger(e,t,n)},asyncIsValid:function(e,t){return S.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:e,force:t})},_findRelated:function(){return this.options.multiple?e(this.parent.element.querySelectorAll("[".concat(this.options.namespace,'multiple="').concat(this.options.multiple,'"]'))):this.$element}},s.prototype={validate:function(e,t){if(this.fn)return 3<arguments.length&&(t=[].slice.call(arguments,1,-1)),this.fn(e,t);if(Array.isArray(e)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}var n=arguments[arguments.length-1];if(this.validateDate&&n._isDateInput())return arguments[0]=S.parse.date(arguments[0]),null!==arguments[0]&&this.validateDate.apply(this,arguments);if(this.validateNumber)return!e||!isNaN(e)&&(arguments[0]=parseFloat(arguments[0]),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(t,n){if("string"!=typeof t)return Array.isArray(t)?t:[t];var i=this.requirementType;if(Array.isArray(i)){for(var r=function(e,t){var n=e.match(/^\s*\[(.*)\]\s*$/);if(!n)throw'Requirement is not an array: "'+e+'"';var i=n[1].split(",").map(S.trimString);if(i.length!==t)throw"Requirement has "+i.length+" values when "+t+" are needed";return i}(t,i.length),a=0;a<r.length;a++)r[a]=S.parseRequirement(i[a],r[a]);return r}return e.isPlainObject(i)?function(e,t,n){var i=null,r={};for(var a in e)if(a){var o=n(a);"string"==typeof o&&(o=S.parseRequirement(e[a],o)),r[a]=o}else i=S.parseRequirement(e[a],t);return[i,r]}(i,t,n):[S.parseRequirement(i,t)]},requirementType:"string",priority:2};var E={email:/^((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))$/,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,date:{test:function(e){return null!==S.parse.date(e)}},url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$")};E.range=E.number,l.prototype={init:function(e,t){for(var i in this.catalog=t,this.validators=n({},this.validators),e)this.addValidator(i,e[i].fn,e[i].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(e){if(void 0===this.catalog[e])throw new Error(e+" is not available in the catalog");return this.locale=e,this},addCatalog:function(e,n,i){return"object"===t(n)&&(this.catalog[e]=n),!0===i?this.setLocale(e):this},addMessage:function(e,t,n){return void 0===this.catalog[e]&&(this.catalog[e]={}),this.catalog[e][t]=n,this},addMessages:function(e,t){for(var n in t)this.addMessage(e,n,t[n]);return this},addValidator:function(e,t,n){if(this.validators[e])S.warn('Validator "'+e+'" is already defined.');else if(w.hasOwnProperty(e))return void S.warn('"'+e+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},hasValidator:function(e){return!!this.validators[e]},updateValidator:function(e,t,n){return this.validators[e]?this._setValidator.apply(this,arguments):(S.warn('Validator "'+e+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(e){return this.validators[e]||S.warn('Validator "'+e+'" is not defined.'),delete this.validators[e],this},_setValidator:function(e,n,i){for(var r in"object"!==t(n)&&(n={fn:n,priority:i}),n.validate||(n=new s(n)),(this.validators[e]=n).messages||{})this.addMessage(r,e,n.messages[r]);return this},getErrorMessage:function(e){return("type"===e.name?(this.catalog[this.locale][e.name]||{})[e.requirements]:this.formatMessage(this.catalog[this.locale][e.name],e.requirements))||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(e,n){if("object"!==t(n))return"string"==typeof e?e.replace(/%s/i,n):"";for(var i in n)e=this.formatMessage(e,n[i]);return e},validators:{notblank:{validateString:function(e){return/\S/.test(e)},priority:2},required:{validateMultiple:function(e){return 0<e.length},validateString:function(e){return/\S/.test(e)},priority:512},type:{validateString:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{},r=i.step,a=void 0===r?"any":r,o=i.base,s=void 0===o?0:o,l=E[t];if(!l)throw new Error("validator type `"+t+"` is not supported");if(!e)return!0;if(!l.test(e))return!1;if("number"===t&&!/^any$/i.test(a||"")){var c=Number(e),d=Math.max(u(a),u(s));if(u(c)>d)return!1;var h=function(e){return Math.round(e*Math.pow(10,d))};if((h(c)-h(s))%h(a)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(e,t){return!e||t.test(e)},requirementType:"regexp",priority:64},minlength:{validateString:function(e,t){return!e||e.length>=t},requirementType:"integer",priority:30},maxlength:{validateString:function(e,t){return e.length<=t},requirementType:"integer",priority:30},length:{validateString:function(e,t,n){return!e||e.length>=t&&e.length<=n},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(e,t){return e.length>=t},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(e,t){return e.length<=t},requirementType:"integer",priority:30},check:{validateMultiple:function(e,t,n){return e.length>=t&&e.length<=n},requirementType:["integer","integer"],priority:30},min:d(function(e,t){return t<=e}),max:d(function(e,t){return e<=t}),range:d(function(e,t,n){return t<=e&&e<=n}),equalto:{validateString:function(t,n){if(!t)return!0;var i=e(n);return i.length?t===i.val():t===n},priority:256},euvatin:{validateString:function(e){return!e||/^[A-Z][A-Z][A-Za-z0-9 -]{2,}$/.test(e)},priority:30}}};var C={};C.Form={_actualizeTriggers:function(){var e=this;this.$element.on("submit.Parsley",function(t){e.onSubmitValidate(t)}),this.$element.on("click.Parsley",S._SubmitSelector,function(t){e.onSubmitButton(t)}),!1!==this.options.uiEnabled&&this.element.setAttribute("novalidate","")},focus:function(){if(!(this._focusedField=null)===this.validationResult||"none"===this.options.focus)return null;for(var e=0;e<this.fields.length;e++){var t=this.fields[e];if(!0!==t.validationResult&&0<t.validationResult.length&&void 0===t.options.noFocus&&(this._focusedField=t.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.focus()},_destroyUI:function(){this.$element.off(".Parsley")}},C.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var e=function e(t,n,i){for(var r=[],a=[],o=0;o<t.length;o++){for(var s=!1,l=0;l<n.length;l++)if(t[o].assert.name===n[l].assert.name){s=!0;break}s?a.push(t[o]):r.push(t[o])}return{kept:a,added:r,removed:i?[]:e(n,t,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(e),this._actualizeTriggers(),!e.kept.length&&!e.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var e=[],t=0;t<this.validationResult.length;t++)e.push(this.validationResult[t].errorMessage||this._getErrorMessage(this.validationResult[t].assert));return e},addError:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},i=n.message,r=n.assert,a=n.updateClass,o=void 0===a||a;this._buildUI(),this._addError(e,{message:i,assert:r}),o&&this._errorClass()},updateError:function(e,t){var n=1<arguments.length&&void 0!==t?t:{},i=n.message,r=n.assert,a=n.updateClass,o=void 0===a||a;this._buildUI(),this._updateError(e,{message:i,assert:r}),o&&this._errorClass()},removeError:function(e,t){var n=(1<arguments.length&&void 0!==t?t:{}).updateClass,i=void 0===n||n;this._buildUI(),this._removeError(e),i&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():0<this.validationResult.length?this._errorClass():this._resetClass()},_manageErrorsMessages:function(t){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return t.added.length||t.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(e(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").find(".parsley-custom-error-message").html(this.options.errorMessage)):(this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-custom-error-message").remove());for(var n=0;n<t.removed.length;n++)this._removeError(t.removed[n].assert.name);for(n=0;n<t.added.length;n++)this._addError(t.added[n].assert.name,{message:t.added[n].errorMessage,assert:t.added[n].assert});for(n=0;n<t.kept.length;n++)this._updateError(t.kept[n].assert.name,{message:t.kept[n].errorMessage,assert:t.kept[n].assert})}},_addError:function(t,n){var i=n.message,r=n.assert;this._insertErrorWrapper(),this._ui.$errorClassHandler.attr("aria-describedby",this._ui.errorsWrapperId),this._ui.$errorsWrapper.addClass("filled").attr("aria-hidden","false").append(e(this.options.errorTemplate).addClass("parsley-"+t).html(i||this._getErrorMessage(r)))},_updateError:function(e,t){var n=t.message,i=t.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+e).html(n||this._getErrorMessage(i))},_removeError:function(e){this._ui.$errorClassHandler.removeAttr("aria-describedby"),this._ui.$errorsWrapper.removeClass("filled").attr("aria-hidden","true").find(".parsley-"+e).remove()},_getErrorMessage:function(e){var t=e.name+"Message";return void 0!==this.options[t]?window.Parsley.formatMessage(this.options[t],e.requirements):window.Parsley.getErrorMessage(e)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var t={};this.element.setAttribute(this.options.namespace+"id",this.__id__),t.$errorClassHandler=this._manageClassHandler(),t.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),t.$errorsWrapper=e(this.options.errorsWrapper).attr("id",t.errorsWrapperId),t.lastValidationResult=[],t.validationInformationVisible=!1,this._ui=t}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&e(this.options.classHandler).length)return e(this.options.classHandler);var n=this.options.classHandler;if("string"==typeof this.options.classHandler&&"function"==typeof window[this.options.classHandler]&&(n=window[this.options.classHandler]),"function"==typeof n){var i=n.call(this,this);if(void 0!==i&&i.length)return i}else{if("object"===t(n)&&n instanceof jQuery&&n.length)return n;n&&S.warn("The class handler `"+n+"` does not exist in DOM nor as a global JS function")}return this._inputHolder()},_inputHolder:function(){return this.options.multiple&&"SELECT"!==this.element.nodeName?this.$element.parent():this.$element},_insertErrorWrapper:function(){var n=this.options.errorsContainer;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof n){if(e(n).length)return e(n).append(this._ui.$errorsWrapper);"function"==typeof window[n]?n=window[n]:S.warn("The errors container `"+n+"` does not exist in DOM nor as a global JS function")}return"function"==typeof n&&(n=n.call(this,this)),"object"===t(n)&&n.length?n.append(this._ui.$errorsWrapper):this._inputHolder().after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var e,t=this,n=this._findRelated();n.off(".Parsley"),this._failedOnce?n.on(S.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){t._validateIfNeeded()}):(e=S.namespaceEvents(this.options.trigger,"Parsley"))&&n.on(e,function(e){t._validateIfNeeded(e)})},_validateIfNeeded:function(e){var t=this;e&&/key|input/.test(e.type)&&(!this._ui||!this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||(this.options.debounce?(window.clearTimeout(this._debounced),this._debounced=window.setTimeout(function(){return t.validate()},this.options.debounce)):this.validate())},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}};var k={pending:null,resolved:!0,rejected:!1};h.prototype={onSubmitValidate:function(e){var t=this;if(!0!==e.parsley){var n=this._submitSource||this.$element.find(S._SubmitSelector)[0];if(this._submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!n||null===n.getAttribute("formnovalidate")){window.Parsley._remoteCache={};var i=this.whenValidate({event:e});"resolved"===i.state()&&!1!==this._trigger("submit")||(e.stopImmediatePropagation(),e.preventDefault(),"pending"===i.state()&&i.done(function(){t._submit(n)}))}}},onSubmitButton:function(e){this._submitSource=e.currentTarget},_submit:function(t){if(!1!==this._trigger("submit")){if(t){var i=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===i.length&&(i=e('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),i.attr({name:t.getAttribute("name"),value:t.getAttribute("value")})}this.$element.trigger(n(e.Event("submit"),{parsley:!0}))}},validate:function(t){if(1<=arguments.length&&!e.isPlainObject(t)){S.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var n=Array.prototype.slice.call(arguments);t={group:n[0],force:n[1],event:n[2]}}return k[this.whenValidate(t).state()]},whenValidate:function(t){var i,a=this,o=0<arguments.length&&void 0!==t?t:{},s=o.group,l=o.force,u=o.event;(this.submitEvent=u)&&(this.submitEvent=n({},u,{preventDefault:function(){S.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),a.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var c=this._withoutReactualizingFormOptions(function(){return e.map(a.fields,function(e){return e.whenValidate({force:l,group:s})})});return(i=S.all(c).done(function(){a._trigger("success")}).fail(function(){a.validationResult=!1,a.focus(),a._trigger("error")}).always(function(){a._trigger("validated")})).pipe.apply(i,r(this._pipeAccordingToValidationResult()))},isValid:function(t){if(1<=arguments.length&&!e.isPlainObject(t)){
S.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var n=Array.prototype.slice.call(arguments);t={group:n[0],force:n[1]}}return k[this.whenValid(t).state()]},whenValid:function(t){var n=this,i=0<arguments.length&&void 0!==t?t:{},r=i.group,a=i.force;this._refreshFields();var o=this._withoutReactualizingFormOptions(function(){return e.map(n.fields,function(e){return e.whenValid({group:r,force:a})})});return S.all(o)},refresh:function(){return this._refreshFields(),this},reset:function(){for(var e=0;e<this.fields.length;e++)this.fields[e].reset();this._trigger("reset")},destroy:function(){this._destroyUI();for(var e=0;e<this.fields.length;e++)this.fields[e].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var t=this,n=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){t.$element.find(t.options.inputs).not(t.options.excluded).not("[".concat(t.options.namespace,"excluded=true]")).each(function(e,n){var i=new window.Parsley.Factory(n,{},t);if("Field"===i.__class__||"FieldMultiple"===i.__class__){var r=i.__class__+"-"+i.__id__;void 0===t.fieldsMappedById[r]&&(t.fieldsMappedById[r]=i,t.fields.push(i))}}),e.each(S.difference(n,t.fields),function(e,t){t.reset()})}),this},_withoutReactualizingFormOptions:function(e){var t=this.actualizeOptions;this.actualizeOptions=function(){return this};var n=e();return this.actualizeOptions=t,n},_trigger:function(e){return this.trigger("form:"+e)}};var x={pending:null,resolved:!0,rejected:!(p.prototype={validate:function(e,t){var n;return(n=this.validator).validate.apply(n,[e].concat(r(this.requirementList),[t]))},_parseRequirements:function(e){var t=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(n){return e[t.name+((i=n)[0].toUpperCase()+i.slice(1))];var i})}})};f.prototype={validate:function(t){1<=arguments.length&&!e.isPlainObject(t)&&(S.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),t={options:t});var n=this.whenValidate(t);if(!n)return!0;switch(n.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(e){var t,n=this,i=0<arguments.length&&void 0!==e?e:{},a=i.force,o=i.group;if(this.refresh(),!o||this._isInGroup(o))return this.value=this.getValue(),this._trigger("validate"),(t=this.whenValid({force:a,value:this.value,_refreshed:!0}).always(function(){n._reflowUI()}).done(function(){n._trigger("success")}).fail(function(){n._trigger("error")}).always(function(){n._trigger("validated")})).pipe.apply(t,r(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(e){return void 0===e&&(e=this.getValue()),!(!e.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(t){return Array.isArray(this.options.group)?-1!==e.inArray(t,this.options.group):this.options.group===t},isValid:function(t){if(1<=arguments.length&&!e.isPlainObject(t)){S.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var n=Array.prototype.slice.call(arguments);t={force:n[0],value:n[1]}}var i=this.whenValid(t);return!i||x[i.state()]},whenValid:function(t){var n=this,i=0<arguments.length&&void 0!==t?t:{},r=i.force,a=void 0!==r&&r,o=i.value,s=i.group;if(i._refreshed||this.refresh(),!s||this._isInGroup(s)){if(this.validationResult=!0,!this.hasConstraints())return e.when();if(null==o&&(o=this.getValue()),!this.needsValidation(o)&&!0!==a)return e.when();var l=this._getGroupedConstraints(),u=[];return e.each(l,function(t,i){var r=S.all(e.map(i,function(e){return n._validateConstraint(o,e)}));if(u.push(r),"rejected"===r.state())return!1}),S.all(u)}},_validateConstraint:function(t,n){var i=this,r=n.validate(t,this);return!1===r&&(r=e.Deferred().reject()),S.all([r]).fail(function(e){i.validationResult instanceof Array||(i.validationResult=[]),i.validationResult.push({assert:n,errorMessage:"string"==typeof e&&e})})},getValue:function(){var e;return null==(e="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())?"":this._handleWhitespace(e)},reset:function(){return this._resetUI(),this._trigger("reset")},destroy:function(){this._destroyUI(),this.$element.removeData("Parsley"),this.$element.removeData("FieldMultiple"),this._trigger("destroy")},refresh:function(){return this._refreshConstraints(),this},_refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},refreshConstraints:function(){return S.warnOnce("Parsley's refreshConstraints is deprecated. Please use refresh"),this.refresh()},addConstraint:function(e,t,n,i){if(window.Parsley._validatorRegistry.validators[e]){var r=new p(this,e,t,n,i);"undefined"!==this.constraintsByName[r.name]&&this.removeConstraint(r.name),this.constraints.push(r),this.constraintsByName[r.name]=r}return this},removeConstraint:function(e){for(var t=0;t<this.constraints.length;t++)if(e===this.constraints[t].name){this.constraints.splice(t,1);break}return delete this.constraintsByName[e],this},updateConstraint:function(e,t,n){return this.removeConstraint(e).addConstraint(e,t,n)},_bindConstraints:function(){for(var e=[],t={},n=0;n<this.constraints.length;n++)!1===this.constraints[n].isDomConstraint&&(e.push(this.constraints[n]),t[this.constraints[n].name]=this.constraints[n]);for(var i in this.constraints=e,this.constraintsByName=t,this.options)this.addConstraint(i,this.options[i],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){null!==this.element.getAttribute("required")&&this.addConstraint("required",!0,void 0,!0),null!==this.element.getAttribute("pattern")&&this.addConstraint("pattern",this.element.getAttribute("pattern"),void 0,!0);var e=this.element.getAttribute("min"),t=this.element.getAttribute("max");null!==e&&null!==t?this.addConstraint("range",[e,t],void 0,!0):null!==e?this.addConstraint("min",e,void 0,!0):null!==t&&this.addConstraint("max",t,void 0,!0),null!==this.element.getAttribute("minlength")&&null!==this.element.getAttribute("maxlength")?this.addConstraint("length",[this.element.getAttribute("minlength"),this.element.getAttribute("maxlength")],void 0,!0):null!==this.element.getAttribute("minlength")?this.addConstraint("minlength",this.element.getAttribute("minlength"),void 0,!0):null!==this.element.getAttribute("maxlength")&&this.addConstraint("maxlength",this.element.getAttribute("maxlength"),void 0,!0);var n=S.getType(this.element);return"number"===n?this.addConstraint("type",["number",{step:this.element.getAttribute("step")||"1",base:e||this.element.getAttribute("value")}],void 0,!0):/^(email|url|range|date)$/i.test(n)?this.addConstraint("type",n,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(e){return this.trigger("field:"+e)},_handleWhitespace:function(e){return!0===this.options.trimValue&&S.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(e=e.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(e=S.trimString(e)),e},_isDateInput:function(){var e=this.constraintsByName.type;return e&&"date"===e.requirements},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var e=[],t={},n=0;n<this.constraints.length;n++){var i=this.constraints[n].priority;t[i]||e.push(t[i]=[]),t[i].push(this.constraints[n])}return e.sort(function(e,t){return t[0].priority-e[0].priority}),e}},m.prototype={addElement:function(e){return this.$elements.push(e),this},_refreshConstraints:function(){var t;if(this.constraints=[],"SELECT"===this.element.nodeName)return this.actualizeOptions()._bindConstraints(),this;for(var n=0;n<this.$elements.length;n++)if(e("html").has(this.$elements[n]).length){t=this.$elements[n].data("FieldMultiple")._refreshConstraints().constraints;for(var i=0;i<t.length;i++)this.addConstraint(t[i].name,t[i].requirements,t[i].priority,t[i].isDomConstraint)}else this.$elements.splice(n,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if("INPUT"===this.element.nodeName){var t=S.getType(this.element);if("radio"===t)return this._findRelated().filter(":checked").val()||"";if("checkbox"===t){var n=[];return this._findRelated().filter(":checked").each(function(){n.push(e(this).val())}),n}}return"SELECT"===this.element.nodeName&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}},g.prototype={init:function(e){return this.__class__="Parsley",this.__version__="2.9.2",this.__id__=S.generateID(),this._resetOptions(e),"FORM"===this.element.nodeName||S.checkAttr(this.element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){var e=S.getType(this.element);return"radio"===e||"checkbox"===e||"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple")},handleMultiple:function(){var t,n,i=this;if(this.options.multiple=this.options.multiple||(t=this.element.getAttribute("name"))||this.element.getAttribute("id"),"SELECT"===this.element.nodeName&&null!==this.element.getAttribute("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return S.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),t&&e('input[name="'+t+'"]').each(function(e,t){var n=S.getType(t);"radio"!==n&&"checkbox"!==n||t.setAttribute(i.options.namespace+"multiple",i.options.multiple)});for(var r=this._findRelated(),a=0;a<r.length;a++)if(void 0!==(n=e(r.get(a)).data("Parsley"))){this.$element.data("FieldMultiple")||n.addElement(this.$element);break}return this.bind("parsleyField",!0),n||this.bind("parsleyFieldMultiple")},bind:function(t,n){var i;switch(t){case"parsleyForm":i=e.extend(new h(this.element,this.domOptions,this.options),new o,window.ParsleyExtend)._bindFields();break;case"parsleyField":i=e.extend(new f(this.element,this.domOptions,this.options,this.parent),new o,window.ParsleyExtend);break;case"parsleyFieldMultiple":i=e.extend(new f(this.element,this.domOptions,this.options,this.parent),new m,new o,window.ParsleyExtend)._init();break;default:throw new Error(t+"is not a supported Parsley type")}return this.options.multiple&&S.setAttr(this.element,this.options.namespace,"multiple",this.options.multiple),void 0!==n?this.$element.data("FieldMultiple",i):(this.$element.data("Parsley",i),i._actualizeTriggers(),i._trigger("init")),i}};var I=e.fn.jquery.split(".");if(parseInt(I[0])<=1&&parseInt(I[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";I.forEach||S.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var D=n(new o,{element:document,$element:e(document),actualizeOptions:null,_resetOptions:null,Factory:g,version:"2.9.2"});n(f.prototype,C.Field,o.prototype),n(h.prototype,C.Form,o.prototype),n(g.prototype,o.prototype),e.fn.parsley=e.fn.psly=function(t){if(1<this.length){var n=[];return this.each(function(){n.push(e(this).parsley(t))}),n}if(0!=this.length)return new g(this[0],t)},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),D.options=n(S.objectCreate(w),window.ParsleyConfig),window.ParsleyConfig=D.options,window.Parsley=window.psly=D,D.Utils=S,window.ParsleyUtils={},e.each(S,function(e,t){"function"==typeof t&&(window.ParsleyUtils[e]=function(){return S.warnOnce("Accessing `window.ParsleyUtils` is deprecated. Use `window.Parsley.Utils` instead."),S[e].apply(S,arguments)})});var A=window.Parsley._validatorRegistry=new l(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},e.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator hasValidator".split(" "),function(e,t){window.Parsley[t]=function(){return A[t].apply(A,arguments)},window.ParsleyValidator[t]=function(){var e;return S.warnOnce("Accessing the method '".concat(t,"' through Validator is deprecated. Simply call 'window.Parsley.").concat(t,"(...)'")),(e=window.Parsley)[t].apply(e,arguments)}}),window.Parsley.UI=C,window.ParsleyUI={removeError:function(e,t,n){var i=!0!==n;return S.warnOnce("Accessing UI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),e.removeError(t,{updateClass:i})},getErrorsMessages:function(e){return S.warnOnce("Accessing UI is deprecated. Call 'getErrorsMessages' on the instance directly."),e.getErrorsMessages()}},e.each("addError updateError".split(" "),function(e,t){window.ParsleyUI[t]=function(e,n,i,r,a){var o=!0!==a;return S.warnOnce("Accessing UI is deprecated. Call '".concat(t,"' on the instance directly. Please comment in issue 1073 as to your need to call this method.")),e[t](n,{message:i,assert:r,updateClass:o})}}),!1!==window.ParsleyConfig.autoBind&&e(function(){e("[data-parsley-validate]").length&&e("[data-parsley-validate]").parsley()});var O=e({}),P="parsley:";return e.listen=function(e,n){var i;if(v(),"object"===t(arguments[1])&&"function"==typeof arguments[2]&&(i=arguments[1],n=arguments[2]),"function"!=typeof n)throw new Error("Wrong parameters");window.Parsley.on(_(e),y(n,i))},e.listenTo=function(e,t,n){if(v(),!(e instanceof f||e instanceof h))throw new Error("Must give Parsley instance");if("string"!=typeof t||"function"!=typeof n)throw new Error("Wrong parameters");e.on(_(t),y(n))},e.unsubscribe=function(e,t){if(v(),"string"!=typeof e||"function"!=typeof t)throw new Error("Wrong arguments");window.Parsley.off(_(e),t.parsleyAdaptedCallback)},e.unsubscribeTo=function(e,t){if(v(),!(e instanceof f||e instanceof h))throw new Error("Must give Parsley instance");e.off(_(t))},e.unsubscribeAll=function(t){v(),window.Parsley.off(_(t)),e("form,input,textarea,select").each(function(){var n=e(this).data("Parsley");n&&n.off(_(t))})},e.emit=function(e,t){v();var n=t instanceof f||t instanceof h,i=Array.prototype.slice.call(arguments,n?2:1);i.unshift(_(e)),n||(t=window.Parsley),t.trigger.apply(t,r(i))},e.extend(!0,D,{asyncValidators:{default:{fn:function(e){return 200<=e.status&&e.status<300},url:!1},reverse:{fn:function(e){return e.status<200||300<=e.status},url:!1}},addAsyncValidator:function(e,t,n,i){return D.asyncValidators[e]={fn:t,url:n||!1,options:i||{}},this}}),D.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(t,n,i,r){function a(){var t=D.asyncValidators[u].fn.call(r,d,n,i);return t=t||e.Deferred().reject(),e.when(t)}var o,s,l={},u=i.validator||(!0===i.reverse?"reverse":"default");if(void 0===D.asyncValidators[u])throw new Error("Calling an undefined async validator: `"+u+"`");-1<(n=D.asyncValidators[u].url||n).indexOf("{value}")?n=n.replace("{value}",encodeURIComponent(t)):l[r.element.getAttribute("name")||r.element.getAttribute("id")]=t;var c=e.extend(!0,i.options||{},D.asyncValidators[u].options);o=e.extend(!0,{},{url:n,data:l,type:"GET"},c),r.trigger("field:ajaxoptions",r,o),s=e.param(o),void 0===D._remoteCache&&(D._remoteCache={});var d=D._remoteCache[s]=D._remoteCache[s]||e.ajax(o);return d.then(a,a)},priority:-1}),D.on("form:submit",function(){D._remoteCache={}}),o.prototype.addAsyncValidator=function(){return S.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),D.addAsyncValidator.apply(D,arguments)},D.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same.",euvatin:"It's not a valid VAT Identification Number."}),D.setLocale("en"),(new function(){var t=this,i=window||global;n(this,{isNativeEvent:function(e){return e.originalEvent&&!1!==e.originalEvent.isTrusted},fakeInputEvent:function(n){t.isNativeEvent(n)&&e(n.target).trigger("input")},misbehaves:function(n){t.isNativeEvent(n)&&(t.behavesOk(n),e(document).on("change.inputevent",n.data.selector,t.fakeInputEvent),t.fakeInputEvent(n))},behavesOk:function(n){t.isNativeEvent(n)&&e(document).off("input.inputevent",n.data.selector,t.behavesOk).off("change.inputevent",n.data.selector,t.misbehaves)},install:function(){if(!i.inputEventPatched){i.inputEventPatched="0.0.3";for(var n=0,r=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'];n<r.length;n++){var a=r[n];e(document).on("input.inputevent",a,{selector:a},t.behavesOk).on("change.inputevent",a,{selector:a},t.misbehaves)}}},uninstall:function(){delete i.inputEventPatched,e(document).off(".inputevent")}})}).install(),D}),define("validators/validHtml",["jquery","parsley"],function(e,t){"use strict";var n=/<\/?[\w\s="/.':;#-\/]+>/gi;t.addValidator("validHtml",{requirementType:"string",validateString:function(t){var i,r,a;return i=e("<div />"),a=t.match(/&.*?;/g)||[],e.each(a,function(e,n){t=t.replace(new RegExp(n,"g"),i.html(n).html())}),t=t.replace(/\=\"\"/g,"").toLowerCase(),i.html(t),r=i.html().toLowerCase(),r.length&&(r=r.replace(/\=\"\"/g,"")),!!t.match(n)&&t===r},messages:{en:"This is not valid HTML"}})}),define("validators/validTime",["jquery","parsley"],function(e,t){"use strict";var n=/^([0-9]|1[0-2]):[0-5][0-9](am|pm)$/;t.addValidator("validTime",{requirementType:"string",validateString:function(e){return n.test(e)},messages:{en:"This is not a valid time"}})}),define("validators/validSvg",["jquery","parsley"],function(e,t){"use strict";var n=/^<svg(.+)<\/svg>$/;t.addValidator("validSvg",{requirementType:"string",validateString:function(t){var i;return t=e.trim(t).replace(/\n/g,""),i=e("<div />"),i.html(t),n.test(t)&&1===i.children().length&&"svg"===i.find(":first-child")[0].tagName.toLowerCase()},messages:{en:"This is not valid SVG"}})}),define("validators/validUrl",["jquery","parsley"],function(e,t){"use strict";var n=/^https?:\/\//i;t.addValidator("validUrl",{requirementType:"string",validateString:function(e){return n.test(e)},messages:{en:"This is not valid URL. Missing http:// or https://"}})}),define("validators/validEmbed",["jquery","parsley"],function(e,t){"use strict";var n=/^<iframe\s(.*?)<\/iframe>$/i;t.addValidator("validEmbed",{requirementType:"string",validateString:function(t){return n.test(e.trim(t))},messages:{en:"Please make sure your embed code contains an &lt;iframe&gt; with a closing tag &lt;/iframe&gt;"}})}),define("validators/validComparison",["jquery","parsley"],function(e,t){"use strict";var n=function(t){return isNaN(+t)?parseFloat(e(t).val()):+t};t.addValidator("gte",{validateString:function(e,t){return parseFloat(e)>=n(t)},priority:32}),t.addValidator("lte",{validateString:function(e,t){return parseFloat(e)<=n(t)},priority:32})}),define("validators/validDate",["jquery","parsley"],function(e,t){"use strict";var n=/^(1[0-2]|[0]{0,1}[1-9])\/([0-2]{0,1}[0-9]|3[0-1])\/(\d{4})$/;t.addValidator("validDate",{requirementType:"string",validateString:function(e){return n.test(e)},messages:{en:"This is not a valid date"}})}),define("validators/validPhonenumber",["jquery","parsley"],function(e,t){"use strict";var n=/^[0-9０-９٠-٩۰-۹]{2}$|^[+＋]*(?:[-x‐-―−ー－-／ ()（）［］.\[\]/~⁓∼～*]*[0-9０-９٠-٩۰-۹]){3,}[-x‐-―−ー－-／ ()（）［］.\[\]/~⁓∼～*0-9０-９٠-٩۰-۹]*(?:;ext=([0-9０-９٠-٩۰-۹]{1,7})|[  \t,]*(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|[;,xｘ#＃~～]|int|anexo|ｉｎｔ)[:\.．]?[  \t,-]*([0-9０-９٠-٩۰-۹]{1,7})#?|[- ]+([0-9０-９٠-٩۰-۹]{1,5})#)?$/i;t.addValidator("validPhonenumber",{requirementType:"string",validateString:function(e){return n.test(e)},messages:{en:"Not a valid phone number"}})}),define("factories/validatorFactory",["jquery","parsley","validators/validHtml","validators/validTime","validators/validSvg","validators/validUrl","validators/validEmbed","validators/validComparison","validators/validDate","validators/validPhonenumber"],function(e){"use strict";var t=function(n){var i,r,a,o;return i=t.markup,r=e.extend(!0,{validatorOptions:{namespace:"data-validator-",errorClass:n.m.INVALID,successClass:n.m.VALID,classHandler:function(){return n.internal.$e},errorsContainer:function(){return n.elements=n.elements||{},n.elements.validationMessage},errorsWrapper:'<div class="validation-messages"></div>',errorTemplate:'<p class="validation-message"></p>',excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden], [disabled], :hidden, .built-form.variant-mock input, .built-form.variant-mock textarea, .built-form.variant-mock select",inputs:"input, textarea, select, [contenteditable], .editable-content"}},n.o.validatorOptions),a={init:function(){a.initParsley(),a.bindEvents()},initParsley:function(){var e=n.$e.first();n.internal.validator=e.parsley(r.validatorOptions)},bindEvents:function(){var e=n.internal.validator;e.on("field:success",a.setValid),e.on("form:success",a.setValid),e.on("field:error",a.setInvalid),e.on("form:error",a.setInvalid)},setValid:function(){var e=n.internal.$e.closest("."+i.FIELD);e.addClass(n.m.VALID),e.removeClass(n.m.INVALID)},setInvalid:function(t){var r=n.internal.$e.closest("."+i.FIELD);t=t||{},r.removeClass(n.m.VALID),r.addClass(n.m.INVALID),t.silent||("FORM"===n.internal.$e[0].tagName?n.internal.$e.trigger("form:error"):e.isFunction(n.internal.validator.getErrorsMessages)&&n.internal.$e.trigger("field:error",{label:n.fn.getLabel(),errorMessages:n.internal.validator.getErrorsMessages()}))},validate:function(){n.internal.validator.validate()},isValid:function(){return n.fn.isValid?n.fn.isValid():n.internal.validator.isValid()},showError:function(e,t){var i,r,o;t=t||"serverError",i=n.internal.validator,r=!!i._ui&&i._ui.$errorsWrapper.find(".parsley-"+t).length>0,o=n.internal.validator.getErrorsMessages(),r?i.updateError(t,{message:e}):i.addError(t,{message:e}),o.push(e),n.internal.$e.trigger("field:error",{label:n.fn.getLabel(),errorMessages:o}),a.setInvalid({silent:!0})},removeError:function(e){var t;e=e||"serverError",t=n.internal.validator,t.removeError(e)},reset:function(){n.internal.validator.reset()},onValidationEvent:function(e,t){n.internal.validator.on(e,t)},offValidationEvent:function(e,t){n.internal.validator.off(e,t)}},o={validate:a.validate,isValid:a.isValid,setValid:a.setValid,setInvalid:a.setInvalid,showError:a.showError,removeError:a.removeError,resetValidation:a.reset,onValidationEvent:a.onValidationEvent,offValidationEvent:a.offValidationEvent},e.extend(n.self,o),{create:a.init}};return t.markup={FIELD:"field"},t}),define("forms/widgets/MaxLengthLimiter",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:"[maxlength]"},i),s={name:"MaxLengthLimiter",$e:a.$e||e(a.selector),field:a.field||null,maxLength:null,components:{maxLengthInput:{selector:"[maxlength]"},charCount:{selector:".char-count"}},events:{"change @maxLengthInput":"maxLengthInputChange","keyup @maxLengthInput":"maxLengthInputChange"}},l={},u={init:function(){s.field=s.field||s.$e.data("fieldInstance"),s.maxLength=l.maxLengthInput.prop("maxlength"),u.updateCharCount()},handleChange:function(){u.updateCharCount()},updateCharCount:function(){var e;l.charCount&&(e=s.field.getVal().length,l.charCount.html(e+"/"+s.maxLength),e>s.maxLength&&u.capValue())},capValue:function(){var e,t;e=s.field.getVal(),t=e.substr(0,s.maxLength),s.field.setVal(t)}},c={maxLengthInputChange:function(){u.handleChange()}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/widgets/AutoHeight",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup={},a=e.extend({$e:null,selector:"[autoheight]"},i),s={name:"AutoHeight",$e:a.$e||e(a.selector),inputLineHeight:null,components:{autoHeightInput:{selector:"[autoheight]"}},events:{"change @autoHeightInput":"autoHeightInputChange","keyup @autoHeightInput":"autoHeightInputChange"}},l={},u={init:function(){s.inputLineHeight=parseInt(l.autoHeightInput.css("line-height"),10),u.updateInputHeight()},handleChange:function(){u.updateInputHeight()},updateInputHeight:function(){l.autoHeightInput.css({height:s.inputLineHeight+"px"}),l.autoHeightInput.css({height:l.autoHeightInput[0].scrollHeight+"px"})}},c={autoHeightInputChange:function(){u.handleChange()}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/widgets/AutoSlug",["jquery","factories/moduleFactory","utils/stringUtil"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup={},o=e.extend({$e:null,selector:"[autoslug]"},r),l={name:"AutoSlug",$e:o.$e||e(o.selector),field:o.field,targetField:null,enabled:!1,formInstance:null,components:{form:{selector:"^form"},slugPrefix:{selector:".slug-prefix"}},events:{"formReady !form":"formReady"}},u={},c={init:function(){l.formInstance=u.form.data("formInstance"),l.formInstance.isReady()&&(c.getTargetField(),c.getPrefixTargetField())},getTargetField:function(){var e;e=l.$e.data("autoslugTarget"),l.targetField=l.formInstance.getField(e),u.targetFieldInput=l.targetField.getFieldInput(),u.targetFieldInput.on("focus.autoslug",function(){l.enabled=l.field.isBlank()}),u.targetFieldInput.on("keyup.autoslug blur.autoslug",function(){c.updateSlug()})},getPrefixTargetField:function(){var e;(e=l.$e.data("autoslugPrefixTarget"))&&u.form.on("change",function(){c.updatePrefix(e)})},updateSlug:function(){var e,t;l.enabled&&(e=l.targetField.getVal(),t=n.slugify(e),l.field.setVal(t))},updatePrefix:function(e){var t,n,i,r,a;t=u.form.find('[name="'+e+'"]'),n=l.$e.data("prefixHost"),t.length&&(t.hasClass("json-field")?(r=t.data("fieldInstance").getFullVal(),i=r.read_url.replace("overview/","")):"SELECT"===t[0].tagName&&(a=t.find(":selected"),i=a.data("readUrl").replace("overview/","")),u.slugPrefix.html(n+i),l.$e.data("prefixPath",i))},beforeDestroy:function(){u.targetFieldInput.off("focus.autoslug"),u.targetFieldInput.off("keyup.autoslug"),u.targetFieldInput.off("blur.autoslug")}},d={formReady:function(){c.getTargetField(),c.getPrefixTargetField()}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("js.cookie",t):(e=e||self,function(){var n=e.Cookies,i=e.Cookies=t();i.noConflict=function(){return e.Cookies=n,i}}())}(this,function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}return function t(n,i){function r(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=e({},i,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in a)a[s]&&(o+="; "+s,!0!==a[s]&&(o+="="+a[s].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+o}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],i={},r=0;r<t.length;r++){var a=t[r].split("="),o=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(i[s]=n.read(o,s),e===s)break}catch(e){}}return e?i[e]:i}},remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}),define("services/Xhr",["jquery","js.cookie"],function(e,t){"use strict";return function(n){var i,r,a,o,s,l;i=this,l=require("core"),r=e.extend(!0,{xhrSettings:{url:window.location.href,contentType:"application/json; charest=utf-8",crossDomain:!1,dataType:"json",headers:{},method:{},beforeSend:function(e){e.setRequestHeader("X-CSRFToken",t.get("csrftoken"))},error:function(){},success:function(){},complete:function(){}},endpoints:{}},n),a={serverErrorRegex:/^5[0-9]{2}$/,modalsManager:l.getInstance("modalsManager"),jqXHR:null},o={get:function(t,n){var i={url:r.endpoints.get||r.xhrSettings.url,method:"GET",data:t};return n=n||{},o.send(e.extend(!0,i,n))},getHtml:function(t,n){var i={url:t,method:"GET",contentType:"text/plain; charest=utf-8",dataType:"html"};return n=n||{},o.send(e.extend(!0,i,n))},post:function(t,n){var i={url:r.endpoints.post||r.xhrSettings.url,method:"POST",data:t};return n=n||{},o.send(e.extend(!0,i,n))},put:function(t,n){var i={url:r.endpoints.put||r.xhrSettings.url,method:"PUT",data:t};return n=n||{},o.send(e.extend(!0,i,n))},patch:function(t,n,i){var r={url:t,method:"PATCH",data:n};return i=i||{},o.send(e.extend(!0,r,i))},delete:function(t,n){var i={url:r.endpoints.delete||r.xhrSettings.url,method:"DELETE",data:t};return n=n||{},o.send(e.extend(!0,i,n))},send:function(t){var n,i,o={};return a.jqXHR&&(a.jqXHR.abort(),a.jqXHR=null),o.sendJSON=!0,o=e.extend(!0,o,r.xhrSettings,t),!o.sendJSON||o.data instanceof FormData||(o.data=JSON.stringify(o.data)),i=o.error||function(){},o.error=function(e,t,n){a.serverErrorRegex.test(e.status)&&a.modalsManager.launchUnexpectedErrorModal({errorStr:e.status+" "+e.statusText},{size:"medium"}),i(e,t,n)},n=e.ajax(o),a.jqXHR=n,n}},s={get:o.get,post:o.post,put:o.put,patch:o.patch,delete:o.delete,getHtml:o.getHtml},e.extend(i,s)}}),define("forms/widgets/SlugCheck",["jquery","factories/moduleFactory","services/Xhr","utils/functionUtil"],function(e,t,n,i){"use strict";var r=function(a){var o,s,l,u,c,d,h,p;o=this,l=r.markup={},s=e.extend({$e:null,selector:"[slugcheck]",field:null,searchDelay:250},a),u={name:"SlugCheck",$e:s.$e||e(s.selector),xhr:new n,xhrRequest:null,invalidMsg:"{{invalidSlug}} is already taken. Save with the generated slug above, or edit manually.",serverSlug:"",initialSlug:null,components:{input:{selector:"input"}},events:{change:"handleChange"}},c={},d={init:function(){d.cacheCheckEndpoint(),d.cacheSlug()},cacheCheckEndpoint:function(){u.checkEndpoint=u.$e.data("slugCheckUri")},getField:function(){
return s.field||u.$e.data("fieldInstance")},cacheSlug:function(){u.initialSlug=d.getField().getVal()},checkSlug:i.debounce(function(){var e,t,n;e=d.getField(),t=e.getVal(),t.length&&t!==u.initialSlug&&(u.xhrRequest&&u.xhrRequest.abort(),u.$e.addClass(l.PROCESSING),(n=d.getCheckEndpoint(t))&&(u.xhrRequest=u.xhr.getHtml(n,{success:function(e){u.serverSlug=e,d.validateSlug(e),u.$e.removeClass(l.PROCESSING)}})))},s.searchDelay),getCheckEndpoint:function(e){var t;return u.$e.data("pathCheck")?(t=u.$e.data("prefixPath"),t?"/path-check/?path="+t+"&slug="+e:null):u.checkEndpoint+e+"/"},validateSlug:function(e){var t,n,i;e=e||u.serverSlug,t=d.getField(),n=t.getVal(),n.length&&e.length&&n!==e?(i=u.invalidMsg.replace("{{invalidSlug}}",n),t.showError(i,"invalidSlug"),t.setVal(e,{silent:!0})):t.removeError("invalidSlug")}},h={handleChange:function(){d.checkSlug()}},p={},t({self:o,o:s,m:l,internal:u,elements:c,fn:d,handlers:h,api:p}).create()};return r.markup={},r}),define("factories/fieldFactory",["jquery","factories/moduleFactory","factories/validatorFactory","utils/statesUtil","utils/stringUtil","forms/widgets/MaxLengthLimiter","forms/widgets/AutoHeight","forms/widgets/AutoSlug","forms/widgets/SlugCheck"],function(e,t,n,i,r,a,o,s,l){"use strict";var u=function(i){var c,d,h,p,f,m;return c={widgets:{"[maxlength]":a,"[autoheight]":o,"[autoslug]":s,"[slugcheck]":l},components:{parentForm:{selector:"^form"}},events:{"click.fieldFactory @customControl":"fieldFactoryCustomControlClick","focus.fieldFactory @nativeInput":"fieldFactoryNativeInputFocus","change.fieldFactory @nativeInput":"fieldFactoryNativeInputChange","blur.fieldFactory @nativeInput":"fieldFactoryNativeInputBlur"}},d=u.markup,h={init:function(){t(i).extend({internal:i.internal.withoutNativeInput?{}:c,handlers:i.internal.withoutNativeInput?{}:p,fn:f}).create(),h.ensureTabIndex(),h.initValidator(),h.setValueState(),h.applyWidgets(),i.internal.cachedVal=i.fn.getVal(),i.internal.$e.data("fieldInstance",i.self)},getFieldInput:function(){return i.internal.withoutNativeInput?i.internal.$e:i.elements.nativeInput},ensureTabIndex:function(){var e=h.getFieldInput();e.attr("tabindex")||i.internal.noTabIndex||e.attr("tabindex",0)},initValidator:function(){n({$e:h.getFieldInput(),self:i.self,o:i.o,internal:i.internal,elements:i.elements,fn:i.fn,m:i.m}).create()},setValueState:function(){i.internal.$e.toggleClass(d.HAS_VALUE,!i.fn.isBlank())},applyWidgets:function(){e.each(c.widgets,function(e,t){h.getFieldInput().is(e)&&new t({$e:i.internal.$e,field:i.self})})},setVal:function(e,t){var n=h.getFieldInput(),r=i.internal.valMethod||"val";t=t||{},n[r](e),t.silent||(n.trigger("change",e),i.internal.withoutNativeInput&&i.self.validate()),t.isDefault&&n.trigger("change:default",e)},setDefaultVal:function(e,t){t=t||{},t.isDefault=!0,i.fn.setVal(e,t)},getVal:function(){var t=h.getFieldInput(),n=i.internal.valMethod||"val",r=t[n]();return"string"==typeof r&&(r=e.trim(r)),"null"===r&&(r=null),"file"===t.attr("type")&&(r=t[0].files[0]),r},enable:function(){h.getFieldInput().prop("disabled",!1),i.internal.$e.removeClass(d.DISABLED)},disable:function(){h.getFieldInput().prop("disabled",!0),i.internal.$e.addClass(d.DISABLED)},reset:function(e){i.fn.setVal("",e)},focus:function(){h.getFieldInput().focus(),h.setFocusState()},blur:function(){h.getFieldInput().blur(),h.unsetFocusState()},setFocusState:function(){i.internal.$e.addClass(d.FOCUS)},unsetFocusState:function(){i.internal.$e.removeClass(d.FOCUS)},hasFocus:function(){var e=h.getFieldInput();return i.internal.$e.hasClass(d.FOCUS)&&e[0]===document.activeElement},isBlank:function(){return 0===e.trim(i.fn.getVal()).length},getName:function(){return h.getFieldInput().attr("name")},nullIfBlank:function(){return!!i.internal.$e.data("nullIfBlank")},ignore:function(){return!!i.internal.$e.data("ignore")},isReady:function(){return i.internal.$e.data("fieldReady")},getLabel:function(){var t,n;return t=i.internal.$e.siblings("label"),n=t.length?t.map(function(){return e.trim(this.textContent.replace(/\*/gi,""))}).get():e.map(h.getName().split("_"),function(e){return r.capitalize(e)}),i.elements.parentForm&&i.elements.parentForm.hasClass(u.markup.SETTINGS_FORM)&&n.unshift("Settings /"),n.join(" ")}},p={fieldFactoryCustomControlClick:function(){i.fn.focus()},fieldFactoryNativeInputFocus:function(){h.setFocusState(),h.setValueState()},fieldFactoryNativeInputChange:function(){h.setValueState(),i.self.validate()},fieldFactoryNativeInputBlur:function(){h.unsetFocusState(),h.setValueState()}},f={setVal:h.setVal,setDefaultVal:h.setDefaultVal,getVal:h.getVal,enable:h.enable,disable:h.disable,reset:h.reset,focus:h.focus,blur:h.blur,hasFocus:h.hasFocus,isBlank:h.isBlank,getName:h.getName,getFieldInput:h.getFieldInput,nullIfBlank:h.nullIfBlank,ignore:h.ignore,isReady:h.isReady,getLabel:h.getLabel},m={create:h.init,extend:h.extend},e.extend(i.self,f),m};return u.markup={SETTINGS_FORM:"variant-settings-form"},i.extend(u.markup),u}),define("forms/fields/CustomInput",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".custom-input"},i),s={name:"CustomTextInput",$e:a.$e||e(a.selector),explicitInit:!0,components:{nativeInput:{selector:["input[type=text]","input[type=password]","input[type=email]","input[type=url]","input[type=tel]","input[type=search]","input[type=number]","input[type=date]","input[type=hidden]","input[type=file]"].join(", ")}},events:{}},l={},u={init:function(){}},c={},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/fields/CustomTextarea",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".custom-textarea"},i),s={name:"CustomTextarea",$e:a.$e||e(a.selector),explicitInit:!0,components:{nativeInput:{selector:"textarea"}}},l={},u={init:function(){}},c={},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/fields/CustomRadio",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".custom-radio"},i),s={name:"CustomRadio",$e:a.$e||e(a.selector),explicitInit:!0,components:{nativeInput:{selector:'input[type="radio"]'}}},l={},u={init:function(){u.setDefaultValue(),a.fieldset.getEl().on("initCustomFieldsComplete",function(){u.ensureUniqueName()})},setDefaultValue:function(){var e;((e=s.$e.data("defaultValue"))||"boolean"==typeof e)&&u.setVal(e,{isDefault:!0})},ensureUniqueName:function(){var e,t,n;e=a.form.getFields(u.getName()),t=a.fieldset.getFields(u.getName()),n=a.fieldset.getFieldsetId(),e.length>t.length&&(l.nativeInput.data("name")||l.nativeInput.data("name",u.getName()),l.nativeInput.attr("name",u.getName()+"-"+n))},getEls:function(){var t=e();return e.each(a.fieldset.getFields(u.getName()),function(e,n){t=t.add(n.getEl())}),t},getName:function(){return l.nativeInput.data("name")||l.nativeInput.attr("name")},getVal:function(t){var n,i="";return t=t||{},l.nativeInput.is(":checked")?i=l.nativeInput.val():t.ignoreSiblings||(n=a.fieldset.getFields(u.getName()),e.each(n,function(e,t){(i+"").length||(i=t.getVal({ignoreSiblings:!0}))})),/true|false/i.test(i)&&(i=/true/.test(i)),i},setVal:function(t,n){var i,r=l.nativeInput.val()+""==t+"";n=n||{},l.nativeInput.prop("checked",r),r?n.isDefault&&l.nativeInput.trigger("change:default",t):(i=a.form.getFields(u.getName()),e.each(i,function(e,i){t+""==i.getFieldInput().val()+""&&i.getFieldInput().attr("name")===l.nativeInput.attr("name")&&i.setVal(t,n)})),n.silent||n.isDefault||l.nativeInput.trigger("change")},reset:function(){var t;t=a.form.getFields(u.getName()),e.each(t,function(e,t){t.getFieldInput().prop("checked",!1)})}},c={},d={getEls:u.getEls,getVal:u.getVal,setVal:u.setVal,reset:u.reset,getName:u.getName},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/fields/CustomCheckbox",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".custom-checkbox"},i),s={name:"CustomCheckbox",$e:a.$e||e(a.selector),explicitInit:!0,components:{nativeInput:{selector:'input[type="checkbox"]'}}},l={},u={init:function(){},getVal:function(){var e,t="";return e=l.nativeInput.val(),l.nativeInput.is(":checked")&&(t=e),"true"===e&&(t=!!t.length),t},setVal:function(e,t){var n=l.nativeInput.val()+""==e+"";t=t||{},l.nativeInput.prop("checked",n),t.silent||l.nativeInput.trigger("change",e),t.isDefault&&n&&l.nativeInput.trigger("change:default",e)}},c={},d={getVal:u.getVal,setVal:u.setVal},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={PARTIAL:"state-partial"},n}),define("forms/fields/CustomSelect",["jquery","utils/globalElements","factories/fieldFactory","forms/widgets/DropMenu"],function(e,t,n,i){"use strict";var r=function(a){var o,s,l,u,c,d,h,p;o=this,l=r.markup,s=e.extend({$e:null,selector:".custom-select"},a),u={name:"CustomSelect",$e:s.$e||e(s.selector),placeholder:null,explicitInit:!0,focused:!1,components:{customControl:{selector:".custom-select-control"},customPlaceholder:{selector:".custom-placeholder"},nativeInput:{selector:"select"},nativeOption:{selector:"select option"},customOption:{selector:".custom-option"}},events:{"click @customControl":"customControlClick","change @nativeInput":"nativeInputChange","blur @nativeInput":"nativeInputBlur"}},c={allOptions:null},d={init:function(){u.dropMenu=new i({$e:u.$e,menuControl:".custom-select-control",menuItemsWrapper:".custom-select-options",menuItem:".custom-select-options .custom-option",onSelect:d.setValByEl}),d.getPlaceholder(),d.getInitialValue(),d.setDisabled(),d.setOptionStates(),d.cacheOptions()},getInitialValue:function(){var e;e=u.$e.data("initialVal"),e&&(e+"").length&&d.setDefaultVal(e),d.isBlank()?d.showPlaceholder():d.setCustomControlValue()},getPlaceholder:function(){u.placeholder=c.customControl.attr("placeholder")||"&nbsp;"},setDisabled:function(){d.isDisabled()&&d.disable()},setOptionStates:function(){c.nativeOption.each(function(t,n){var i,r,a;i=e(n),r=i.is(":disabled"),a=i.prop("value"),c.customOption.filter('[data-value="'+a+'"]').toggleClass(l.DISABLED,r)})},cacheOptions:function(){c.allOptions=c.nativeOption.clone()},isDisabled:function(){return c.nativeInput[0].hasAttribute("disabled")},setCustomControlValue:function(){var e=d.getVal(),t=c.nativeOption.filter('[value="'+e+'"]'),n=t.html();c.customControl.data("value",e),c.customControl.html(n),u.dropMenu&&u.dropMenu.selectItemByVal(e),d.isBlank()?d.showPlaceholder():d.hidePlaceholder()},setValByEl:function(e){e.hasClass(l.DISABLED)||d.setVal(e.data("value"))},showPlaceholder:function(){var e;c.customPlaceholder?(e=c.customPlaceholder,e.show()):e=u.placeholder,c.customControl.html(e),u.$e.addClass(l.PLACEHOLDER)},hidePlaceholder:function(){c.customPlaceholder&&c.customPlaceholder.hide(),u.$e.removeClass(l.PLACEHOLDER)},filter:function(e){c.nativeOption.each(e),u.dropMenu.filter(e),d.getComponents()},unfilter:function(){c.nativeInput.html(c.allOptions),u.dropMenu.unfilter(),d.getComponents()},disable:function(){c.nativeInput.attr("disabled",!0),u.$e.addClass(l.DISABLED)},getVal:function(){return c.nativeInput.val()},setVal:function(e,t){t=t||{},c.nativeOption.filter(":selected").prop("selected",!1),(e||"boolean"==typeof e)&&(c.nativeInput[0].value=e),d.setCustomControlValue(),t.silent||u.$e.trigger("change"),t.isDefault&&c.nativeInput.trigger("change:default",e)},reset:function(e){c.nativeOption.filter(":selected").removeAttr("selected"),d.setVal("",e),d.showPlaceholder()}},h={customControlClick:function(){u.dropMenu.toggle()},nativeInputChange:function(){d.setCustomControlValue()},nativeInputBlur:function(){u.dropMenu.isActive()?setTimeout(function(){c.nativeInput.focus()},50):t.doc.one("mouseup",function(){u.dropMenu.close({delay:!0})})}},p={filter:d.filter,unfilter:d.unfilter,reset:d.reset,getVal:d.getVal,setVal:d.setVal},n({self:o,o:s,m:l,internal:u,elements:c,fn:d,handlers:h,api:p}).create()};return r.markup={},r}),define("forms/fields/LinkedCustomSelect",["jquery","factories/fieldFactory","forms/fields/CustomSelect"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,$form:null,selector:".linked-custom-select",toggleOnPartnerValue:!1},r),l={name:"LinkedCustomSelect",$e:o.$e||e(o.selector),partner:null,hasOptions:!1,explicitInit:!0,components:{customControl:{selector:".custom-select-control"},nativeInput:{selector:"select"}},events:{"change !partner":"partnerChange","field:error":"fieldError"}},u={partner:null},c={beforeInit:function(){c.linkToPartner()},init:function(){l.customSelect=new n({$e:l.$e}),l.customSelect.init(),c.filterOptions(),c.setState()},linkToPartner:function(){var e,t,n;e=l.$e.data("link-to"),t=o.form.getField(e,o.fieldset.getClosestParentName()),n=t.getEl(),u.partner=n,l.partner=t},setState:function(e){var t;l.isVariant.linkedVisibility&&(t=e||!!l.hasOptions&&!l.partner.isBlank(),l.$e.toggleClass(s.VISIBLE,t))},forceShow:function(){c.setState(!0),l.partner.forceShow&&l.partner.forceShow()},filterOptions:function(){var t=l.partner.getVal();t&&t.length&&(l.hasOptions=!1,l.customSelect.unfilter(),l.customSelect.filter(function(n,i){var r,a,o;r=e(i),a=r.data("partnerValue"),o="OPTION"===i.tagName?r.val():r.data("value"),o+="",o.length&&a.split(",").indexOf(t)>-1?l.hasOptions=!0:r.remove()}))},getVal:function(){if(l.customSelect)return l.customSelect.getVal()},setVal:function(e,t){l.customSelect&&l.customSelect.setVal(e,t)}},d={partnerChange:function(){l.customSelect.reset(),c.filterOptions(),c.setState()},fieldError:function(){c.forceShow()}},h={forceShow:c.forceShow,getVal:c.getVal,setVal:c.setVal},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("DOMPurify",t):(e=e||self).DOMPurify=t()}(this,function(){"use strict";function e(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return f(e,t,i)}}function t(e,t){o&&o(e,null);for(var n=t.length;n--;){var i=t[n];if("string"==typeof i){var r=b(i);r!==i&&(s(t)||(t[n]=r),i=r)}e[i]=!0}return e}function n(e){var t=h(null),n=void 0;for(n in e)f(a,e,[n])&&(t[n]=e[n]);return t}function i(t,n){for(;null!==t;){var i=u(t,n);if(i){if(i.get)return e(i.get);if("function"==typeof i.value)return e(i.value)}t=l(t)}return function(e){return console.warn("fallback value for",e),null}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var a=Object.hasOwnProperty,o=Object.setPrototypeOf,s=Object.isFrozen,l=Object.getPrototypeOf,u=Object.getOwnPropertyDescriptor,c=Object.freeze,d=Object.seal,h=Object.create,p="undefined"!=typeof Reflect&&Reflect,f=p.apply,m=p.construct;f||(f=function(e,t,n){return e.apply(t,n)}),c||(c=function(e){return e}),d||(d=function(e){return e}),m||(m=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var g,v=e(Array.prototype.forEach),y=e(Array.prototype.pop),_=e(Array.prototype.push),b=e(String.prototype.toLowerCase),T=e(String.prototype.match),S=e(String.prototype.replace),w=e(String.prototype.indexOf),E=e(String.prototype.trim),C=e(RegExp.prototype.test),k=(g=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return m(g,t)}),x=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),D=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),A=c(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),O=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),P=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),L=c(["#text"]),M=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),N=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),R=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j=d(/\{\{[\s\S]*|[\s\S]*\}\}/gm),U=d(/<%[\s\S]*|[\s\S]*%>/gm),B=d(/^data-[\-\w.\u00B7-\uFFFF]/),H=d(/^aria-[\-\w]+$/),V=d(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=d(/^(?:\w+script|data):/i),$=d(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z=function(){return"undefined"==typeof window?null:window},Y=function(e,t){if("object"!==(void 0===e?"undefined":W(e))||"function"!=typeof e.createPolicy)return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};return function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z(),o=function(t){return e(t)};if(o.version="2.3.3",o.removed=[],!a||!a.document||9!==a.document.nodeType)return o.isSupported=!1,o;var s=a.document,l=a.document,u=a.DocumentFragment,d=a.HTMLTemplateElement,h=a.Node,p=a.Element,f=a.NodeFilter,m=a.NamedNodeMap,g=void 0===m?a.NamedNodeMap||a.MozNamedAttrMap:m,G=a.Text,X=a.Comment,K=a.DOMParser,Q=a.trustedTypes,J=p.prototype,Z=i(J,"cloneNode"),ee=i(J,"nextSibling"),te=i(J,"childNodes"),ne=i(J,"parentNode");if("function"==typeof d){var ie=l.createElement("template");ie.content&&ie.content.ownerDocument&&(l=ie.content.ownerDocument)}var re=Y(Q,s),ae=re&&Fe?re.createHTML(""):"",oe=l,se=oe.implementation,le=oe.createNodeIterator,ue=oe.createDocumentFragment,ce=oe.getElementsByTagName,de=s.importNode,he={};try{he=n(l).documentMode?l.documentMode:{}}catch(e){}var pe={};o.isSupported="function"==typeof ne&&se&&void 0!==se.createHTMLDocument&&9!==he;var fe=j,me=U,ge=B,ve=H,ye=q,_e=$,be=V,Te=null,Se=t({},[].concat(r(x),r(I),r(D),r(O),r(L))),we=null,Ee=t({},[].concat(r(M),r(N),r(R),r(F))),Ce=null,ke=null,xe=!0,Ie=!0,De=!1,Ae=!1,Oe=!1,Pe=!1,Le=!1,Me=!1,Ne=!1,Re=!0,Fe=!1,je=!0,Ue=!0,Be=!1,He={},Ve=null,qe=t({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),$e=null,We=t({},["audio","video","img","source","image","track"]),ze=null,Ye=t({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Xe="http://www.w3.org/2000/svg",Ke="http://www.w3.org/1999/xhtml",Qe=Ke,Je=!1,Ze=void 0,et=["application/xhtml+xml","text/html"],tt=void 0,nt=null,it=l.createElement("form"),rt=function(e){nt&&nt===e||(e&&"object"===(void 0===e?"undefined":W(e))||(e={}),e=n(e),Te="ALLOWED_TAGS"in e?t({},e.ALLOWED_TAGS):Se,we="ALLOWED_ATTR"in e?t({},e.ALLOWED_ATTR):Ee,ze="ADD_URI_SAFE_ATTR"in e?t(n(Ye),e.ADD_URI_SAFE_ATTR):Ye,$e="ADD_DATA_URI_TAGS"in e?t(n(We),e.ADD_DATA_URI_TAGS):We,Ve="FORBID_CONTENTS"in e?t({},e.FORBID_CONTENTS):qe,Ce="FORBID_TAGS"in e?t({},e.FORBID_TAGS):{},ke="FORBID_ATTR"in e?t({},e.FORBID_ATTR):{},He="USE_PROFILES"in e&&e.USE_PROFILES,xe=!1!==e.ALLOW_ARIA_ATTR,Ie=!1!==e.ALLOW_DATA_ATTR,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=e.SAFE_FOR_TEMPLATES||!1,Oe=e.WHOLE_DOCUMENT||!1,Me=e.RETURN_DOM||!1,Ne=e.RETURN_DOM_FRAGMENT||!1,Re=!1!==e.RETURN_DOM_IMPORT,Fe=e.RETURN_TRUSTED_TYPE||!1,Le=e.FORCE_BODY||!1,je=!1!==e.SANITIZE_DOM,Ue=!1!==e.KEEP_CONTENT,Be=e.IN_PLACE||!1,be=e.ALLOWED_URI_REGEXP||be,Qe=e.NAMESPACE||Ke,Ze=Ze=-1===et.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,tt="application/xhtml+xml"===Ze?function(e){return e}:b,Ae&&(Ie=!1),Ne&&(Me=!0),He&&(Te=t({},[].concat(r(L))),we=[],!0===He.html&&(t(Te,x),t(we,M)),!0===He.svg&&(t(Te,I),t(we,N),t(we,F)),!0===He.svgFilters&&(t(Te,D),t(we,N),t(we,F)),!0===He.mathMl&&(t(Te,O),t(we,R),t(we,F))),e.ADD_TAGS&&(Te===Se&&(Te=n(Te)),t(Te,e.ADD_TAGS)),e.ADD_ATTR&&(we===Ee&&(we=n(we)),t(we,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&t(ze,e.ADD_URI_SAFE_ATTR),e.FORBID_CONTENTS&&(Ve===qe&&(Ve=n(Ve)),t(Ve,e.FORBID_CONTENTS)),Ue&&(Te["#text"]=!0),Oe&&t(Te,["html","head","body"]),Te.table&&(t(Te,["tbody"]),delete Ce.tbody),c&&c(e),nt=e)},at=t({},["mi","mo","mn","ms","mtext"]),ot=t({},["foreignobject","desc","title","annotation-xml"]),st=t({},I);t(st,D),t(st,A);var lt=t({},O);t(lt,P);var ut=function(e){var n=ne(e);n&&n.tagName||(n={namespaceURI:Ke,tagName:"template"});var i=b(e.tagName),r=b(n.tagName);if(e.namespaceURI===Xe)return n.namespaceURI===Ke?"svg"===i:n.namespaceURI===Ge?"svg"===i&&("annotation-xml"===r||at[r]):Boolean(st[i]);if(e.namespaceURI===Ge)return n.namespaceURI===Ke?"math"===i:n.namespaceURI===Xe?"math"===i&&ot[r]:Boolean(lt[i]);if(e.namespaceURI===Ke){if(n.namespaceURI===Xe&&!ot[r])return!1;if(n.namespaceURI===Ge&&!at[r])return!1;var a=t({},["title","style","font","a","script"]);return!lt[i]&&(a[i]||!st[i])}return!1},ct=function(e){_(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},dt=function(e,t){try{_(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){_(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!we[e])if(Me||Ne)try{ct(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ht=function(e){var t=void 0,n=void 0;if(Le)e="<remove></remove>"+e;else{var i=T(e,/^[\r\n\t ]+/);n=i&&i[0]}"application/xhtml+xml"===Ze&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var r=re?re.createHTML(e):e;if(Qe===Ke)try{t=(new K).parseFromString(r,Ze)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(Qe,"template",null);try{t.documentElement.innerHTML=Je?"":r}catch(e){}}var a=t.body||t.documentElement;return e&&n&&a.insertBefore(l.createTextNode(n),a.childNodes[0]||null),Qe===Ke?ce.call(t,Oe?"html":"body")[0]:Oe?t.documentElement:a},pt=function(e){return le.call(e.ownerDocument||e,e,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT,null,!1)},ft=function(e){return!(e instanceof G||e instanceof X||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof g&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI&&"function"==typeof e.insertBefore)},mt=function(e){return"object"===(void 0===h?"undefined":W(h))?e instanceof h:e&&"object"===(void 0===e?"undefined":W(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},gt=function(e,t,n){pe[e]&&v(pe[e],function(e){e.call(o,t,n,nt)})},vt=function(e){var t=void 0;if(gt("beforeSanitizeElements",e,null),ft(e))return ct(e),!0;if(T(e.nodeName,/[\u0080-\uFFFF]/))return ct(e),!0;var n=tt(e.nodeName);if(gt("uponSanitizeElement",e,{tagName:n,allowedTags:Te}),!mt(e.firstElementChild)&&(!mt(e.content)||!mt(e.content.firstElementChild))&&C(/<[/\w]/g,e.innerHTML)&&C(/<[/\w]/g,e.textContent))return ct(e),!0;if("select"===n&&C(/<template/i,e.innerHTML))return ct(e),!0;if(!Te[n]||Ce[n]){if(Ue&&!Ve[n]){var i=ne(e)||e.parentNode,r=te(e)||e.childNodes;if(r&&i)for(var a=r.length-1;a>=0;--a)i.insertBefore(Z(r[a],!0),ee(e))}return ct(e),!0}return e instanceof p&&!ut(e)?(ct(e),!0):"noscript"!==n&&"noembed"!==n||!C(/<\/no(script|embed)/i,e.innerHTML)?(Ae&&3===e.nodeType&&(t=e.textContent,t=S(t,fe," "),t=S(t,me," "),e.textContent!==t&&(_(o.removed,{element:e.cloneNode()}),e.textContent=t)),gt("afterSanitizeElements",e,null),!1):(ct(e),!0)},yt=function(e,t,n){if(je&&("id"===t||"name"===t)&&(n in l||n in it))return!1;if(Ie&&!ke[t]&&C(ge,t));else if(xe&&C(ve,t));else{if(!we[t]||ke[t])return!1;if(ze[t]);else if(C(be,S(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==w(n,"data:")||!$e[e])if(De&&!C(ye,S(n,_e,"")));else if(n)return!1}return!0},_t=function(e){var t=void 0,n=void 0,i=void 0,r=void 0;gt("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(r=a.length;r--;){var l=t=a[r],u=l.name,c=l.namespaceURI;if(n=E(t.value),i=tt(u),s.attrName=i,s.attrValue=n,s.keepAttr=!0,s.forceKeepAttr=void 0,gt("uponSanitizeAttribute",e,s),n=s.attrValue,!s.forceKeepAttr&&(dt(u,e),s.keepAttr))if(C(/\/>/i,n))dt(u,e);else{Ae&&(n=S(n,fe," "),n=S(n,me," "));var d=tt(e.nodeName);if(yt(d,i,n))try{c?e.setAttributeNS(c,u,n):e.setAttribute(u,n),y(o.removed)}catch(e){}}}gt("afterSanitizeAttributes",e,null)}},bt=function e(t){var n=void 0,i=pt(t);for(gt("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)gt("uponSanitizeShadowNode",n,null),vt(n)||(n.content instanceof u&&e(n.content),_t(n));gt("afterSanitizeShadowDOM",t,null)};return o.sanitize=function(e,t){var n=void 0,i=void 0,r=void 0,l=void 0,c=void 0;if((Je=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!mt(e)){if("function"!=typeof e.toString)throw k("toString is not a function");if("string"!=typeof(e=e.toString()))throw k("dirty is not a string, aborting")}if(!o.isSupported){if("object"===W(a.toStaticHTML)||"function"==typeof a.toStaticHTML){if("string"==typeof e)return a.toStaticHTML(e);if(mt(e))return a.toStaticHTML(e.outerHTML)}return e}if(Pe||rt(t),o.removed=[],"string"==typeof e&&(Be=!1),Be);else if(e instanceof h)1===(i=(n=ht("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?n=i:n.appendChild(i);else{if(!Me&&!Ae&&!Oe&&-1===e.indexOf("<"))return re&&Fe?re.createHTML(e):e;if(!(n=ht(e)))return Me?null:ae}n&&Le&&ct(n.firstChild);for(var d=pt(Be?e:n);r=d.nextNode();)3===r.nodeType&&r===l||vt(r)||(r.content instanceof u&&bt(r.content),_t(r),l=r);if(l=null,Be)return e;if(Me){if(Ne)for(c=ue.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return Re&&(c=de.call(s,c,!0)),c}var p=Oe?n.outerHTML:n.innerHTML
;return Ae&&(p=S(p,fe," "),p=S(p,me," ")),re&&Fe?re.createHTML(p):p},o.setConfig=function(e){rt(e),Pe=!0},o.clearConfig=function(){nt=null,Pe=!1},o.isValidAttribute=function(e,t,n){nt||rt({});var i=tt(e),r=tt(t);return yt(i,r,n)},o.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],_(pe[e],t))},o.removeHook=function(e){pe[e]&&y(pe[e])},o.removeHooks=function(e){pe[e]&&(pe[e]=[])},o.removeAllHooks=function(){pe={}},o}()}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Typester",t):e.Typester=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}Array.prototype.forEach||(Array.prototype.forEach=function(e){var t,n;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),r=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(t=arguments[1]),n=0;n<r;){var a;n in i&&(a=i[n],e.call(t,a,n,i)),n++}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),"function"!=typeof Object.assign&&(Object.assign=function(e){var t,n,i,r;if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),n=1;n<arguments.length;n++)if(null!==(i=arguments[n]))for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t});var t=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={parent:e.parent,children:[],id:t(),conceal:e.conceal||[]},i={handlers:{},new:function(e,t){if(i.handlers[e])throw new Error("Only one requestHandler per requestKey: "+e);i.handlers[e]=t},getHandler:function(e){return i.handlers[e]},canHandle:function(e){return!!i.getHandler(e)},request:function(e,t){var n=i.getHandler(e);if(n)return n(t)}},r={handlers:{},new:function(e,t){if(r.handlers[e])throw new Error("Only one commandHandler per commandKey: "+e);r.handlers[e]=t},getHandler:function(e){return r.handlers[e]},canHandle:function(e){return!!r.getHandler(e)},exec:function(e,t){var n=r.getHandler(e);n&&n(t)}},a={handlers:{},new:function(e,t){a.handlers[e]=a.handlers[e]||[],a.handlers[e].push(t)},getHandlers:function(e){return a.handlers[e]||[]},canHandle:function(e){return!!a.getHandlers(e)},emit:function(e,t){var n=a.getHandlers(e);n.length&&n.forEach(function(e){return e(t)})}},o={registerHandler:function(e,t,n){switch(e){case"request":i.new(t,n);break;case"command":r.new(t,n);break;case"event":a.new(t,n)}},registerRequestHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach(function(t){var n=e[t];o.registerHandler("request",t,n)})},registerCommandHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach(function(t){var n=e[t];o.registerHandler("command",t,n)})},registerEventHandlers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach(function(t){var n=e[t];o.registerHandler("event",t,n)})}},s={init:function(){n.parent&&n.parent.registerChild(l)},shouldConceal:function(e){var t=!1;return n.conceal.forEach(function(n){t=t||n.test(e)}),t},delegate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r._state;return a.hasAttempted(n.id)||s.handle(e,t,i,r),a.hasBeenHandled||n.children.forEach(function(n){a.hasBeenHandled||a.hasAttempted(n.getId())||n.handle(e,t,i,r)}),a.hasBeenHandled||!n.parent||a.hasAttempted(n.parent.getId())||s.shouldConceal(t)||n.parent.delegate(e,t,i,r),a.response},canHandle:function(e,t){switch(e){case"request":return i.canHandle(t);case"command":return r.canHandle(t);case"event":return a.canHandle(t)}},handle:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l._state=l._state||s.newStateObj();var u=s.canHandle(e,t),c=l._state;if(c.hasAttempted(n.id))return c.response;if(l._state.logAttempt(n.id),u){switch(e){case"request":c.response=i.request(t,o),c.hasBeenHandled=!0;break;case"command":r.exec(t,o),c.hasBeenHandled=!0;break;case"event":a.emit(t,o),s.delegate(e,t,o,l)}return c.response}return s.delegate(e,t,o,l)},newStateObj:function(){return{attempts:[],hasBeenHandled:!1,response:null,logAttempt:function(e){this.attempts.push(e)},hasAttempted:function(e){return this.attempts.indexOf(e)>-1}}},request:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.handle("request",e,t)},exec:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.handle("command",e,t)},emit:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.handle("event",e,t)},hasAttemptedToHandle:function(e){return e.attemptedDelegates.indexOf(n.id)>-1},registerChild:function(e){e.childIndex=n.children.length,n.children.push(e)},deregisterChild:function(e){n.children.slice(e.childIndex,1)},setParent:function(e){n.parent&&n.parent.deregisterChild(l),n.parent=e,n.parent.registerChild(l)},getId:function(){return n.id}},l={getId:s.getId,registerRequestHandlers:o.registerRequestHandlers,registerCommandHandlers:o.registerCommandHandlers,registerEventHandlers:o.registerEventHandlers,registerHandler:o.registerHandler,request:s.request,exec:s.exec,emit:s.emit,get:s.request,canHandle:s.canHandle,handle:s.handle,registerChild:s.registerChild,hasAttemptedToHandle:s.hasAttemptedToHandle,deregisterChild:s.deregisterChild,setParent:s.setParent,delegate:s.delegate,getHandlerKeys:function(){var e=[];return e.concat(Object.keys(i.handlers)),e.concat(Object.keys(r.handlers)),e.concat(Object.keys(a.handlers)),e}};return s.init(),l},i=function(){this.mixin.apply(this,arguments)};Object.assign(i.prototype,{mixin:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach(function(t){Object.assign(e,t)})},extendWith:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.keys?n.keys.forEach(function(n){t[n]=e[n]}):this.mixin(e)}});var r={bind:function(e,t){return function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return e.apply(t,i)}},bindObj:function(e,t){var n={};return Object.keys(e).forEach(function(i){n[i]=r.bind(e[i],t)}),n}},a=function(e){var t=e.name,a=e.handlers,o=e.methods,s=e.modules,l=e.containers,u=e.mediatorOpts;if(!t)throw new Error("No name given for container");var c={createContext:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(i,[null].concat(t)))},bindMethods:function(e,t){return e=e||{},r.bindObj(e,t)},initModules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach(function(e){var n=Object.assign({},t,e.opts||{});e.instance=new e.class(n)})},initChildContainers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach(function(e){var n=Object.assign({},t,e.opts||{});e.instance=new e.class(n)})},registerHandlers:function(e,t,n){Object.keys(t).forEach(function(i){var r=t[i],a=c.getHandlerMethods(r,n);switch(i){case"requests":e.registerRequestHandlers(a);break;case"commands":e.registerCommandHandlers(a);break;case"events":e.registerEventHandlers(a)}})},getHandlerMethods:function(e,t){var n={};return Object.keys(e).forEach(function(i){var r=e[i],a=t[r];n[i]=a}),n}};return{containerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=c.createContext(),i=c.bindMethods(o,t);t.extendWith(i);var r=new n(Object.assign({parent:e.mediator},u));return t.extendWith({mediator:r}),a&&c.registerHandlers(r,a,t),i.setup&&i.setup(),c.initModules(s,{dom:e.dom,mediator:r}),c.initChildContainers(l,{dom:e.dom,mediator:r}),i.init&&i.init(),{setMediatorParent:function(e){r.setParent(e)}}}}.containerConstructor},o={ieVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var i=e.indexOf("Edge/");return i>0&&parseInt(e.substring(i+5,e.indexOf(".",i)),10)},isIE:function(){var e=o.ieVersion();return e&&e<12},isFirefox:function(){return window.navigator.userAgent.indexOf("Firefox")>-1}},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,r){var s={key:e,arg:t,resolve:n,reject:r,next:null};o?o=o.next=s:(a=o=s,i(e,t))})}function i(n,a){try{var o=t[n](a),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(o.done?"return":"normal",o.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}a=a.next,a?i(a.key,a.arg):o=null}var a,o;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()),u={regex:{getById:/^#/,getByClassName:/^\./,getByTag:/^[a-z]/},getElements:function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&"rootEl"!==n){var i=e[n],r=i.selector;t=i.rootEl||t,t="function"==typeof t?t():t,i.el=u.get(r,t)}},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(u.isElement(e))return[e];var n=u._getGetMethodName(e);return u[n](e,t)},getByClassName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e=u._cleanSelector(e),t.getElementsByClassName(e)},getByTag:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return e=u._cleanSelector(e),t.getElementsByTagName(e)},getById:function(e){return document.getElementById(e)},getClosest:function(e,t,n){var i=n||u.getRootEl(),r=/^\[/.test(t)?"attribute":/^\./.test(t)?"class":/^\#/.test(t)?"id":"tag",a=!1,o=void 0,s=void 0,l=void 0,c=void 0;if(e===i)return null;for(;e.nodeType!==Node.ELEMENT_NODE;)e=e.parentNode;switch(r){case"attribute":o=t.match(/\[(.*?)\]/)[1],a=e.hasAttribute(o);break;case"class":s=t.replace(".",""),a=e.classList&&e.classList.contains(s);break;case"id":l=t.replace("#",""),c=e.getAttribute("id"),a=l===c;break;case"tag":a=e.nodeName.toLowerCase()===t.toLowerCase()}return a?e:u.getClosest(e.parentNode,t,i)},getClosestInArray:function(e,t,n){for(var i=e;t.indexOf(i.nodeName)<0&&i!==n;)i=i.parentNode;return i!==n?i:null},getFurthest:function(e,t){var n=u.getRootEl(),i=e,r=null;for(t=t instanceof Array?t:[t];i&&i!==n;)t.indexOf(i.nodeName)>-1&&(r=i),i=i.parentNode||i.parentElement;return r},nextNode:function(e){if(e.hasChildNodes())return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},appendTo:function(e,t){for(var n=u.isElement(t)?t:document.createElement(t),i=u.get(e),r=0;r<i.length;r++)i[r].appendChild(n);return n},addStyles:function(e){var t=u.appendTo("head","style");return t.setAttribute("id","typester-styles"),t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),t},isNode:function(e){return"object"===("undefined"==typeof Node?"undefined":s(Node))?e instanceof Node:e&&"object"===(void 0===e?"undefined":s(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},isElement:function(e){var t=!1;return t=e instanceof Window||e instanceof Document,t=t||"object"===("undefined"==typeof HTMLElement?"undefined":s(HTMLElement))&&e instanceof HTMLElement,t=t||e&&"object"===(void 0===e?"undefined":s(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName,t},isIn:function(e,t,n){var i=!1,r=e,a=t instanceof Array?t:t.split("/");for(n=n||u.getRootEl(),a=a.map(function(e){return e.toLowerCase()});!i&&r!==n;)i=a.indexOf(r.nodeName.toLowerCase())>-1,r=r.parentNode;return i},isChildOf:function(e,t){return e instanceof Array&&(e=e[0]),t instanceof Array&&(t=t[0]),t&&e&&t.contains(e)},addClass:function(e,t){e.classList.add(t)},toggleClass:function(e,t,n){(void 0!==n?n:!e.classList.contains(t))?u.addClass(e,t):u.removeClass(e,t)},removeClass:function(e,t){e.classList.remove(t)},isBlock:function(e){return"block"===u.getStyle(e,"display")},closestElement:function(e){for(var t=e;1!==t.nodeType;)t=t.parentNode;return t},getStyles:function(e){var t=u.closestElement(e);return"getComputedStyle"in window?window.getComputedStyle(t):t.currentStyle},getStyle:function(e,t){return u.getStyles(e)[t]},insertBefore:function(e,t){t.parentNode.insertBefore(e,t)},insertAfter:function(e,t){var n=t.parentNode;n.lastChild===t?n.appendChild(e):n.insertBefore(e,t.nextSibling)},isLastChild:function(e){return e===e.parentNode.lastChild},isFirstChild:function(e){return e===e.parentNode.firstChild},wrapRange:function(e,t){var n=window.getSelection(),i=n.getRangeAt(0),r=document.createElement(e);for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);return i.surroundContents(r),r},unwrap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];if(e.childNodes)for(;e.firstChild;)n.push(e.firstChild),u.insertBefore(e.firstChild,e);return t.keepNode||u.removeNode(e),n},unwrapFrom:function(e,t){for(var n=u.getRootEl(),i=e,r=[i];i!==n;){var a=i.parentNode||i.parentElement;t.indexOf(i.nodeName)>-1&&(r=u.unwrap(i)),i=a}return r},unwrapToRoot:function(e){for(var t=u.getRootEl(),n=e.parentNode;n!==t;){var i=n.parentNode;u.unwrap(n),n=i}},removeNode:function(e){var t=e.parentElement||e.parentNode;t&&t.removeChild(e)},replaceNode:function(e,t){var n=e.parentNode||e.parentElement;n&&n.replaceChild(t,e)},getContainerZIndex:function(e){for(var t=e,n=0;t&&t!==document.body;){var i=window.getComputedStyle(t).zIndex;/^[0-9]+$/.test(i)&&(n=parseInt(i)),t=t.parentNode}return n},getRootEl:function(){for(var e=document.getSelection(),t=e.anchorNode,n=t;n&&(n.nodeType!==Node.ELEMENT_NODE||!n.hasAttribute("contenteditable"));)n=n.parentNode;return n},removeInvalidTagsUpward:function(e,t){for(var n=u.getRootEl(),i=e,r=[],a=[e];i!==n;)1===i.nodeType&&t.indexOf(i.nodeName)<0&&r.push(i),i=i.parentNode||i.parentElement;for(var o=0;o<r.length;o++){var s=r[o];a=u.unwrap(s)}return a},trimSelection:function(e){e=e||{fromEnd:!0};var t=window.getSelection(),n=t.getRangeAt(0),i=t.toString(),r=void 0,a=void 0,o=void 0,s=void 0,l=n.startOffset,c=void 0;e.bothEnds&&(e.fromEnd=!0),e.fromEnd?(r=/\s+$/,a=n.endContainer,o=n.setEnd):e.fromStart&&(r=/[^\s]/,a=n.startContainer,o=n.setStart),s=r.exec(i),s&&s.index>0&&(e.fromEnd&&l+s.index>a.length?(s=r.exec(a.textContent))&&o.call(n,a,s.index):o.call(n,a,l+s.index),c=n.cloneRange(),t.removeAllRanges(),t.addRange(c)),e.bothEnds&&(e.fromEnd?u.trimSelection({fromStart:!0}):u.trimSelection({fromEnd:!0}))},createPseudoSelect:function(){var e=u.getRootEl(),t=u.wrapRange("SPAN",{className:"pseudo-selection"}),n=void 0;return n=o.isFirefox()?window.getComputedStyle(e,"::-moz-selection"):window.getComputedStyle(e,"::selection"),t.style["background-color"]=n["background-color"],"transparent"===t.style["background-color"]&&(t.style["background-color"]="#EEEEEE"),t.style.color=n.color,t},getScrollOffset:function(){var e=void 0!==window.pageXOffset,t="CSS1Compat"===(document.compatMode||"");return{x:e?window.pageXOffset:t?document.documentElement.scrollLeft:document.body.scrollLeft,y:e?window.pageYOffset:t?document.documentElement.scrollTop:document.body.scrollTop}},childIndex:function(e){for(var t=e,n=0;null!==(t=t.previousSibling);)n++;return n},_getGetMethodName:function(e){var t=null;return Object.keys(u.regex).forEach(function(n){u.regex[n].test(e)&&(t=n)}),t},_cleanSelector:function(e){return e.replace(/^[\.#]/,"")},_createEl:function(e){return document.createElement(e)}},c=function(e){var t=e.name,n=e.props,a=e.handlers,o=e.dom,c=e.methods,d=e.requiredProps;if(!t)throw new Error("No name given for module",e);var h={createContext:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(i,[null].concat(t)))},bindMethods:function(e,t){return e=e||{},r.bindObj(e,t)},wrapRenderMethod:function(e,t){return function(){var n=t.context,i=void 0;i=h.mergeDom(o,t.dom),i.el=e.apply(void 0,arguments),h.getDom(i),n.extendWith({dom:i}),a.domEvents&&h.registerDomHandlers(a.domEvents,n)}},registerHandlers:function(e,t,n){Object.keys(t).forEach(function(i){var r=t[i],a=h.getHandlerMethods(r,n);switch(i){case"requests":e.registerRequestHandlers(a);break;case"commands":e.registerCommandHandlers(a);break;case"events":e.registerEventHandlers(a)}})},registerDomHandlers:function(e,t){var n=h.getHandlerMethods(e,t);h.bindDomEvents(n,t)},getHandlerMethods:function(e,t){var n={};return Object.keys(e).forEach(function(i){var r=e[i],a=t[r];n[i]=a}),n},mergeDom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t).forEach(function(e){n[e]=t[e],n[e].selector=t[e]}),n},getDom:function(e){var t=e.el||document.body;Object.keys(e).forEach(function(n){var i=void 0,r=void 0;null!==(i=e[n])&&("object"===(void 0===i?"undefined":s(i))&&(i=i.selector||i),r=u.get(i,t),r.selector=i,e[n]=r)})},bindDomEvents:function(e,t){var n=t.dom;Object.keys(e).forEach(function(t){var i=t.split(" @"),r=l(i,2),a=r[0],o=r[1],s=o?n[o][0]:n.el[0],u=e[t];s.addEventListener(a,u)})},mergeProps:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.keys(e).forEach(function(i){var r=t[i]||e[i];n[i]=r}),n},validateProps:function(e,n){Object.keys(e).forEach(function(i){if(n.indexOf(i)>-1&&!e[i])throw new Error(t+" requires prop: "+i)})}},p={moduleConstructor:function(e){p.prepModule(e),p.buildModule(e),p.setupModule(e),p.renderModule(e),p.initModule(e)},prepModule:function(e){var t=h.createContext();if(n){var i=h.mergeProps(n,e.props);t.extendWith({props:i}),d&&h.validateProps(i,d)}e.context=t},buildModule:function(e){var t=e.context,n=h.bindMethods(c,t);n.render&&(n.render=h.wrapRenderMethod(n.render,e)),t.extendWith(n),t.extendWith({mediator:e.mediator})},setupModule:function(e){var t=e.context;t.setup&&t.setup(),a&&h.registerHandlers(e.mediator,a,t)},renderModule:function(e){var t=e.context,n=void 0;t.render||(o&&(n=h.mergeDom(o,e.dom),h.getDom(n),t.extendWith({dom:n})),a.domEvents&&h.registerDomHandlers(a.domEvents,t))},initModule:function(e){var t=e.context;t.init&&t.init()},destroyModule:function(){}};return p.moduleConstructor},d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=e(function(e,t){function n(e){return c[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function r(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function a(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return h.test(e)?e.replace(d,n):e}function o(e){return!e&&0!==e||!(!m(e)||0!==e.length)}function s(e){var t=i({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=i,t.indexOf=r,t.escapeExpression=a,t.isEmpty=o,t.createFrame=s,t.blockParams=l,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,h=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var f=function(e){return"function"==typeof e};f(/x/)&&(t.isFunction=f=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=f;var m=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===p.call(e)};t.isArray=m}),p=e(function(e,t){function n(e,t){var r=t&&t.loc,a=void 0,o=void 0;r&&(a=r.start.line,o=r.start.column,e+=" - "+a+":"+o);for(var s=Error.prototype.constructor.call(this,e),l=0;l<i.length;l++)this[i[l]]=s[i[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n);try{r&&(this.lineNumber=a,Object.defineProperty?Object.defineProperty(this,"column",{value:o,enumerable:!0}):this.column=o)}catch(e){}}t.__esModule=!0;var i=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t.default=n,e.exports=t.default}),f=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(!0===t)return r(this);if(!1===t||null==t)return i(this);if(h.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=h.createFrame(n.data);a.contextPath=h.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(t,n)})},e.exports=t.default}),m=e(function(e,t){t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(p);t.default=function(e){e.registerHelper("each",function(e,t){function i(t,n,i){l&&(l.key=t,l.index=n,l.first=0===n,l.last=!!i,u&&(l.contextPath=u+t)),s+=r(e[t],{data:l,blockParams:h.blockParams([e[t],t],[u+t,null])})}if(!t)throw new n.default("Must pass iterator to #each");var r=t.fn,a=t.inverse,o=0,s="",l=void 0,u=void 0;if(t.data&&t.ids&&(u=h.appendContextPath(t.data.contextPath,t.ids[0])+"."),h.isFunction(e)&&(e=e.call(this)),t.data&&(l=h.createFrame(t.data)),e&&"object"==typeof e)if(h.isArray(e))for(var c=e.length;o<c;o++)o in e&&i(o,o,o===e.length-1);else{var d=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==d&&i(d,o-1),d=p,o++);void 0!==d&&i(d,o-1,!0)}return 0===o&&(s=a(this)),s})},e.exports=t.default}),g=e(function(e,t){t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(p);t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default}),v=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerHelper("if",function(e,t){return h.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||h.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t.default}),y=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)t.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t.default}),_=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default}),b=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerHelper("with",function(e,t){h.isFunction(e)&&(e=e.call(this));var n=t.fn;if(h.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=h.createFrame(t.data),i.contextPath=h.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:h.blockParams([e],[i&&i.contextPath])})})},e.exports=t.default}),T=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e){r.default(e),a.default(e),o.default(e),s.default(e),l.default(e),u.default(e),c.default(e)}t.__esModule=!0,t.registerDefaultHelpers=i;var r=n(f),a=n(m),o=n(g),s=n(v),l=n(y),u=n(_),c=n(b)}),S=e(function(e,t){t.__esModule=!0,t.default=function(e){e.registerDecorator("inline",function(e,t,n,i){var r=e;return t.partials||(t.partials={},r=function(i,r){var a=n.partials;n.partials=h.extend({},a,t.partials);var o=e(i,r);return n.partials=a,o}),t.partials[i.args[0]]=i.fn,r})},e.exports=t.default}),w=e(function(e,t){function n(e){i.default(e)}t.__esModule=!0,t.registerDefaultDecorators=n;var i=function(e){return e&&e.__esModule?e:{default:e}}(S)}),E=e(function(e,t){t.__esModule=!0;var n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=h.indexOf(n.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=n.lookupLevel(e),"undefined"!=typeof console&&n.lookupLevel(n.level)<=e){var t=n.methodMap[e];console[t]||(t="log");for(var i=arguments.length,r=Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t.default=n,e.exports=t.default}),C=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},T.registerDefaultHelpers(this),w.registerDefaultDecorators(this)}t.__esModule=!0,t.HandlebarsEnvironment=i;var r=n(p),a=n(E);t.VERSION="4.0.10";t.COMPILER_REVISION=7;var o={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=o;i.prototype={constructor:i,logger:a.default,log:a.default.log,registerHelper:function(e,t){if("[object Object]"===h.toString.call(e)){if(t)throw new r.default("Arg not supported with multiple helpers");h.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===h.toString.call(e))h.extend(this.partials,e);else{if(void 0===t)throw new r.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===h.toString.call(e)){if(t)throw new r.default("Arg not supported with multiple decorators");h.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var s=a.default.log;t.log=s,t.createFrame=h.createFrame,t.logger=a.default}),k=e(function(e,t){function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default}),x=e(function(e,t){function n(e){var t=e&&e[0]||1,n=C.COMPILER_REVISION;if(t!==n){if(t<n){var i=C.REVISION_CHANGES[n],r=C.REVISION_CHANGES[t];throw new d.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new d.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function i(e,t){function n(n,i,r){r.hash&&(i=c.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,i,r);var a=t.VM.invokePartial.call(this,n,i,r);if(null==a&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),a=r.partials[r.name](i,r)),null!=a){if(r.indent){for(var o=a.split("\n"),s=0,l=o.length;s<l&&(o[s]||s+1!==l);s++)o[s]=r.indent+o[s];a=o.join("\n")}return a}throw new d.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(t){function n(t){return""+e.main(a,t,a.helpers,a.partials,o,c,s)}var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=r.data;i._setup(r),!r.partial&&e.useData&&(o=l(t,o));var s=void 0,c=e.useBlockParams?[]:void 0;return e.useDepths&&(s=r.depths?t!=r.depths[0]?[t].concat(r.depths):r.depths:[t]),(n=u(e.main,n,a,r.depths||[],o,c))(t,r)}if(!t)throw new d.default("No environment passed to template");if(!e||!e.main)throw new d.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var a={strict:function(e,t){if(!(t in e))throw new d.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,i,a){var o=this.programs[e],s=this.fn(e);return t||a||i||n?o=r(this,e,s,t,n,i,a):o||(o=this.programs[e]=r(this,e,s)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(a.helpers=n.helpers,a.partials=n.partials,a.decorators=n.decorators):(a.helpers=a.merge(n.helpers,t.helpers),e.usePartial&&(a.partials=a.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=a.merge(n.decorators,t.decorators)))},i._child=function(t,n,i,o){if(e.useBlockParams&&!i)throw new d.default("must pass block params");if(e.useDepths&&!o)throw new d.default("must pass parent depths");return r(a,t,e[t],n,0,i,o)},i}function r(e,t,n,i,r,a,o){function s(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return!o||t==o[0]||t===e.nullContext&&null===o[0]||(s=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||i,a&&[r.blockParams].concat(a),s)}return s=u(n,s,e,o,i,a),s.program=t,s.depth=o?o.length:0,s.blockParams=r||0,s}function a(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function o(e,t,n){var i=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==s&&function(){n.data=C.createFrame(n.data);var e=n.fn;r=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=C.createFrame(n.data),n.data["partial-block"]=i,e(t,n)},e.partials&&(n.partials=c.extend({},n.partials,e.partials))}(),void 0===e&&r&&(e=r),void 0===e)throw new d.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function s(){return""}function l(e,t){return t&&"root"in t||(t=t?C.createFrame(t):{},t.root=e),t}function u(e,t,n,i,r,a){if(e.decorator){var o={};t=e.decorator(t,o,n,i&&i[0],r,a,i),c.extend(t,o)}return t}t.__esModule=!0,t.checkRevision=n,t.template=i,t.wrapProgram=r,t.resolvePartial=a,t.invokePartial=o,t.noop=s;var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),d=function(e){return e&&e.__esModule?e:{default:e}}(p)}),I=e(function(e,t){t.__esModule=!0,t.default=function(e){var t=void 0!==d?d:window,n=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=n),e}},e.exports=t.default}),D=e(function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=o.default,e.Exception=s.default,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)
},e}t.__esModule=!0;var a=i(C),o=n(k),s=n(p),l=i(h),u=i(x),c=n(I),d=r();d.create=r,c.default(d),d.default=d,t.default=d,e.exports=t.default}),A=D.default,O=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<i class=\'typester-icon\'>\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n         viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve" width="20px" height="20px">\n        <path id="XMLID_110_" d="M9.2,18.4c-2.1,2.1-5.5,2.1-7.7,0c-2.1-2.1-2.1-5.6,0-7.7l2.9-2.8C4.3,9,4.5,10,4.8,11l-1.5,1.5\n            c-1.1,1.1-1.1,3,0,4.1c1.1,1.1,3,1.1,4.1,0l3.1-3.1c1.2-1.1,1.2-3,0-4.1c-0.5-0.5-0.5-1.3,0-1.8s1.3-0.5,1.8,0\n            c2.1,2.1,2.1,5.6,0,7.7L9.2,18.4z M15.6,12.1c0.1-1.1,0-2.1-0.4-3.1l1.5-1.5c1.1-1.1,1.1-3,0-4.1s-3-1.1-4.1,0L9.4,6.5\n            c-1.1,1.2-1.1,3,0,4.1c0.5,0.5,0.5,1.3,0,1.8c-0.5,0.5-1.3,0.5-1.8,0c-2.1-2.1-2.1-5.6,0-7.7l3.1-3.1c2.1-2.1,5.6-2.1,7.7,0\n            c2.1,2.1,2.1,5.5,0,7.7L15.6,12.1z"/>\n    </svg>\n</i>\n'},useData:!0}),P=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<i class=\'typester-icon\'>\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve" width="20px" height="20px">\n       <path id="XMLID_126_" d="M20,7.6C20,7.8,19.8,8,19.6,8H6.9C6.7,8,6.5,7.8,6.5,7.6V5.3C6.5,5.1,6.7,5,6.9,5h12.7\n        C19.8,5,20,5.1,20,5.3V7.6z M20,13.5c0-0.2-0.2-0.4-0.4-0.4H6.9c-0.2,0-0.4,0.2-0.4,0.4v2.2c0,0.2,0.2,0.4,0.4,0.4h12.7\n        c0.2,0,0.4-0.2,0.4-0.4V13.5z M1.6,8.4H3v-5H1.9C1.8,4.1,1.3,4.5,0.5,4.6v1h1V8.4z M0,16.6h4.1v-1.2h-2v0c0.5-0.4,1.1-0.7,1.6-1.2\n        c0.3-0.3,0.4-0.6,0.4-1.1c0-0.9-0.7-1.6-2-1.6c-0.9,0-1.6,0.4-1.8,0.9c-0.2,0.3-0.2,0.6-0.2,1.2h1.4c0-0.3,0.1-0.5,0.2-0.7\n        c0.1-0.2,0.3-0.2,0.5-0.2c0.4,0,0.6,0.2,0.6,0.5c0,0.3-0.2,0.5-0.4,0.7c-0.5,0.4-1.3,0.8-1.7,1.3C0.1,15.5,0,15.9,0,16.6z"/>\n    </svg>\n</i>\n'},useData:!0}),L=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<i class=\'typester-icon\'>\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n       viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve" width="20px" height="20px">\n       <path id="XMLID_3_" d="M3.3,4.2c0,0.2-0.2,0.4-0.4,0.4H0.4C0.2,4.6,0,4.4,0,4.2V1.7c0-0.2,0.2-0.4,0.4-0.4h2.5\n        c0.2,0,0.4,0.2,0.4,0.4V4.2z M3.3,11.3c0,0.2-0.2,0.4-0.4,0.4H0.4c-0.2,0-0.4-0.2-0.4-0.4V8.8c0-0.2,0.2-0.4,0.4-0.4h2.5\n        c0.2,0,0.4,0.2,0.4,0.4V11.3z M3.3,18.3c0,0.2-0.2,0.4-0.4,0.4H0.4c-0.2,0-0.4-0.2-0.4-0.4v-2.5c0-0.2,0.2-0.4,0.4-0.4h2.5\n        c0.2,0,0.4,0.2,0.4,0.4V18.3z M20,4.2c0,0.2-0.2,0.4-0.4,0.4H5.4C5.2,4.6,5,4.4,5,4.2V1.7c0-0.2,0.2-0.4,0.4-0.4h14.2\n        c0.2,0,0.4,0.2,0.4,0.4V4.2z M20,11.3c0,0.2-0.2,0.4-0.4,0.4H5.4c-0.2,0-0.4-0.2-0.4-0.4V8.8c0-0.2,0.2-0.4,0.4-0.4h14.2\n        c0.2,0,0.4,0.2,0.4,0.4V11.3z M20,18.3c0,0.2-0.2,0.4-0.4,0.4H5.4c-0.2,0-0.4-0.2-0.4-0.4v-2.5c0-0.2,0.2-0.4,0.4-0.4h14.2\n        c0.2,0,0.4,0.2,0.4,0.4V18.3z"/>\n    </svg>\n</i>\n'},useData:!0}),M=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){return'<i class=\'typester-icon\'>\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="768" height="768" viewBox="0 0 768 768">\n        <path d="M494.819 659.759l108.242-221.638h-164.939v-329.879h329.879v329.879l-108.241 221.638h-164.939zM54.121 659.759l110.819-221.638h-164.939v-329.879h329.879v329.879l-110.819 221.638h-164.939z"></path>\n    </svg>\n</i>\n'},useData:!0}),N={buttons:["bold","italic","h1","h2","orderedlist","unorderedlist","quote","link"],preventNewlineDefault:["ul","ol"],blockTags:["P"],validTags:["P"],listTags:[],getValidTags:function(){return 1===N.validTags.length&&N.parseForTagLists(),N.validTags},getBlockTags:function(){return 1===N.blockTags.length&&N.parseForTagLists(),N.blockTags},getListTags:function(){return 0===N.listTags.length&&N.parseForTagLists(),N.listTags},parseForTagLists:function(){var e=N.validTags,t=N.blockTags,n=N.listTags;N.buttons.forEach(function(i){var r=N.buttonConfigs[i],a=r.opts.validTags;switch(e=e.concat(a),r.formatter){case"block":t=t.concat(a);break;case"list":n=n.concat(a)}}),N.validTags=e,N.blockTags=t,N.listTags=n},buttonConfigs:{bold:{formatter:"text",opts:{style:"bold",rootEl:"b",validTags:["B","STRONG"]},content:"<b>B</b>",disabledIn:["H1","H2","BLOCKQUOTE"],activeIn:["B"]},italic:{formatter:"text",opts:{style:"italic",rootEl:"i",validTags:["I"]},content:"<i>I</i>",activeIn:["I"]},underline:{formatter:"text:underline",content:"<u>U</u>"},strikethrough:{formatter:"text:strikethrough",content:"<s>A</s>"},superscript:{formatter:"text:superscript",content:"<sup>1</sup>"},subscript:{formatter:"text:subscript",content:"<sub>1</sub>"},justifyCenter:{formatter:"paragraph:justifyCenter"},justifyFull:{formatter:"paragraph:justifyFull"},justifyLeft:{formatter:"paragraph:justifyLeft"},justifyRight:{formatter:"paragraph:justifyRight"},indent:{formatter:"paragraph:indent"},outdent:{formatter:"paragraph:outdent"},orderedlist:{formatter:"list",content:function(e,t,n){var i=P(e,t);return n||"undefined"==typeof $?i:$(i)}({},{},!0),opts:{style:"ordered",validTags:["OL","LI"]},activeIn:["OL"]},unorderedlist:{formatter:"list",content:function(e,t,n){var i=L(e,t);return n||"undefined"==typeof $?i:$(i)}({},{},!0),opts:{style:"unordered",validTags:["UL","LI"]},activeIn:["UL"]},quote:{formatter:"block",content:function(e,t,n){var i=M(e,t);return n||"undefined"==typeof $?i:$(i)}({},{},!0),opts:{style:"BLOCKQUOTE",validTags:["BLOCKQUOTE"]},activeIn:["BLOCKQUOTE"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},pre:{formatter:"block",opts:{style:"PRE"},disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},content:"PRE"},h1:{formatter:"block",opts:{style:"H1",validTags:["H1"]},content:"H1",activeIn:["H1"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},h2:{formatter:"block",opts:{style:"H2",validTags:["H2"]},content:"H2",activeIn:["H2"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},h3:{formatter:"block",opts:{style:"H3",validTags:["H3"]},content:"H3",activeIn:["H3"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},h4:{formatter:"block",opts:{style:"H4",validTags:["H4"]},content:"H4",activeIn:["H4"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},h5:{formatter:"block",opts:{style:"H5",validTags:["H5"]},content:"H5",activeIn:["H5"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},h6:{formatter:"block",opts:{style:"H6",validTags:["H6"]},content:"H6",activeIn:["H6"],disabledIn:function(e){var t=e.get("selection:in:or:contains",["OL","UL"]);return t=t||e.get("selection:spans:multiple:blocks")},toggles:!0},link:{formatter:"link",opts:{validTags:["A"]},content:function(e,t,n){var i=O(e,t);return n||"undefined"==typeof $?i:$(i)}({},{},!0),activeIn:["A"],disabledIn:function(e){return e.get("selection:spans:multiple:blocks")}}}},R=A.template({1:function(e,t,n,i,r,a){var o,s;return"            <li>\n                <a class='typester-menu-item' data-config-key='"+e.escapeExpression((s=null!=(s=n.configKey||(null!=t?t.configKey:t))?s:n.helperMissing,"function"==typeof s?s.call(null!=t?t:e.nullContext||{},{name:"configKey",hash:{},data:r}):s))+"'>\n                    "+(null!=(o=e.lambda(null!=(o=a[0][0])?o.content:o,t))?o:"")+"\n                </a>\n            </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r,a){var o;return"<div class='typester-toolbar'>\n    <ul class='buttons-wrapper s--active'>\n"+(null!=(o=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.buttons:t,{name:"each",hash:{},fn:e.program(1,r,1,a),inverse:e.noop,data:r,blockParams:a}))?o:"")+"    </ul>\n    <div class='inputs-wrapper'>\n        <input class='link-input' type='text' name='link-uri'/>\n    </div>\n</div>\n"},useData:!0,useBlockParams:!0}),F=function(e,t,n){var i=R(e,t);return n||"undefined"==typeof $?i:$(i)},j=c({name:"Toolbar",dom:{toolbarMenuItems:".typester-menu-item"},props:{el:null,styles:null,mouseover:0,classNames:{MENU_ITEM:"typester-menu-item",ACTIVE:"s--active"}},handlers:{commands:{"toolbar:hide":"hideToolbar","toolbar:set:buttons":"setButtons"},events:{"app:destroy":"destroy","selection:update":"handleSelectionChange","selection:change":"handleSelectionChange","mouse:down":"handleMouseDown","mouse:up":"handleMouseUp","import:from:canvas:complete":"handleCanvasImport"},domEvents:{click:"handleToolbarClick",mouseover:"handleMouseOver",mouseout:"handleMouseOut"}},methods:{setup:function(){this.appendStyles(),this.render()},init:function(){this.updateToolbarState()},appendStyles:function(){this.props.styles=u.addStyles(".typester-toolbar .buttons-wrapper,\n.typester-toolbar .inputs-wrapper {\n  transition: opacity 200ms, -webkit-transform 200ms;\n  transition: opacity 200ms, transform 200ms;\n  transition: opacity 200ms, transform 200ms, -webkit-transform 200ms;\n  -webkit-transform: translateY(-40px);\n          transform: translateY(-40px);\n  opacity: 0; }\n  .typester-toolbar .buttons-wrapper.s--active,\n  .typester-toolbar .inputs-wrapper.s--active {\n    -webkit-transform: translateY(0px);\n            transform: translateY(0px);\n    opacity: 1; }\n\n.typester-toolbar .inputs-wrapper {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%; }\n\n.typester-toolbar ul {\n  overflow: hidden;\n  list-style: none; }\n\n.typester-toolbar li {\n  float: left;\n  list-style: none; }\n\n.typester-toolbar .typester-menu-item {\n  color: #FFF;\n  font-family: sans-serif;\n  font-size: 16px;\n  width: 40px;\n  height: 40px;\n  display: block;\n  line-height: 40px;\n  font-weight: bold;\n  text-align: center;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n  .typester-toolbar .typester-menu-item svg {\n    display: block;\n    fill: #FFF;\n    height: 16px;\n    width: 16px;\n    padding: 12px; }\n  .typester-toolbar .typester-menu-item b {\n    font-weight: bold; }\n  .typester-toolbar .typester-menu-item i {\n    font-style: italic; }\n  .typester-toolbar .typester-menu-item:hover {\n    background: #00aeef; }\n  .typester-toolbar .typester-menu-item.s--active {\n    background: #0089bc; }\n  .typester-toolbar .typester-menu-item[disabled] {\n    width: 0;\n    overflow: hidden; }\n")},render:function(){var e=this.mediator,t=this.props,n=this.getButtonConfigs(),i=document.createElement("div"),r=F(n);"string"==typeof r?i.innerHTML=r:i.appendChild(r[0]);var a=i.childNodes[0];return t.flyout=t.flyout||e.get("flyout:new"),t.flyout.clearContent(),t.flyout.show(),t.flyout.appendContent(i.childNodes[0]),a},getButtonConfigs:function(){var e=this.mediator,t=e.get("contenteditable:toolbar:buttons")||[],n=t.length?t:N.buttons,i=[];return n.forEach(function(e){"anchor"===e&&(e="link");var t=Object.assign({configKey:e},N.buttonConfigs[e]);i.push(t)}),{buttons:i}},handleToolbarClick:function(e){var t=this.mediator,n=this.props;t.exec("contenteditable:refocus"),t.exec("selection:reselect");var i=u.getClosest(e.target,"."+n.classNames.MENU_ITEM),r=i.dataset,a=r.configKey,o=N.buttonConfigs[a],s=o.formatter,l=o.opts,c=this.getMenuItemState(i);l.toggle=o.toggles&&c.isActive,t.exec("format:"+s,l)},handleSelectionChange:function(){var e=this,t=this.props;t.selectionChangeTimeout&&clearTimeout(t.selectionChangeTimeout),t.selectionChangeTimeout=setTimeout(function(){e.updateToolbarState()},10)},handleMouseDown:function(){this.updateToolbarState()},handleMouseUp:function(){this.updateToolbarState()},handleMouseOver:function(){var e=this.props;e.mouseover+=1,e.mouseover=Math.min(1,e.mouseover)},handleMouseOut:function(){var e=this.props;e.mouseover-=1,e.mouseover=Math.max(0,e.mouseover)},handleCanvasImport:function(){this.updateToolbarState()},hideToolbar:function(){this.props.flyout.hide()},showToolbar:function(){this.render()},positionToolbar:function(){var e=this.mediator,t=this.props,n=e.get("selection:bounds");if(n.initialWidth>0){var i=u.getScrollOffset(),r=n.top+i.y,a=n.initialLeft+i.x,o=n.initialWidth/2+a;t.flyout.position({left:o+"px",top:r+"px"})}},updateToolbarState:function(){var e=this.mediator,t=this.props,n=e.get("selection:current"),i=e.get("format:link:active"),r=e.get("mouse:is:down");if(!n||n.isCollapsed||!n.toString().trim().length||i||!document.activeElement.hasAttribute("contenteditable")||r){if(t.mouseover)return;this.hideToolbar()}else this.positionToolbar(),this.showToolbar(),this.updateMenuItems()},updateMenuItems:function(){var e=this.dom;this.mediator.exec("selection:ensure:text:only");for(var t=0;t<e.toolbarMenuItems.length;t++){var n=e.toolbarMenuItems[t];this.updateMenuItemState(n)}},updateMenuItemState:function(e){var t=this.props,n=this.getMenuItemState(e);n.isDisabled?e.setAttribute("disabled",""):e.removeAttribute("disabled"),u.toggleClass(e,t.classNames.ACTIVE,n.isActive)},getMenuItemState:function(e){var t=this.mediator,n=e.dataset.configKey,i=N.buttonConfigs[n],r=i.activeIn||[],a=i.disabledIn||[],o=t.get("selection:in:or:contains",r),s=!1;return s="function"==typeof a?a.call(i,t):t.get("selection:in:or:contains",a),{isActive:o,isDisabled:s}},destroy:function(){this.props.flyout.remove()}}}),U=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a,o;return"<div class='typester-flyout place-above'>\n    <div class='typester-flyout-content'>\n        "+(null!=(o=null!=(o=n.content||(null!=t?t.content:t))?o:n.helperMissing,a="function"==typeof o?o.call(null!=t?t:e.nullContext||{},{name:"content",hash:{},data:r}):o)?a:"")+"\n    </div>\n</div>\n"},useData:!0}),B=function(e,t,n){var i=U(e,t);return n||"undefined"==typeof $?i:$(i)},H=c({name:"Flyout",dom:{},props:{minZIndex:90,styles:null,flyouts:[]},handlers:{requests:{"flyout:new":"newFlyout"},commands:{},events:{"app:destroy":"destroy"}},methods:{setup:function(){this.appendStyles()},init:function(){},appendStyles:function(){this.props.styles=u.addStyles(".typester-flyout {\n  transition: top 200ms, left 200ms;\n  position: absolute;\n  z-index: 1600;\n  top: 50%;\n  left: 50%; }\n  .typester-flyout .typester-flyout-content {\n    background: #201f20;\n    height: 40px;\n    width: auto; }\n    .typester-flyout .typester-flyout-content:after {\n      content: '';\n      position: absolute;\n      left: 50%;\n      height: 0;\n      width: 0;\n      border-left: 10px solid transparent;\n      border-right: 10px solid transparent; }\n  .typester-flyout.place-above {\n    -webkit-transform: translate3d(-50%, -100%, 0);\n            transform: translate3d(-50%, -100%, 0);\n    padding-bottom: 12px; }\n    .typester-flyout.place-above .typester-flyout-content:after {\n      top: 100%;\n      border-top: 10px solid #201f20;\n      -webkit-transform: translate3d(-50%, -13px, 0);\n              transform: translate3d(-50%, -13px, 0); }\n  .typester-flyout.place-below {\n    -webkit-transform: translate3d(-50%, 0, 0);\n            transform: translate3d(-50%, 0, 0);\n    padding-top: 12px; }\n    .typester-flyout.place-below .typester-flyout-content:after {\n      bottom: 100%;\n      border-bottom: 10px solid #201f20;\n      -webkit-transform: translate3d(-50%, 13px, 0);\n              transform: translate3d(-50%, 13px, 0); }\n  .typester-flyout a {\n    color: #FFF; }\n")},newFlyout:function(){var e=this.props,t=this.buildFlyout();return e.flyouts.push(t),t},buildFlyout:function(){var e=this,t={el:this.buildTemplate(),appended:null};return t.contentEl=t.el.querySelector(".typester-flyout-content"),t.clearContent=function(){t.contentEl.innerHTML=""},t.appendContent=function(e){return u.appendTo(t.contentEl,e)},t.show=function(){e.showFlyout(t)},t.remove=function(){e.removeFlyout(t)},t.hide=function(){e.hideFlyout(t)},t.position=function(n){e.positionFlyout(t,n)},t.setPlacement=function(n){e.setPlacement(t,n)},t},buildTemplate:function(){var e=document.createElement("div"),t=void 0;return t=B(),"string"==typeof t?e.innerHTML=t:e.appendChild(t[0]),e.childNodes[0]},appendFlyout:function(e){u.appendTo(document.body,e.el)},removeFlyout:function(e){e.appended&&(u.removeNode(e.el),e.appended=!1)},positionFlyout:function(e,t){var n=this.mediator,i=this.props,r=n.get("contenteditable:element"),a=Math.max(i.minZIndex,u.getContainerZIndex(r));Object.keys(t).forEach(function(n){e.el.style[n]=t[n]}),e.el.style.zIndex=a+1},setPlacement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"above";e.el.classList.remove("place-below"),e.el.classList.remove("place-above"),e.el.classList.add("place-"+t)},showFlyout:function(e){e.appended?e.el.style.display="block":(this.appendFlyout(e),e.appended=!0)},hideFlyout:function(e){e.el.style.display="none"},destroy:function(){this.props.flyouts.forEach(function(e){e.remove()})}}}),V=c({name:"Mouse",props:{mousedown:0},dom:{},handlers:{requests:{"mouse:is:down":"mouseIsDown"},commands:{},events:{"contenteditable:blur":"handleContentEditableBlur"}},methods:{init:function(){var e=this,t=this.mediator;document.body.onmousedown=function(){e.setMousedown(),t.emit("mouse:down")},document.body.onmouseup=function(){e.unsetMousedown(),t.emit("mouse:up")}},setMousedown:function(){var e=this.props;e.mousedown+=1,e.mousedown=Math.min(1,e.mousedown)},unsetMousedown:function(){var e=this.props;e.mousedown-=1,e.mousedown=Math.max(0,e.mousedown)},mouseIsDown:function(){return!!this.props.mousedown},handleContentEditableBlur:function(){this.props.mousedown=0}}}),q=a({name:"UIContainer",modules:[{class:H},{class:j,opts:{dom:{el:document.body}}},{class:V}]}),W={defaultBlock:"P",blockElementNames:["blockquote","h1","h2","h3","h4","h5","h6","ol","ul","li","p","pre","address","article","aside","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","hr","main","nav","noscript","output","section","table","tfoot","video"]},z={exec:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;"formatBlock"===e&&(t=z.prepBlockValue(t)),n.execCommand(e,!1,t)},formatBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;z.exec("formatBlock",e,t)},defaultBlockFormat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;z.formatBlock(W.defaultBlock,e)},prepBlockValue:function(e){var t=o.ieVersion();return e=e.toUpperCase(),t&&t<12?"<"+e+">":e}},Y={generate:function(){var e=document.createElement("span");return e.innerHTML="&ZeroWidthSpace;",e},get:function(){return Y.generate().firstChild},assert:function(e){var t=Y.generate();return e.nodeType===Node.ELEMENT_NODE?e.innerHTML===t.innerHTML:e.nodeType===Node.TEXT_NODE?e.nodeValue===t.firstChild.nodeValue:void 0}},G=N.getValidTags(),X=N.getBlockTags(),K=N.getListTags(),Q=c({name:"BaseFormatter",props:{},handlers:{requests:{},commands:{"format:export:to:canvas":"exportToCanvas","format:import:from:canvas":"importFromCanvas","format:default":"formatDefault","format:clean":"formatClean"},events:{"contenteditable:newline":"handleNewLine"}},methods:{init:function(){},exportToCanvas:function(){var e=this.mediator,t=e.get("selection:rootelement"),n=e.get("canvas:body");this.injectHooks(t);var i=e.get("selection:range:coordinates"),r=this.cloneNodes(t);e.exec("canvas:content",r),e.exec("canvas:select:by:coordinates",i),this.removeZeroWidthSpaces(n)},importFromCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.mediator,n=t.get("canvas:body");t.exec("canvas:cache:selection"),t.exec("format:clean",n),e.importFilter&&e.importFilter(n),t.exec("canvas:select:cachedSelection");var i=t.get("canvas:selection:coordinates");t.exec("selection:select:all"),t.exec("contenteditable:inserthtml",n.innerHTML),t.exec("selection:select:coordinates",i),t.emit("import:from:canvas:complete")},formatDefault:function(){var e=this.mediator,t=e.get("selection:rootelement");z.defaultBlockFormat(),this.removeStyledSpans(t)},formatClean:function(e){this.unwrapInvalidElements(e),this.defaultOrphanedTextNodes(e),this.removeBrNodes(e),this.ensureRootElems(e),this.removeStyleAttributes(e),this.removeEmptyNodes(e,{recursive:!0})},cloneNodes:function(e){var t=[];return e.childNodes.forEach(function(e){t.push(e.cloneNode(!0))}),t},injectHooks:function(e){for(;!/\w+/.test(e.firstChild.textContent);)u.removeNode(e.firstChild);for(;!/\w+/.test(e.lastChild.textContent);)u.removeNode(e.lastChild);u.insertBefore(Y.get(),e.firstChild),u.insertAfter(Y.get(),e.lastChild)},formatEmptyNewLine:function(){var e=this.mediator,t=e.get("selection:anchornode"),n=!(t.innerText&&t.innerText.trim().length||u.isIn(t,N.preventNewlineDefault)),i=t.hasAttribute&&t.hasAttribute("contenteditable");(n||i)&&this.formatDefault()},formateBlockquoteNewLine:function(){var e=this.mediator;z.exec("outdent"),this.formatDefault();var t=e.get("selection:range").cloneRange(),n=t.startContainer;if(n.previousSibling&&"BLOCKQUOTE"===n.previousSibling.nodeName){for(var i=n.previousSibling.querySelectorAll("br"),r=n.previousSibling.querySelectorAll("div"),a=0;a<i.length;a++)u.removeNode(i[a]);for(var o=0;o<r.length;o++)u.unwrap(r[o]);e.exec("selection:update:range",t)}},handleNewLine:function(){var e=this.mediator,t=e.get("selection:range"),n=t.startContainer,i=!/\w+/.test(n.textContent),r=u.isIn(n,"BLOCKQUOTE"),a=n.nodeType===Node.ELEMENT_NODE&&n.hasAttribute("contenteditable");r?this.formateBlockquoteNewLine():(i||a)&&this.formatEmptyNewLine()},removeStyleAttributes:function(e){e.querySelectorAll("[style]").forEach(function(e){e.removeAttribute("style")})},removeBrNodes:function(e){var t=e.querySelectorAll("br"),n=[],i=[];t.forEach(function(t){if(!t.skipNode){var r=t===t.parentNode.lastChild,a=t.nextSibling&&"BR"===t.nextSibling.nodeName,o=u.isIn(t,X,e);return r?void i.push(r):a&&o?(n.push([t,t.nextSibling]),void(t.nextSibling.skipNode=!0)):void 0}}),n.forEach(function(t){for(var n=l(t,2),i=n[0],r=n[1],a=u.getClosestInArray(i,X,e),o=document.createElement("p"),s=void 0;s=i.previousSibling;)o.firstChild?u.insertBefore(s,o.firstChild):o.appendChild(s),u.insertBefore(o,a);u.removeNode(i),u.removeNode(r)}),i.forEach(function(e){u.removeNode(e)})},unwrapInvalidElements:function(e){for(var t=e.ownerDocument,n=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null,!1),i=[];n.nextNode();){var r=n.currentNode,a=G.indexOf(r.nodeName)<0,o="BR"===r.nodeName,s=r.className&&/typester/.test(r.className);!a||o||s||i.unshift(r)}i.forEach(function(n){var i=u.unwrap(n,{keepNode:!0});if(!u.isIn(n,G,e)&&i.length){var r=t.createElement("p");i.forEach(function(e){r.appendChild(e)}),u.insertBefore(r,n)}u.removeNode(n)})},defaultOrphanedTextNodes:function(e){for(var t=e.childNodes,n=0;n<t.length;n++){var i=t[n];if(i.nodeType===Node.TEXT_NODE&&/\w+/.test(i.textContent)){var r=document.createElement("p");for(u.insertBefore(r,i),r.appendChild(i);r.nextSibling&&X.concat(K).indexOf(r.nextSibling.nodeName)<0;)r.appendChild(r.nextSibling)}}},clearEntities:function(e){for(var t=e.ownerDocument,n=t.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=[];n.nextNode();)i.push(n.currentNode);i.forEach(function(e){/\w+/.test(e.textContent)&&(e.nodeValue=e.nodeValue.replace(/^\u00a0/,""),e.nodeValue=e.nodeValue.replace(/\u00a0$/,""))})},ensureRootElems:function(e){var t=["H1","H2","H3","H4","H5","H6","OL","UL","BLOCKQUOTE","P"],n=[{tags:["OL","UL"],validParents:["OL","UL","LI"]},{tags:["H1","H2","H3","H4","H5","H6"],validParents:["LI"]}],i=e.querySelectorAll(t.join(", ")),r=function(e){var t=!1;return n.forEach(function(n){n.tags.indexOf(e.tagName)>-1&&n.validParents.indexOf(e.parentNode.tagName)>-1&&(t=!0)}),t},a=function(t){if(t.parentNode!==e&&!r(t)){var n=t.parentNode;if("P"===t.tagName&&["LI","BLOCKQUOTE"].indexOf(n.tagName)>-1){for(;t.firstChild;)u.insertBefore(t.firstChild,t);return void u.removeNode(t)}for(;n.parentNode!==e;)n=n.parentNode;u.insertBefore(t,n)}};i.forEach(a)},removeZeroWidthSpaces:function(e){e.childNodes.forEach(function(e){e.nodeType===Node.TEXT_NODE&&Y.assert(e)&&u.removeNode(e)})},removeEmptyNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.normalize&&e.normalize();for(var n=e.childNodes.length-1;n>=0;n--){var i=e.childNodes[n];"BR"!==i.nodeName&&(t.recursive&&i.childNodes.length&&this.removeEmptyNodes(i,{recursive:!0,rootIsChild:!0}),/[\w\.,\/#!$%\^&\*;:{}=\-_`~()\'\"]/.test(i.textContent)||(!t.rootIsChild&&!Y.assert(i)&&n>0||i.nodeType===Node.ELEMENT_NODE)&&u.removeNode(i))}},removeStyledSpans:function(e){for(var t=e.querySelectorAll("span[style]"),n=t.length-1;n>=0;n--){for(var i=t[n];i.firstChild;)u.insertBefore(i.firstChild,i);u.removeNode(i)}},removeFontNodes:function(e){for(var t=e.querySelectorAll("font"),n=t.length-1;n>=0;n--){for(var i=t[n];i.firstChild;)u.insertBefore(i.firstChild,i);u.removeNode(i)}}}}),J=c({name:"BlockFormatter",props:{selectionRootEl:null},handlers:{commands:{"format:block":"formatBlock"},events:{}},methods:{init:function(){},formatBlock:function(e){this.preProcess(e),this.process(e),this.commit(e)},preProcess:function(){this.mediator.exec("format:export:to:canvas")},process:function(e){var t=this.mediator,n=t.get("canvas:document");e.toggle?("BLOCKQUOTE"===e.style&&z.exec("outdent",null,n),z.defaultBlockFormat(n)):z.formatBlock(e.style,n)},commit:function(e){var t=this.mediator,n=this.cleanupBlockquote,i="BLOCKQUOTE"===e.style?n:null;t.exec("format:import:from:canvas",{importFilter:i})},cleanupBlockquote:function(e){e.querySelectorAll("BLOCKQUOTE P").forEach(function(e){u.unwrap(e)})}}}),Z=c({name:"TextFormatter",props:{cachedRange:null},handlers:{requests:{},commands:{"format:text":"formatText"},events:{}},methods:{formatText:function(e){this.preProcess(),this.process(e),this.postProcess()},preProcess:function(){var e=this.mediator;e.exec("contenteditable:refocus"),e.exec("selection:reselect")},process:function(e){z.exec(e.style,null)},postProcess:function(){this.mediator.exec("contenteditable:refocus")}}}),ee=c({name:"ListFormatter",props:{},dom:{},handlers:{requests:{},commands:{"format:list":"formatList","format:list:cleanup":"cleanupListDOM"},events:{"contenteditable:tab:down":"handleTabDown","contenteditable:tab:up":"handleTabUp"}},methods:{init:function(){},formatList:function(e){this.preProcess(e),this.process(e),this.commit(e)},preProcess:function(){this.mediator.exec("format:export:to:canvas")},process:function(e){var t=this.mediator,n=t.get("canvas:document"),i=!1;switch(t.exec("canvas:cache:selection"),e.style){case"ordered":i=t.get("selection:in:or:contains",["OL"]),i||t.get("selection:in:or:contains",["UL"])&&z.exec("insertUnorderedList",null,n),z.exec("insertOrderedList",null,n);break;case"unordered":i=t.get("selection:in:or:contains",["UL"]),t.get("selection:in:or:contains",["OL"])&&z.exec("insertOrderedList",null,n),z.exec("insertUnorderedList",null,n);break;case"outdent":z.exec("outdent",null,n);break;case"indent":z.exec("indent",null,n)}i?this.postProcessToggle(e):t.exec("canvas:select:ensure:offsets")},commit:function(){var e=this.mediator,t=this.cleanupListDOM;e.exec("format:import:from:canvas",{importFilter:t})},handleTabDown:function(e){this.mediator.get("selection:in:or:contains",["UL","OL"])&&e.preventDefault()},handleTabUp:function(e){this.mediator.get("selection:in:or:contains",["UL","OL"])&&e.preventDefault()},prepListItemsForToggle:function(){var e=this.mediator,t=e.get("canvas:document"),n=e.get("canvas:body"),i=e.get("canvas:selection"),r=i.anchorNode,a=i.focusNode,o=u.getClosest(r,"LI",n),s=u.getClosest(a,"LI",n);e.exec("canvas:cache:selection");for(var l=[o],c=o.nextSibling;c&&c!==s;)l.push(c),c=c.nextSibling;l.push(s),l.forEach(function(e){var n=t.createElement("span");for(e.appendChild(n);e.firstChild!==n;)n.appendChild(e.firstChild)}),e.exec("canvas:select:cachedSelection")},postProcessToggle:function(){var e=this.mediator,t=e.get("canvas:document"),n=e.get("canvas:body");e.exec("canvas:cache:selection");var i=e.get("canvas:selection"),r=i.anchorNode,a=i.focusNode,o=function(e){for(var t=e;t.parentNode!==n;)t=t.parentNode;return t},s=o(r),l=o(a),c=s,d=void 0,h=function(){d=t.createElement("p"),u.insertBefore(d,c)},p=function(e){for(h(),c=e.nextSibling;e.firstChild;)d.appendChild(e.firstChild);u.removeNode(e)};for(h();c!==l;)if("BR"===c.nodeName)!function(e){h(),c=e.nextSibling,u.removeNode(e)}(c);else if("DIV"===c.nodeName)p(c);else{var f=c;c=c.nextSibling,d.appendChild(f)}"DIV"===l.nodeName?p(l):d.appendChild(l),e.exec("canvas:select:cachedSelection")},cleanupListDOM:function(e){for(var t=e.querySelectorAll("OL, UL"),n=t.length-1;n>=0;n--){var i=t[n];if(["OL","UL"].indexOf(i.parentNode.nodeName)>-1)if(i.previousSibling){if("LI"===i.previousSibling.nodeName&&i.previousSibling.appendChild(i),["OL","UL"].indexOf(i.previousSibling.nodeName)>-1){for(var r=0;r<=i.childNodes.length;r++)i.previousSibling.appendChild(i.childNodes[r]);u.removeNode(i)}}else u.unwrap(i);else for(;i.parentNode&&i.parentNode!==e&&["LI"].indexOf(i.parentNode.nodeName)<0;)u.insertBefore(i,i.parentNode)}for(var a=e.querySelectorAll("LI > LI"),o=a.length-1;o>=0;o--){var s=a[o];u.insertAfter(s,s.parentNode)}}}}),te=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return"<form class='typester-input-form'>\n    <input type='text' name='user-input' class='user-input' value='"+e.escapeExpression((a=null!=(a=n.value||(null!=t?t.value:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{name:"value",hash:{},data:r}):a))+'\' />\n    <button type=\'submit\'>\n        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             viewBox="0 180 20 20" enable-background="new 0 180 20 20" xml:space="preserve" height="20px" width="20px">\n             <polyline class="checkmark-2" fill="none" stroke="#FFFFFF" stroke-width="5.3" stroke-miterlimit="10" points="1.9,188.8 7.5,194.4 18.1,183.9 "/>\n        </svg>\n    </button>\n    <button type=\'cancel\'>\n        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n             viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve" width="20px" height="20px">\n             <path id="XMLID_730_" d="M16.4,19.8c-0.2,0.2-0.5,0.2-0.6,0L10,14l-5.7,5.7c-0.2,0.2-0.5,0.2-0.6,0l-3.4-3.4c-0.2-0.2-0.2-0.5,0-0.6\n            L6,10L0.2,4.3c-0.2-0.2-0.2-0.5,0-0.6l3.4-3.4c0.2-0.2,0.5-0.2,0.6,0L10,6l5.7-5.7c0.2-0.2,0.5-0.2,0.6,0l3.4,3.4\n            c0.2,0.2,0.2,0.5,0,0.6L14,10l5.7,5.7c0.2,0.2,0.2,0.5,0,0.6L16.4,19.8z"/>\n        </svg>\n    </button>\n</form>\n'},useData:!0}),ne=function(e,t,n){var i=te(e,t);return n||"undefined"==typeof $?i:$(i)},ie=A.template({compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var a;return"<div class='typester-link-display'>\n    <a>"+e.escapeExpression((a=null!=(a=n.href||(null!=t?t.href:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:e.nullContext||{},{name:"href",hash:{},data:r}):a))+"</a>\n</div>\n"},useData:!0}),re=function(e,t,n){var i=ie(e,t);return n||"undefined"==typeof $?i:$(i)},ae=c({name:"LinkFormatter",props:{
urlRegex:/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,styles:null,currentAnchor:null,active:!1,hasMouse:!1,showing:null,hideTimeout:null,initialEvent:null,targetEl:null,hasRendered:null},dom:{userInput:".user-input"},handlers:{requests:{"format:link:active":"isActive"},commands:{"format:link":"formatLink"},events:{"app:destroy":"destroy","contenteditable:mouseover:anchor":"showLinkFlyout","contenteditable:mouseout:anchor":"hideFlyout","selection:update":"handleSelectionChange","selection:change":"handleSelectionChange","contenteditable:blur":"handleContentEditableBlur"},domEvents:{submit:"handleSubmit",click:"handleClick",mouseover:"handleMouseOver",mouseout:"handleMouseOut"}},methods:{setup:function(){this.appendStyles()},appendStyles:function(){this.props.styles=u.addStyles(".typester-input-form input[type=text] {\n  background: none;\n  border: none;\n  padding: 5px 15px;\n  height: 30px;\n  color: #FFF;\n  width: 250px;\n  outline: none;\n  vertical-align: top; }\n\n.typester-input-form button {\n  height: 40px;\n  width: 40px;\n  line-height: 40px;\n  background: none;\n  border: none;\n  color: #FFF;\n  cursor: pointer;\n  outline: none;\n  text-align: center;\n  padding: 0;\n  margin: 0;\n  vertical-align: top; }\n  .typester-input-form button:hover {\n    background: #00aeef; }\n  .typester-input-form button svg {\n    display: block;\n    height: 16px;\n    width: 16px;\n    margin: 12px;\n    fill: #FFF;\n    stroke: #FFF;\n    text-align: center; }\n\n.typester-link-display a {\n  display: block;\n  cursor: pointer;\n  line-height: 20px;\n  padding: 10px; }\n")},formatLink:function(){this.isInLink()?this.removeLink():this.showLinkFormFlyout()},isInLink:function(){return this.mediator.get("selection:in:or:contains",["A"])},showLinkFormFlyout:function(e){var t=this.mediator,n=this.props,i=this.compileLinkForm(e);n.showing="linkForm",this.render({content:i}),t.exec("selection:wrap:pseudo"),this.focusInput(),this.bindInput()},showLinkFlyout:function(e){var t=this.props,n=this.mediator,i=u.getClosest(e.target,"A");if(!n.get("selection:contains:node",i)&&"linkForm"!==t.showing){this.clearHideTimeout();var r=this.compileLinkDisplay({href:i.href});t.initialEvent=e,t.targetEl=i,this.render({content:r,flyoutPlacement:"below"}),t.showing="linkDisplay",t.currentAnchor=i}},hideFlyout:function(){var e=this,t=this.props;t.hideTimeout=setTimeout(function(){!e.isActive()&&t.hasRendered&&e.destroy()},350)},clearHideTimeout:function(){var e=this.props;e.hideTimeout&&(clearTimeout(e.hideTimeout),e.hideTimeout=null)},compileLinkForm:function(e){var t=document.createElement("div"),n=ne(e);return"string"==typeof n?t.innerHTML=n:t.appendChild(n[0]),t.childNodes[0]},compileLinkDisplay:function(e){var t=document.createElement("div"),n=re(e);return"string"==typeof n?t.innerHTML=n:t.appendChild(n[0]),t.childNodes[0]},render:function(e){var t=this.mediator,n=this.props;return n.hasMouse=!1,n.flyout=n.flyout||t.get("flyout:new"),n.flyout.clearContent(),n.flyout.setPlacement(e.flyoutPlacement),n.flyout.appendContent(e.content),this.positionFlyout(e),this.showFlyout(),n.hasRendered=!0,n.flyout.el},positionFlyout:function(e){var t=this.mediator,n=this.props,i=n.initialEvent,r=n.targetEl,a=void 0,o=void 0,s=void 0,l=void 0,c=void 0;if(r?(a=r.getBoundingClientRect(),o=window.getComputedStyle(r),s=parseInt(o.getPropertyValue("line-height"),10),l=Math.ceil(a.height/s),c=a.height/l):a=t.get("selection:bounds"),a.width>0){var d=u.getScrollOffset(),h=void 0,p=void 0;if(i){var f=i.clientY-a.top;h=i.clientY,p=i.clientX,h="below"===e.flyoutPlacement?a.top+c*Math.ceil(f/c):a.top+c*Math.floor(f/c)}else h="below"===e.flyoutPlacement?a.bottom:a.top,p=a.width/2+a.left+d.x;h+=d.y,n.flyout.position({left:p+"px",top:h+"px"})}},showFlyout:function(){var e=this.mediator;this.props.flyout.show(),e.exec("toolbar:hide")},focusInput:function(){this.dom.userInput[0].focus()},bindInput:function(){var e=this.dom,t=this.props;e.userInput[0].addEventListener("blur",this.handleBlur),t.userInputBound=!0},unbindInput:function(){var e=this.dom,t=this.props;t.userInputBound&&(t.userInputBound=!1,e.userInput[0].removeEventListener("blur",this.handleBlur))},handleSubmit:function(e){e.preventDefault();var t=this.processForm();t["user-input"]?this.createLink(t):this.removeLink({byPseudo:!0})},handleClick:function(e){var t=this.mediator,n=this.props;"A"===e.target.nodeName&&(e.preventDefault(),t.exec("selection:wrap:element",n.currentAnchor,{silent:!0}),this.showLinkFormFlyout({value:n.currentAnchor.href}))},handleMouseOver:function(){this.props.hasMouse=!0},handleMouseOut:function(){var e=this.props;e.hasMouse=!1,"linkDisplay"===e.showing&&this.hideFlyout()},handleBlur:function(){var e=this,t=this.props;t.blurTimeout&&clearTimeout(t.blurTimeout),t.blurTimeout=setTimeout(function(){e.hideFlyout()},100)},handleSelectionChange:function(){this.isActive()||this.hideFlyout()},handleContentEditableBlur:function(){this.hideFlyout()},isActive:function(){var e=this.props,t=this.dom;return e.hasMouse||t&&document.activeElement===t.userInput[0]||e.showingLinkFlyout},processForm:function(){for(var e=this.dom,t=e.el[0].querySelectorAll("input, select, textarea"),n={},i=0;i<t.length;i++){var r=t[i],a=r.name,o=r.value;a&&(n[a]=o)}return n},processLinkInput:function(e){return this.props.urlRegex.test(e)&&e.indexOf("//")<0&&(e="http://"+e),e},createLink:function(e){var t=this.mediator;if(e["user-input"]){var n=this.processLinkInput(e["user-input"]);t.exec("selection:select:pseudo"),z.exec("unlink"),z.exec("createLink",n)}this.destroy()},removeLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.mediator;if(e.byPseudo)t.exec("selection:select:pseudo");else{var n=t.get("selection:anchornode"),i=u.getClosest(n,"A");t.exec("selection:wrap:element",i)}z.exec("unlink"),this.destroy()},destroy:function(){var e=this.props,t=this.mediator;e.flyout&&(this.unbindInput(),e.flyout.remove()),e.showing=null,e.hasMouse=!1,e.hasRendered=null,t.exec("selection:select:remove:pseudo")}}}),oe=e(function(e,t){!function(t,n){e.exports=function(){function e(e,t){for(var n=t.length;n--;)"string"==typeof t[n]&&(t[n]=t[n].toLowerCase()),e[t[n]]=!0;return e}function t(e){var t={},n=void 0;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f(),g=function(e){return i(e)};if(g.version="1.0.2",g.removed=[],!m||!m.document||9!==m.document.nodeType)return g.isSupported=!1,g;var v=m.document,y=!1,_=!1,b=m.document,T=m.DocumentFragment,S=m.HTMLTemplateElement,w=m.Node,E=m.NodeFilter,C=m.NamedNodeMap,k=void 0===C?m.NamedNodeMap||m.MozNamedAttrMap:C,x=m.Text,I=m.Comment,D=m.DOMParser,A=m.XMLHttpRequest,O=void 0===A?m.XMLHttpRequest:A,P=m.encodeURI,L=void 0===P?m.encodeURI:P;if("function"==typeof S){var M=b.createElement("template");M.content&&M.content.ownerDocument&&(b=M.content.ownerDocument)}var N=b,R=N.implementation,F=N.createNodeIterator,j=N.getElementsByTagName,U=N.createDocumentFragment,B=v.importNode,H={};g.isSupported=R&&void 0!==R.createHTMLDocument&&9!==b.documentMode;var V=null,q=e({},[].concat(n(r),n(a),n(o),n(s),n(l))),$=null,W=e({},[].concat(n(u),n(c),n(d),n(h))),z=null,Y=null,G=!0,X=!0,K=!1,Q=!1,J=!1,Z=/\{\{[\s\S]*|[\s\S]*\}\}/gm,ee=/<%[\s\S]*|[\s\S]*%>/gm,te=!1,ne=!1,ie=!1,re=!1,ae=!1,oe=!1,se=!0,le=!0,ue={},ce=e({},["audio","head","math","script","style","template","svg","video"]),de=e({},["audio","video","img","source","image"]),he=e({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),pe=null,fe=b.createElement("form"),me=function(i){"object"!==(void 0===i?"undefined":p(i))&&(i={}),V="ALLOWED_TAGS"in i?e({},i.ALLOWED_TAGS):q,$="ALLOWED_ATTR"in i?e({},i.ALLOWED_ATTR):W,z="FORBID_TAGS"in i?e({},i.FORBID_TAGS):{},Y="FORBID_ATTR"in i?e({},i.FORBID_ATTR):{},ue="USE_PROFILES"in i&&i.USE_PROFILES,G=!1!==i.ALLOW_ARIA_ATTR,X=!1!==i.ALLOW_DATA_ATTR,K=i.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=i.SAFE_FOR_JQUERY||!1,J=i.SAFE_FOR_TEMPLATES||!1,te=i.WHOLE_DOCUMENT||!1,re=i.RETURN_DOM||!1,ae=i.RETURN_DOM_FRAGMENT||!1,oe=i.RETURN_DOM_IMPORT||!1,ie=i.FORCE_BODY||!1,se=!1!==i.SANITIZE_DOM,le=!1!==i.KEEP_CONTENT,J&&(X=!1),ae&&(re=!0),ue&&(V=e({},[].concat(n(l))),$=[],!0===ue.html&&(e(V,r),e($,u)),!0===ue.svg&&(e(V,a),e($,c),e($,h)),!0===ue.svgFilters&&(e(V,o),e($,c),e($,h)),!0===ue.mathMl&&(e(V,s),e($,d),e($,h))),i.ADD_TAGS&&(V===q&&(V=t(V)),e(V,i.ADD_TAGS)),i.ADD_ATTR&&($===W&&($=t($)),e($,i.ADD_ATTR)),i.ADD_URI_SAFE_ATTR&&e(he,i.ADD_URI_SAFE_ATTR),le&&(V["#text"]=!0),Object&&"freeze"in Object&&Object.freeze(i),pe=i},ge=function(e){g.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}},ve=function(e,t){g.removed.push({attribute:t.getAttributeNode(e),from:t}),t.removeAttribute(e)},ye=function(e){var t=void 0,n=void 0;if(ie&&(e="<remove></remove>"+e),_){try{e=L(e)}catch(e){}var i=new O;i.responseType="document",i.open("GET","data:text/html;charset=utf-8,"+e,!1),i.send(null),t=i.response}if(y)try{t=(new D).parseFromString(e,"text/html")}catch(e){}return t&&t.documentElement||(t=R.createHTMLDocument(""),n=t.body,n.parentNode.removeChild(n.parentNode.firstElementChild),n.outerHTML=e),j.call(t,te?"html":"body")[0]};g.isSupported&&function(){var e=ye('<svg><g onload="this.parentNode.remove()"></g></svg>');e.querySelector("svg")||(_=!0);try{e=ye('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),e.querySelector("svg img")&&(y=!0)}catch(e){}}();var _e=function(e){return F.call(e.ownerDocument||e,e,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT,function(){return E.FILTER_ACCEPT},!1)},be=function(e){return!(e instanceof x||e instanceof I)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof k&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute)},Te=function(e){return"object"===(void 0===w?"undefined":p(w))?e instanceof w:e&&"object"===(void 0===e?"undefined":p(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Se=function(e,t,n){H[e]&&H[e].forEach(function(e){e.call(g,t,n,pe)})},we=function(e){var t=void 0;if(Se("beforeSanitizeElements",e,null),be(e))return ge(e),!0;var n=e.nodeName.toLowerCase();if(Se("uponSanitizeElement",e,{tagName:n,allowedTags:V}),!V[n]||z[n]){if(le&&!ce[n]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return ge(e),!0}return!Q||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(g.removed.push({element:e.cloneNode()}),e.innerHTML=e.textContent.replace(/</g,"&lt;")),J&&3===e.nodeType&&(t=e.textContent,t=t.replace(Z," "),t=t.replace(ee," "),e.textContent!==t&&(g.removed.push({element:e.cloneNode()}),e.textContent=t)),Se("afterSanitizeElements",e,null),!1},Ee=/^data-[\-\w.\u00B7-\uFFFF]/,Ce=/^aria-[\-\w]+$/,ke=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,xe=/^(?:\w+script|data):/i,Ie=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,De=function(e){var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0;if(Se("beforeSanitizeAttributes",e,null),o=e.attributes){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$};for(s=o.length;s--;){if(t=o[s],n=t.name,i=t.value.trim(),r=n.toLowerCase(),l.attrName=r,l.attrValue=i,l.keepAttr=!0,Se("uponSanitizeAttribute",e,l),i=l.attrValue,"name"===r&&"IMG"===e.nodeName&&o.id)a=o.id,o=Array.prototype.slice.apply(o),ve("id",e),ve(n,e),o.indexOf(a)>s&&e.setAttribute("id",a.value);else{if("INPUT"===e.nodeName&&"type"===r&&"file"===i&&($[r]||!Y[r]))continue;"id"===n&&e.setAttribute(n,""),ve(n,e)}if(l.keepAttr&&(!se||"id"!==r&&"name"!==r||!(i in m||i in b||i in fe))){if(J&&(i=i.replace(Z," "),i=i.replace(ee," ")),X&&Ee.test(r));else if(G&&Ce.test(r));else{if(!$[r]||Y[r])continue;if(he[r]);else if(ke.test(i.replace(Ie,"")));else if("src"!==r&&"xlink:href"!==r||0!==i.indexOf("data:")||!de[e.nodeName.toLowerCase()]){if(K&&!xe.test(i.replace(Ie,"")));else if(i)continue}else;}try{e.setAttribute(n,i),g.removed.pop()}catch(e){}}}Se("afterSanitizeAttributes",e,null)}},Ae=function e(t){var n=void 0,i=_e(t);for(Se("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Se("uponSanitizeShadowNode",n,null),we(n)||(n.content instanceof T&&e(n.content),De(n));Se("afterSanitizeShadowDOM",t,null)};return g.sanitize=function(e,t){var n=void 0,i=void 0,r=void 0,a=void 0,o=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Te(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");e=e.toString()}if(!g.isSupported){if("object"===p(m.toStaticHTML)||"function"==typeof m.toStaticHTML){if("string"==typeof e)return m.toStaticHTML(e);if(Te(e))return m.toStaticHTML(e.outerHTML)}return e}if(ne||me(t),g.removed=[],e instanceof w)n=ye("\x3c!--\x3e"),i=n.ownerDocument.importNode(e,!0),1===i.nodeType&&"BODY"===i.nodeName?n=i:n.appendChild(i);else{if(!re&&!te&&-1===e.indexOf("<"))return e;if(!(n=ye(e)))return re?null:""}ie&&ge(n.firstChild);for(var s=_e(n);r=s.nextNode();)3===r.nodeType&&r===a||we(r)||(r.content instanceof T&&Ae(r.content),De(r),a=r);if(re){if(ae)for(o=U.call(n.ownerDocument);n.firstChild;)o.appendChild(n.firstChild);else o=n;return oe&&(o=B.call(v,o,!0)),o}return te?n.outerHTML:n.innerHTML},g.setConfig=function(e){me(e),ne=!0},g.clearConfig=function(){pe=null,ne=!1},g.addHook=function(e,t){"function"==typeof t&&(H[e]=H[e]||[],H[e].push(t))},g.removeHook=function(e){H[e]&&H[e].pop()},g.removeHooks=function(e){H[e]&&(H[e]=[])},g.removeAllHooks=function(){H={}},g}var r=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],a=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],o=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],s=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],l=["#text"],u=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],c=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],d=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],h=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"],p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){return"undefined"==typeof window?null:window};return i()}()}()}),se={createReplacements:function(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}},le=c({name:"Paste",props:{},handlers:{commands:{},requests:{},events:{"contenteditable:paste":"handlePaste"}},methods:{init:function(){},handlePaste:function(e){e.preventDefault();var t=this.mediator,n=this.getClipboardContent(e,window,document),i=n["text/html"],r=n["text/plain"];i||(i=r.replace(/(?:\r\n|\r|\n)/g,"<br />")),i=this.cleanPastedHTML(i),i=oe.sanitize(i),t.exec("contenteditable:inserthtml",i)},getClipboardContent:function(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,r={pastedHTML:"",pastedPlain:""};if(!i)return r;if(i.getData){var a=i.getData("text");a&&a.length>0&&(r["text/plain"]=a)}if(i.types)for(var o=0;o<i.types.length;o++){var s=i.types[o];r[s]=i.getData(s)}return r},cleanPastedHTML:function(e){for(var t=this.mediator,n=t.get("canvas:document"),i=t.get("canvas:body"),r=se.createReplacements(),a=0;a<r.length;a++){var o=r[a];e=e.replace(o[0],o[1])}i.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>";for(var s=i.querySelectorAll("a,p,div,br"),l=0;l<s.length;l++){var u=s[l];u.innerHTML=u.innerHTML.replace(/\n/gi," ")}var c=n.createDocumentFragment(),d=n.createElement("body");c.appendChild(d),d.innerHTML=i.innerHTML,this.cleanupSpans(d),this.cleanupDivs(d),s=d.querySelectorAll("*");for(var h=0;h<s.length;h++){for(var p=s[h],f=[],m=0;m<p.attributes.length;m++)f.push(p.attributes[m].name);for(var g=0;g<f.length;g++){var v=f[g];"A"===p.nodeName&&"href"===v||p.removeAttribute(v)}}return i.innerHTML=d.innerHTML,t.exec("format:list:cleanup",i),t.exec("format:clean",i),e=i.innerHTML},cleanupSpans:function(e){for(var t=e.querySelectorAll(".replace-with"),n=0;n<t.length;n++){var i=t[n],r=i.classList.contains("bold"),a=i.classList.contains("italic"),o=document.createElement(r?"b":"i");o.innerHTML=r&&a?"<i>"+i.innerHTML+"</i>":i.innerHTML,i.parentNode.replaceChild(o,i)}t=e.querySelectorAll("span");for(var s=0;s<t.length;s++){var l=t[s];u.unwrap(l)}},cleanupDivs:function(e){for(var t=e.querySelectorAll("div"),n=t.length-1;n>=0;n--)u.unwrap(t[n])}}}),ue=a({name:"FormatterContainer",modules:[{class:Q},{class:J},{class:Z},{class:ee},{class:ae},{class:le}]}),ce=c({name:"Selection",props:{contextWindow:window,contextDocument:document,cachedSelection:null,cachedRange:null,pseudoSelection:null,silenceChanges:[]},dom:{el:null},handlers:{requests:{"selection:current":"getCurrentSelection","selection:range":"getCurrentRange","selection:anchornode":"getAnchorNode","selection:commonancestor":"getCommonAncestor","selection:closestblock":"getClosestBlock","selection:rootelement":"getRootElement","selection:range:clone":"getRangeClone","selection:bounds":"getSelectionBounds","selection:range:relative:toroot":"getRangeRelativeToRoot","selection:in:or:contains":"inOrContains","selection:range:coordinates":"rangeCoordinates","selection:contains:node":"containsNode","selection:spans:multiple:blocks":"spansMultipleBlocks"},commands:{"selection:set:contextWindow":"setContextWindow","selection:set:contextDocument":"setContextDocument","selection:set:el":"setRootElement","selection:expand:toroot":"expandToRoot","selection:update:range":"updateRange","selection:wrap:element":"wrapElement","selection:wrap:content":"wrapContent","selection:wrap:pseudo":"wrapPseudoSelect","selection:select:pseudo":"selectPseudo","selection:select:remove:pseudo":"removePseudo","selection:collapse:tostart":"collapseToStart","selection:reselect":"reSelect","selection:select:contents":"selectContents","selection:collapse:toend":"collapseToEnd","selection:select:all":"selectAll","selection:select:coordinates":"selectByCoordinates","selection:ensure:text:only":"ensureTextOnlySelection","selection:deselect":"deSelect"}},methods:{init:function(){this.bindDocumentEvents()},bindDocumentEvents:function(){var e=this.props.contextDocument;e.addEventListener("selectstart",this.handleSelectStart),e.addEventListener("selectionchange",this.handleSelectionChange)},unbindDocumentEvents:function(){var e=this.props.contextDocument;e.removeEventListener("selectstart",this.handleSelectStart),e.removeEventListener("selectionchange",this.handleSelectionChange)},setContextWindow:function(e){this.props.contextWindow=e},setContextDocument:function(e){var t=this.props;this.unbindDocumentEvents(),t.contextDocument=e,this.bindDocumentEvents()},setRootElement:function(e){this.dom.el=[e]},handleSelectStart:function(e){var t=this.mediator,n=this.dom.el,i=this.getAnchorNode();u.isChildOf(i,n)&&t.emit("selection:start",e)},handleSelectionChange:function(e){var t=this.mediator,n=this.props,i=this.dom.el,r=this.getAnchorNode();u.isChildOf(r,i)&&(this.cacheRange(),n.silenceChanges.length?n.silenceChanges.pop():t.emit("selection:change",e))},cacheRange:function(){var e=this.getCurrentRange();this.props.cachedRange=e.cloneRange()},getCurrentSelection:function(){return this.props.contextWindow.getSelection()},validateSelection:function(e){var t=this.dom;return e.anchorNode&&u.isChildOf(e.anchorNode,t.el)},getCurrentRange:function(){var e=this.props,t=this.getCurrentSelection();return this.validateSelection(t)?t.getRangeAt(0):e.cachedRange?e.cachedRange:document.createRange()},getAnchorNode:function(){return this.getCurrentSelection().anchorNode},getCommonAncestor:function(){var e=this.getCurrentSelection();if(e.rangeCount>0){return e.getRangeAt(0).commonAncestorContainer}},getClosestBlock:function(){for(var e=this.getCommonAncestor(),t=null,n=e;!t&&!this.isContentEditable(n)&&n;)if(n.nodeType===Node.ELEMENT_NODE){var i=n.tagName.toLowerCase();W.blockElementNames.indexOf(i)>-1?t=n:n=n.parentNode}else n=n.parentNode;return t},getRootElement:function(){return this.dom.el[0]},getRangeClone:function(){return this.getCurrentRange().cloneRange()},getRangeRelativeToRoot:function(){var e=this.getCurrentRange(),t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset,a=[],o=[],s=0;for(a.unshift(n),o.unshift(r);!this.isContentEditable(t);)this.isContentEditable(t.parentNode)?(s=u.childIndex(t),a.unshift(0)):a.unshift(u.childIndex(t)),t=t.parentNode;for(;!this.isContentEditable(i);)this.isContentEditable(i.parentNode)?o.unshift(u.childIndex(i)-s):o.unshift(u.childIndex(i)),i=i.parentNode;return{startCoordinates:a,endCoordinates:o}},rangeCoordinates:function(){this.ensureTextOnlySelection();var e=this.getCurrentRange(),t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset,a=[],o=[];for(a.unshift(n),o.unshift(r);!this.isContentEditable(t);)a.unshift(u.childIndex(t)),t=t.parentNode;for(;!this.isContentEditable(i);)o.unshift(u.childIndex(i)),i=i.parentNode;return{startCoordinates:a,endCoordinates:o}},inOrContains:function(e){var t=this.dom,n=t.el[0],i=this.getAnchorNode();if(!n.contains(i))return!1;var r=u.isIn(i,e,n);if(r)return r;var a=this.getCurrentRange(),o=a.cloneContents(),s=!1;return o.childNodes.length&&e.forEach(function(e){s=s||o.childNodes[0].nodeName===e}),s},containsNode:function(e){var t=this.getCurrentSelection(),n=t.anchorNode,i=t.focusNode,r=t.containsNode(e,!0);return!!t.rangeCount&&(!!r||(n.nodeType!==Node.ELEMENT_NODE&&(n=n.parentNode),i.nodeType!==Node.ELEMENT_NODE&&(i=i.parentNode),n===e||i===e))},expandToRoot:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.range||this.getCurrentRange(),i=n.startContainer,r=n.endContainer,a=document.createRange(),o=i===r;if(!this.isContentEditable(i)){var s=function(t){var n=t;if(!e.isContentEditable(n))for(;n.parentNode&&!e.isContentEditable(n.parentNode);)n=n.parentNode;return n};i=s(i),r=o?i:s(r),t.innerBounds?(a.setStartAfter(i),a.setEndBefore(r)):(a.setStart(i,0),a.setEndAfter(r)),this.updateRange(a,{silent:!0})}},wrapElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getCurrentRange();e instanceof Array?(n.setStartBefore(e[0]),n.setEndAfter(e[e.length-1])):e.nodeType===Node.ELEMENT_NODE&&(n.setStartBefore(e),n.setEndAfter(e)),this.updateRange(n,t)},wrapContent:function(){var e=this.getCurrentRange(),t=this.getRootElement();e.selectNodeContents(t),this.updateRange(e)},wrapPseudoSelect:function(){var e=this.props,t=this.getCurrentRange(),n=document.createElement("span");n.classList.add("typester-pseudo-selection"),n.appendChild(t.extractContents()),t.insertNode(n),e.pseudoSelection=n,this.wrapElement(n)},selectPseudo:function(){var e=this.dom,t=this.removePseudo();t.length&&(e.el[0].focus(),this.wrapElement(t,{silent:!0}))},removePseudo:function(){var e=this.props,t=[];return e.pseudoSelection&&e.pseudoSelection.tagName&&(t=u.unwrap(e.pseudoSelection),e.pseudoSelection=null),t},selectContents:function(e){var t=document.createRange();e.childNodes.length?t.selectNodeContents(e):(t.setStart(e,0),t.collapse(!0)),this.updateRange(t)},updateRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.mediator,i=this.props,r=this.getCurrentSelection();t.silent&&(i.silenceChanges.push(!0),i.silenceChanges.push(!0)),r.removeAllRanges(),r.addRange(e),t.silent||n.emit("selection:update")},deSelect:function(){this.getCurrentSelection().removeAllRanges()},isContentEditable:function(e){return e&&e.nodeType===Node.ELEMENT_NODE&&e.hasAttribute("contenteditable")},getSelectionBounds:function(){for(var e=this.getCurrentRange(),t=e?e.getClientRects():[],n=e?e.getBoundingClientRect():null,i={top:null,right:null,bottom:null,left:null,height:null,width:null,initialWidth:null,initialLeft:null},r=0;r<t.length;r++)!function(e){["top","left","bottom","right","height","width"].forEach(function(t){if(i[t])switch(t){case"top":case"left":i[t]=Math.min(i[t],e[t]);break;case"bottom":case"right":case"height":case"width":i[t]=Math.max(i[t],e[t])}else i[t]=e[t]})}(t[r]);for(var a=0;a<t.length;a++)!function(e){n?(i.initialLeft=n.left,i.initialWidth=n.width):e.top===i.top&&(null===i.initialLeft?i.initialLeft=e.left:i.initialLeft=Math.min(e.left,i.initialLeft),null===i.initialWidth?i.initialWidth=e.width:i.initialWidth=Math.max(e.right-i.initialLeft,i.initialWidth))}(t[a]);return i},collapseToStart:function(){var e=this.getCurrentRange(),t=document.createRange();t.setStart(e.startContainer,e.startOffset),t.setEnd(e.startContainer,e.startOffset),this.updateRange(t)},collapseToEnd:function(){this.getCurrentSelection().collapseToEnd()},reSelect:function(){var e=this.props;e.cachedRange&&this.updateRange(e.cachedRange,{silent:!0})},selectAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.dom,n=this.props,i=n.contextDocument,r=i.createRange(),a=t.el[0];if(e.selector){var o=i.querySelectorAll(e.selector);r.setStartBefore(o[0]),r.setEndAfter(o[o.lenght-1])}else r.setStart(a,0),r.setEndAfter(a.lastChild);this.updateRange(r)},selectByCoordinates:function(e){for(var t=this.dom,n=this.props,i=n.contextDocument,r=i.createRange(),a=e.startCoordinates.slice(0),o=e.endCoordinates.slice(0),s=a.pop(),l=o.pop(),u=t.el[0],c=t.el[0];a.length;){var d=a.shift();u=u.childNodes[d]}for(;o.length;){var h=o.shift();c=c.childNodes[h]}r.setStart(u,s),r.setEnd(c,l),this.updateRange(r)},ensureTextOnlySelection:function(){var e=this.props.contextDocument,t=this.getCurrentRange(),n=this.getCurrentSelection(),i=t.startContainer,r=t.endContainer,a=t.commonAncestorContainer;if(!(n.isCollapsed||i.nodeType===Node.TEXT_NODE&&r.nodeType===Node.TEXT_NODE)){for(var o=t.toString(),s=e.createRange(),l=e.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1),u=[];l.nextNode();)u.push(l.currentNode);var c=u[0],d=u[u.length-1];s.setStart(c,0),s.setEnd(d,d.textContent.length)
;for(var h=0,p=0,f=u[h];s.compareBoundaryPoints(Range.START_TO_START,t)<0;){if((p+=1)>f.textContent.length){if(h+=1,p=0,h>=u.length)break;f=u[h]}s.setStart(f,p)}var m=p;for(s.setEnd(f,m);s.compareBoundaryPoints(Range.END_TO_END,t)<0;){if((m+=1)>f.textContent.length){if(h+=1,m=0,h>=u.length)break;f=u[h]}s.setEnd(f,m)}s.toString()===o&&this.updateRange(s,{silent:!0})}}},spansMultipleBlocks:function(){var e=this.getCurrentSelection(),t=e.anchorNode,n=e.focusNode,i=this.getRootElement(),r=N.getBlockTags();return u.getClosestInArray(t,r,i)!==u.getClosestInArray(n,r,i)}}),de=c({name:"Canvas",props:{iframe:null,relativeRange:null,alreadyContainered:!1,cachedSelection:null},handlers:{requests:{"canvas:document":"getCanvasDocument","canvas:window":"getCanvasWindow","canvas:body":"getCanvasBody","canvas:formatted:block":"getFormattedBlock","canvas:selection:coordinates":"getSelectionCoordinates","canvas:selection":"getSelection","canvas:selection:in:or:contains":"selectionInOrContains"},commands:{"canvas:content":"setContent","canvas:insert:range":"insertRange","canvas:insert:node":"insertNode","canvas:select:all":"selectAll","canvas:select:by:coordinates":"selectByCoordinates","canvas:import:selection":"importSelection","canvas:export:prep":"exportPrep","canvas:export:all":"exportAll","canvas:cache:selection":"cacheSelection","canvas:select:cachedSelection":"selectCachedSelection","canvas:select:ensure:offsets":"ensureSelectionOffsets"},events:{"app:destroy":"destroy"}},methods:{init:function(){this.appendStyles(),this.createIframe()},appendStyles:function(){this.props.styles=u.addStyles(".typester-canvas {\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 0;\n  width: 0;\n  opacity: 0; }\n")},createIframe:function(){var e=this,t=this.mediator,n=document.createElement("iframe");n.classList.add("typester-canvas"),n.onload=function(){e.setCanvasBodyEditable(),e.applyPolyfills(),t.emit("canvas:created")},this.props.iframe=n,document.body.appendChild(n)},clearIframe:function(){this.getCanvasBody().innerHTML=""},reset:function(){var e=this.props;e.relativeRange=null,e.alreadyContainered=!1,e.cachedSelection=null,this.clearIframe()},cacheSelection:function(){var e=this.props,t=this.mediator;t.exec("selection:ensure:text:only");var n=t.get("selection:current"),i=n.anchorNode,r=n.anchorOffset,a=n.focusNode,o=n.focusOffset;e.cachedSelection={anchorNode:i,anchorOffset:r,focusNode:a,focusOffset:o}},selectCachedSelection:function(){var e=this.props,t=this.mediator,n=e.cachedSelection,i=n.anchorNode,r=n.anchorOffset,a=n.focusNode,o=n.focusOffset,s=this.getCanvasDocument(),l=s.createRange();l.setStart(i,r),l.setEnd(a,o),t.exec("selection:update:range",l)},ensureSelectionOffsets:function(){var e=this.props,t=this.mediator;if(e.cachedSelection){var n=t.get("selection:current"),i=n.anchorNode,r=n.anchorOffset,a=n.focusNode,o=n.focusOffset,s=e.cachedSelection,l=s.anchorOffset,u=s.focusOffset,c=r!==l,d=o!==u;if(c||d){var h=this.getCanvasDocument(),p=h.createRange();p.setStart(i,l),p.setEnd(a,u),t.exec("selection:update:range",p)}}},setCanvasBodyEditable:function(){this.props.iframe.contentDocument.body.contentEditable=!0},applyPolyfills:function(){var e=this.getCanvasWindow();e.NodeList&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=function(t,n){n=n||e;for(var i=0;i<this.length;i++)t.call(n,this[i],i,this)})},getCanvasDocument:function(){return this.props.iframe.contentDocument},getCanvasWindow:function(){return this.props.iframe.contentWindow},getCanvasBody:function(){return this.props.iframe.contentDocument.body},setContent:function(e){var t=this.getCanvasDocument();e instanceof Array?(this.reset(),e.forEach(function(e){t.body.appendChild(e)})):t.body.innerHTML=e},insertRange:function(e){var t=e.cloneContents(),n=this.getCanvasBody();this.reset();for(var i=0;i<t.childNodes.length;i++){var r=t.childNodes[i];r.nodeType!==Node.TEXT_NODE||/\w+/.test(r.textContent)&&!Y.assert(r)||t.removeChild(r)}n.appendChild(t)},insertNode:function(e){var t=e.cloneNode(!0),n=this.getCanvasBody();this.reset(),n.appendChild(t)},selectAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.mediator.exec("selection:select:all",e)},selectByCoordinates:function(e){var t=this.mediator,n=this.getCanvasBody();t.exec("selection:set:el",n),t.exec("selection:select:coordinates",e)},importSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.mediator,n=void 0;e.toRoot&&(n=t.get("selection:range:relative:toroot"),t.exec("selection:expand:toroot"));var i=t.get("selection:range");this.insertRange(i),e.toRoot?this.selectByCoordinates(n):this.selectAll(),this.setCanvasBodyEditable()},exportPrep:function(){this.cleanHtml()},exportAll:function(){var e=this.mediator,t=this.getCanvasBody(),n=t.innerHTML;n=n.replace(/\s{2,}/g," "),n=n.replace(/\r?\n|\r/g,""),e.exec("contenteditable:inserthtml",n)},getFormattedBlock:function(){var e=this.mediator;return e.exec("selection:expand:toroot"),e.get("selection:range").cloneContents()},cleanHtml:function(){for(var e=this.getCanvasDocument(),t=this.getCanvasBody(),n=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),i=[];n.nextNode();)i.push(n.currentNode);for(var r=i.length-1;r>=0;r--){var a=i[r];if(a.textContent&&a.textContent.trim().length&&!Y.assert(a)){if(a.classList&&a.classList.contains("typester-replace-default")){var o=document.createElement("p");u.insertAfter(o,a),o.appendChild(a),u.unwrap(a)}}else u.removeNode(a);(a.classList&&a.classList.contains("typester-container")||"SPAN"===a.nodeName&&a.hasAttribute("style")||"FONT"===a.nodeName||"DIV"===a.nodeName)&&u.unwrap(a)}},getSelection:function(){return this.mediator.get("selection:current")},getSelectionCoordinates:function(){return this.mediator.get("selection:range:coordinates")},selectionInOrContains:function(e){return this.mediator.get("selection:in:or:contains",e)},destroy:function(){var e=this.props,t=e.iframe;t.parentNode.removeChild(t)}}}),he=a({name:"CanvasContainer",modules:[{class:ce},{class:de}],mediatorOpts:{conceal:[/selection:.*?/]},handlers:{events:{"canvas:created":"handleCanvasCreated"}},methods:{init:function(){},handleCanvasCreated:function(){var e=this.mediator,t=e.get("canvas:window"),n=e.get("canvas:document"),i=e.get("canvas:body");e.exec("selection:set:contextWindow",t),e.exec("selection:set:contextDocument",n),e.exec("selection:set:el",i)}}}),pe={ENTER:13,BACKSPACE:8,TAB:9},fe=c({name:"ContentEditable",props:{styles:null,cleanupTimeout:null},dom:{},handlers:{requests:{"contenteditable:element":"getContentEditableElement","contenteditable:toolbar:buttons":"getToolbarButtons"},commands:{"contenteditable:inserthtml":"insertHTML","contenteditable:refocus":"reFocus","contenteditable:cleanup":"cleanup"},domEvents:{focus:"handleFocus",keydown:"handleKeydown",keyup:"handleKeyup",blur:"handleBlur",paste:"handlePaste",mouseover:"handleMouseOver",mouseout:"handleMouseOut",click:"handleClick",input:"handleInput"}},methods:{setup:function(){this.appendStyles()},init:function(){this.ensureClass(),this.ensureEditable(),this.updatePlaceholderState(),this.updateValue()},appendStyles:function(){this.props.styles=u.addStyles(".typester-content-editable[data-placeholder]:before {\n  content: attr(data-placeholder);\n  display: none;\n  color: #a0a0a0;\n  position: absolute; }\n\n.typester-content-editable[data-placeholder].show-placeholder:before {\n  display: block; }\n")},ensureClass:function(){this.dom.el[0].classList.add("typester-content-editable")},updatePlaceholderState:function(){var e=this.dom,t=e.el[0];t.hasAttribute("data-placeholder")&&(t.childNodes.length&&t.textContent.trim().length?t.classList.remove("show-placeholder"):t.classList.add("show-placeholder"))},updateValue:function(){var e=this.dom,t=e.el[0];t.innerText.trim().length?t.value=t.innerHTML:t.value=""},ensureEditable:function(){var e=this.dom,t=e.el[0];t.hasAttribute("contenteditable")||(t.contentEditable=!0)},ensureDefaultBlock:function(){var e=this.dom,t=this.mediator,n=e.el[0];/\w+/.test(n.textContent)||(n.innerHTML="<p>&nbsp;</p>",t.exec("selection:select:contents",n.childNodes[0]))},getToolbarButtons:function(){var e=this.dom,t=e.el[0].dataset.toolbarButtons,n=[];return t&&(n=JSON.parse(t)),n},insertHTML:function(e){var t=this.mediator;if(document.queryCommandSupported("insertHTML"))document.execCommand("insertHTML",null,e);else{var n=t.get("selection:current"),i=t.get("selection:range");i.deleteContents();var r=document.createElement("container");r.innerHTML=e;for(var a=document.createDocumentFragment(),o=void 0,s=void 0;o=r.firstChild;)s=a.appendChild(o);i.insertNode(a),s&&(i=i.cloneRange(),i.setStartAfter(s),i.collapse(!0),n.removeAllRanges(),n.addRange(i))}},reFocus:function(){this.dom.el[0].focus()},getContentEditableElement:function(){return this.dom.el[0]},cleanup:function(){var e=this.dom,t=this.mediator,n=e.el[0];t.exec("format:clean",n)},setCleanupTimeout:function(){var e=this;this.props.cleanupTimeout=setTimeout(function(){e.cleanup()},250)},clearCleanupTimeout:function(){var e=this.props;e.cleanupTimeout&&(clearTimeout(e.cleanupTimeout),e.cleanupTimeout=null)},handleFocus:function(){var e=this.mediator;this.clearCleanupTimeout(),this.ensureDefaultBlock(),this.updatePlaceholderState(),e.emit("contenteditable:focus")},handleKeyup:function(e){function t(e,t){var n;return t=t||{bubbles:!0,cancelable:!0,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}var n=this.mediator,i=this.dom,r=e.which||e.keyCode,a=n.get("selection:anchornode");switch(r){case pe.ENTER:setTimeout(function(){n.emit("contenteditable:newline")},100);break;case pe.BACKSPACE:(!a.textContent.trim().length||a.hasAttribute&&a.hasAttribute("contenteditable"))&&n.emit("contenteditable:newline");break;case pe.TAB:n.emit("contenteditable:tab:up",e)}i.el[0].dispatchEvent(new t("change")),this.updateValue(),this.updatePlaceholderState()},handleKeydown:function(e){var t=this,n=this.mediator,i=e.which||e.keyCode;switch(setTimeout(function(){t.updatePlaceholderState()},25),i){case pe.TAB:n.emit("contenteditable:tab:down",e)}},handleBlur:function(){var e=this.mediator;this.updatePlaceholderState(),this.updateValue(),this.setCleanupTimeout(),e.emit("contenteditable:blur")},handlePaste:function(e){this.mediator.emit("contenteditable:paste",e),this.updateValue()},handleMouseOver:function(e){var t=this.mediator;"A"===e.target.nodeName&&t.emit("contenteditable:mouseover:anchor",e)},handleMouseOut:function(e){var t=this.mediator;"A"===e.target.nodeName&&t.emit("contenteditable:mouseout:anchor",e)},handleClick:function(e){var t=this.dom,n=t.el[0];u.isIn(e.target,"A",n)&&(e.preventDefault(),e.stopPropagation())},handleInput:function(){this.updateValue()}}}),me=void 0,ge=void 0,ve=void 0,ye=a({name:"AppContainer",modules:[{class:fe},{class:ce}],handlers:{events:{"contenteditable:focus":"handleFocus","contenteditable:blur":"handleBlur"}},methods:{setup:function(){var e=this.mediator;ge=ge||new ue({mediator:e}),me=me||new q({mediator:e}),ve=ve||new he({mediator:e})},init:function(){},handleFocus:function(){var e=this.mediator;me.setMediatorParent(e),ge.setMediatorParent(e),ve.setMediatorParent(e)},handleBlur:function(){}}});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new ye({dom:{el:e.el}})}}),define("forms/fields/RichContentEditor",["jquery","DOMPurify","Typester","factories/fieldFactory"],function(e,t,n,i){"use strict";var r=function(a){var o,s,l,u,c,d,h,p,f;o=this,l=r.markup,s=e.extend({$e:null,selector:".editable-content"},a),u={name:"RichContentEditor",$e:s.$e||e(s.selector),explicitInit:!0,withoutNativeInput:!0,valMethod:"html",charlimit:null,editorIsSetup:null,mediumEditor:null,mediumEditorOptions:{extensions:{imageDragging:{}},toolbar:{buttons:["bold","italic","h1","h2",{name:"orderedlist"},{name:"unorderedlist"},"quote",{name:"anchor"}]},anchor:{formSaveLabel:null,formCloseLabel:null},placeholder:{text:"",hideOnClick:!1}},templates:{richContentEditorIcons:{selector:"!.rich-content-editor-icons"}},events:{focus:"internalElFocus"}},c={},d={},h={init:function(){new n({el:u.$e[0]}),h.cacheCharLimit()},getVal:function(){return h.purify(e.trim(u.$e.html()))},purify:function(e){return t.sanitize(e)},setVal:function(e,t){t=t||{},u.$e.html(e),u.$e[0].value=e,t.isDefault&&u.$e.trigger("change:default",e)},isBlank:function(){return!e.trim(u.$e.text()).length},initEditor:function(){},destroyExistingEditor:function(){var t,n,i,r;t=u.$e.data("mediumEditor"),n=u.$e[0].attributes,i=[],r=u.$e[0].className.split(" "),t&&t.destroy(),e.each(n,function(e,t){/medium/gi.test(t.nodeName)&&i.push(t.nodeName)}),e.each(i,function(e,t){u.$e.removeAttr(t)}),e.each(r,function(e,t){(/medium/.test(t)||t===l.HAS_VALUE)&&u.$e.removeClass(t)}),u.$e.empty()},setMediumEditorOptions:function(){},setIcons:function(){},getSvgIconHtml:function(e){var t,n;return t=d.richContentEditorIcons.filter("."+e+"-icon"),t.length&&(n=t.html()),n},setupEditor:function(){},destroyEditor:function(){},reset:function(){h.destroyExistingEditor(),h.setupEditor()},parseLinks:function(){u.$e.find("[href]").each(function(t,n){var i,r,a,o,s,l;i=e(n),r=i.attr("href"),o=/^\//,a=/^https?/,l=/^mailto:/,o.test(r)||a.test(r)||l.test(r)||(s=r.split("/"),r=s[0].indexOf(".")>-1?"http://"+r:"/"+r,i.attr("href",r))})},cacheCharLimit:function(){u.charlimit=parseInt(u.$e.attr("charlimit"),10),c.charCount=u.$e.next("."+l.CHAR_COUNT)},updateCharLimit:function(){var e;e=u.$e.html().length,c.charCount.html(e+"/"+u.charlimit),c.charCount.toggleClass(l.OVERFLOW,e>u.charlimit)},beforeDestroy:function(){h.destroyEditor()},isValid:function(){var e=u.validator.isValid();return u.charlimit&&(e=e&&u.charlimit>=u.$e.html().length),e}},p={internalElFocus:function(){h.setupEditor()}},f={getVal:h.getVal,setVal:h.setVal,isBlank:h.isBlank,focus:h.focus,reset:h.reset,parseLinks:h.parseLinks},i({self:o,o:s,m:l,internal:u,elements:c,templates:d,fn:h,handlers:p,api:f}).create()};return r.markup={CHAR_COUNT:"char-count",OVERFLOW:"state-overflow"},r}),define("utils/handlebarsUtils",["jquery","handlebars"],function(e,t){"use strict";t.registerHelper("toJSON",function(t){return e.isArray(t)&&1===t.length&&e.isArray(t[0])&&(t=t[0]),JSON.stringify(t)}),t.registerHelper("ifCond",function(e,t,n,i){switch(t){case"===":return e===n?i.fn(this):i.inverse(this);case"!==":return e!==n?i.fn(this):i.inverse(this);case"<":return e<n?i.fn(this):i.inverse(this);case"<=":return e<=n?i.fn(this):i.inverse(this);case">":return e>n?i.fn(this):i.inverse(this);case">=":return e>=n?i.fn(this):i.inverse(this);case"&&":return e&&n?i.fn(this):i.inverse(this);case"||":return e||n?i.fn(this):i.inverse(this);default:return i.inverse(this)}}),t.registerHelper("encodeURI",function(e){return encodeURI(e)}),t.registerHelper("capitalize",function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),t.registerHelper("ccToString",function(e){var t,n,i;return 0!==e.indexOf("cc-")?e:(t={by:"Attribution",nd:"NoDerivatives",sa:"ShareAlike",nc:"NonCommercial",suffix:"4.0 International"},i=[],e=e.replace("cc-",""),n=e.split("-"),n.forEach(function(e){i.push(t[e])}),i.join("-")+" "+t.suffix)}),t.registerHelper("ccClasses",function(e){var t;return t=[],e.split("-").forEach(function(e){t.push("state-show-"+e)}),t.join(" ")})}),define("forms/fields/JsonField",["jquery","factories/fieldFactory","utils/handlebarsUtils"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d,h;r=this,o=n.markup,a=e.extend({$e:null,selector:".json-field"},i),s={name:"JsonField",$e:a.$e||e(a.selector),explicitInit:!0,withoutNativeInput:!0,components:{jsonItem:{selector:".json-item"}}},l={},u={},c={init:function(){s.$e.data("initialVal")&&c.setInitialVal(),l.jsonItem&&c.setJsonItems()},setInitialVal:function(){var e=s.$e.data("initialVal"),t=s.$e.data("initialValKey");t?c.setDefaultVal(e[t]):c.setDefaultVal(e)},setJsonItems:function(){var t=[];l.jsonItem.each(function(n,i){t.push(e(i).data("value"))}),c.setDefaultVal(t)},getDefaults:function(){return s.$e.data("defaults")||{}},getName:function(){var t=s.$e.attr("name");return/\[.*?\]/.test(t)&&e.isArray(c.getVal())&&(t=t.replace(/\[.*?\]/,"")),t||""},getVal:function(){var t,n,i,r,a,o,l;return r=s.$e.attr("name"),o=s.$e.data("valueKey"),a=/\[.*?\]/.test(r),t=s.$e.data("value"),t&&!e.isEmptyObject(t)||(t=a?[]:{}),e.isArray(t)?(i=[],e.each(t,function(t,r){e.isPlainObject(r)?(n=e.extend({},c.getDefaults()),l=e.extend(n,r),o?i.push(l[o]):i.push(l)):i.push(r)})):(n=e.extend({},c.getDefaults()),i=e.extend(n,t),o&&(i=i[o])),a&&!e.isArray(i)&&(i=[i]),i},getFullVal:function(){return s.$e.data("value")},setVal:function(e,t){t=t||{},s.$e.data("noSet")||(s.$e.data("value",e),t.isDefault&&s.$e.trigger("change:default",e))}},d={},h={getName:c.getName,getVal:c.getVal,getFullVal:c.getFullVal,setVal:c.setVal},t({self:r,o:a,m:o,internal:s,elements:l,templates:u,fn:c,handlers:d,api:h}).create()};return n.markup={},n}),define("forms/fields/FileDrop",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d,h;r=this,o=n.markup,a=e.extend({$e:null,selector:".file-drop"},i),s={name:"FileDrop",$e:a.$e||e(a.selector),withoutNativeInput:!0,files:[],uploadType:"image",imageMeta:{height:"",width:""},templates:{filePreview:{selector:"!.file-preview-template"},imagePreview:{selector:"!.image-preview-template"}},components:{dropArea:{selector:".drop-area"},dropLabel:{selector:".drop-label"},fileInput:{selector:".file-input"},filePreview:{selector:".file-preview"},fileName:{selector:".file-meta .filename"},fileSize:{selector:".file-meta .filesize"},removeFile:{selector:".remove-file"},validationMessage:{selector:".validation-message"},focalPoint:{selector:".focal-point"},previewArea:{selector:".preview-area"},previewContent:{selector:".preview-content"}},events:{change:"internalElChange","dragover @dropArea":"dropAreaDragover","dragenter @dropArea":"dropAreaDragover","dragleave @dropArea":"dropAreaDragout","dragend @dropArea":"dropAreaDragout","drop @dropArea":"dropAreaDrop","click @dropArea":"dropAreaClick","change @fileInput":"fileInputChange","click @removeFile":"removeFileClick"},validationMessages:{imageTooSmall:"Image should be a minimum of {{minWidth}} px wide, and {{minHeight}} px tall"},errorMessages:[]},l={},u={},c={init:function(){c.getUploadType(),c.getInitialData(),c.updateState(),s.$e.on("drag dragstart dragover dragenter dragleave dragend drop",d.interceptDragEvents)},getInitialData:function(){var e;s.data=s.$e.data("initialData"),s.$e.removeAttr("data-initial-data"),s.data&&(s.data.image?"image":"file",e=s.data.image||s.data.file||[],e.length&&c.updateFiles(e,{silent:!0}))},getUploadType:function(){return s.uploadType=s.$e.data("uploadType")||s.uploadType,s.uploadType},setUploadType:function(e){s.uploadType=e,s.$e.data("uploadType",e),s.$e.attr("name",e),s.$e.trigger("uploadtypechange",e)},clearPreview:function(){l.previewContent.empty(),l.previewArea.hide(),l.dropLabel.show(),c.clearFileMeta(),c.showDropArea()},showPreview:function(){var e,t;(e=s.files[0]||!1)&&((e.isImage||"image"===s.uploadType)&&e.url?t=u.imagePreview({imageSrc:e.data||e.url}):(e.file||e.url)&&(t=u.filePreview({fileName:e.file?e.file.name:e.name})),t&&(l.previewContent.html(t),l.previewArea.show(),e.file&&c.showFileMeta(e),l.dropLabel.hide(),c.hideDropArea()))},clearFileMeta:function(){l.fileName.empty(),l.fileSize.empty()},showFileMeta:function(e){l.fileName.html(e.file.name),l.fileSize.html(c.getFileSize(e))},showDropArea:function(){l.dropArea.show()},hideDropArea:function(){l.dropArea.hide()},showFocalPoint:function(){"image"===c.getUploadType()?l.focalPoint.show():c.hideFocalPoint()},hideFocalPoint:function(){l.focalPoint.hide()},setProcessing:function(){s.$e.addClass(o.PROCESSING)},clearProcessing:function(){s.$e.removeClass(o.PROCESSING)},isMultiSelect:function(){return l.fileInput[0].hasAttribute("multiple")},handleFileDrop:function(e){var t,n,i,r,a;t=new FileReader,i=[],r=-1,a=c.isMultiSelect()?e.length:1,n=function(){var t,o;t={},r+=1,r<a?(o=e[r],c.acceptableFile(o)&&(t.file=o,i[r]=t,t.isImage=/image(?!.*(svg))/.test(t.file.type),"auto"===s.uploadType&&c.setUploadType(t.isImage?"image":"file"),t.isImage&&(t.url=URL.createObjectURL(t.file))),n()):(c.updateFiles(i),c.clearProcessing(),s.$e.trigger("change"))},t.onload=function(e){i[r].data=e.target.result,n()},n()},acceptableFile:function(e){return"auto"===s.uploadType||"file"===s.uploadType||"image"===s.uploadType&&/image/.test(e.type)},updateFiles:function(t,n){var i,r;n=n||{},r=c.getUploadType(),i=s.$e.data("filesProcessor"),e.isArray(t)||(t=[t]),i&&(t=i(t)),s.files=t,c.updateState(),"auto"===r&&1===s.files.length&&c.setUploadType(s.files[0].isImage?"image":"file"),n.silent||s.$e.trigger("filesupdated")},updateState:function(){var e;e=s.files.length>0,s.$e.toggleClass(o.FILLED,e),e?(c.showPreview(),c.showFocalPoint()):(c.clearPreview(),c.hideFocalPoint())},getVal:function(){return s.files},getFileSize:function(e){return e.isImage?c.getImageSize(e):c.getFileDataSize(e)},setVal:function(e,t){c.updateFiles(e,t)},getFileDataSize:function(e){var t,n,i,r,a,o;return t=e.file.size,n=t/1024,i=n/1024,r=i/1024,a=n,o="KB",n>1&&(a=i,o="MB"),r>1&&(a=r,o="GB"),(a=Math.round(100*a)/100)+" "+o},getImageSize:function(e){var t;return t=new Image,t.onload=function(){l.fileSize.html(this.width+" x "+this.height),s.imageMeta.width=this.width,s.imageMeta.height=this.height},t.src=e.url,e.file.size},validImageDimensions:function(){var e,t,n;return e=parseInt(s.$e.data("minHeight")||0,10),t=parseInt(s.$e.data("minWidth")||0,10),n=s.imageMeta.width<t||s.imageMeta.height<e,n&&s.errorMessages.push(c.buildErrorMsg("imageTooSmall",{minWidth:t,minHeight:e})),!n},removeFile:function(){l.fileInput.val(""),c.updateFiles([]),s.$e.trigger("change")},buildErrorMsg:function(t,n){var i=s.validationMessages[t];return e.each(n,function(e,t){var n=new RegExp("{{"+e+"}}","g");i=i.replace(n,t)}),i},isValid:function(){return!!s.files.length},validate:function(){s.errorMessages=[],!c.isValid()||"image"===s.uploadType&&!c.validImageDimensions()?(c.renderErrorMessages(),r.setInvalid()):r.setValid()},isBlank:function(){return!s.files.length},renderErrorMessages:function(){var t="";e.each(s.errorMessages,function(e,n){t+="<p>"+n+"</p>"}),l.validationMessage.html(t)},beforeDestroy:function(){s.$e.off("drag dragstart dragover dragenter dragleave dragend drop")}},d={internalElChange:function(){c.validate()},interceptDragEvents:function(e){e.preventDefault(),e.stopPropagation()},dropAreaDragover:function(){s.$e.addClass(o.DRAG_OVER)},dropAreaDragout:function(){s.$e.removeClass(o.DRAG_OVER)},dropAreaDrop:function(e){d.dropAreaDragout(),c.setProcessing(),c.handleFileDrop(e.originalEvent.dataTransfer.files)},dropAreaClick:function(){c.isBlank()&&l.fileInput.click()},fileInputChange:function(e){c.setProcessing(),c.handleFileDrop(e.target.files)},removeFileClick:function(){c.removeFile()}},h={getVal:c.getVal,setVal:c.setVal,isValid:c.isValid,isBlank:c.isBlank,hasImagePreview:c.hasImagePreview,getUploadType:c.getUploadType},t({self:r,o:a,m:o,internal:s,elements:l,templates:u,fn:c,handlers:d,api:h}).create()};return n.markup={DRAG_OVER:"state-drag-over",FILLED:"state-filled"},n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function e(){return at.apply(null,arguments)}function t(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(i(e,t))return;return 1}function a(e){return void 0===e}function o(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){for(var n=[],i=0;i<e.length;++i)n.push(t(e[i],i));return n}function u(e,t){for(var n in t)i(t,n)&&(e[n]=t[n]);return i(t,"toString")&&(e.toString=t.toString),i(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,i){return ve(e,t,n,i,!0).utc()}function d(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function h(e){if(null==e._isValid){var t=d(e),n=ot.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function p(e){var t=c(NaN);return null!=e?u(d(t),e):d(t).userInvalidated=!0,t}function f(e,t){var n,i,r;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=d(t)),a(t._locale)||(e._locale=t._locale),0<lt.length)for(n=0;n<lt.length;n++)a(r=t[i=lt[n]])||(e[i]=r);return e}function m(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===ut&&(ut=!0,e.updateOffset(this),ut=!1)}function g(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function v(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function y(t,n){var r=!0;return u(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),r){for(var a,o,s=[],l=0;l<arguments.length;l++){if(a="","object"==typeof arguments[l]){for(o in a+="\n["+l+"] ",arguments[0])i(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[l];s.push(a)}v(t+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function _(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),ct[t]||(v(n),ct[t]=!0)}function b(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var r,a=u({},e);for(r in t)i(t,r)&&(n(e[r])&&n(t[r])?(a[r]={},u(a[r],e[r]),u(a[r],t[r])):null!=t[r]?a[r]=t[r]:delete a[r]);for(r in e)i(e,r)&&!i(t,r)&&n(e[r])&&(a[r]=u({},a[r]));return a}function S(e){null!=e&&this.set(e)}function w(e,t,n){var i=""+Math.abs(e),r=t-i.length;return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function E(e,t,n,i){var r="string"==typeof i?function(){return this[i]()}:i;e&&(mt[e]=r),t&&(mt[t[0]]=function(){return w(r.apply(this,arguments),t[1],t[2])}),n&&(mt[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)})}function C(e,t){return e.isValid()?(t=k(t,e.localeData()),ft[t]=ft[t]||function(e){for(var t,n=e.match(ht),i=0,r=n.length;i<r;i++)mt[n[i]]?n[i]=mt[n[i]]:n[i]=(t=n[i]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(t){for(var i="",a=0;a<r;a++)i+=b(n[a])?n[a].call(t,e):n[a];return i}}(t),ft[t](e)):e.localeData().invalidDate()}function k(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(pt.lastIndex=0;0<=i&&pt.test(e);)e=e.replace(pt,n),pt.lastIndex=0,--i;return e}function x(e,t){var n=e.toLowerCase();gt[n]=gt[n+"s"]=gt[t]=e}function I(e){return"string"==typeof e?gt[e]||gt[e.toLowerCase()]:void 0}function D(e){var t,n,r={};for(n in e)i(e,n)&&(t=I(n))&&(r[t]=e[n]);return r}function A(e,t){vt[e]=t}function O(e){return e%4==0&&e%100!=0||e%400==0}function P(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function L(e){var t=+e,n=0;return 0!=t&&isFinite(t)&&(n=P(t)),n}function M(t,n){return function(i){return null!=i?(R(this,t,i),e.updateOffset(this,n),this):N(this,t)}}function N(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function R(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&O(e.year())&&1===e.month()&&29===e.date()?(n=L(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),V(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function F(e,t,n){dt[e]=b(t)?t:function(e,i){return e&&n?n:t}}function j(e,t){return i(dt,e)?dt[e](t._strict,t._locale):new RegExp(U(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})))}function U(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),o(t)&&(i=function(e,n){n[t]=L(e)}),n=0;n<e.length;n++)Nt[e[n]]=i}function H(e,t){B(e,function(e,n,i,r){i._w=i._w||{},t(e,i._w,i,r)})}function V(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1==i?O(e)?29:28:31-i%7%2}function q(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=L(t);else if(!o(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function $(t){return null!=t?(q(this,t),e.updateOffset(this,!0),this):N(this,"Month")}function W(){function e(e,t){return t.length-e.length}for(var t,n=[],i=[],r=[],a=0;a<12;a++)t=c([2e3,a]),n.push(this.monthsShort(t,"")),i.push(this.months(t,"")),r.push(this.months(t,"")),r.push(this.monthsShort(t,""));for(n.sort(e),i.sort(e),r.sort(e),a=0;a<12;a++)n[a]=U(n[a]),i[a]=U(i[a]);for(a=0;a<24;a++)r[a]=U(r[a]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function z(e){return O(e)?366:365}function Y(e){var t,n;return e<100&&0<=e?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function G(e,t,n){var i=7+t-n;return i-(7+Y(e,0,i).getUTCDay()-t)%7-1}function X(e,t,n,i,r){var a,o=1+7*(t-1)+(7+n-i)%7+G(e,i,r),s=o<=0?z(a=e-1)+o:o>z(e)?(a=e+1,o-z(e)):(a=e,o);return{year:a,dayOfYear:s}}function K(e,t,n){var i,r,a=G(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?i=o+Q(r=e.year()-1,t,n):o>Q(e.year(),t,n)?(i=o-Q(e.year(),t,n),r=e.year()+1):(r=e.year(),i=o),{week:i,year:r}}function Q(e,t,n){var i=G(e,t,n),r=G(e+1,t,n);return(z(e)-i+r)/7}function J(e,t){return e.slice(t,7).concat(e.slice(0,t))}function Z(){function e(e,t){return t.length-e.length}for(var t,n,i,r,a=[],o=[],s=[],l=[],u=0;u<7;u++)t=c([2e3,1]).day(u),n=U(this.weekdaysMin(t,"")),i=U(this.weekdaysShort(t,"")),r=U(this.weekdays(t,"")),a.push(n),o.push(i),s.push(r),l.push(n),l.push(i),l.push(r);a.sort(e),o.sort(e),s.sort(e),l.sort(e),this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function ee(){return this.hours()%12||12}function te(e,t){E(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ne(e,t){return t._meridiemParse}function ie(e){return e?e.toLowerCase().replace("_","-"):e}function re(e){for(var t,n,i,r,a=0;a<e.length;){for(t=(r=ie(e[a]).split("-")).length,n=(n=ie(e[a+1]))?n.split("-"):null;0<t;){if(i=ae(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i+=1)if(e[i]!==t[i])return i;return n
}(r,n)>=t-1)break;t--}a++}return rn}function ae(e){var t;if(void 0===sn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=rn._abbr,require("./locale/"+e),oe(t)}catch(t){sn[e]=null}return sn[e]}function oe(e,t){var n;return e&&((n=a(t)?le(e):se(e,t))?rn=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),rn._abbr}function se(e,t){if(null===t)return delete sn[e],null;var n,i=on;if(t.abbr=e,null!=sn[e])_("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=sn[e]._config;else if(null!=t.parentLocale)if(null!=sn[t.parentLocale])i=sn[t.parentLocale]._config;else{if(null==(n=ae(t.parentLocale)))return ln[t.parentLocale]||(ln[t.parentLocale]=[]),ln[t.parentLocale].push({name:e,config:t}),null;i=n._config}return sn[e]=new S(T(i,t)),ln[e]&&ln[e].forEach(function(e){se(e.name,e.config)}),oe(e),sn[e]}function le(e){var n;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return rn;if(!t(e)){if(n=ae(e))return n;e=[e]}return re(e)}function ue(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[Ft]<0||11<n[Ft]?Ft:n[jt]<1||n[jt]>V(n[Rt],n[Ft])?jt:n[Ut]<0||24<n[Ut]||24===n[Ut]&&(0!==n[Bt]||0!==n[Ht]||0!==n[Vt])?Ut:n[Bt]<0||59<n[Bt]?Bt:n[Ht]<0||59<n[Ht]?Ht:n[Vt]<0||999<n[Vt]?Vt:-1,d(e)._overflowDayOfYear&&(t<Rt||jt<t)&&(t=jt),d(e)._overflowWeeks&&-1===t&&(t=qt),d(e)._overflowWeekday&&-1===t&&(t=$t),d(e).overflow=t),e}function ce(e){var t,n,i,r,a,o,s=e._i,l=un.exec(s)||cn.exec(s);if(l){for(d(e).iso=!0,t=0,n=hn.length;t<n;t++)if(hn[t][1].exec(l[1])){r=hn[t][0],i=!1!==hn[t][2];break}if(null==r)return void(e._isValid=!1);if(l[3]){for(t=0,n=pn.length;t<n;t++)if(pn[t][1].exec(l[3])){a=(l[2]||" ")+pn[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(l[4]){if(!dn.exec(l[4]))return void(e._isValid=!1);o="Z"}e._f=r+(a||"")+(o||""),me(e)}else e._isValid=!1}function de(e,t,n,i,r,a){var o=[function(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}(e),zt.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(r,10)];return a&&o.push(parseInt(a,10)),o}function he(e){var t,n,i,r,a=mn.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(a){if(t=de(a[4],a[3],a[2],a[5],a[6],a[7]),n=a[1],i=t,r=e,n&&Jt.indexOf(n)!==new Date(i[0],i[1],i[2]).getDay()&&(d(r).weekdayMismatch=!0,!void(r._isValid=!1)))return;e._a=t,e._tzm=function(e,t,n){if(e)return gn[e];if(t)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(a[8],a[9],a[10]),e._d=Y.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),d(e).rfc2822=!0}else e._isValid=!1}function pe(e,t,n){return null!=e?e:null!=t?t:n}function fe(t){var n,i,r,a,o,s,l,u=[];if(!t._d){for(s=t,l=new Date(e.now()),r=s._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],t._w&&null==t._a[jt]&&null==t._a[Ft]&&function(e){var t,n,i,r,a,o,s,l,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,n=pe(t.GG,e._a[Rt],K(ye(),1,4).year),i=pe(t.W,1),((r=pe(t.E,1))<1||7<r)&&(l=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,u=K(ye(),a,o),n=pe(t.gg,e._a[Rt],u.year),i=pe(t.w,u.week),null!=t.d?((r=t.d)<0||6<r)&&(l=!0):null!=t.e?(r=t.e+a,(t.e<0||6<t.e)&&(l=!0)):r=a),i<1||i>Q(n,a,o)?d(e)._overflowWeeks=!0:null!=l?d(e)._overflowWeekday=!0:(s=X(n,i,r,a,o),e._a[Rt]=s.year,e._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=pe(t._a[Rt],r[Rt]),(t._dayOfYear>z(o)||0===t._dayOfYear)&&(d(t)._overflowDayOfYear=!0),i=Y(o,0,t._dayOfYear),t._a[Ft]=i.getUTCMonth(),t._a[jt]=i.getUTCDate()),n=0;n<3&&null==t._a[n];++n)t._a[n]=u[n]=r[n];for(;n<7;n++)t._a[n]=u[n]=null==t._a[n]?2===n?1:0:t._a[n];24===t._a[Ut]&&0===t._a[Bt]&&0===t._a[Ht]&&0===t._a[Vt]&&(t._nextDay=!0,t._a[Ut]=0),t._d=(t._useUTC?Y:function(e,t,n,i,r,a,o){var s;return e<100&&0<=e?(s=new Date(e+400,t,n,i,r,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,i,r,a,o),s}).apply(null,u),a=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ut]=24),t._w&&void 0!==t._w.d&&t._w.d!==a&&(d(t).weekdayMismatch=!0)}}function me(t){if(t._f!==e.ISO_8601)if(t._f!==e.RFC_2822){t._a=[],d(t).empty=!0;for(var n,r,a,o,s,l,u,c=""+t._i,h=c.length,p=0,f=k(t._f,t._locale).match(ht)||[],m=0;m<f.length;m++)r=f[m],(n=(c.match(j(r,t))||[])[0])&&(0<(a=c.substr(0,c.indexOf(n))).length&&d(t).unusedInput.push(a),c=c.slice(c.indexOf(n)+n.length),p+=n.length),mt[r]?(n?d(t).empty=!1:d(t).unusedTokens.push(r),s=r,u=t,null!=(l=n)&&i(Nt,s)&&Nt[s](l,u._a,u,s)):t._strict&&!n&&d(t).unusedTokens.push(r);d(t).charsLeftOver=h-p,0<c.length&&d(t).unusedInput.push(c),t._a[Ut]<=12&&!0===d(t).bigHour&&0<t._a[Ut]&&(d(t).bigHour=void 0),d(t).parsedDateParts=t._a.slice(0),d(t).meridiem=t._meridiem,t._a[Ut]=function(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):(null!=e.isPM&&((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0)),t)}(t._locale,t._a[Ut],t._meridiem),null!==(o=d(t).era)&&(t._a[Rt]=t._locale.erasConvertYear(o,t._a[Rt])),fe(t),ue(t)}else he(t);else ce(t)}function ge(i){var r,c,v=i._i,y=i._f;return i._locale=i._locale||le(i._l),null===v||void 0===y&&""===v?p({nullInput:!0}):("string"==typeof v&&(i._i=v=i._locale.preparse(v)),g(v)?new m(ue(v)):(s(v)?i._d=v:t(y)?function(e){var t,n,i,r,a,o,s=!1;if(0===e._f.length)return d(e).invalidFormat=!0,e._d=new Date(NaN);for(r=0;r<e._f.length;r++)a=0,o=!1,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[r],me(t),h(t)&&(o=!0),a+=d(t).charsLeftOver,a+=10*d(t).unusedTokens.length,d(t).score=a,s?a<i&&(i=a,n=t):(null==i||a<i||o)&&(i=a,n=t,o&&(s=!0));u(e,n||t)}(i):y?me(i):a(c=(r=i)._i)?r._d=new Date(e.now()):s(c)?r._d=new Date(c.valueOf()):"string"==typeof c?function(t){var n=fn.exec(t._i);null===n?(ce(t),!1===t._isValid&&(delete t._isValid,he(t),!1===t._isValid&&(delete t._isValid,t._strict?t._isValid=!1:e.createFromInputFallback(t)))):t._d=new Date(+n[1])}(r):t(c)?(r._a=l(c.slice(0),function(e){return parseInt(e,10)}),fe(r)):n(c)?function(e){var t,n;e._d||(n=void 0===(t=D(e._i)).day?t.date:t.day,e._a=l([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),fe(e))}(r):o(c)?r._d=new Date(c):e.createFromInputFallback(r),h(i)||(i._d=null),i))}function ve(e,i,a,o,s){var l,u={};return!0!==i&&!1!==i||(o=i,i=void 0),!0!==a&&!1!==a||(o=a,a=void 0),(n(e)&&r(e)||t(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=a,u._i=e,u._f=i,u._strict=o,(l=new m(ue(ge(u))))._nextDay&&(l.add(1,"d"),l._nextDay=void 0),l}function ye(e,t,n,i){return ve(e,t,n,i,!1)}function _e(e,n){var i,r;if(1===n.length&&t(n[0])&&(n=n[0]),!n.length)return ye();for(i=n[0],r=1;r<n.length;++r)n[r].isValid()&&!n[r][e](i)||(i=n[r]);return i}function be(e){var t=D(e),n=t.year||0,r=t.quarter||0,a=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,l=t.hour||0,u=t.minute||0,c=t.second||0,d=t.millisecond||0;this._isValid=function(e){var t,n,r=!1;for(t in e)if(i(e,t)&&(-1===Mt.call(_n,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<_n.length;++n)if(e[_n[n]]){if(r)return!1;parseFloat(e[_n[n]])!==L(e[_n[n]])&&(r=!0)}return!0}(t),this._milliseconds=+d+1e3*c+6e4*u+1e3*l*60*60,this._days=+s+7*o,this._months=+a+3*r+12*n,this._data={},this._locale=le(),this._bubble()}function Te(e){return e instanceof be}function Se(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function we(e,t){E(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+w(~~(e/60),2)+t+w(~~e%60,2)})}function Ee(e,t){var n,i,r=(t||"").match(e);return null===r?null:0===(i=60*(n=((r[r.length-1]||[])+"").match(bn)||["-",0,0])[1]+L(n[2]))?0:"+"===n[0]?i:-i}function Ce(t,n){var i,r;return n._isUTC?(i=n.clone(),r=(g(t)||s(t)?t.valueOf():ye(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+r),e.updateOffset(i,!1),i):ye(t).local()}function ke(e){return-Math.round(e._d.getTimezoneOffset())}function xe(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ie(e,t){var n,r,a,s=e,l=null;return Te(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:o(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(l=Tn.exec(e))?(n="-"===l[1]?-1:1,s={y:0,d:L(l[jt])*n,h:L(l[Ut])*n,m:L(l[Bt])*n,s:L(l[Ht])*n,ms:L(Se(1e3*l[Vt]))*n}):(l=Sn.exec(e))?(n="-"===l[1]?-1:1,s={y:De(l[2],n),M:De(l[3],n),w:De(l[4],n),d:De(l[5],n),h:De(l[6],n),m:De(l[7],n),s:De(l[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=function(e,t){var n;return e.isValid()&&t.isValid()?(t=Ce(t,e),e.isBefore(t)?n=Ae(e,t):((n=Ae(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(ye(s.from),ye(s.to)),(s={}).ms=a.milliseconds,s.M=a.months),r=new be(s),Te(e)&&i(e,"_locale")&&(r._locale=e._locale),Te(e)&&i(e,"_isValid")&&(r._isValid=e._isValid),r}function De(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Ae(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=t-e.clone().add(n.months,"M"),n}function Oe(e,t){return function(n,i){var r;return null===i||isNaN(+i)||(_(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),Pe(this,Ie(n,i),e),this}}function Pe(t,n,i,r){var a=n._milliseconds,o=Se(n._days),s=Se(n._months);t.isValid()&&(r=null==r||r,s&&q(t,N(t,"Month")+s*i),o&&R(t,"Date",N(t,"Date")+o*i),a&&t._d.setTime(t._d.valueOf()+a*i),r&&e.updateOffset(t,o||s))}function Le(e){return"string"==typeof e||e instanceof String}function Me(e){return g(e)||s(e)||Le(e)||o(e)||function(e){var n=t(e),i=!1;return n&&(i=0===e.filter(function(t){return!o(t)&&Le(e)}).length),n&&i}(e)||function(e){var t,a,o=n(e)&&!r(e),s=!1,l=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<l.length;t+=1)a=l[t],s=s||i(e,a);return o&&s}(e)||null==e}function Ne(e,t){if(e.date()<t.date())return-Ne(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(1+n,"months")-i)))||0}function Re(e){var t;return void 0===e?this._locale._abbr:(null!=(t=le(e))&&(this._locale=t),this)}function Fe(){return this._locale}function je(e,t){return(e%t+t)%t}function Ue(e,t,n){return e<100&&0<=e?new Date(e+400,t,n)-kn:new Date(e,t,n).valueOf()}function Be(e,t,n){return e<100&&0<=e?Date.UTC(e+400,t,n)-kn:Date.UTC(e,t,n)}function He(e,t){return t.erasAbbrRegex(e)}function Ve(){for(var e=[],t=[],n=[],i=[],r=this.eras(),a=0,o=r.length;a<o;++a)t.push(U(r[a].name)),e.push(U(r[a].abbr)),n.push(U(r[a].narrow)),i.push(U(r[a].name)),i.push(U(r[a].abbr)),i.push(U(r[a].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}function qe(e,t){E(0,[e,e.length],0,t)}function $e(e,t,n,i,r){var a;return null==e?K(this,i,r).year:((a=Q(e,i,r))<t&&(t=a),function(e,t,n,i,r){var a=X(e,t,n,i,r),o=Y(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,n,i,r))}function We(e,t){t[Vt]=L(1e3*("0."+e))}function ze(e){return e}function Ye(e,t,n,i){var r=le(),a=c().set(i,t);return r[n](a,e)}function Ge(e,t,n){if(o(e)&&(t=e,e=void 0),e=e||"",null!=t)return Ye(e,t,n,"month");for(var i=[],r=0;r<12;r++)i[r]=Ye(e,r,n,"month");return i}function Xe(e,t,n,i){"boolean"==typeof e?o(t)&&(n=t,t=void 0):(t=e,e=!1,o(n=t)&&(n=t,t=void 0)),t=t||"";var r,a=le(),s=e?a._week.dow:0,l=[];if(null!=n)return Ye(t,(n+s)%7,i,"day");for(r=0;r<7;r++)l[r]=Ye(t,(r+s)%7,i,"day");return l}function Ke(e,t,n,i){var r=Ie(t,n);return e._milliseconds+=i*r._milliseconds,e._days+=i*r._days,e._months+=i*r._months,e._bubble()}function Qe(e){return e<0?Math.floor(e):Math.ceil(e)}function Je(e){return 4800*e/146097}function Ze(e){return 146097*e/4800}function et(e){return function(){return this.as(e)}}function tt(e){return function(){return this.isValid()?this._data[e]:NaN}}function nt(e,t,n,i){var r=Ie(e).abs(),a=Qn(r.as("s")),o=Qn(r.as("m")),s=Qn(r.as("h")),l=Qn(r.as("d")),u=Qn(r.as("M")),c=Qn(r.as("w")),d=Qn(r.as("y")),h=(a<=n.ss?["s",a]:a<n.s&&["ss",a])||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return null!=n.w&&(h=h||c<=1&&["w"]||c<n.w&&["ww",c]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=0<+e,h[4]=i,function(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}.apply(null,h)}function it(e){return(0<e)-(e<0)||+e}function rt(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,i,r,a,o,s,l=Zn(this._milliseconds)/1e3,u=Zn(this._days),c=Zn(this._months),d=this.asSeconds();return d?(e=P(l/60),t=P(e/60),l%=60,e%=60,n=P(c/12),c%=12,i=l?l.toFixed(3).replace(/\.?0+$/,""):"",r=d<0?"-":"",a=it(this._months)!==it(d)?"-":"",o=it(this._days)!==it(d)?"-":"",s=it(this._milliseconds)!==it(d)?"-":"",r+"P"+(n?a+n+"Y":"")+(c?a+c+"M":"")+(u?o+u+"D":"")+(t||e||l?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(l?s+i+"S":"")):"P0D"}var at,ot;ot=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var st,lt=e.momentProperties=[],ut=!1,ct={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null,st=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)i(e,t)&&n.push(t);return n};var dt,ht=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ft={},mt={},gt={},vt={},yt=/\d/,_t=/\d\d/,bt=/\d{3}/,Tt=/\d{4}/,St=/[+-]?\d{6}/,wt=/\d\d?/,Et=/\d\d\d\d?/,Ct=/\d\d\d\d\d\d?/,kt=/\d{1,3}/,xt=/\d{1,4}/,It=/[+-]?\d{1,6}/,Dt=/\d+/,At=/[+-]?\d+/,Ot=/Z|[+-]\d\d:?\d\d/gi,Pt=/Z|[+-]\d\d(?::?\d\d)?/gi,Lt=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;dt={};var Mt,Nt={},Rt=0,Ft=1,jt=2,Ut=3,Bt=4,Ht=5,Vt=6,qt=7,$t=8;Mt=Array.prototype.indexOf?Array.prototype.indexOf:function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},E("M",["MM",2],"Mo",function(){return this.month()+1}),E("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),E("MMMM",0,0,function(e){return this.localeData().months(this,e)}),x("month","M"),A("month",8),F("M",wt),F("MM",wt,_t),F("MMM",function(e,t){return t.monthsShortRegex(e)}),F("MMMM",function(e,t){return t.monthsRegex(e)}),B(["M","MM"],function(e,t){t[Ft]=L(e)-1}),B(["MMM","MMMM"],function(e,t,n,i){var r=n._locale.monthsParse(e,i,n._strict);null!=r?t[Ft]=r:d(n).invalidMonth=e});var Wt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),zt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Yt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gt=Lt,Xt=Lt;E("Y",0,0,function(){var e=this.year();return e<=9999?w(e,4):"+"+e}),E(0,["YY",2],0,function(){return this.year()%100}),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),x("year","y"),A("year",1),F("Y",At),F("YY",wt,_t),F("YYYY",xt,Tt),F("YYYYY",It,St),F("YYYYYY",It,St),B(["YYYYY","YYYYYY"],Rt),B("YYYY",function(t,n){n[Rt]=2===t.length?e.parseTwoDigitYear(t):L(t)}),B("YY",function(t,n){n[Rt]=e.parseTwoDigitYear(t)}),B("Y",function(e,t){t[Rt]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return L(e)+(68<L(e)?1900:2e3)};var Kt=M("FullYear",!0);E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),x("week","w"),x("isoWeek","W"),A("week",5),A("isoWeek",5),F("w",wt),F("ww",wt,_t),F("W",wt),F("WW",wt,_t),H(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=L(e)}),E("d",0,"do","day"),E("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),E("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),E("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),x("day","d"),x("weekday","e"),x("isoWeekday","E"),A("day",11),A("weekday",11),A("isoWeekday",11),F("d",wt),F("e",wt),F("E",wt),F("dd",function(e,t){return t.weekdaysMinRegex(e)}),F("ddd",function(e,t){return t.weekdaysShortRegex(e)}),F("dddd",function(e,t){return t.weekdaysRegex(e)}),H(["dd","ddd","dddd"],function(e,t,n,i){var r=n._locale.weekdaysParse(e,i,n._strict);null!=r?t.d=r:d(n).invalidWeekday=e}),H(["d","e","E"],function(e,t,n,i){t[i]=L(e)});var Qt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Jt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),en=Lt,tn=Lt,nn=Lt;E("H",["HH",2],0,"hour"),E("h",["hh",2],0,ee),E("k",["kk",2],0,function(){return this.hours()||24}),E("hmm",0,0,function(){return""+ee.apply(this)+w(this.minutes(),2)}),E("hmmss",0,0,function(){return""+ee.apply(this)+w(this.minutes(),2)+w(this.seconds(),2)}),E("Hmm",0,0,function(){return""+this.hours()+w(this.minutes(),2)}),E("Hmmss",0,0,function(){return""+this.hours()+w(this.minutes(),2)+w(this.seconds(),2)}),te("a",!0),te("A",!1),x("hour","h"),A("hour",13),F("a",ne),F("A",ne),F("H",wt),F("h",wt),F("k",wt),F("HH",wt,_t),F("hh",wt,_t),F("kk",wt,_t),F("hmm",Et),F("hmmss",Ct),F("Hmm",Et),F("Hmmss",Ct),B(["H","HH"],Ut),B(["k","kk"],function(e,t,n){var i=L(e);t[Ut]=24===i?0:i}),B(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),B(["h","hh"],function(e,t,n){t[Ut]=L(e),d(n).bigHour=!0}),B("hmm",function(e,t,n){var i=e.length-2;t[Ut]=L(e.substr(0,i)),t[Bt]=L(e.substr(i)),d(n).bigHour=!0}),B("hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Ut]=L(e.substr(0,i)),t[Bt]=L(e.substr(i,2)),t[Ht]=L(e.substr(r)),d(n).bigHour=!0}),B("Hmm",function(e,t,n){var i=e.length-2;t[Ut]=L(e.substr(0,i)),t[Bt]=L(e.substr(i))}),B("Hmmss",function(e,t,n){var i=e.length-4,r=e.length-2;t[Ut]=L(e.substr(0,i)),t[Bt]=L(e.substr(i,2)),t[Ht]=L(e.substr(r))});var rn,an=M("Hours",!0),on={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Wt,monthsShort:zt,week:{dow:0,doy:6},weekdays:Qt,weekdaysMin:Zt,weekdaysShort:Jt,meridiemParse:/[ap]\.?m?\.?/i},sn={},ln={},un=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,dn=/Z|[+-]\d\d(?::?\d\d)?/,hn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],pn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],fn=/^\/?Date\((-?\d+)/i,mn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,gn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};e.createFromInputFallback=y("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var vn=y("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:p()}),yn=y("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ye.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:p()}),_n=["year","quarter","month","week","day","hour","minute","second","millisecond"];we("Z",":"),we("ZZ",""),F("Z",Pt),F("ZZ",Pt),B(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ee(Pt,e)});var bn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Tn=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sn=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Ie.fn=be.prototype,Ie.invalid=function(){return Ie(NaN)};var wn=Oe(1,"add"),En=Oe(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Cn=y("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)}),kn=126227808e5;E("N",0,0,"eraAbbr"),E("NN",0,0,"eraAbbr"),E("NNN",0,0,"eraAbbr"),E("NNNN",0,0,"eraName"),E("NNNNN",0,0,"eraNarrow"),E("y",["y",1],"yo","eraYear"),E("y",["yy",2],0,"eraYear"),E("y",["yyy",3],0,"eraYear"),E("y",["yyyy",4],0,"eraYear"),F("N",He),F("NN",He),F("NNN",He),F("NNNN",function(e,t){return t.erasNameRegex(e)}),F("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),B(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,i){var r=n._locale.erasParse(e,i,n._strict);r?d(n).era=r:d(n).invalidEra=e}),F("y",Dt),F("yy",Dt),F("yyy",Dt),F("yyyy",Dt),F("yo",function(e,t){return t._eraYearOrdinalRegex||Dt}),B(["y","yy","yyy","yyyy"],Rt),B(["yo"],function(e,t,n,i){var r;n._locale._eraYearOrdinalRegex&&(r=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Rt]=n._locale.eraYearOrdinalParse(e,r):t[Rt]=parseInt(e,10)}),E(0,["gg",2],0,function(){return this.weekYear()%100}),E(0,["GG",2],0,function(){return this.isoWeekYear()%100}),qe("gggg","weekYear"),qe("ggggg","weekYear"),qe("GGGG","isoWeekYear"),qe("GGGGG","isoWeekYear"),x("weekYear","gg"),x("isoWeekYear","GG"),A("weekYear",1),A("isoWeekYear",1),F("G",At),F("g",At),F("GG",wt,_t),F("gg",wt,_t),F("GGGG",xt,Tt),F("gggg",xt,Tt),F("GGGGG",It,St),F("ggggg",It,St),H(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=L(e)}),H(["gg","GG"],function(t,n,i,r){n[r]=e.parseTwoDigitYear(t)}),E("Q",0,"Qo","quarter"),x("quarter","Q"),A("quarter",7),F("Q",yt),B("Q",function(e,t){t[Ft]=3*(L(e)-1)}),E("D",["DD",2],"Do","date"),x("date","D"),A("date",9),F("D",wt),F("DD",wt,_t),F("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),B(["D","DD"],jt),B("Do",function(e,t){t[jt]=L(e.match(wt)[0])});var xn=M("Date",!0);E("DDD",["DDDD",3],"DDDo","dayOfYear"),x("dayOfYear","DDD"),A("dayOfYear",4),F("DDD",kt),F("DDDD",bt),B(["DDD","DDDD"],function(e,t,n){n._dayOfYear=L(e)}),E("m",["mm",2],0,"minute"),x("minute","m"),A("minute",14),F("m",wt),F("mm",wt,_t),B(["m","mm"],Bt);var In=M("Minutes",!1);E("s",["ss",2],0,"second"),x("second","s"),A("second",15),F("s",wt),F("ss",wt,_t),B(["s","ss"],Ht);var Dn,An,On=M("Seconds",!1);for(E("S",0,0,function(){return~~(this.millisecond()/100)}),E(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,function(){return 10*this.millisecond()}),E(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),E(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),E(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),E(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),E(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),x("millisecond","ms"),A("millisecond",16),F("S",kt,yt),F("SS",kt,_t),F("SSS",kt,bt),Dn="SSSS";Dn.length<=9;Dn+="S")F(Dn,Dt);for(Dn="S";Dn.length<=9;Dn+="S")B(Dn,We);An=M("Milliseconds",!1),E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var Pn=m.prototype;Pn.add=wn,Pn.calendar=function(t,a){1===arguments.length&&(arguments[0]?Me(arguments[0])?(t=arguments[0],a=void 0):function(e){for(var t=n(e)&&!r(e),a=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s=0;s<o.length;s+=1)a=a||i(e,o[s]);return t&&a}(arguments[0])&&(a=arguments[0],t=void 0):a=t=void 0);var o=t||ye(),s=Ce(o,this).startOf("day"),l=e.calendarFormat(this,s)||"sameElse",u=a&&(b(a[l])?a[l].call(this,o):a[l]);return this.format(u||this.localeData().calendar(l,this,ye(o)))},Pn.clone=function(){return new m(this)},Pn.diff=function(e,t,n){var i,r,a;if(!this.isValid())return NaN;if(!(i=Ce(e,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),t=I(t)){case"year":a=Ne(this,i)/12;break;case"month":a=Ne(this,i);break;case"quarter":a=Ne(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-r)/864e5;break;case"week":a=(this-i-r)/6048e5;break;default:a=this-i}return n?a:P(a)},Pn.endOf=function(t){var n,i;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?Be:Ue,t){case"year":n=i(this.year()+1,0,1)-1;break;case"quarter":n=i(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":n=i(this.year(),this.month()+1,1)-1;break;case"week":n=i(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":n=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":n=i(this.year(),this.month(),this.date()+1)-1;break;case"hour":n=this._d.valueOf(),n+=36e5-je(n+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":n=this._d.valueOf(),n+=6e4-je(n,6e4)-1;break;case"second":n=this._d.valueOf(),n+=1e3-je(n,1e3)-1}return this._d.setTime(n),e.updateOffset(this,!0),this},Pn.format=function(t){t=t||(this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=C(this,t);return this.localeData().postformat(n)},Pn.from=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||ye(e).isValid())?Ie({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Pn.fromNow=function(e){return this.from(ye(),e)},Pn.to=function(e,t){return this.isValid()&&(g(e)&&e.isValid()||ye(e).isValid())?Ie({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},Pn.toNow=function(e){return this.to(ye(),e)},Pn.get=function(e){return b(this[e=I(e)])?this[e]():this},Pn.invalidAt=function(){return d(this).overflow},Pn.isAfter=function(e,t){var n=g(e)?e:ye(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},Pn.isBefore=function(e,t){var n=g(e)?e:ye(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},Pn.isBetween=function(e,t,n,i){var r=g(e)?e:ye(e),a=g(t)?t:ye(t);return!!(this.isValid()&&r.isValid()&&a.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(a,n):!this.isAfter(a,n))},Pn.isSame=function(e,t){var n,i=g(e)?e:ye(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=I(t)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},Pn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},Pn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},Pn.isValid=function(){return h(this)},Pn.lang=Cn,Pn.locale=Re,Pn.localeData=Fe,Pn.max=yn,Pn.min=vn,Pn.parsingFlags=function(){return u({},d(this))},Pn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t,n=[];for(t in e)i(e,t)&&n.push({unit:t,priority:vt[t]});return n.sort(function(e,t){return e.priority-t.priority}),n}(e=D(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(b(this[e=I(e)]))return this[e](t);return this},Pn.startOf=function(t){var n,i;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;switch(i=this._isUTC?Be:Ue,t){case"year":n=i(this.year(),0,1);break;case"quarter":n=i(this.year(),this.month()-this.month()%3,1);break;case"month":n=i(this.year(),this.month(),1);break;case"week":n=i(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":n=i(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":n=i(this.year(),this.month(),this.date());break;case"hour":n=this._d.valueOf(),n-=je(n+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":n=this._d.valueOf(),n-=je(n,6e4);break;case"second":n=this._d.valueOf(),n-=je(n,1e3)}return this._d.setTime(n),e.updateOffset(this,!0),this},Pn.subtract=En,Pn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},Pn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},Pn.toDate=function(){return new Date(this.valueOf())},Pn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||9999<n.year()?C(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):b(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",C(n,"Z")):C(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},Pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,i="moment",r="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",r="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n=r+'[")]',this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+n)},"undefined"!=typeof Symbol&&null!=Symbol.for&&(Pn[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),Pn.toJSON=function(){return this.isValid()?this.toISOString():null},Pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Pn.unix=function(){return Math.floor(this.valueOf()/1e3)},Pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Pn.eraName=function(){for(var e,t=this.localeData().eras(),n=0,i=t.length;n<i;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].name;if(t[n].until<=e&&e<=t[n].since)return t[n].name}return""},Pn.eraNarrow=function(){for(var e,t=this.localeData().eras(),n=0,i=t.length;n<i;++n){if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].narrow;if(t[n].until<=e&&e<=t[n].since)return t[n].narrow}return""},Pn.eraAbbr=function(){for(var e,t=this.localeData().eras(),n=0,i=t.length;n<i;++n){
if(e=this.clone().startOf("day").valueOf(),t[n].since<=e&&e<=t[n].until)return t[n].abbr;if(t[n].until<=e&&e<=t[n].since)return t[n].abbr}return""},Pn.eraYear=function(){for(var t,n,i=this.localeData().eras(),r=0,a=i.length;r<a;++r)if(t=i[r].since<=i[r].until?1:-1,n=this.clone().startOf("day").valueOf(),i[r].since<=n&&n<=i[r].until||i[r].until<=n&&n<=i[r].since)return(this.year()-e(i[r].since).year())*t+i[r].offset;return this.year()},Pn.year=Kt,Pn.isLeapYear=function(){return O(this.year())},Pn.weekYear=function(e){return $e.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Pn.isoWeekYear=function(e){return $e.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},Pn.quarter=Pn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},Pn.month=$,Pn.daysInMonth=function(){return V(this.year(),this.month())},Pn.week=Pn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},Pn.isoWeek=Pn.isoWeeks=function(e){var t=K(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},Pn.weeksInYear=function(){var e=this.localeData()._week;return Q(this.year(),e.dow,e.doy)},Pn.weeksInWeekYear=function(){var e=this.localeData()._week;return Q(this.weekYear(),e.dow,e.doy)},Pn.isoWeeksInYear=function(){return Q(this.year(),1,4)},Pn.isoWeeksInISOWeekYear=function(){return Q(this.isoWeekYear(),1,4)},Pn.date=xn,Pn.day=Pn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-i,"d")):i},Pn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},Pn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,n,i=(t=e,n=this.localeData(),"string"==typeof t?n.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?i:i-7)},Pn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},Pn.hour=Pn.hours=an,Pn.minute=Pn.minutes=In,Pn.second=Pn.seconds=On,Pn.millisecond=Pn.milliseconds=An,Pn.utcOffset=function(t,n,i){var r,a=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?a:ke(this);if("string"==typeof t){if(null===(t=Ee(Pt,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&n&&(r=ke(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),a!==t&&(!n||this._changeInProgress?Pe(this,Ie(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this},Pn.utc=function(e){return this.utcOffset(0,e)},Pn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ke(this),"m")),this},Pn.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=Ee(Ot,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},Pn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?ye(e).utcOffset():0,(this.utcOffset()-e)%60==0)},Pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},Pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Pn.isUtc=xe,Pn.isUTC=xe,Pn.zoneAbbr=function(){return this._isUTC?"UTC":""},Pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Pn.dates=y("dates accessor is deprecated. Use date instead.",xn),Pn.months=y("months accessor is deprecated. Use month instead",$),Pn.years=y("years accessor is deprecated. Use year instead",Kt),Pn.zone=y("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),Pn.isDSTShifted=y("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e,t={};return f(t,this),(t=ge(t))._a?(e=(t._isUTC?c:ye)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t,n){for(var i=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),a=0,o=0;o<i;o++)L(e[o])!==L(t[o])&&a++;return a+r}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});var Ln=S.prototype;Ln.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return b(i)?i.call(t,n):i},Ln.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(ht).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},Ln.invalidDate=function(){return this._invalidDate},Ln.ordinal=function(e){return this._ordinal.replace("%d",e)},Ln.preparse=ze,Ln.postformat=ze,Ln.relativeTime=function(e,t,n,i){var r=this._relativeTime[n];return b(r)?r(e,t,n,i):r.replace(/%d/i,e)},Ln.pastFuture=function(e,t){var n=this._relativeTime[0<e?"future":"past"];return b(n)?n(t):n.replace(/%s/i,t)},Ln.set=function(e){var t,n;for(n in e)i(e,n)&&(b(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},Ln.eras=function(t,n){for(var i,r=this._eras||le("en")._eras,a=0,o=r.length;a<o;++a){switch(typeof r[a].since){case"string":i=e(r[a].since).startOf("day"),r[a].since=i.valueOf()}switch(typeof r[a].until){case"undefined":r[a].until=1/0;break;case"string":i=e(r[a].until).startOf("day").valueOf(),r[a].until=i.valueOf()}}return r},Ln.erasParse=function(e,t,n){var i,r,a,o,s,l=this.eras();for(e=e.toUpperCase(),i=0,r=l.length;i<r;++i)if(a=l[i].name.toUpperCase(),o=l[i].abbr.toUpperCase(),s=l[i].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return l[i];break;case"NNNN":if(a===e)return l[i];break;case"NNNNN":if(s===e)return l[i]}else if(0<=[a,o,s].indexOf(e))return l[i]},Ln.erasConvertYear=function(t,n){var i=t.since<=t.until?1:-1;return void 0===n?e(t.since).year():e(t.since).year()+(n-t.offset)*i},Ln.erasAbbrRegex=function(e){return i(this,"_erasAbbrRegex")||Ve.call(this),e?this._erasAbbrRegex:this._erasRegex},Ln.erasNameRegex=function(e){return i(this,"_erasNameRegex")||Ve.call(this),e?this._erasNameRegex:this._erasRegex},Ln.erasNarrowRegex=function(e){return i(this,"_erasNarrowRegex")||Ve.call(this),e?this._erasNarrowRegex:this._erasRegex},Ln.months=function(e,n){return e?t(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Yt).test(n)?"format":"standalone"][e.month()]:t(this._months)?this._months:this._months.standalone},Ln.monthsShort=function(e,n){return e?t(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Yt.test(n)?"format":"standalone"][e.month()]:t(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},Ln.monthsParse=function(e,t,n){var i,r,a;if(this._monthsParseExact)return function(e,t,n){var i,r,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=c([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(r=Mt.call(this._shortMonthsParse,o))?r:null:-1!==(r=Mt.call(this._longMonthsParse,o))?r:null:"MMM"===t?-1!==(r=Mt.call(this._shortMonthsParse,o))||-1!==(r=Mt.call(this._longMonthsParse,o))?r:null:-1!==(r=Mt.call(this._longMonthsParse,o))||-1!==(r=Mt.call(this._shortMonthsParse,o))?r:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=c([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},Ln.monthsRegex=function(e){return this._monthsParseExact?(i(this,"_monthsRegex")||W.call(this),e?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=Xt),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},Ln.monthsShortRegex=function(e){return this._monthsParseExact?(i(this,"_monthsRegex")||W.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=Gt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},Ln.week=function(e){return K(e,this._week.dow,this._week.doy).week},Ln.firstDayOfYear=function(){return this._week.doy},Ln.firstDayOfWeek=function(){return this._week.dow},Ln.weekdays=function(e,n){var i=t(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(n)?"format":"standalone"];return!0===e?J(i,this._week.dow):e?i[e.day()]:i},Ln.weekdaysMin=function(e){return!0===e?J(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},Ln.weekdaysShort=function(e){return!0===e?J(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},Ln.weekdaysParse=function(e,t,n){var i,r,a;if(this._weekdaysParseExact)return function(e,t,n){var i,r,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=c([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(r=Mt.call(this._weekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Mt.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=Mt.call(this._minWeekdaysParse,o))?r:null:"dddd"===t?-1!==(r=Mt.call(this._weekdaysParse,o))||-1!==(r=Mt.call(this._shortWeekdaysParse,o))||-1!==(r=Mt.call(this._minWeekdaysParse,o))?r:null:"ddd"===t?-1!==(r=Mt.call(this._shortWeekdaysParse,o))||-1!==(r=Mt.call(this._weekdaysParse,o))||-1!==(r=Mt.call(this._minWeekdaysParse,o))?r:null:-1!==(r=Mt.call(this._minWeekdaysParse,o))||-1!==(r=Mt.call(this._weekdaysParse,o))||-1!==(r=Mt.call(this._shortWeekdaysParse,o))?r:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=c([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},Ln.weekdaysRegex=function(e){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Z.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=en),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},Ln.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Z.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=tn),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ln.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Z.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=nn),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ln.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},Ln.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},oe("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===L(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),e.lang=y("moment.lang is deprecated. Use moment.locale instead.",oe),e.langData=y("moment.langData is deprecated. Use moment.localeData instead.",le);var Mn=Math.abs,Nn=et("ms"),Rn=et("s"),Fn=et("m"),jn=et("h"),Un=et("d"),Bn=et("w"),Hn=et("M"),Vn=et("Q"),qn=et("y"),$n=tt("milliseconds"),Wn=tt("seconds"),zn=tt("minutes"),Yn=tt("hours"),Gn=tt("days"),Xn=tt("months"),Kn=tt("years"),Qn=Math.round,Jn={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},Zn=Math.abs,ei=be.prototype;return ei.isValid=function(){return this._isValid},ei.abs=function(){var e=this._data;return this._milliseconds=Mn(this._milliseconds),this._days=Mn(this._days),this._months=Mn(this._months),e.milliseconds=Mn(e.milliseconds),e.seconds=Mn(e.seconds),e.minutes=Mn(e.minutes),e.hours=Mn(e.hours),e.months=Mn(e.months),e.years=Mn(e.years),this},ei.add=function(e,t){return Ke(this,e,t,1)},ei.subtract=function(e,t){return Ke(this,e,t,-1)},ei.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=I(e))||"quarter"===e||"year"===e)switch(t=this._days+i/864e5,n=this._months+Je(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ze(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},ei.asMilliseconds=Nn,ei.asSeconds=Rn,ei.asMinutes=Fn,ei.asHours=jn,ei.asDays=Un,ei.asWeeks=Bn,ei.asMonths=Hn,ei.asQuarters=Vn,ei.asYears=qn,ei.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*L(this._months/12):NaN},ei._bubble=function(){var e,t,n,i,r,a=this._milliseconds,o=this._days,s=this._months,l=this._data;return 0<=a&&0<=o&&0<=s||a<=0&&o<=0&&s<=0||(a+=864e5*Qe(Ze(s)+o),s=o=0),l.milliseconds=a%1e3,e=P(a/1e3),l.seconds=e%60,t=P(e/60),l.minutes=t%60,n=P(t/60),l.hours=n%24,o+=P(n/24),s+=r=P(Je(o)),o-=Qe(Ze(r)),i=P(s/12),s%=12,l.days=o,l.months=s,l.years=i,this},ei.clone=function(){return Ie(this)},ei.get=function(e){return e=I(e),this.isValid()?this[e+"s"]():NaN},ei.milliseconds=$n,ei.seconds=Wn,ei.minutes=zn,ei.hours=Yn,ei.days=Gn,ei.weeks=function(){return P(this.days()/7)},ei.months=Xn,ei.years=Kn,ei.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,i,r=!1,a=Jn;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(r=e),"object"==typeof t&&(a=Object.assign({},Jn,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),n=this.localeData(),i=nt(this,!r,a,n),r&&(i=n.pastFuture(+this,i)),n.postformat(i)},ei.toISOString=rt,ei.toString=rt,ei.toJSON=rt,ei.locale=Re,ei.localeData=Fe,ei.toIsoString=y("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",rt),ei.lang=Cn,E("X",0,0,"unix"),E("x",0,0,"valueOf"),F("x",At),F("X",/[+-]?\d+(\.\d{1,3})?/),B("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e))}),B("x",function(e,t,n){n._d=new Date(L(e))}),e.version="2.29.1",at=ye,e.fn=Pn,e.min=function(){return _e("isBefore",[].slice.call(arguments,0))},e.max=function(){return _e("isAfter",[].slice.call(arguments,0))},e.now=function(){return Date.now?Date.now():+new Date},e.utc=c,e.unix=function(e){return ye(1e3*e)},e.months=function(e,t){return Ge(e,t,"months")},e.isDate=s,e.locale=oe,e.invalid=p,e.duration=Ie,e.isMoment=g,e.weekdays=function(e,t,n){return Xe(e,t,n,"weekdays")},e.parseZone=function(){return ye.apply(null,arguments).parseZone()},e.localeData=le,e.isDuration=Te,e.monthsShort=function(e,t){return Ge(e,t,"monthsShort")},e.weekdaysMin=function(e,t,n){return Xe(e,t,n,"weekdaysMin")},e.defineLocale=se,e.updateLocale=function(e,t){var n,i,r;return null!=t?(r=on,null!=sn[e]&&null!=sn[e].parentLocale?sn[e].set(T(sn[e]._config,t)):(null!=(i=ae(e))&&(r=i._config),t=T(r,t),null==i&&(t.abbr=e),(n=new S(t)).parentLocale=sn[e],sn[e]=n),oe(e)):null!=sn[e]&&(null!=sn[e].parentLocale?(sn[e]=sn[e].parentLocale,e===oe()&&oe(e)):null!=sn[e]&&delete sn[e]),sn[e]},e.locales=function(){return st(sn)},e.weekdaysShort=function(e,t,n){return Xe(e,t,n,"weekdaysShort")},e.normalizeUnits=I,e.relativeTimeRounding=function(e){return void 0===e?Qn:"function"==typeof e&&(Qn=e,!0)},e.relativeTimeThreshold=function(e,t){return void 0!==Jn[e]&&(void 0===t?Jn[e]:(Jn[e]=t,"s"===e&&(Jn.ss=t-1),!0))},e.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},e.prototype=Pn,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e}),function(e,t){"use strict";var n;if("object"==typeof exports){try{n=require("moment")}catch(e){}module.exports=t(n)}else"function"==typeof define&&define.amd?define("Pikaday",["require"],function(e){try{n=e("moment")}catch(e){}return t(n)}):e.Pikaday=t(e.moment)}(this,function(e){"use strict";var t="function"==typeof e,n=!!window.addEventListener,i=window.document,r=window.setTimeout,a=function(e,t,i,r){n?e.addEventListener(t,i,!!r):e.attachEvent("on"+t,i)},o=function(e,t,i,r){n?e.removeEventListener(t,i,!!r):e.detachEvent("on"+t,i)},s=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},l=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},u=function(e,t){l(e,t)||(e.className=""===e.className?t:e.className+" "+t)},c=function(e,t){e.className=s((" "+e.className+" ").replace(" "+t+" "," "))},d=function(e){return/Array/.test(Object.prototype.toString.call(e))},h=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},p=function(e){var t=e.getDay();return 0===t||6===t},f=function(e){return e%4==0&&e%100!=0||e%400==0},m=function(e,t){return[31,f(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},g=function(e){h(e)&&e.setHours(0,0,0,0)},v=function(e,t){return e.getTime()===t.getTime()},y=function(e,t,n){var i,r;for(i in t)r=void 0!==e[i],r&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?h(t[i])?n&&(e[i]=new Date(t[i].getTime())):d(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=y({},t[i],n):!n&&r||(e[i]=t[i]);return e},_=function(e,t,n){var r;i.createEvent?(r=i.createEvent("HTMLEvents"),r.initEvent(t,!0,!1),r=y(r,n),e.dispatchEvent(r)):i.createEventObject&&(r=i.createEventObject(),r=y(r,n),e.fireEvent("on"+t,r))},b=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},T={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},S=function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},w=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},E=function(e,t){e.setHours(0,0,0,0);var n=e.getDate(),i=e.getDay(),r=t,a=r-1,o=function(e){return(e+7-1)%7};e.setDate(n+a-o(i));var s=new Date(e.getFullYear(),0,r),l=(e.getTime()-s.getTime())/864e5;return 1+Math.round((l-a+o(s.getDay()))/7)},C=function(n,i,r,a){var o=new Date(r,i,n);return'<td class="pika-week">'+(t?e(o).isoWeek():E(o,a))+"</td>"},k=function(e,t,n,i){return'<tr class="pika-row'+(n?" pick-whole-week":"")+(i?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"},x=function(e){return"<tbody>"+e.join("")+"</tbody>"},I=function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+S(e,t)+'">'+S(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"},D=function(e,t,n,i,r,a){var o,s,l,u,c,h=e._o,p=n===h.minYear,f=n===h.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,v=!0;for(l=[],o=0;o<12;o++)l.push('<option value="'+(n===r?o-t:12+o-t)+'"'+(o===i?' selected="selected"':"")+(p&&o<h.minMonth||f&&o>h.maxMonth?' disabled="disabled"':"")+">"+h.i18n.months[o]+"</option>");for(u='<div class="pika-label">'+h.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",d(h.yearRange)?(o=h.yearRange[0],s=h.yearRange[1]+1):(o=n-h.yearRange,s=1+n+h.yearRange),l=[];o<s&&o<=h.maxYear;o++)o>=h.minYear&&l.push('<option value="'+o+'"'+(o===n?' selected="selected"':"")+">"+o+"</option>");return c='<div class="pika-label">'+n+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",h.showMonthAfterYear?m+=c+u:m+=u+c,p&&(0===i||h.minMonth>=i)&&(g=!1),f&&(11===i||h.maxMonth<=i)&&(v=!1),0===t&&(m+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),m+="</div>"},A=function(e,t,n){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+I(e)+x(t)+"</table>"},O=function(o){var s=this,u=s.config(o);s._onMouseDown=function(e){if(s._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(l(t,"is-disabled")||(!l(t,"pika-button")||l(t,"is-empty")||l(t.parentNode,"is-disabled")?l(t,"pika-prev")?s.prevMonth():l(t,"pika-next")&&s.nextMonth():(s.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),u.bound&&r(function(){s.hide(),u.blurFieldOnSelect&&u.field&&u.field.blur()},100))),l(t,"pika-select"))s._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},s._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(l(t,"pika-select-month")?s.gotoMonth(t.value):l(t,"pika-select-year")&&s.gotoYear(t.value))},s._onKeyChange=function(e){if(e=e||window.event,s.isVisible())switch(e.keyCode){case 13:case 27:u.field&&u.field.blur();break;case 37:s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7);break;case 8:case 46:s.setDate(null)}},s._parseFieldValue=function(){if(u.parse)return u.parse(u.field.value,u.format);if(t){var n=e(u.field.value,u.format,u.formatStrict);return n&&n.isValid()?n.toDate():null}return new Date(Date.parse(u.field.value))},s._onInputChange=function(e){var t;e.firedBy!==s&&(t=s._parseFieldValue(),h(t)&&s.setDate(t),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var e=i.activeElement;do{if(l(e,"pika-single"))return}while(e=e.parentNode);s._c||(s._b=r(function(){s.hide()},50)),s._c=!1},s._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,i=t;if(t){!n&&l(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",s._onChange)));do{if(l(i,"pika-single")||i===u.trigger)return}while(i=i.parentNode);s._v&&t!==u.trigger&&i!==u.trigger&&s.hide()}},s.el=i.createElement("div"),s.el.className="pika-single"+(u.isRTL?" is-rtl":"")+(u.theme?" "+u.theme:""),a(s.el,"mousedown",s._onMouseDown,!0),a(s.el,"touchend",s._onMouseDown,!0),a(s.el,"change",s._onChange),u.keyboardInput&&a(i,"keydown",s._onKeyChange),u.field&&(u.container?u.container.appendChild(s.el):u.bound?i.body.appendChild(s.el):u.field.parentNode.insertBefore(s.el,u.field.nextSibling),a(u.field,"change",s._onInputChange),u.defaultDate||(u.defaultDate=s._parseFieldValue(),u.setDefaultDate=!0));var c=u.defaultDate;h(c)?u.setDefaultDate?s.setDate(c,!0):s.gotoDate(c):s.gotoDate(new Date),u.bound?(this.hide(),s.el.className+=" is-bound",a(u.trigger,"click",s._onInputClick),a(u.trigger,"focus",s._onInputFocus),a(u.trigger,"blur",s._onInputBlur)):this.show()};return O.prototype={config:function(e){this._o||(this._o=y({},T,!0));var t=y(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=n>4?4:n,h(t.minDate)||(t.minDate=!1),h(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),d(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||T.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(n){return n=n||this._o.format,h(this._d)?this._o.toString?this._o.toString(this._d,n):t?e(this._d).format(n):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(n,i){t&&e.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return h(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",_(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),h(e)){var n=this._o.minDate,i=this._o.maxDate;h(n)&&e<n?e=n:h(i)&&e>i&&(e=i),this._d=new Date(e.getTime()),g(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),_(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(e){var t=!0;if(h(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=r<n.getTime()||i.getTime()<r}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,i=this.getDate()||new Date,r=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(i.valueOf()+r):"subtract"===e&&(n=new Date(i.valueOf()-r)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=b(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=b({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(g(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=T.minDate,this._o.minYear=T.minYear,this._o.minMonth=T.minMonth,this._o.startRange=T.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(g(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=T.maxDate,this._o.maxYear=T.maxYear,this._o.maxMonth=T.maxMonth,this._o.endRange=T.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,a=n.maxYear,o=n.minMonth,s=n.maxMonth,l="";this._y<=i&&(this._y=i,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=a&&(this._y=a,!isNaN(s)&&this._m>s&&(this._m=s));for(var u=0;u<n.numberOfMonths;u++)t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),l+='<div class="pika-lendar">'+D(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,t)+this.render(this.calendars[u].year,this.calendars[u].month,t)+"</div>";this.el.innerHTML=l,n.bound&&"hidden"!==n.field.type&&r(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var e,t,n,r,a,o,s,l,d,h,p,f;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,n=this.el.offsetWidth,r=this.el.offsetHeight,a=window.innerWidth||i.documentElement.clientWidth,o=window.innerHeight||i.documentElement.clientHeight,s=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,p=!0,f=!0,"function"==typeof e.getBoundingClientRect)h=e.getBoundingClientRect(),l=h.left+window.pageXOffset,d=h.bottom+window.pageYOffset;else for(l=t.offsetLeft,d=t.offsetTop+t.offsetHeight;t=t.offsetParent;)l+=t.offsetLeft,d+=t.offsetTop;(this._o.reposition&&l+n>a||this._o.position.indexOf("right")>-1&&l-n+e.offsetWidth>0)&&(l=l-n+e.offsetWidth,p=!1),(this._o.reposition&&d+r>o+s||this._o.position.indexOf("top")>-1&&d-r-e.offsetHeight>0)&&(d=d-r-e.offsetHeight,f=!1),this.el.style.left=l+"px",this.el.style.top=d+"px",u(this.el,p?"left-aligned":"right-aligned"),u(this.el,f?"bottom-aligned":"top-aligned"),c(this.el,p?"right-aligned":"left-aligned"),c(this.el,f?"top-aligned":"bottom-aligned")}},render:function(e,t,n){var i=this._o,r=new Date,a=m(e,t),o=new Date(e,t,1).getDay(),s=[],l=[];g(r),i.firstDay>0&&(o-=i.firstDay)<0&&(o+=7)
;for(var u=0===t?11:t-1,c=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,y=m(d,u),_=a+o,b=_;b>7;)b-=7;_+=7-b;for(var T=!1,S=0,E=0;S<_;S++){var x=new Date(e,t,S-o+1),I=!!h(this._d)&&v(x,this._d),D=v(x,r),O=-1!==i.events.indexOf(x.toDateString()),P=S<o||S>=a+o,L=S-o+1,M=t,N=e,R=i.startRange&&v(i.startRange,x),F=i.endRange&&v(i.endRange,x),j=i.startRange&&i.endRange&&i.startRange<x&&x<i.endRange,U=i.minDate&&x<i.minDate||i.maxDate&&x>i.maxDate||i.disableWeekends&&p(x)||i.disableDayFn&&i.disableDayFn(x);P&&(S<o?(L=y+L,M=u,N=d):(L-=a,M=c,N=f));var B={day:L,month:M,year:N,hasEvent:O,isSelected:I,isToday:D,isDisabled:U,isEmpty:P,isStartRange:R,isEndRange:F,isInRange:j,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&I&&(T=!0),l.push(w(B)),7==++E&&(i.showWeekNumber&&l.unshift(C(S-o,t,e,i.firstWeekOfYearMinDays)),s.push(k(l,i.isRTL,i.pickWholeWeek,T)),l=[],E=0,T=!1)}return A(i,s,n)},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),c(this.el,"is-hidden"),this._o.bound&&(a(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&o(i,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),u(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var e=this._o;this.hide(),o(this.el,"mousedown",this._onMouseDown,!0),o(this.el,"touchend",this._onMouseDown,!0),o(this.el,"change",this._onChange),e.keyboardInput&&o(i,"keydown",this._onKeyChange),e.field&&(o(e.field,"change",this._onInputChange),e.bound&&(o(e.trigger,"click",this._onInputClick),o(e.trigger,"focus",this._onInputFocus),o(e.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},O}),define("forms/fields/DatePicker",["jquery","moment","Pikaday","factories/fieldFactory"],function(e,t,n,i){"use strict";var r=function(a){var o,s,l,u,c,d,h,p,f;o=this,l=r.markup,s=e.extend({$e:null,selector:".date-picker"},a),u={name:"DatePicker",$e:s.$e||e(s.selector),explicitInit:!0,picker:null,format:"MM/DD/YYYY",initialVal:null,components:{nativeInput:{selector:".picker"},picker:{selector:".picker"}}},c={},d={},h={init:function(){h.getFormat(),h.initPicker(),h.getInitialVal()},getFormat:function(){u.format=c.picker.data("format")||u.format},initPicker:function(){u.picker=new n({field:c.picker[0],format:u.format,setDefaultDate:u.initialVal?t(u.initialVal).format(u.format):""})},getInitialVal:function(){u.initialVal=c.picker.val(),h.isBlank()||h.setDefaultVal(t(u.initialVal).format(u.format))},setDisplayDate:function(e){c.picker.val(e)},getVal:function(){var e=c.picker.val();return e?u.picker?u.picker.getMoment().format("YYYY-MM-DD"):e:""},getRawVal:function(){return u.picker?u.picker.getMoment().format():""},setVal:function(e,n){var i=e?t(e).format(u.format):"";n=n||{},u.picker?u.picker.setDate(i):c.picker.val(i),n.isDefault&&c.picker.trigger("change:default",i)}},p={},f={getVal:h.getVal,getRawVal:h.getRawVal,setVal:h.setVal},i({self:o,o:s,m:l,internal:u,elements:c,templates:d,fn:h,handlers:p,api:f}).create()};return r.markup={},r}),define("forms/fields/Time",["jquery","factories/fieldFactory","forms/widgets/DropMenu"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h,p;a=this,s=i.markup,o=e.extend({$e:null,selector:".time"},r),l={name:"Time",$e:o.$e||e(o.selector),explicitInit:!0,dropMenus:[],twelveTimeRegex:/^([0-9]|1[0-2]):[0-5][0-9](am|pm)$/,zuluTimeRegex:/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/,components:{nativeInput:{selector:".time-control"},timeDropMenu:{selector:".time-drop-menu"}},events:{"blur @nativeInput":"nativeInputBlur"}},u={},c={},d={init:function(){u.timeDropMenu.each(function(t,i){l.dropMenus.push(new n({$e:e(i),onSelect:function(e){d.setVal(e.data("value"))},selfToggle:!0}))})},setVal:function(e,t){t=t||{},u.nativeInput.val(d.convertTo12hTime(e)),u.nativeInput.trigger("change"),t.isDefault&&u.nativeInput.trigger("change:default",e)},getVal:function(){return a.isValid()?d.convertToISOTime(e.trim(u.nativeInput.val())):""},convertTo12hTime:function(e){var t,n,i,r;return e?l.twelveTimeRegex.test(e)?e:l.zuluTimeRegex.test(e)?(t=e.split(":"),n=parseInt(t[0]),i=t[1],n>=12?(n-=12,r="pm"):r="am",0===n&&(n=12),n+":"+i+r):void 0:""},convertToISOTime:function(e){var t,n,i;return e&&a.isValid()?(l.twelveTimeRegex.test(e)?t=e.replace(/am|pm/,"").split(":"):l.zuluTimeRegex.test(e)&&(t=e.split(":")),n=parseInt(t[0]),i=t[1],/pm/.test(e)&&12!==n?n+=12:/am/.test(e)&&12===n&&(n=0),n<10&&(n="0"+n),n+":"+i+":00"):""}},h={nativeInputBlur:function(){l.dropMenus.forEach(function(e){e.close()})}},p={setVal:d.setVal,getVal:d.getVal},t({self:a,o:o,m:s,internal:l,elements:u,templates:c,fn:d,handlers:h,api:p}).create()};return i.markup={},i}),define("forms/fields/HtmlField",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d,h;r=this,o=n.markup,a=e.extend({$e:null,selector:".html-field"},i),s={name:"HtmlField",$e:a.$e||e(a.selector),explicitInit:!0,withoutNativeInput:!0,components:{}},l={},u={},c={init:function(){},getName:function(){return s.$e.attr("name")},getVal:function(){return s.$e.html()},setVal:function(e,t){t=t||{},s.$e.html(e),t.isDefault&&s.$e.trigger("change:default",e)}},d={},h={getName:c.getName,getVal:c.getVal,setVal:c.setVal},t({self:r,o:a,m:o,internal:s,elements:l,templates:u,fn:c,handlers:d,api:h}).create()};return n.markup={},n}),define("forms/widgets/FocalPoint",["jquery","factories/fieldFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".focal-point"},i),s={name:"FocalPoint",$e:a.$e||e(a.selector),withoutNativeInput:!0,wrapperBounds:{},fieldset:{},tooltipTimeout:null,tooltipDelay:1e3,components:{focalPointControl:{selector:".focal-point-control"}},events:{mousedown:"mouseDown",mousemove:"mouseMove",mouseup:"mouseUp",mouseenter:"mouseEnter"}},l={},u={init:function(){s.fieldset=s.$e.data("fieldsetInstance"),s.fieldset.isReady()?u.setInitialFocalPoint():s.$e.one("initCustomFieldsComplete",u.setInitialFocalPoint)},setInitialFocalPoint:function(){var e;e=s.fieldset.getVals(["focus_x","focus_y"]),e.focus_x&&e.focus_y?u.hideTooltip():u.showTooltip(),e.focus_x=e.focus_x?parseFloat(e.focus_x):.5,e.focus_y=e.focus_y?parseFloat(e.focus_y):.5,s.fieldset.setVals(e,null,{silent:!0}),u.updateFocalPoint()},cacheWrapperBounds:function(){s.wrapperBounds=s.$e[0].getBoundingClientRect()},startFocalPointDrag:function(){s.focalPointDragging=!0},stopFocalPointDrag:function(){s.focalPointDragging=!1},setFocalPoint:function(e,t){var n,i;n=(e-s.wrapperBounds.left)/s.wrapperBounds.width,i=(t-s.wrapperBounds.top)/s.wrapperBounds.height,n=Math.max(0,Math.min(1,n)),i=Math.max(0,Math.min(1,i)),s.fieldset.setVals({focus_x:n,focus_y:i}),u.updateFocalPoint()},updateFocalPoint:function(){var e;e=s.fieldset.getVals(["focus_x","focus_y"]),l.focalPointControl.css({left:100*parseFloat(e.focus_x)+"%",top:100*parseFloat(e.focus_y)+"%"})},showTooltip:function(){if(!s.tooltipTimeout)return void(s.tooltipTimeout=setTimeout(function(){u.showTooltip()},s.tooltipDelay));l.focalPointControl.addClass(o.SHOW_TOOLTIP)},hideTooltip:function(){l.focalPointControl.removeClass(o.SHOW_TOOLTIP),clearTimeout(s.tooltipTimeout),s.tooltipTimeout=null}},c={mouseDown:function(e){u.cacheWrapperBounds(),u.startFocalPointDrag(),u.setFocalPoint(e.clientX,e.clientY),u.hideTooltip()},mouseMove:function(e){s.focalPointDragging&&(e.preventDefault(),u.setFocalPoint(e.clientX,e.clientY))},mouseUp:function(){u.stopFocalPointDrag()},mouseEnter:function(){u.showTooltip()}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={SHOW_TOOLTIP:"state-show-tooltip"},n}),define("managers/TagSearchManager",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d,h;r=this,o=n.markup,a=e.extend({$e:null,selector:".autocomplate.variant-tag-search-input",autocomplete:null},i),s={name:"TagSearchManager",$e:a.$e||e(a.selector),defaultTags:[],currentTagIndex:-1,rotateDelay:3500,transitionDelay:350,restartDelay:1e3,rotateTimeout:null,restartTimeout:null,controlFocused:!1,controlMouseover:!1,firstClick:!1,startTag:!1,components:{heroSearch:{selector:"^#hero-search"},autocompleteDropMenu:{selector:".autocomplete-drop-menu"},autocompleteControl:{selector:".autocomplete-control"}},events:{"mouseenter @autocompleteControl":"autocompleteControlMouseenter","mouseleave @autocompleteControl":"autocompleteControlMouseleave","focus @autocompleteControl":"autocompleteControlFocus","blur @autocompleteControl":"autocompleteControlBlur","click @autocompleteControl":"autocompleteControlClick",clearinput:"autocompleteClearInput",autocompleteSelect:"autocompleteSelect"}},l={},u={},c={init:function(){c.cacheDefaultTags(),c.ensureTagTitle(),c.acControlHasVal()?(c.setControlState(),s.startTag=!0):c.rotateTags(),s.globalSearchManager=l.heroSearch.data("globalSearchManagerInstance")},cacheDefaultTags:function(){var t;t=a.autocomplete.getResults(),t.each(function(t,n){var i,r;i=e(n),r=i.data("result"),s.defaultTags.push({$e:i,json:r})})},ensureTagTitle:function(){var e;(e=c.getCurrentTag())&&a.autocomplete.setInputVal(e.json.title)},acControlHasVal:function(){var e;return e=a.autocomplete.getControlVal(),e.length>0},rotateTags:function(){var e,t;s.defaultTags.length&&(e=s.currentTagIndex+1,e>=s.defaultTags.length&&(e=0),t=s.defaultTags[e],c.fadeInValue(t.json),s.rotateTimeout=setTimeout(c.rotateTags,s.rotateDelay),s.currentTagIndex=e)},restartRotator:function(){var e;!(e=c.getCurrentTag())&&c.acControlHasVal()||(s.restartTimeout=setTimeout(function(){c.rotateTags()},s.restartDelay))},getCurrentTag:function(){var e,t,n;return e=a.autocomplete.getControlVal(),t=new RegExp("^"+e+"$","i"),n=null,s.defaultTags.forEach(function(e){var i=e.json;if(t.test(i.slug)||t.test(i.title))return n=e,!1}),n},triggerAutoCompleteSelect:function(){var e;(e=c.getCurrentTag())&&a.autocomplete.setValByEl(e.$e)},setControlState:function(){var e;e=c.acControlHasVal(),s.$e.toggleClass(o.TAG_SELECTED,e)},fadeInValue:function(e){l.autocompleteControl.css("color","rgba(255,255,255,0)").delay(s.transitionDelay).queue(function(t){l.autocompleteControl.val(e.title).css("color","rgba(255,255,255,1)"),t()})},stopRotator:function(){clearTimeout(s.rotateTimeout),clearTimeout(s.restartTimeout)}},d={autocompleteControlMouseenter:function(){s.controlMouseover=!0,c.stopRotator()},autocompleteControlMouseleave:function(){s.controlMouseover=!1,s.controlFocused||s.$e.hasClass(o.TAG_SELECTED)||c.restartRotator()},autocompleteControlFocus:function(){s.controlFocused=!0,c.stopRotator()},autocompleteControlBlur:function(){s.controlFocused=!1,s.firstClick=!1,s.controlMouseover||s.$e.hasClass(o.TAG_SELECTED)||(s.startTag?s.globalSearchManager.reset({removeParam:"tag"}):c.restartRotator())},autocompleteControlClick:function(){s.firstClick?c.triggerAutoCompleteSelect():s.firstClick=!0},autocompleteClearInput:function(){s.startTag?s.globalSearchManager.reset({removeParam:"tag"}):(s.controlFocused=!1,s.firstClick=!1,s.controlMouseover=!1,c.rotateTags())},autocompleteSelect:function(){c.stopRotator()}},h={},t({self:r,o:a,m:o,internal:s,elements:l,templates:u,fn:c,handlers:d,api:h}).create()};return n.markup={TAG_SELECTED:"state-tag-selected"},n}),define("forms/widgets/Autocomplete",["jquery","factories/moduleFactory","forms/widgets/DropMenu","services/Xhr","utils/keycodes","utils/functionUtil","managers/TagSearchManager"],function(e,t,n,i,r,a,o){"use strict";var s=function(l){var u,c,d,h,p,f,m,g,v;u=this,d=s.markup,c=e.extend({$e:null,selector:".field.autocomplete",searchDelay:250},l),h={name:"Autocomplete",$e:c.$e||e(c.selector),withoutNativeInput:!0,endpoint:"/q/{{query}}",xhr:new i({xhrSettings:{contentType:"text/plain; charest=utf-8",dataType:"html"}}),currentSearch:null,defaultResults:null,tagData:{dataKey:null,tagFieldName:null,tagMetaFields:{}},dropMenu:null,dropMenuOptions:{control:".autocomplete-control",wrapper:".autocomplete-results",item:".autocomplete-results .autocomplete-result",autocomplete:!0},templates:{tag:{selector:"!.autocomplete-tag-template"}},components:{dropMenu:{selector:".autocomplete-drop-menu"},control:{selector:".autocomplete-control"},results:{selector:".autocomplete-results"},result:{selector:".autocomplete-result"},tags:{selector:".autocomplete-tags"},tag:{selector:".autocomplete-tag"},removeTag:{selector:".remove-tag"},clearInput:{selector:".clear-input"}},events:{initCustomFieldsComplete:"initCustomFieldsComplete","focus @control":"controlFocus","blur @control":"controlBlur","keyup @control":"controlKeyup","click @removeTag":"removeTagClick","click @clearInput":"clearInputClick","change @control":"controlChange","paste @control":"controlPaste"}},p={},f={},m={init:function(){m.cacheDataEndpoint(),m.cacheDefaultResults(),m.cacheTagData(),m.initDropMenu(),m.getInitialTags(),m.isSingleValue()&&m.prefillControl(),h.$e.hasClass(d.TAG_SEARCH_INPUT)&&new o({$e:h.$e,autocomplete:u})},cacheDataEndpoint:function(){var e=h.$e.data("endpoint");e&&(e=e.replace("[[","{{","g").replace("]]","}}","g"),h.endpoint=e)},updateEndpoint:function(e){h.endpoint=e},cacheDefaultResults:function(){p.result&&(h.defaultResults=p.results.html())},getResults:function(){return p.result||e()},getControlVal:function(){return e.trim(p.control.val())},cacheTagData:function(){h.tagData.name=h.$e.data("name"),h.tagData.dataKey=h.$e.data("key"),h.tagData.tagFieldName=h.$e.data("tagFieldName"),h.tagData.tagMetaFields=h.$e.data("tagMetaFields")},initDropMenu:function(){h.dropMenu=new n({$e:p.dropMenu,menuControl:h.dropMenuOptions.control,menuItemsWrapper:h.dropMenuOptions.wrapper,menuItem:h.dropMenuOptions.item,onSelect:m.setValByEl})},getInitialTags:function(){var t=h.$e.data("tags");e.isPlainObject(t)&&(t=[t]),e.isArray(t)&&e.each(t,function(t,n){"string"===e.type(n)&&(n=JSON.parse(n.replace(/'/g,'"'))),m.appendTag(e.extend({value:n,label:n.title},h.tagData))})},prefillControl:function(){var t,n,i;p.tag&&(n=p.tag.first(),i=n.find(".label"),t=e.trim(i.text()),p.control.val(t),m.setTagSelectedState())},isSingleValue:function(){return!!h.$e.data("singleValue")},setValByEl:function(t){var n,i,r,a;return a=h.$e.data("handleAutoCompleteSelect"),t.length?(r=t.clone(),r.find(".result-meta").remove(),n=e.trim(r.text()),i=t.data("result"),a?void a(i,n):(m.isSingleValue()&&m.reset(),m.appendTag(e.extend({value:i,label:n},h.tagData)),m.getComponents(),m.isSingleValue()?(p.control.val(n),h.$e.addClass(d.TAG_SELECTED)):p.control.val(""),h.$e.trigger("autocompleteSelect",i),void p.control.trigger("change"))):void(a&&a(null))},findResult:function(t){var n,i;return n=null,i=new RegExp("^"+e.trim(t)+"$","i"),p.result.each(function(t,r){var a,o;if(a=e(r),(o=a.data("result"))&&(i.test(o.slug)||i.test(o.title)))return n=o,!1}),n},doSearch:function(e){if(e=e||{},m.abortSearch(),!p.control.val().length&&!e.initialResults)return void(h.defaultResults?m.renderResults(h.defaultResults,{toggleOpen:!0}):m.toggleDropMenu());h.$e.addClass(d.PROCESSING),e.initialResults&&h.$e.addClass(d.PREFETCHING),h.currentSearch=h.xhr.getHtml(m.buildEndpoint(),{complete:function(){h.$e.removeClass(d.PROCESSING),e.initialResults&&h.$e.removeClass(d.PREFETCHING)},success:function(t){h.searchTimeout=null,m.renderResults(t,e)}})},throttledSearch:a.throttle(function(){m.doSearch()},c.searchDelay),abortSearch:function(){h.currentSearch&&h.currentSearch.abort&&h.currentSearch.abort()},buildEndpoint:function(){var e=h.endpoint,t=p.control.val(),n=h.$e.data("endpointSuffix"),i=h.$e.data("forAssociation");return n&&(e+=n),e=t&&t.length?e.replace(/{{query}}/,t):e.replace(/{{query}}/,"%20"),i&&(e+=e.indexOf("?")>-1?"&":"?",e+="association=true"),e},renderResults:function(e,t){t=t||{},t.initialResults?e.indexOf(d.NO_RESULTS)<0&&p.results.html(e):p.results.html(e),h.dropMenu.update(),m.getComponents(),t.initialResults?h.defaultResults=p.results.html():m.toggleDropMenu(t)},clearResults:function(){p.results.html("")},toggleDropMenu:function(e){e=e||{},p.control.val().length||e.toggleOpen?h.dropMenu.open():h.dropMenu.close()},appendTag:function(t){var n,i,r,a;i=!1,r=m.getCurrentTags(),a=h.$e.data("valueKey"),e.each(r,function(e,n){var r,o;if(r=a?n[a]:n.pk?n.pk:n.slug,o=a?t.value[a]:t.value.pk?t.value.pk:t.value.slug,r+""==o+"")return i=!0,!1}),i||(a&&(t.valueKey=a),n=e(f.tag(t)),n.data("valuePk",t.value.pk),p.tags.append(n),m.getComponents(),n.trigger("new:fieldset"),h.$e.trigger("change"))},appendTags:function(t){e.each(t,function(e){m.appendTag(e)})},getCurrentTags:function(){var t;return t=[],m.getComponents(),p.tag&&p.tag.each(function(n,i){var r,a;r=e(i),a=r.data("tagValue"),t.push(a)}),t},removeTag:function(t){var n=e(t).closest(h.components.tag.selector),i=n.data("fieldsetInstance");i?(i.removeEl(),h.$e.trigger("change"),h.$e.trigger("removeACTag")):n.remove(),p.tag=p.tag.not(n),m.getComponents()},hasTags:function(){return p.tags[0].children.length>0},reset:function(){m.getComponents(),p.tag&&p.tag.each(function(e,t){m.removeTag(t)}),p.control.val("")},setInputVal:function(e){p.control.val(e),m.setTagSelectedState()},isInlineSearch:function(){return h.$e.hasClass(d.INLINE_SEARCH_INPUT)},focus:function(){p.control.focus()},setTagSelectedState:function(){var t;t=e.trim(p.control.val()),h.$e.toggleClass(d.TAG_SELECTED,t.length>0)},prefillControlVal:function(){!m.getControlVal().length&&h.$e.hasClass(d.PREFILL_DEFAULT)&&(m.renderResults(h.defaultResults),m.getComponents(),p.result.first().trigger("click"))},isDisabled:function(){return h.$e.hasClass(d.DISABLED)},disable:function(){h.$e.addClass(d.DISABLED)},doPrefetch:function(){return!h.$e.hasClass(d.NO_PREFETCH)},prefetchResults:function(e){e=e||{},e.clearFirst&&m.clearResults(),m.doPrefetch()&&m.doSearch({initialResults:!0})},ensureSingleValue:function(){m.getControlVal().length||m.reset()}},g={initCustomFieldsComplete:function(){m.prefetchResults(),m.prefillControlVal()},controlFocus:function(){m.isDisabled()||(m.toggleDropMenu({toggleOpen:p.result&&p.result.length>0}),clearTimeout(h.rotationTimer),h.$e.addClass(d.FOCUS))},controlKeyup:function(e){var t=/^[a-z\d\s]+$/i,n=String.fromCharCode(e.which),i=t.test(n);m.isDisabled()||(i||e.which===r.BACKSPACE||e.which===r.SPACE)&&m.throttledSearch()},removeTagClick:function(){m.removeTag(this)},controlBlur:function(){m.isDisabled()||(h.dropMenu.close({delay:!0}),m.abortSearch(),m.prefillControlVal(),h.$e.removeClass(d.FOCUS),m.isSingleValue()&&m.ensureSingleValue())},clearInputClick:function(){m.setInputVal(""),h.$e.trigger("clearinput"),m.setTagSelectedState()},controlChange:function(){m.isDisabled()||m.setTagSelectedState()},controlPaste:function(){m.isDisabled()||m.throttledSearch()}},v={hasTags:m.hasTags,reset:m.reset,appendTags:m.appendTags,updateEndpoint:m.updateEndpoint,setInputVal:m.setInputVal,focus:m.focus,findResult:m.findResult,getResults:m.getResults,getControlVal:m.getControlVal,fadeInValue:m.fadeInValue,setValByEl:m.setValByEl,prefetchResults:m.prefetchResults,disable:m.disable},t({self:u,o:c,m:d,internal:h,elements:p,templates:f,fn:m,handlers:g,api:v}).create()};return s.markup={ROTATING_VALUES:"variant-rotating-values",INLINE_SEARCH_INPUT:"variant-tag-search-input",TAG_SEARCH_INPUT:"variant-tag-search-input",PREFILL_DEFAULT:"variant-prefill-default",NO_PREFETCH:"variant-no-prefetch",NO_RESULTS:"variant-no-results",TAG_SELECTED:"state-tag-selected",PREFETCHING:"state-prefetching"},s}),define("forms/widgets/Datetime",["jquery","moment","factories/moduleFactory"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h,p;a=this,s=i.markup,o=e.extend({$e:null,selector:".fieldset.datetime"},r),l={name:"Datetime",$e:o.$e||e(o.selector),isoTimeRegex:/([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]/,components:{datePicker:{selector:".date-picker"},time:{selector:".time"},datetimeField:{selector:".datetime-field"}},events:{setupFieldsComplete:"setupFieldsComplete","fieldReady @dateTimeField":"dateTimeFieldReady","change @datePicker":"datePickerChange","change @time":"timeChange"}},u={},c={},d={init:function(){},setInitialValues:function(){var e,n;(e=u.datetimeField.data("fieldInstance").getVal())&&(e=t(e).format(),n=e.match(l.isoTimeRegex)[0],u.datePicker.data("fieldInstance").setDefaultVal(e),u.time.data("fieldInstance").setDefaultVal(n))},updateDateTime:function(){var e,n,i;e=u.datePicker.data("fieldInstance").getRawVal(),n=u.time.data("fieldInstance").getVal(),i=n?e.replace(l.isoTimeRegex,n):e,i=t(i).utc().format(),u.datetimeField.data("fieldInstance").setVal(i)}},h={datePickerChange:function(){d.updateDateTime()},timeChange:function(){d.updateDateTime()},dateTimeFieldReady:function(){d.setInitialValues()},setupFieldsComplete:function(e,t){t.getEl()[0]===l.$e[0]&&d.setInitialValues()}},p={},n({self:a,o:o,m:s,internal:l,elements:u,templates:c,fn:d,handlers:h,api:p}).create()};return i.markup={},i}),define("forms/widgets/PublicationLink",["jquery","factories/moduleFactory","forms/widgets/DropMenu"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:".publication-link"},r),l={name:"PublicationLink",fieldset:null,mode:"read",components:{editComponents:{selector:".edit-components"},readComponents:{selector:".read-components"},fieldGroup:{selector:".field-group"},createLink:{selector:".create-link"},linkButton:{selector:".publication-link-button"},linkButtonLabel:{selector:".publication-link-button .label"},editDrop:{selector:".edit-drop",constructor:n,moduleOptions:{selfToggle:!0}},editLink:{selector:".edit-link"},removeLink:{selector:".remove-link"}},events:{"click @createLink":"createLinkClick","click @editLink":"editLinkClick","click @removeLink":"removeLinkClick"}},u={},c={init:function(){l.fieldset=l.$e.data("fieldsetInstance"),l.fieldset.isReady()?c.renderState():l.$e.one("initCustomFieldsComplete",c.renderState)},getLinkData:function(){return{title:l.fieldset.getVal("publication_link_title"),url:l.fieldset.getVal("publication_link_url")}},linkIsValid:function(){var e;return e=c.getLinkData(),!!e.title},getState:function(){return c.linkIsValid()&&"edit"!==l.mode?"read":"edit"},createLink:function(){var e;e=c.getLinkData(),u.linkButton.attr("href",e.url),u.linkButtonLabel.html(e.title),l.mode="read",c.renderState()},removeLink:function(){l.fieldset.reset(),c.renderState()},renderState:function(){var e,t;e=c.getState(),t=c.getLinkData(),u.readComponents.toggleClass(s.HIDE,"edit"===e),u.editComponents.toggleClass(s.HIDE,"read"===e),u.linkButton.toggleClass(s.LINK_LESS,!t.url)}},d={createLinkClick:function(){c.createLink()},editLinkClick:function(){l.mode="edit",c.renderState()},removeLinkClick:function(){c.removeLink()}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={LINK_LESS:"variant-link-less"},i}),define("forms/widgets/ShowWhenValid",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:".show-when-valid"},i),s={name:"ShowWhenValid",$e:a.$e||e(a.selector),form:a.form,fieldset:a.fieldset,$fieldset:a.fieldset.getEl(),targetField:null,$target:null,components:{},events:{},autoComplete:null},l={},u={init:function(){u.linkToTarget(),s.autoComplete?u.setAutocompleteVisibility():u.setVisibility()},linkToTarget:function(){var e,t;t=s.$e.data("linkAutocomplete"),e=s.$e.data("targetName"),s.targetField=s.fieldset.getField(e),s.$target=s.targetField.getEls?s.targetField.getEls():s.targetField.getEl(),t?(s.autoComplete=s.$fieldset.find("."+t),s.$target.on("change.showWhenValid",c.autocompleteChange),s.$fieldset.on("clearinput",c.autocompleteChange)):s.$target.on("change.showWhenValid",c.targetChange)},setVisibility:function(){var e,t,n;t=s.$e.data("targetValue"),"boolean"==typeof t?e=s.targetField.getVal()===t:"string"==typeof t?(n=t.split(","),e=n.indexOf(s.targetField.getVal())>-1):e=s.targetField.isValid(),s.$e.toggleClass(o.HIDE,!e)},setAutocompleteVisibility:function(){var t,n,i,r,a;t=s.autoComplete.data("tagFieldName"),n=i=s.fieldset.getField(t),n&&(r=e.trim(n.getEl().data("value").title),a=e.trim(s.targetField.getVal()),i=r&&r===a),s.$e.toggleClass(o.HIDE,!i)},destroy:function(){s.$target.off("change.showWhenValid"),s.$target.off("clearinput",c.autocompleteChange)}},c={targetChange:function(e){e.target!==s.$e[0]&&u.setVisibility()},autocompleteChange:function(e){e.target!==s.$e[0]&&u.setAutocompleteVisibility()}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("forms/widgets/LicensePicker",["jquery","factories/moduleFactory","utils/functionUtil"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:"fieldset.media-license"},r),l={name:"LicensePicker",$e:o.$e||e(o.selector),fieldset:null,ccLicenseComponents:{by:"Attribution",nd:"NoDerivatives",sa:"ShareAlike",nc:"NonCommercial",suffix:"4.0 International"},ccLicenseUrlTemplate:"http://creativecommons.org/licenses/{{copyrightString}}/4.0/",components:{form:{selector:"^form"},ccIcons:{selector:".cc-icon"},ccLicenseLink:{selector:"^form .cc-license-link"}},events:{change:"licenseChange"}},u={},c={init:function(){l.fieldset=l.$e.data("fieldsetInstance"),c.setInitialState()},setInitialState:function(){var e,t;e=l.fieldset.getData(),t=e.copyright_string.split("-"),"cc"===t[0]&&l.fieldset.setVals({is_creative_commons:!0,adaptations:(e.copyright_string.match(/nd|sa/)||[""])[0],commercial:(e.copyright_string.match(/nc/)||[""])[0]})},updateCCLicense:n.debounce(function(){var e,t,n,i,r;e=l.fieldset.getData(),t=e.is_creative_commons,t?(r=["cc","by"],n=e.adaptations||"",i=e.commercial||"",i.length&&r.push(i),n.length&&r.push(n),l.fieldset.setVals({copyright_string:r.join("-"),adaptations:n,commercial:i},null,{silent:!0}),c.updateCCIcons(r),c.updateCCLicenseLink()):l.fieldset.setVals({copyright_string:"",adaptations:"",commercial:""},null,{silent:!0})},100,!0),updateCCIcons:function(e){var t,n;t=u.ccIcons.not(".cc-cc"),n="cc-",t.addClass(s.HIDE),e.forEach(function(e){t.filter("."+n+e).removeClass(s.HIDE)})},updateCCLicenseLink:function(){var e,t,n,i;e=l.fieldset.getVal("copyright_string"),e=e.replace("cc-",""),t=e.split("-"),n=[],t.forEach(function(e){n.push(l.ccLicenseComponents[e])}),n=n.join("-"),n=n+" "+l.ccLicenseComponents.suffix,i=l.ccLicenseUrlTemplate.replace("{{copyrightString}}",e),u.ccLicenseLink.attr("href",i),u.ccLicenseLink.html(n)}},d={licenseChange:function(t){var n,i;n=e(t.target),"copyright_string"!==(i=n.attr("name"))&&c.updateCCLicense()}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),define("utils/appendValToObj",["jquery"],function(e){"use strict";var t,n;return t=function(i,r,a){var o,s,l,u,c,d;if(r=r||"",o=r.match(/\[(.*?)\]/g)||!1,l=r.replace(/\[(.*?)\]/g,""),s=l.split("."),l=s.shift(),i=i||{},u=i,c=i,d=l,l&&l.length&&(i[l]=i[l]||{},c=i,d=l,u=i[l]),s.length&&e.each(s,function(e,t){u[t]=u[t]||{},c=u,d=t,u=u[t]}),o.length){if(e.isArray(c[d])||(c[d]=[]),!a)return;a[d]&&e.isArray(a[d])?e.each(a[d],function(e,t){c[d].push(t)}):e.each(o,function(n,i){var r,o=i.match(/\[(.*?)\]/)||!1;o&&o[1].length?(r={},t(r,o[1],a)):r=a,e.isEmptyObject(r)||c[d].push(r)})}else e.isPlainObject(a)?d&&d.length?a[d]?n(c,a):n(c[d],a):n(c,a):c[d]=a},n=function(t,i){e.each(i,function(i,r){e.isPlainObject(r)?t[i]?n(t[i],r):t[i]=r:e.isArray(r)&&t[i]?e.each(r,function(e,n){t[i].push(n)}):t[i]=r})},t}),define("forms/Fieldset",["jquery","factories/moduleFactory","forms/fields/CustomInput","forms/fields/CustomTextarea","forms/fields/CustomRadio","forms/fields/CustomCheckbox","forms/fields/CustomSelect","forms/fields/LinkedCustomSelect","forms/fields/RichContentEditor","forms/fields/JsonField","forms/fields/FileDrop","forms/fields/DatePicker","forms/fields/Time","forms/fields/HtmlField","forms/widgets/FocalPoint","forms/widgets/Autocomplete","forms/widgets/Datetime","forms/widgets/PublicationLink","forms/widgets/ShowWhenValid","forms/widgets/DropMenu","forms/widgets/LicensePicker","utils/appendValToObj"],function(e,t,n,i,r,a,o,s,l,u,c,d,h,p,f,m,g,v,y,_,b,T){"use strict";var S=function(w){var E,C,k,x,I,D,A,O;E=this,k=S.markup,C=e.extend({$e:null,selector:"fieldset"},w),x={name:"Fieldset",$e:C.$e||e(C.selector),explicitInit:!0,fieldsets:[],fields:[],fieldConstructors:{".custom-input":n,".custom-radio":r,".custom-checkbox":a,".custom-select":o,".custom-textarea":i,".linked-custom-select":s,".editable-content":l,".json-field":u,".html-field":p,".file-drop":c,".date-picker":d,".time":h},widgetConstructors:{".autocomplete":m,".datetime":g,".publication-link":v,".focal-point":f,".license-picker":b},componentWidgets:{showWhenValid:y,editDrop:{constructor:_,options:{selfToggle:!0}}},components:{fieldset:{selector:"fieldset, .fieldset",ignoreNested:!0},sortableFieldsets:{selector:".sortable-fieldsets"},showWhenValid:{selector:".show-when-valid",directChildrenOnly:!0},editDrop:{selector:".edit-drop",directChildrenOnly:!0},resetFieldset:{selector:".reset-fieldset"}},events:{"setupFieldsComplete @fieldset":"fieldsetSetupFieldsComplete","destroy @fieldset":"fieldsetDestroy","destroy @field":"fieldDestroy","new:fieldset @fieldset":"fieldsetNew",sort:"fieldsetsSort",orderfieldsets:"internalOrderFieldsets","click @resetFieldset":"resetFieldsetClick"}},I={},D={init:function(){D.generateFieldsetId(),D.initChildFieldsets(),D.initWidgets(),I.fieldset||D.setupCustomFields(),x.$e.one("initCustomFieldsComplete",D.initComponentWidgets)},generateFieldsetId:function(){x.$e.data("fieldsetId",Date.now())},initChildFieldsets:function(){I.fieldset&&(I.fieldset.each(function(e,t){D.setupFieldset(t)}),e.each(x.fieldsets,function(e,t){t.init()}))},setupFieldset:function(t,n){var i;n=n||!1,i=new S({$e:e(t),form:C.form,parentFieldset:E}),x.fieldsets.push(i),n&&i.init()},orderFieldsets:function(){var t,n=[];x.$e.data("orderedFieldsets")?t=x.$e.data("orderedFieldsets")():(D.getComponents(),t=I.fieldset),t.each(function(t,i){e.each(x.fieldsets,function(e,r){r.getEl()[0]===i&&(n[t]=r)})}),x.fieldsets=n},initWidgets:function(){e.each(x.widgetConstructors,function(e,t){x.$e.is(e)&&new t({$e:x.$e,fieldset:E,form:C.form})})},initComponentWidgets:function(){e.each(x.componentWidgets,function(t,n){I[t]&&I[t].each(function(t,i){"object"==typeof n?new n.constructor(e.extend({$e:e(i),fieldset:E},n.options)):new n({$e:e(i),fieldset:E})})})},setupCustomFields:function(t){var n;t=t||{},n=!0,e.each(x.fieldsets,function(e,t){return n=t.isSetup()}),!n||I.fieldset&&x.fieldsets.length!==I.fieldset.length||(e.each(x.fieldConstructors,function(t,n){x.$e.find(t).each(function(t,i){var r,a=e(i);a.hasClass(k.SETUP)||(r=new n({$e:a,form:C.form,fieldset:E}),x.fields.push(r))})}),x.$e.data("setupComplete",!0),t.silent||x.$e.trigger("setupFieldsComplete",E))},isSetup:function(){return x.$e.data("setupComplete")||!1},isReady:function(){return x.$e.data("initCustomFieldsComplete")||!1},initCustomFields:function(){e.each(x.fields,function(e,t){t.isInited()||t.init()}),e.each(x.fieldsets,function(e,t){t.initCustomFields()}),x.$e.data("initCustomFieldsComplete")||(x.$e.data("initCustomFieldsComplete",!0),x.$e.trigger("initCustomFieldsComplete",E))},getFieldsetId:function(){return x.$e.data("fieldsetId")},getName:function(){return x.$e.attr("name")||x.$e.data("name")||""},getClosestParentName:function(){var e=D.getName();return e.length?e:C.parentFieldset?C.parentFieldset.getClosestParentName():""},getField:function(t,n){var i,r,a,o,s,l;if(t.length)return i=!1,a=!n&&"string"!=typeof n,n=n||"",s=D.getName(),l=D.getClosestParentName(),
o=new RegExp((n||"").replace(/\[.*?\]/,"")+"(\\[.*?\\])?"),r=new RegExp("^"+t.replace(/\[.*?\]/,"")+"(\\[.*?\\])?$"),s.length&&(l=s),e.each(x.fields,function(e,t){var s=t.getName();if(s)return s.length&&r.test(s)&&(a||!n.length&&!l.length||n.length&&o.test(l))?(i=t,!1):void 0}),i||e.each(x.fieldsets,function(e,r){if(i=r.getField(t,a?null:n,l))return!1}),i},getFields:function(t){var n=[];return e.each(x.fields,function(e,i){i.getName()===t&&n.push(i)}),e.each(x.fieldsets,function(i,r){var a=r.getFields(t);e.each(a,function(e,t){n.push(t)})}),n},getData:function(t){var n={},i={},r=null,a=D.getName(),o=x.$e.data("nullIfBlank"),s=x.$e.data("emptyName"),l=!!s&&(s.match(/\[(.*?)\]/g)||!1),u=!0;return t=t||{},e.each(x.fieldsets,function(e,n){var r,a=n.getName();n.ignore()&&!t.all||(r=n.getData(),T(i,a,r))}),e.each(x.fields,function(e,n){var i=n.getName(),a=n.getVal();n.ignore()&&!t.all||(n.nullIfBlank()&&n.isBlank()&&(a=null),/^(true|false)$/i.test(a)&&(a=/^true$/i.test(a)),r=r||{},n.isBlank()||(u=!1),T(r,i,a))}),o&&u&&(r={}),r&&!e.isEmptyObject(r)&&e.extend(!0,i,r),e.isEmptyObject(i)||T(n,a,i),e.isEmptyObject(n)&&(l?n[s.replace(/\[(.*?)\]/g,"")]=[]:n=o?null:""),n},beforeDestroy:function(){var t=x.fieldsets.slice(0),n=x.fields.slice(0);e.each(t,function(e,t){t.destroy()}),e.each(n,function(e,t){t.destroy()})},removeDestroyedFieldset:function(t){var n=-1;e.each(x.fieldsets,function(e,i){if(i.getEl()[0]===t[0])return n=e,!1}),n>-1&&(x.fieldsets.splice(n,1),D.getComponents())},removeDestroyedField:function(t){var n=-1;e.each(x.fields,function(e,i){if(i.getEl()[0]===t)return n=e,!1}),n>-1&&(x.fields.splice(n,1),D.getComponents())},validate:function(){e.each(x.fieldsets,function(e,t){t.validate()}),e.each(x.fields,function(e,t){t.validate()})},reset:function(t){e.each(x.fieldsets,function(e,n){n.reset(t)}),e.each(x.fields,function(e,n){n.reset(t)})},setVals:function(t,n,i){e.each(t,function(t,r){var a=D.getField(t,n);a?a.setVal(r,i):e.isPlainObject(r)&&D.setVals(r,t,i)})},getVal:function(e){var t=D.getField(e);return t?t.getVal():null},getVals:function(t){var n={};return e.each(t,function(e,t){n[t]=D.getVal(t)}),n},ignore:function(){return!!x.$e.data("ignore")},focusFirst:function(){x.fields[0].focus()}},A={fieldsetSetupFieldsComplete:function(e){e.intercepted||(e.intercepted=!0,D.setupCustomFields())},fieldsetDestroy:function(e,t){var n;!e.intercepted&&t&&(e.intercepted=!0,n=t.self.getEl(),D.removeDestroyedFieldset(n),setTimeout(function(){D.orderFieldsets()},50))},fieldDestroy:function(e){e.intercepted||(e.intercepted=!0,D.removeDestroyedField(this))},fieldsetNew:function(t){t.intercepted||(t.intercepted=!0,e(this).data("fieldsetInstance")||(D.getComponents(),D.setupFieldset(this,!0),D.orderFieldsets()))},fieldsetsSort:function(){D.orderFieldsets()},internalOrderFieldsets:function(){D.orderFieldsets()},resetFieldsetClick:function(){D.reset()}},O={setupCustomFields:D.setupCustomFields,initCustomFields:D.initCustomFields,getFieldsetId:D.getFieldsetId,getName:D.getName,getData:D.getData,getField:D.getField,getFields:D.getFields,validate:D.validate,reset:D.reset,isSetup:D.isSetup,isReady:D.isReady,setVals:D.setVals,getVal:D.getVal,getVals:D.getVals,getClosestParentName:D.getClosestParentName,ignore:D.ignore,focusFirst:D.focusFirst},t({self:E,o:C,m:k,internal:x,elements:I,fn:D,handlers:A,api:O}).create()};return S.markup={},S}),define("forms/widgets/FieldsetCloner",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d,h;r=this,o=n.markup,a=e.extend({selector:"form"},i),s={name:"FieldsetCloner",$e:a.$e||e(a.selector),templates:{removeClonedFieldset:{selector:"!.remove-cloned-fieldset-template"}},components:{fieldsetCloner:{selector:".fieldset-cloner"},removeFieldsetControl:{selector:".remove-fieldset-control"}},events:{"click @fieldsetCloner":"fieldsetClonerClick","focus @fieldsetCloner":"fieldsetClonerFocus","click @removeFieldsetControl":"removeFieldsetControlClick",sort:"internalElSort"}},l={},u={},c={init:function(){c.setInitialStates()},setInitialStates:function(){l.fieldsetCloner.each(function(t,n){var i,r;i=e(n),r=i.data("target"),"self"===r&&(r='[name="'+i.attr("name")+'"]'),c.processClones(i,r)})},processClones:function(e,t){var n,i;n=s.$e.find("fieldset"+t),i=e.data("maxClones"),i=i?parseInt(i):null,i&&n.length>i?e.hide():e.show(),n.length>1?n.each(function(i,r){c.appendRemoveControl(r,t,e,i,n.length)}):n.each(function(t,i){c.removeRemoveControl(i,e,t,n.length)}),c.getComponents()},appendRemoveControl:function(t,n,i,r,a){var s,l,d,h,p;l=e(t),d=i.data("customControl"),p=i.data("clearLast"),d&&(h=l.find(d)),l.hasClass(o.CLONED)||l.hasClass(o.CLONER)||(s=d?l.find("."+o.REMOVE_FIELDSET_CONTROL):u.removeClonedFieldset.clone(),s.data("target",n),s.data("$fieldsetCloner",i),d?(h.show(),p&&c.setCustomControlState(l,r,a)):l.append(s),l.addClass(o.CLONED))},removeRemoveControl:function(t,n,i,r){var a,s,l,u;a=e(t),s=n.data("customControl"),u=n.data("clearLast"),s&&(l=a.find(s)),s?u?c.setCustomControlState(a,i,r):l.hide():a.find("."+o.REMOVE_CLONED_FIELDSET).remove(),a.removeClass(o.CLONED)},setCustomControlState:function(e,t,n){var i,r;r=e.find("."+o.RESET_FIELDSET),i=e.find("."+o.REMOVE_FIELDSET_CONTROL),0===t&&1===n?(i.hide(),r.show()):(i.show(),r.hide())},cloneFieldset:function(t){var n,i,r,a,l;n=e(t),i=n.data("target"),"self"===i?(a=n.clone(),a.removeClass(o.CLONER),a.insertBefore(n),i='[name="'+n.attr("name")+'"]'):(r=s.$e.find("fieldset"+i).last(),a=r.clone(),a.removeClass(o.CLONED),a.insertAfter(r)),a.find("."+o.SETUP).removeClass(o.SETUP),a.find("."+o.INITED).removeClass(o.INITED),a.trigger("new:fieldset"),l=a.data("fieldsetInstance"),l.reset(),l.focusFirst(),c.processClones(n,i)},removeClonedFieldset:function(t){var n,i,r,a,s;n=e(t),i=n.closest("fieldset."+o.CLONED).first(),r=n.data("$fieldsetCloner"),a=i.data("fieldsetInstance"),s=n.data("target"),a.removeEl(),c.processClones(r,s)}},d={fieldsetClonerClick:function(){c.cloneFieldset(this)},fieldsetClonerFocus:function(){c.cloneFieldset(this)},removeFieldsetControlClick:function(){c.removeClonedFieldset(this)},internalElSort:function(){c.getComponents(),c.setInitialStates()}},h={},t({self:r,o:a,m:o,internal:s,elements:l,templates:u,fn:c,handlers:d,api:h}).create()};return n.markup={CLONER:"fieldset-cloner",CLONED:"state-cloned",REMOVE_CLONED_FIELDSET:"remove-cloned-fieldset",REMOVE_FIELDSET_CONTROL:"remove-fieldset-control",RESET_FIELDSET:"reset-fieldset"},n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Sortable",t):(e=e||self).Sortable=t()}(this,function(){"use strict";function e(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)),i}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){var n,r;n=t,e=i[r=e],r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var n,i=function(e,t){if(null==e)return{};for(var n,i={},r=Object.keys(e),a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),a=0;a<r.length;a++)n=r[a],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}function l(e,t,n){e.addEventListener(t,n,!be&&ke)}function u(e,t,n){e.removeEventListener(t,n,!be&&ke)}function c(e,t){if(t&&(">"===t[0]&&(t=t.substring(1)),e))try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return}}function d(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"!==t[0]||e.parentNode===n)&&c(e,t)||i&&e===n)return e}while(e!==n&&(e=(r=e).host&&r!==document&&r.host.nodeType?r.host:r.parentNode))}var r;return null}function h(e,t,n){var i;e&&t&&(e.classList?e.classList[n?"add":"remove"](t):(i=(" "+e.className+" ").replace(xe," ").replace(" "+t+" "," "),e.className=(i+(n?" "+t:"")).replace(xe," ")))}function p(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];i[t=t in i||-1!==t.indexOf("webkit")?t:"-webkit-"+t]=n+("string"==typeof n?"":"px")}}function f(e,t){var n="";if("string"==typeof e)n=e;else do{var i=p(e,"transform")}while(i&&"none"!==i&&(n=i+" "+n),!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function m(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,a=i.length;if(n)for(;r<a;r++)n(i[r],r);return i}return[]}function g(){return document.scrollingElement||document.documentElement}function v(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var a,o,s,l,u,c,d=e!==window&&e.parentNode&&e!==g()?(o=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,u=a.right,c=a.height,a.width):(s=o=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,window.innerWidth);if((t||n)&&e!==window&&(r=r||e.parentNode,!be))do{if(r&&r.getBoundingClientRect&&("none"!==p(r,"transform")||n&&"static"!==p(r,"position"))){var h=r.getBoundingClientRect();o-=h.top+parseInt(p(r,"border-top-width")),s-=h.left+parseInt(p(r,"border-left-width")),l=o+a.height,u=s+a.width;break}}while(r=r.parentNode);return i&&e!==window&&(i=(t=f(r||e))&&t.a,e=t&&t.d,t&&(l=(o/=e)+(c/=e),u=(s/=i)+(d/=i))),{top:o,left:s,bottom:l,right:u,width:d,height:c}}}function y(e,t,n){for(var i=w(e,!0),r=v(e)[t];i;){var a=v(i)[n];if(!("top"===n||"left"===n?a<=r:r<=a))return i;if(i===g())break;i=w(i,!1)}return!1}function _(e,t,n,i){for(var r=0,a=0,o=e.children;a<o.length;){if("none"!==o[a].style.display&&o[a]!==R.ghost&&(i||o[a]!==R.dragged)&&d(o[a],n.draggable,e,!1)){if(r===t)return o[a];r++}a++}return null}function b(e,t){for(var n=e.lastElementChild;n&&(n===R.ghost||"none"===p(n,"display")||t&&!c(n,t));)n=n.previousElementSibling;return n||null}function T(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===R.clone||t&&!c(e,t)||n++;return n}function S(e){var t=0,n=0,i=g();if(e)do{var r=f(e),a=r.a,r=r.d}while(t+=e.scrollLeft*a,n+=e.scrollTop*r,e!==i&&(e=e.parentNode));return[t,n]}function w(e,t){if(!e||!e.getBoundingClientRect)return g();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=p(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return g();if(i||t)return n;i=!0}}}while(n=n.parentNode);return g()}function E(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function C(e,t){return function(){var n;G||(1===(n=arguments).length?e.call(this,n[0]):e.apply(this,n),G=setTimeout(function(){G=void 0},t))}}function k(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function x(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function I(e,t){p(e,"position","absolute"),p(e,"top",t.top),p(e,"left",t.left),p(e,"width",t.width),p(e,"height",t.height)}function D(e){p(e,"position",""),p(e,"top",""),p(e,"left",""),p(e,"width",""),p(e,"height","")}function A(){var e,n=[];return{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(e){var i,r;"none"!==p(e,"display")&&e!==R.ghost&&(n.push({target:e,rect:v(e)}),i=t({},n[n.length-1].rect),!e.thisAnimationDuration||(r=f(e,!0))&&(i.top-=r.f,i.left-=r.e),e.fromRect=i)})},addAnimationState:function(e){n.push(e)},removeAnimationState:function(e){n.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(n,{target:e}),1)},animateAll:function(t){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var r=!1,a=0;n.forEach(function(e){var t=0,n=e.target,o=n.fromRect,s=v(n),l=n.prevFromRect,u=n.prevToRect,c=e.rect,d=f(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&E(l,s)&&!E(o,s)&&(c.top-s.top)/(c.left-s.left)==(o.top-s.top)/(o.left-s.left)&&(e=c,d=l,l=u,u=i.options,t=Math.sqrt(Math.pow(d.top-e.top,2)+Math.pow(d.left-e.left,2))/Math.sqrt(Math.pow(d.top-l.top,2)+Math.pow(d.left-l.left,2))*u.animation),E(s,o)||(n.prevFromRect=o,n.prevToRect=s,t=t||i.options.animation,i.animate(n,c,s,t)),t&&(r=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),r?e=setTimeout(function(){"function"==typeof t&&t()},a):"function"==typeof t&&t(),n=[]},animate:function(e,t,n,i){var r,a;i&&(p(e,"transition",""),p(e,"transform",""),r=(a=f(this.el))&&a.a,a=a&&a.d,r=(t.left-n.left)/(r||1),a=(t.top-n.top)/(a||1),e.animatingX=!!r,e.animatingY=!!a,p(e,"transform","translate3d("+r+"px,"+a+"px,0)"),this.forRepaintDummy=e.offsetWidth,p(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),p(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){p(e,"transition",""),p(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},i))}}}function O(e){var n=e.sortable,i=e.rootEl,r=e.name,a=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,u=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,h=e.newDraggableIndex,p=e.originalEvent,f=e.putSortable,m=e.extraEventProperties;if(n=n||i&&i[Ie]){var g,v=n.options,e="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||be||Te?(g=document.createEvent("Event")).initEvent(r,!0,!0):g=new CustomEvent(r,{bubbles:!0,cancelable:!0}),g.to=s||i,g.from=l||i,g.item=a||i,g.clone=o,g.oldIndex=u,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=h,g.originalEvent=p,g.pullMode=f?f.lastPutMode:void 0;var y,_=t(t({},m),Oe.getEventProperties(r,n));for(y in _)g[y]=_[y];i&&i.dispatchEvent(g),v[e]&&v[e].call(n,g)}}function P(e,n){var i=(a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).evt,a=r(a,Pe);Oe.pluginEvent.bind(R)(e,n,t({dragEl:X,parentEl:K,ghostEl:Q,rootEl:J,nextEl:Z,lastDownEl:ee,cloneEl:te,cloneHidden:ne,dragStarted:me,putSortable:le,activeSortable:R.active,originalEvent:i,oldIndex:ie,oldDraggableIndex:ae,newIndex:re,newDraggableIndex:oe,hideGhostForTarget:Ge,unhideGhostForTarget:Xe,cloneNowHidden:function(){ne=!0},cloneNowShown:function(){ne=!1},dispatchSortableEvent:function(e){L({sortable:n,name:e,originalEvent:i})}},a))}function L(e){O(t({putSortable:le,cloneEl:te,targetEl:X,rootEl:J,oldIndex:ie,oldDraggableIndex:ae,newIndex:re,newDraggableIndex:oe},e))}function M(e){if(X){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,a=e.clientY,Ne.some(function(e){var t=e[Ie].options.emptyInsertThreshold;if(t&&!b(e)){var n=v(e),i=r>=n.left-t&&r<=n.right+t,t=a>=n.top-t&&a<=n.bottom+t;return i&&t?o=e:void 0}}),o);if(t){var n,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Ie]._onDragOver(i)}}var r,a,o}function N(e){X&&X.parentNode[Ie]._isOutsideThisEl(e.target)}function R(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=i({},t),e[Ie]=this;var n,r,a={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ze(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==R.supportPointer&&"PointerEvent"in window&&!we,emptyInsertThreshold:5};for(n in Oe.initializePlugins(this,e,a),a)n in t||(t[n]=a[n]);for(r in Ye(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&$e,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?l(e,"pointerdown",this._onTapStart):(l(e,"mousedown",this._onTapStart),l(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(l(e,"dragover",this),l(e,"dragenter",this)),Ne.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),i(this,A())}function F(e,t,n,i,r,a,o,s){var l,u,c=e[Ie],d=c.options.onMove;return!window.CustomEvent||be||Te?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=a||v(t),l.willInsertAfter=s,l.originalEvent=o,e.dispatchEvent(l),u=d?d.call(c,l,o):u}function j(e){e.draggable=!1}function U(){Ue=!1}function B(e){return setTimeout(e,0)}function H(e){return clearTimeout(e)}function V(){it.forEach(function(e){clearInterval(e.pid)}),it=[]}function q(){clearInterval(tt)}function $(){}function W(){}function z(e,t){ht.forEach(function(n,i){i=t.children[n.sortableIndex+(e?Number(i):0)],i?t.insertBefore(n,i):t.appendChild(n)})}function Y(){dt.forEach(function(e){e!==lt&&e.parentNode&&e.parentNode.removeChild(e)})}var G,X,K,Q,J,Z,ee,te,ne,ie,re,ae,oe,se,le,ue,ce,de,he,pe,fe,me,ge,ve,ye,_e,be=s(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Te=s(/Edge/i),Se=s(/firefox/i),we=s(/safari/i)&&!s(/chrome/i)&&!s(/android/i),Ee=s(/iP(ad|od|hone)/i),Ce=s(/chrome/i)&&s(/android/i),ke={capture:!1,passive:!1},xe=/\s+/g,Ie="Sortable"+(new Date).getTime(),De=[],Ae={initializeByDefault:!0},Oe={mount:function(e){for(var t in Ae)!Ae.hasOwnProperty(t)||t in e||(e[t]=Ae[t]);De.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),De.push(e)},pluginEvent:function(e,n,i){var r=this;this.eventCanceled=!1,i.cancel=function(){r.eventCanceled=!0};var a=e+"Global";De.forEach(function(r){n[r.pluginName]&&(n[r.pluginName][a]&&n[r.pluginName][a](t({sortable:n},i)),n.options[r.pluginName]&&n[r.pluginName][e]&&n[r.pluginName][e](t({sortable:n},i)))})},initializePlugins:function(e,t,n,r){for(var a in De.forEach(function(r){var a=r.pluginName;(e.options[a]||r.initializeByDefault)&&((r=new r(e,t,e.options)).sortable=e,r.options=e.options,e[a]=r,i(n,r.defaults))}),e.options){var o;e.options.hasOwnProperty(a)&&void 0!==(o=this.modifyOption(e,a,e.options[a]))&&(e.options[a]=o)}},getEventProperties:function(e,t){var n={};return De.forEach(function(r){"function"==typeof r.eventProperties&&i(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return De.forEach(function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))}),i}},Pe=["evt"],Le=!1,Me=!1,Ne=[],Re=!1,Fe=!1,je=[],Ue=!1,Be=[],He="undefined"!=typeof document,Ve=Ee,qe=Te||be?"cssFloat":"float",$e=He&&!Ce&&!Ee&&"draggable"in document.createElement("div"),We=function(){if(He){if(be)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),ze=function(e,t){var n=p(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=_(e,0,t),a=_(e,1,t),o=r&&p(r),s=a&&p(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+v(r).width,e=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+v(a).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":r&&o.float&&"none"!==o.float?(t="left"===o.float?"left":"right",!a||"both"!==s.clear&&s.clear!==t?"horizontal":"vertical"):r&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||i<=l&&"none"===n[qe]||a&&"none"===n[qe]&&i<l+e)?"vertical":"horizontal"},Ye=function(e){function t(e,n){return function(i,r,a,o){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;return!(null!=e||!n&&!s)||null!=e&&!1!==e&&(n&&"clone"===e?e:"function"==typeof e?t(e(i,r,a,o),n)(i,r,a,o):(r=(n?i:r).options.group.name,!0===e||"string"==typeof e&&e===r||e.join&&-1<e.indexOf(r)))}}var i={},r=e.group;r&&"object"==n(r)||(r={name:r}),i.name=r.name,i.checkPull=t(r.pull,!0),i.checkPut=t(r.put),i.revertClone=r.revertClone,e.group=i},Ge=function(){!We&&Q&&p(Q,"display","none")},Xe=function(){!We&&Q&&p(Q,"display","")};He&&document.addEventListener("click",function(e){if(Me)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Me=!1},!0),R.prototype={constructor:R,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,X):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=i.filter;if(function(e){Be.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var i=t[n];i.checked&&Be.push(i)}}(n),!X&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!we||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=d(s,i.draggable,n,!1))&&s.animated||ee===s)){if(ie=T(s),ae=T(s,i.draggable),"function"==typeof u){if(u.call(this,e,s,this))return L({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),P("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(u=u&&u.split(",").some(function(i){if(i=d(l,i.trim(),n,!1))return L({sortable:t,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),P("filter",t,{evt:e}),!0}))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!d(l,i.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var i,r=this,a=r.el,o=r.options,s=a.ownerDocument;n&&!X&&n.parentNode===a&&(i=v(n),J=a,K=(X=n).parentNode,Z=X.nextSibling,ee=n,se=o.group,ue={target:R.dragged=X,clientX:(t||e).clientX,clientY:(t||e).clientY},pe=ue.clientX-i.left,fe=ue.clientY-i.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,X.style["will-change"]="all",i=function(){P("delayEnded",r,{evt:e}),R.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!Se&&r.nativeDraggable&&(X.draggable=!0),r._triggerDragStart(e,t),L({sortable:r,name:"choose",originalEvent:e}),h(X,o.chosenClass,!0))},o.ignore.split(",").forEach(function(e){m(X,e.trim(),j)}),l(s,"dragover",M),l(s,"mousemove",M),l(s,"touchmove",M),l(s,"mouseup",r._onDrop),l(s,"touchend",r._onDrop),l(s,"touchcancel",r._onDrop),Se&&this.nativeDraggable&&(this.options.touchStartThreshold=4,X.draggable=!0),P("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(Te||be)?i():R.eventCanceled?this._onDrop():(l(s,"mouseup",r._disableDelayedDrag),l(s,"touchend",r._disableDelayedDrag),l(s,"touchcancel",r._disableDelayedDrag),l(s,"mousemove",r._delayedDragTouchMoveHandler),l(s,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&l(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,o.delay)))},_delayedDragTouchMoveHandler:function(e){e=e.touches?e.touches[0]:e,Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){X&&j(X),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;u(e,"mouseup",this._disableDelayedDrag),u(e,"touchend",this._disableDelayedDrag),u(e,"touchcancel",this._disableDelayedDrag),u(e,"mousemove",this._delayedDragTouchMoveHandler),u(e,"touchmove",this._delayedDragTouchMoveHandler),u(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?l(document,"pointermove",this._onTouchMove):l(document,t?"touchmove":"mousemove",this._onTouchMove):(l(X,"dragend",this),l(J,"dragstart",this._onDragStart));try{document.selection?B(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){var n;Le=!1,J&&X?(P("dragStarted",this,{evt:t}),this.nativeDraggable&&l(document,"dragover",N),n=this.options,e||h(X,n.dragClass,!1),h(X,n.ghostClass,!0),R.active=this,e&&this._appendGhost(),L({sortable:this,name:"start",originalEvent:t})):this._nulling()},_emulateDragOver:function(){if(ce){this._lastX=ce.clientX,this._lastY=ce.clientY,Ge();for(var e=document.elementFromPoint(ce.clientX,ce.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ce.clientX,ce.clientY))!==t;)t=e;if(X.parentNode[Ie]._isOutsideThisEl(e),t)do{if(t[Ie]&&t[Ie]._onDragOver({clientX:ce.clientX,clientY:ce.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}while(t=(e=t).parentNode);Xe()}},_onTouchMove:function(e){if(ue){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,a=Q&&f(Q,!0),o=Q&&a&&a.a,s=Q&&a&&a.d,t=Ve&&_e&&S(_e),o=(r.clientX-ue.clientX+i.x)/(o||1)+(t?t[0]-je[0]:0)/(o||1),s=(r.clientY-ue.clientY+i.y)/(s||1)+(t?t[1]-je[1]:0)/(s||1);if(!R.active&&!Le){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}Q&&(a?(a.e+=o-(de||0),a.f+=s-(he||0)):a={a:1,b:0,c:0,d:1,e:o,f:s},a="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")"),p(Q,"webkitTransform",a),p(Q,"mozTransform",a),p(Q,"msTransform",a),p(Q,"transform",a),de=o,he=s,ce=r),e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Q){var e=this.options.fallbackOnBody?document.body:J,t=v(X,!0,Ve,!0,e),n=this.options;if(Ve){for(_e=e;"static"===p(_e,"position")&&"none"===p(_e,"transform")&&_e!==document;)_e=_e.parentNode;_e!==document.body&&_e!==document.documentElement?(_e===document&&(_e=g()),t.top+=_e.scrollTop,t.left+=_e.scrollLeft):_e=g(),je=S(_e)}h(Q=X.cloneNode(!0),n.ghostClass,!1),h(Q,n.fallbackClass,!0),h(Q,n.dragClass,!0),p(Q,"transition",""),p(Q,"transform",""),p(Q,"box-sizing","border-box"),p(Q,"margin",0),p(Q,"top",t.top),p(Q,"left",t.left),p(Q,"width",t.width),p(Q,"height",t.height),p(Q,"opacity","0.8"),p(Q,"position",Ve?"absolute":"fixed"),p(Q,"zIndex","100000"),p(Q,"pointerEvents","none"),R.ghost=Q,e.appendChild(Q),p(Q,"transform-origin",pe/parseInt(Q.style.width)*100+"% "+fe/parseInt(Q.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;P("dragStart",this,{evt:e}),R.eventCanceled?this._onDrop():(P("setupClone",this),R.eventCanceled||((te=x(X)).draggable=!1,te.style["will-change"]="",this._hideClone(),h(te,this.options.chosenClass,!1),R.clone=te),n.cloneId=B(function(){P("clone",n),R.eventCanceled||(n.options.removeCloneOnHide||J.insertBefore(te,X),n._hideClone(),L({sortable:n,name:"clone"}))}),t||h(X,r.dragClass,!0),t?(Me=!0,n._loopId=setInterval(n._emulateDragOver,50)):(u(document,"mouseup",n._onDrop),u(document,"touchend",n._onDrop),u(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,X)),l(document,"drop",n),p(X,"transform","translateZ(0)")),Le=!0,n._dragStartId=B(n._dragStarted.bind(n,t,e)),l(document,"selectstart",n),me=!0,we&&p(document.body,"user-select","none"))},_onDragOver:function(e){function n(n,i){P(n,x,t({evt:e,isOwner:w,axis:l?"vertical":"horizontal",revert:s,dragRect:o,targetRect:B,canSort:E,fromSortable:C,target:f,completed:r,onMove:function(t,n){return F(J,c,X,o,t,v(t),e,n)},changed:a},i))}function i(){n("dragOverAnimationCapture"),x.captureAnimationState(),x!==C&&C.captureAnimationState()}function r(t){return n("dragOverCompleted",{insertion:t}),t&&(w?S._hideClone():S._showClone(x),x!==C&&(h(X,(le||S).options.ghostClass,!1),h(X,m.ghostClass,!0)),le!==x&&x!==R.active?le=x:x===R.active&&le&&(le=null),C===x&&(x._ignoreWhileAnimating=f),x.animateAll(function(){n("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==C&&(C.animateAll(),C._ignoreWhileAnimating=null)),(f===X&&!X.animated||f===c&&!f.animated)&&(ge=null),m.dragoverBubble||e.rootEl||f===document||(X.parentNode[Ie]._isOutsideThisEl(e.target),t||M(e)),!m.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),I=!0}function a(){re=T(X),oe=T(X,m.draggable),L({sortable:x,name:"change",toEl:c,newIndex:re,newDraggableIndex:oe,originalEvent:e})}var o,s,l,u,c=this.el,f=e.target,m=this.options,g=m.group,S=R.active,w=se===g,E=m.sort,C=le||S,x=this,I=!1;if(!Ue){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),f=d(f,m.draggable,c,!0),n("dragOver"),R.eventCanceled)return I;if(X.contains(e.target)||f.animated&&f.animatingX&&f.animatingY||x._ignoreWhileAnimating===f)return r(!1);if(Me=!1,S&&!m.disabled&&(w?E||(s=K!==J):le===this||(this.lastPutMode=se.checkPull(this,S,X,e))&&g.checkPut(this,S,X,e))){if(l="vertical"===this._getDirection(e,f),o=v(X),n("dragOverValid"),R.eventCanceled)return I;if(s)return K=J,i(),this._hideClone(),n("revert"),R.eventCanceled||(Z?J.insertBefore(X,Z):J.appendChild(X)),r(!0);var D=b(c,m.draggable);if(!D||function(e,t,n){return n=v(b(n.el,n.options.draggable)),t?e.clientX>n.right+10||e.clientX<=n.right&&e.clientY>n.bottom&&e.clientX>=n.left:e.clientX>n.right&&e.clientY>n.top||e.clientX<=n.right&&e.clientY>n.bottom+10}(e,l,this)&&!D.animated){if(D===X)return r(!1)
;if((f=D&&c===e.target?D:f)&&(B=v(f)),!1!==F(J,c,X,o,f,B,e,!!f))return i(),c.appendChild(X),K=c,a(),r(!0)}else if(D&&function(e,t,n){return n=v(_(n.el,0,n.options,!0)),t?e.clientX<n.left-10||e.clientY<n.top&&e.clientX<n.right:e.clientY<n.top-10||e.clientY<n.bottom&&e.clientX<n.left}(e,l,this)){var A=_(c,0,m,!0);if(A===X)return r(!1);if(B=v(f=A),!1!==F(J,c,X,o,f,B,e,!1))return i(),c.insertBefore(X,A),K=c,a(),r(!0)}else if(f.parentNode===c){var O,N,j,B=v(f),H=X.parentNode!==c,V=(V=X.animated&&X.toRect||o,W=f.animated&&f.toRect||B,q=(u=l)?V.left:V.top,g=u?V.right:V.bottom,D=u?V.width:V.height,A=u?W.left:W.top,V=u?W.right:W.bottom,W=u?W.width:W.height,!(q===A||g===V||q+D/2===A+W/2)),q=l?"top":"left",D=y(f,"top","top")||y(X,"top","top"),A=D?D.scrollTop:void 0;if(ge!==f&&(N=B[q],Re=!1,Fe=!V&&m.invertSwap||H),0!==(O=function(e,t,n,i,r,a,o,s){var l=i?e.clientY:e.clientX,u=i?n.height:n.width,e=i?n.top:n.left,i=i?n.bottom:n.right,n=!1;if(!o)if(s&&ye<u*r){if(Re=!Re&&(1===ve?e+u*a/2<l:l<i-u*a/2)||Re)n=!0;else if(1===ve?l<e+ye:i-ye<l)return-ve}else if(e+u*(1-r)/2<l&&l<i-u*(1-r)/2)return function(e){return T(X)<T(e)?1:-1}(t);return(n=n||o)&&(l<e+u*a/2||i-u*a/2<l)?e+u/2<l?1:-1:0}(e,f,B,l,V?1:m.swapThreshold,null==m.invertedSwapThreshold?m.swapThreshold:m.invertedSwapThreshold,Fe,ge===f)))for(var $=T(X);(j=K.children[$-=O])&&("none"===p(j,"display")||j===Q););if(0===O||j===f)return r(!1);ve=O;var W=(ge=f).nextElementSibling,H=!1,V=F(J,c,X,o,f,B,e,H=1===O);if(!1!==V)return 1!==V&&-1!==V||(H=1===V),Ue=!0,setTimeout(U,30),i(),H&&!W?c.appendChild(X):f.parentNode.insertBefore(X,H?W:f),D&&k(D,0,A-D.scrollTop),K=X.parentNode,void 0===N||Fe||(ye=Math.abs(N-v(f)[q])),a(),r(!0)}if(c.contains(X))return r(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){u(document,"mousemove",this._onTouchMove),u(document,"touchmove",this._onTouchMove),u(document,"pointermove",this._onTouchMove),u(document,"dragover",M),u(document,"mousemove",M),u(document,"touchmove",M)},_offUpEvents:function(){var e=this.el.ownerDocument;u(e,"mouseup",this._onDrop),u(e,"touchend",this._onDrop),u(e,"pointerup",this._onDrop),u(e,"touchcancel",this._onDrop),u(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;re=T(X),oe=T(X,n.draggable),P("drop",this,{evt:e}),K=X&&X.parentNode,re=T(X),oe=T(X,n.draggable),R.eventCanceled||(Re=Fe=Le=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),H(this.cloneId),H(this._dragStartId),this.nativeDraggable&&(u(document,"drop",this),u(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),we&&p(document.body,"user-select",""),p(X,"transform",""),e&&(me&&(e.cancelable&&e.preventDefault(),n.dropBubble||e.stopPropagation()),Q&&Q.parentNode&&Q.parentNode.removeChild(Q),(J===K||le&&"clone"!==le.lastPutMode)&&te&&te.parentNode&&te.parentNode.removeChild(te),X&&(this.nativeDraggable&&u(X,"dragend",this),j(X),X.style["will-change"]="",me&&!Le&&h(X,(le||this).options.ghostClass,!1),h(X,this.options.chosenClass,!1),L({sortable:this,name:"unchoose",toEl:K,newIndex:null,newDraggableIndex:null,originalEvent:e}),J!==K?(0<=re&&(L({rootEl:K,name:"add",toEl:K,fromEl:J,originalEvent:e}),L({sortable:this,name:"remove",toEl:K,originalEvent:e}),L({rootEl:K,name:"sort",toEl:K,fromEl:J,originalEvent:e}),L({sortable:this,name:"sort",toEl:K,originalEvent:e})),le&&le.save()):re!==ie&&0<=re&&(L({sortable:this,name:"update",toEl:K,originalEvent:e}),L({sortable:this,name:"sort",toEl:K,originalEvent:e})),R.active&&(null!=re&&-1!==re||(re=ie,oe=ae),L({sortable:this,name:"end",toEl:K,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){P("nulling",this),J=X=K=Q=Z=te=ee=ne=ue=ce=me=re=oe=ie=ae=ge=ve=le=se=R.dragged=R.ghost=R.clone=R.active=null,Be.forEach(function(e){e.checked=!0}),Be.length=de=he=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":X&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,a=this.options;i<r;i++)d(e=n[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||function(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(e,t){t=i.children[t],d(t,this.options.draggable,i,!1)&&(n[e]=t)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return d(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=Oe.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&Ye(n)},destroy:function(){P("destroy",this);var e=this.el;e[Ie]=null,u(e,"mousedown",this._onTapStart),u(e,"touchstart",this._onTapStart),u(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(u(e,"dragover",this),u(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ne.splice(Ne.indexOf(this.el),1),this.el=e=null},_hideClone:function(){ne||(P("hideClone",this),R.eventCanceled||(p(te,"display","none"),this.options.removeCloneOnHide&&te.parentNode&&te.parentNode.removeChild(te),ne=!0))},_showClone:function(e){"clone"===e.lastPutMode?ne&&(P("showClone",this),R.eventCanceled||(X.parentNode!=J||this.options.group.revertClone?Z?J.insertBefore(te,Z):J.appendChild(te):J.insertBefore(te,X),this.options.group.revertClone&&this.animate(X,te),p(te,"display",""),ne=!1)):this._hideClone()}},He&&l(document,"touchmove",function(e){(R.active||Le)&&e.cancelable&&e.preventDefault()}),R.utils={on:l,off:u,css:p,find:m,is:function(e,t){return!!d(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:C,closest:d,toggleClass:h,clone:x,index:T,nextTick:B,cancelNextTick:H,detectDirection:ze,getChild:_},R.get=function(e){return e[Ie]},R.mount=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(n=n[0].constructor===Array?n[0]:n).forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(R.utils=t(t({},R.utils),e.utils)),Oe.mount(e)})},R.create=function(e,t){return new R(e,t)};var Ke,Qe,Je,Ze,et,tt,nt,it=[],rt=!(R.version="1.14.0"),at=C(function(e,t,n,i){if(t.scroll){var r,a=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=g(),c=!1;Qe!==n&&(Qe=n,V(),Ke=t.scroll,r=t.scrollFn,!0===Ke&&(Ke=w(n,!0)));var d=0,h=Ke;do{var f=h,m=v(f),y=m.top,_=m.bottom,b=m.left,T=m.right,S=m.width,E=m.height,C=void 0,x=void 0,I=f.scrollWidth,D=f.scrollHeight,A=p(f),O=f.scrollLeft,m=f.scrollTop,x=f===u?(C=S<I&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX),E<D&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)):(C=S<I&&("auto"===A.overflowX||"scroll"===A.overflowX),E<D&&("auto"===A.overflowY||"scroll"===A.overflowY)),O=C&&(Math.abs(T-a)<=s&&O+S<I)-(Math.abs(b-a)<=s&&!!O),m=x&&(Math.abs(_-o)<=s&&m+E<D)-(Math.abs(y-o)<=s&&!!m);if(!it[d])for(var P=0;P<=d;P++)it[P]||(it[P]={});it[d].vx==O&&it[d].vy==m&&it[d].el===f||(it[d].el=f,it[d].vx=O,it[d].vy=m,clearInterval(it[d].pid),0==O&&0==m||(c=!0,it[d].pid=setInterval(function(){i&&0===this.layer&&R.active._onTouchMove(et);var t=it[this.layer].vy?it[this.layer].vy*l:0,n=it[this.layer].vx?it[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(R.dragged.parentNode[Ie],n,t,e,et,it[this.layer].el)||k(it[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==u&&(h=w(h,!1)));rt=c}},30),Ee=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,e=e.unhideGhostForTarget;t&&(r=n||r,o(),t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t=document.elementFromPoint(t.clientX,t.clientY),e(),r&&!r.el.contains(t)&&(a("spill"),this.onSpill({dragEl:i,putSortable:n})))};$.prototype={startIndex:null,dragStart:function(e){e=e.oldDraggableIndex,this.startIndex=e},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState(),e=_(this.sortable.el,this.startIndex,this.options),e?this.sortable.el.insertBefore(t,e):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Ee},i($,{pluginName:"revertOnSpill"}),W.prototype={onSpill:function(e){var t=e.dragEl,e=e.putSortable||this.sortable;e.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),e.animateAll()},drop:Ee},i(W,{pluginName:"removeOnSpill"});var ot,st,lt,ut,ct,dt=[],ht=[],pt=!1,ft=!1,mt=!1;return R.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){e=e.originalEvent,this.sortable.nativeDraggable?l(document,"dragover",this._handleAutoScroll):this.options.supportPointer?l(document,"pointermove",this._handleFallbackAutoScroll):e.touches?l(document,"touchmove",this._handleFallbackAutoScroll):l(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){e=e.originalEvent,this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?u(document,"dragover",this._handleAutoScroll):(u(document,"pointermove",this._handleFallbackAutoScroll),u(document,"touchmove",this._handleFallbackAutoScroll),u(document,"mousemove",this._handleFallbackAutoScroll)),q(),V(),clearTimeout(G),G=void 0},nulling:function(){et=Qe=Ke=rt=tt=Je=Ze=null,it.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n,i=this,r=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,a);et=e,t||this.options.forceAutoScrollFallback||Te||be||we?(at(e,this.options,o,t),n=w(o,!0),!rt||tt&&r===Je&&a===Ze||(tt&&q(),tt=setInterval(function(){var o=w(document.elementFromPoint(r,a),!0);o!==n&&(n=o,V()),at(e,i.options,o,t)},10),Je=r,Ze=a)):this.options.bubbleScroll&&w(o,!0)!==g()?at(e,this.options,w(o,!1),!1):V()}},i(e,{pluginName:"scroll",initializeByDefault:!0})}),R.mount(W,$),R.mount(new function(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){e=e.dragEl,nt=e},dragOverValid:function(e){var t=e.completed,n=e.target,i=e.onMove,r=e.activeSortable,a=e.changed,o=e.cancel;r.options.swap&&(e=this.sortable.el,r=this.options,n&&n!==e&&(e=nt,nt=!1!==i(n)?(h(n,r.swapClass,!0),n):null,e&&e!==nt&&h(e,r.swapClass,!1)),a(),t(!0),o())},drop:function(e){var t,n,i=e.activeSortable,r=e.putSortable,a=e.dragEl,o=r||this.sortable,s=this.options;nt&&h(nt,s.swapClass,!1),nt&&(s.swap||r&&r.options.swap)&&a!==nt&&(o.captureAnimationState(),o!==i&&i.captureAnimationState(),n=nt,e=(t=a).parentNode,s=n.parentNode,e&&s&&!e.isEqualNode(n)&&!s.isEqualNode(t)&&(r=T(t),a=T(n),e.isEqualNode(s)&&r<a&&a++,e.insertBefore(n,e.children[r]),s.insertBefore(t,s.children[a])),o.animateAll(),o!==i&&i.animateAll())},nulling:function(){nt=null}},i(e,{pluginName:"swap",eventProperties:function(){return{swapItem:nt}}})}),R.mount(new function(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?l(document,"pointerup",this._deselectMultiDrag):(l(document,"mouseup",this._deselectMultiDrag),l(document,"touchend",this._deselectMultiDrag)),l(document,"keydown",this._checkKeyDown),l(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var i="";dt.length&&st===e?dt.forEach(function(e,t){i+=(t?", ":"")+e.textContent}):i=n.textContent,t.setData("Text",i)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){e=e.dragEl,lt=e},delayEnded:function(){this.isMultiDrag=~dt.indexOf(lt)},setupClone:function(e){var t=e.sortable,e=e.cancel;if(this.isMultiDrag){for(var n=0;n<dt.length;n++)ht.push(x(dt[n])),ht[n].sortableIndex=dt[n].sortableIndex,ht[n].draggable=!1,ht[n].style["will-change"]="",h(ht[n],this.options.selectedClass,!1),dt[n]===lt&&h(ht[n],this.options.chosenClass,!1);t._hideClone(),e()}},clone:function(e){var t=e.sortable,n=e.rootEl,i=e.dispatchSortableEvent,e=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||dt.length&&st===t&&(z(!0,n),i("clone"),e()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,e=e.cancel;this.isMultiDrag&&(z(!1,n),ht.forEach(function(e){p(e,"display","")}),t(),ct=!1,e())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),e=e.cancel;this.isMultiDrag&&(ht.forEach(function(e){p(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)}),n(),ct=!0,e())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&st&&st.multiDrag._deselectMultiDrag(),dt.forEach(function(e){e.sortableIndex=T(e)}),dt=dt.sort(function(e,t){return e.sortableIndex-t.sortableIndex}),mt=!0},dragStarted:function(e){var t,n=this,e=e.sortable;this.isMultiDrag&&(this.options.sort&&(e.captureAnimationState(),this.options.animation&&(dt.forEach(function(e){e!==lt&&p(e,"position","absolute")}),t=v(lt,!1,!0,!0),dt.forEach(function(e){e!==lt&&I(e,t)}),pt=ft=!0)),e.animateAll(function(){pt=ft=!1,n.options.animation&&dt.forEach(function(e){D(e)}),n.options.sort&&Y()}))},dragOver:function(e){var t=e.target,n=e.completed,e=e.cancel;ft&&~dt.indexOf(t)&&(n(!1),e())},revert:function(e){var t,n,i=e.fromSortable,r=e.rootEl,a=e.sortable,o=e.dragRect;1<dt.length&&(dt.forEach(function(e){a.addAnimationState({target:e,rect:ft?v(e):o}),D(e),e.fromRect=o,i.removeAnimationState(e)}),ft=!1,t=!this.options.removeCloneOnHide,n=r,dt.forEach(function(e,i){i=n.children[e.sortableIndex+(t?Number(i):0)],i?n.insertBefore(e,i):n.appendChild(e)}))},dragOverCompleted:function(e){var t,n=e.sortable,i=e.isOwner,r=e.insertion,a=e.activeSortable,o=e.parentEl,s=e.putSortable,e=this.options;r&&(i&&a._hideClone(),pt=!1,e.animation&&1<dt.length&&(ft||!i&&!a.options.sort&&!s)&&(t=v(lt,!1,!0,!0),dt.forEach(function(e){e!==lt&&(I(e,t),o.appendChild(e))}),ft=!0),i||(ft||Y(),1<dt.length?(i=ct,a._showClone(n),a.options.animation&&!ct&&i&&ht.forEach(function(e){a.addAnimationState({target:e,rect:ut}),e.fromRect=ut,e.thisAnimationDuration=null})):a._showClone(n)))},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,e=e.activeSortable;dt.forEach(function(e){e.thisAnimationDuration=null}),e.options.animation&&!n&&e.multiDrag.isMultiDrag&&(ut=i({},t),t=f(lt,!0),ut.top-=t.f,ut.left-=t.e)},dragOverAnimationComplete:function(){ft&&(ft=!1,Y())},drop:function(e){var t=e.originalEvent,n=e.rootEl,i=e.parentEl,r=e.sortable,a=e.dispatchSortableEvent,o=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var u,c,d,p=this.options,f=i.children;if(!mt)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),h(lt,p.selectedClass,!~dt.indexOf(lt)),~dt.indexOf(lt))dt.splice(dt.indexOf(lt),1),ot=null,O({sortable:r,rootEl:n,name:"deselect",targetEl:lt,originalEvt:t});else{if(dt.push(lt),O({sortable:r,rootEl:n,name:"select",targetEl:lt,originalEvt:t}),t.shiftKey&&ot&&r.el.contains(ot)){var m=T(ot),e=T(lt);if(~m&&~e&&m!==e)for(var g,y=m<e?(g=m,e):(g=e,m+1);g<y;g++)~dt.indexOf(f[g])||(h(f[g],p.selectedClass,!0),dt.push(f[g]),O({sortable:r,rootEl:n,name:"select",targetEl:f[g],originalEvt:t}))}else ot=lt;st=l}mt&&this.isMultiDrag&&(ft=!1,(i[Ie].options.sort||i!==n)&&1<dt.length&&(u=v(lt),c=T(lt,":not(."+this.options.selectedClass+")"),!pt&&p.animation&&(lt.thisAnimationDuration=null),l.captureAnimationState(),pt||(p.animation&&(lt.fromRect=u,dt.forEach(function(e){var t;e.thisAnimationDuration=null,e!==lt&&(t=ft?v(e):u,e.fromRect=t,l.addAnimationState({target:e,rect:t}))})),Y(),dt.forEach(function(e){f[c]?i.insertBefore(e,f[c]):i.appendChild(e),c++}),o===T(lt)&&(d=!1,dt.forEach(function(e){e.sortableIndex!==T(e)&&(d=!0)}),d&&a("update"))),dt.forEach(function(e){D(e)}),l.animateAll()),st=l),(n===i||s&&"clone"!==s.lastPutMode)&&ht.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}},nullingGlobal:function(){this.isMultiDrag=mt=!1,ht.length=0},destroyGlobal:function(){this._deselectMultiDrag(),u(document,"pointerup",this._deselectMultiDrag),u(document,"mouseup",this._deselectMultiDrag),u(document,"touchend",this._deselectMultiDrag),u(document,"keydown",this._checkKeyDown),u(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==mt&&mt||st!==this.sortable||e&&d(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;dt.length;){var t=dt[0];h(t,this.options.selectedClass,!1),dt.shift(),O({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},i(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[Ie];t&&t.options.multiDrag&&!~dt.indexOf(e)&&(st&&st!==t&&(st.multiDrag._deselectMultiDrag(),st=t),h(e,t.options.selectedClass,!0),dt.push(e))},deselect:function(e){var t=e.parentNode[Ie],n=dt.indexOf(e);t&&t.options.multiDrag&&~n&&(h(e,t.options.selectedClass,!1),dt.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return dt.forEach(function(i){var r;t.push({multiDragElement:i,index:i.sortableIndex}),r=ft&&i!==lt?-1:ft?T(i,":not(."+e.options.selectedClass+")"):T(i),n.push({multiDragElement:i,index:r})}),{items:a(dt),clones:[].concat(ht),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":1<e.length&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}),R}),define("forms/widgets/SortableFieldsets",["jquery","Sortable","factories/moduleFactory"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h,p;a=this,s=i.markup,o=e.extend({selector:".sortable-fieldsets"},r),l={name:"SortableFieldsets",$e:o.$e||e(o.selector),sortableOptions:{draggable:"."+s.DRAGGABLE,handle:"."+s.HANDLE,onSort:function(){d.handleSort()}},templates:{dragHandle:{selector:"!.drag-handle-template"}},components:{fieldset:{selector:"fieldset:not(.variant-locked)",ignoreNested:!0}},events:{"new:fieldset":"fieldsetNew","modremove @fieldset":"fieldsetRemove"}},u={},c={},d={init:function(){d.setupFieldsetsForSorting(),d.initSortable()},setupFieldsetsForSorting:function(){u.fieldset&&(u.fieldset.length>1?(u.fieldset.addClass(s.DRAGGABLE),d.noHandle()||u.fieldset.append(c.dragHandle.clone())):(u.fieldset.removeClass(s.DRAGGABLE),u.fieldset.find("."+s.HANDLE).remove()))},initSortable:function(){t.create(l.$e[0],d.sortableOptions())},sortableOptions:function(){return d.noHandle()&&delete l.sortableOptions.handle,l.sortableOptions},handleNewFieldset:function(){d.getComponents(),d.setupFieldsetsForSorting()},handleFieldsetRemove:function(){d.getComponents(),d.setupFieldsetsForSorting()},handleSort:function(){l.$e.trigger("sort")},noHandle:function(){return l.$e.hasClass(s.NO_HANDLE)}},h={fieldsetNew:function(){d.handleNewFieldset()},fieldsetRemove:function(e,t){"FIELDSET"===t.tagName&&setTimeout(function(){d.handleFieldsetRemove()},10)}},p={},n({self:a,o:o,m:s,internal:l,elements:u,templates:c,fn:d,handlers:h,api:p}).create()};return i.markup={DRAGGABLE:"state-draggable",HANDLE:"drag-handle",NO_HANDLE:"variant-no-drag-handle"},i}),define("forms/Form",["jquery","factories/moduleFactory","factories/validatorFactory","forms/Fieldset","forms/widgets/FieldsetCloner","forms/widgets/SortableFieldsets","services/Xhr","utils/appendValToObj"],function(e,t,n,i,r,a,o,s){"use strict";var l=function(u){var c,d,h,p,f,m,g,v;c=this,h=l.markup,d=e.extend({$e:null,selector:"form",initialData:null,prepData:null,onSubmit:function(){},onComplete:function(){},onSuccess:function(){},onError:function(e,t){var n;"error"===t&&e.responseJSON&&(n=e.responseJSON,m.showErrors(n))},onDelete:function(){}},u),p={name:"Form",$e:d.$e||e(d.selector),xhr:new o,fieldsets:[],initCustomFieldsTimeout:null,widgetConstructors:{fieldsetCloner:{constructor:r,$e:d.$e},sortableFieldsets:a},components:{fieldset:{selector:"fieldset, .fieldset",ignoreNested:!0},allFieldsets:{selector:"fieldset, .fieldset"},formSubmit:{selector:'[type="submit"], .form-submit'},fieldsetCloner:{selector:".fieldset-cloner"},sortableFieldsets:{selector:".sortable-fieldsets"},deleteControl:{selector:".delete-control"}},events:{change:"internalElChange",keyup:"internalElKeyup",submit:"internalElSubmit",complete:"internalElComplete","new:fieldset @fieldset":"fieldsetNew","initComplete @fieldset":"fieldsetInitComplete","destroy @fieldset":"fieldsetDestroy","sort @sortableFieldsets":"sortableFieldsetsSort","click @deleteControl":"deleteControlClick"}},f={},m={init:function(){m.initValidator(),m.initFieldsets(),m.setSubmitStatus(),m.initWidgets()},initFieldsets:function(){f.fieldset&&(f.fieldset.each(function(e,t){m.setupFieldset(t)}),e.each(p.fieldsets,function(e,t){t.init()}))},setupFieldset:function(t,n){var r;n=n||!1,r=new i({$e:e(t),form:c}),p.fieldsets.push(r),n&&r.init()},orderFieldsets:function(){var t=[];f.fieldset.each(function(n,i){e.each(p.fieldsets,function(e,n){n&&n.getEl()[0]===i&&t.push(n)})}),p.fieldsets=t},initCustomFields:function(t){var n=function(){f.allFieldsets.length===f.allFieldsets.filter("."+h.INITED).length&&(e.each(p.fieldsets,function(e,n){var i=n.getEl();t&&i[0]!==t||n.initCustomFields()}),m.checkIfReady())};p.initCustomFieldsTimeout&&clearTimeout(p.initCustomFieldsTimeout),p.initCustomFieldsTimeout=setTimeout(n,100)},checkIfReady:function(){var t=p.$e.data("isReady");t||(e.each(p.fieldsets,function(e,n){return t=n.isReady()}),t&&(m.setInitialData(),p.$e.data("isReady",!0),p.$e.trigger("formReady"),"function"==typeof d.onReady&&d.onReady()))},isReady:function(){return p.$e.data("isReady")||!1},isProcessing:function(){return p.$e.data("processing")||!1},isDisabled:function(){return p.$e[0].hasAttribute("disabled")},setInitialData:function(){d.initialData&&m.setVals(d.initialData,null,{silent:!0})},initValidator:function(){n({$e:p.$e,self:c,o:d,internal:p,elements:f,fn:m,m:h}).create()},initWidgets:function(){e.each(p.widgetConstructors,function(t,n){f[t]&&("object"==typeof n?new n.constructor({$e:n.$e||p.$e.find(n.selector),form:c}):f[t].each(function(t,i){new n({$e:e(i),form:c})}))})},getName:function(){return p.$e.attr("name")},getData:function(){var t={},n=m.getName()||"";return m.isDisabled()||e.each(p.fieldsets,function(e,i){var r,a={},o=i.getName();i.ignore()&&!u.all||(r=i.getData(),s(a,o,r),s(t,n,a))}),e.isEmptyObject(t)&&n.length&&(t[n]={}),t},getField:function(t,n){var i=!1;return e.each(p.fieldsets,function(e,r){if(i||(i=r.getField(t,n)),i)return!1}),i},getFields:function(t){var n=[];return e.each(p.fieldsets,function(i,r){e.each(r.getFields(t),function(e,t){n.push(t)})}),n},removeDestroyedFieldset:function(t){var n=-1,i=[];e.each(p.fieldsets,function(e,r){r&&r.getEl()[0]===t?n=e:i.push(r)}),n>-1&&(p.fieldsets=i,m.getComponents())},setSubmitStatus:function(){var e=c.isValid(),t=m.isProcessing();f.formSubmit&&(p.$e.toggleClass(h.DISABLED,!e),f.formSubmit.toggleClass(h.DISABLED,!e),f.formSubmit.toggleClass(h.PROCESSING,t),f.formSubmit.prop("disabled",!e))},setProcessing:function(){p.$e.addClass(h.PROCESSING),p.$e.data("processing",!0)},clearProcessing:function(){p.$e.removeClass(h.PROCESSING),p.$e.data("processing",!1)},handleAjaxSubmit:function(){var t,n,i,r;t=m.getData(),d.prepData&&(t=d.prepData(t)),n=new FormData,i=p.$e.attr("method").toLowerCase(),r=p.$e.attr("action"),e.each(t,function(t,i){i instanceof File?n.append(t,i,i.name):e.isArray(i)?i.length?e.each(i,function(e,i){n.append(t+"[]",JSON.stringify(i))}):n.append(t+"[]",""):n.append(t,i)}),p.xhr[i](n,{url:r,cache:!1,contentType:!1,processData:!1,complete:function(e,t){d.onComplete(e,t),m.clearProcessing(),m.setSubmitStatus()},success:function(e,t,n){d.onSuccess(e,t,n)},error:function(e,t,n){d.onError(e,t,n),m.clearProcessing(),m.setSubmitStatus()}})},setVal:function(e,t,n){var i=m.getField(e);n=n||{},i&&i.setVal(t,n)},setVals:function(t,n,i){i=i||("object"==typeof n?n:{}),n="string"==typeof n?n:"",e.each(t,function(t,r){var a=m.getField(t,n);a?a.setVal(r,i):e.isPlainObject(r)&&m.setVals(r,t,i)})},getVal:function(e){var t=m.getField(e);return t?t.getVal():null},getVals:function(t){var n={};return e.each(t,function(e,t){n[t]=m.getVal(t)}),n},reset:function(t){e.each(p.fieldsets,function(e,n){n.reset(t)})},showErrors:function(t,n){var i;e.each(t,function(t,r){e.isPlainObject(r)?m.showErrors(r,t):(i=m.getField(t,n))&&i.showError(r)})},stopProcessing:function(){m.clearProcessing(),m.setSubmitStatus()},ignore:function(){return!!p.$e.data("ignore")},submit:function(t){t=t||{},e.extend(d,t),m.isProcessing()||p.$e.submit()}},g={internalElChange:function(){m.setSubmitStatus()},internalElKeyup:function(){m.setSubmitStatus()},internalElSubmit:function(e){m.setProcessing(),m.setSubmitStatus(),(p.$e.hasClass(h.DISABLED)||!p.$e.attr("action")||p.$e.data("ajax"))&&(e.preventDefault(),p.$e.attr("action")||d.onSubmit(e,m.getData()),p.$e.data("ajax")&&m.handleAjaxSubmit())},internalElComplete:function(){m.clearProcessing(),m.setSubmitStatus()},fieldsetNew:function(t){t.intercepted||(t.intercepted=!0,e(this).data("fieldsetInstance")||(m.getComponents(),m.setupFieldset(this,!0),m.initCustomFields(this),m.orderFieldsets()))},fieldsetInitComplete:function(){m.initCustomFields()},fieldsetDestroy:function(e,t){var n;!e.intercepted&&t&&(e.intercepted=!0,n=t.self.getEl(),m.removeDestroyedFieldset(n),setTimeout(function(){m.orderFieldsets()},50))},sortableFieldsetsSort:function(){m.getComponents(),m.orderFieldsets()},deleteControlClick:function(){d.onDelete()}},v={getData:m.getData,getField:m.getField,getFields:m.getFields,setVals:m.setVals,setVal:m.setVal,getVal:m.getVal,getVals:m.getVals,reset:m.reset,isReady:m.isReady,showErrors:m.showErrors,stopProcessing:m.stopProcessing,ignore:m.ignore,submit:m.submit,setProcessing:m.setProcessing,clearProcessing:m.clearProcessing},t({self:c,o:d,m:h,internal:p,elements:f,fn:m,handlers:g,api:v}).create()};return l.markup={},l}),define("managers/ModalsManager",["jquery","factories/moduleFactory","utils/transitionUtil","forms/Form","utils/keycodes","utils/globalElements"],function(e,t,n,i,r,a){"use strict";var o=function(s){var l,u,c,d,h,p,f,m,g;l=this,c=o.markup,u=e.extend({$e:null,selector:".modals-container"},s),d={name:"ModalsManager",$e:u.$e||e(u.selector),modals:[],templates:{modal:{selector:".modal-template"},confirmationModal:{selector:"!.confirmation-modal-template"},unexpectedErrorModal:{selector:"!.unexpected-error-modal-template"}},components:{modal:{selector:".modal"},closeModal:{selector:".close-modal"},modalPane:{selector:".modal-pane"},modalContent:{selector:".modal-content"},modalCurtain:{selector:".modal-curtain"},modalForms:{selector:".modal-form"},confirmBtn:{selector:".button.confirm"}},events:{"click @closeModal":"closeModalClick","click @modalCurtain":"modalCurtainClick","click @confirmBtn":"confirmBtnClick"}},h={},p={},f={init:function(){},launchForm:function(e){var t,n,r,a;return n=h.modalForms.filter('[data-form-type="'+e.type+'"]'),r=n.clone(),e.content=r,f.launchModal(e),a=f.getCurrentActiveModal(),e.formContent&&r.find("."+c.FORM_CONTENT).html(e.formContent),t=new i({$e:r,onSubmit:function(e,t){a.onSubmit(e,t)},onComplete:function(e,t){a.onComplete(e,t)},onSuccess:function(e,t,n){a.onSuccess(e,t,n),f.closeModal()},onError:function(e,t,n){a.onError(e,t,n)}}),a.form=t,a},launchModal:function(e){var t,n;if(e=e||{},e.content)return n=e.content,f.createNewModal(e),t=f.getCurrentActiveModal(),void 0!==n&&f.replaceContent(n),a.body.addClass(c.DISABLED_SCROLL),d.$e.addClass(c.OPEN),requestAnimationFrame(function(){t.modal.addClass(c.SHOW),t.modalCurtain.addClass(c.SHOW)}),a.doc.on("keyup",m.documentKeyup),t},launchConfirmationModal:function(t,n){return f.launchModal(e.extend({content:p.confirmationModal(t)},n))},launchUnexpectedErrorModal:function(t,n){return n=n||{},f.launchModal(e.extend({content:p.unexpectedErrorModal(t)},n))},createNewModal:function(e){var t;e=e||{},d.$e.append(p.modal.clone()),f.getComponents(),t={modal:h.modal.last(),modalPane:h.modalPane.last(),modalContent:h.modalContent.last(),modalCurtain:h.modalCurtain.last(),onClose:e.onClose||function(){},onSubmit:e.onSubmit||function(){},onComplete:e.onComplete||function(){},onSuccess:e.onSuccess||function(){},onError:e.onError||function(){},onConfirm:e.onConfirm||function(){},beforeClose:e.beforeClose||function(){},afterClose:e.afterClose||function(){},closeModal:f.closeModal},d.modals.push(t),t.modal.css("z-index",d.modals.length),e.size&&t.modalPane.addClass("variant-"+e.size)},getCurrentActiveModal:function(e){return e=e||!1,e?d.modals.pop():d.modals[d.modals.length-1]},replaceContent:function(t){var n=e(t);f.getCurrentActiveModal().modalContent.empty().append(n)},closeModal:function(t){var i,r;(i=f.getCurrentActiveModal(!0))&&(i.beforeClose()||!1||(r=e(t),n.oneEnd(i.modalCurtain,function(){i.modal.find("."+c.INITED).each(function(t,n){e(n).trigger("modremove",n)}),i.modal.remove(),d.modals.length||(a.body.removeClass(c.DISABLED_SCROLL),d.$e.removeClass(c.OPEN)),f.getComponents(),i.afterClose()}),i.modal.removeClass(c.SHOW),i.modalCurtain.removeClass(c.SHOW),a.doc.off("keyup",m.documentKeyup),i.onClose({byBtn:r.hasClass(c.BUTTON)})))},handleConfirm:function(){var e=f.getCurrentActiveModal();e.onConfirm({modal:e})}},m={closeModalClick:function(){f.closeModal(this)},modalCurtainClick:function(){f.closeModal()},documentKeyup:function(e){e.which===r.ESCAPE&&f.closeModal()},confirmBtnClick:function(){f.handleConfirm()}},g={launchForm:f.launchForm,launchModal:f.launchModal,launchConfirmationModal:f.launchConfirmationModal,launchUnexpectedErrorModal:f.launchUnexpectedErrorModal},t({self:l,o:u,internal:d,elements:h,templates:p,fn:f,handlers:m,m:c,api:g}).create()};return o.markup={DISABLED_SCROLL:"disable-scroll",FORM_CONTENT:"form-content",BUTTON:"button"},o}),define("managers/HeroSizeManager",["jquery","factories/moduleFactory","services/layout"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:"body"},r),l={name:"HeroSizeManager",$e:o.$e||e(o.selector),components:{hero:{selector:"."+s.HERO},licenseTooltip:{selector:"."+s.LICENSE_TOOLTIP}},events:{}},u={},c={init:function(){c.update(),n.onResize(d.resize)},update:function(){u.hero&&(u.hero.each(function(){var t,n,i=e(this),r=i.find("."+s.HERO_CONTENT);r.length&&(i.css("height",""),t=i.offset().top,(n=r.offset().top)<t&&i.height(i.height()+(t-n)))}),u.licenseTooltip&&u.licenseTooltip.toggleClass(s.REVERSE_X,window.innerWidth>420))}},d={resize:function(){c.update()}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={HERO:"hero",HERO_CONTENT:"hero-content",LICENSE_TOOLTIP:"license-tooltip",REVERSE_X:"variant-reverse-x"},i}),define("utils/jsonUtil",["jquery"],function(e){"use strict";var t={paramsToJson:function(t){var n,i;return n=t.substring(1),i=decodeURIComponent(n).replace(/"/g,'\\"').replace(/^&/g,"").replace(/&/g,'","').replace(/=/g,'":"'),e.trim(i).length?JSON.parse('{"'+i+'"}'):{}},jsonToParams:function(t,n){var i=[];return e.each(t,function(t,r){var a=!1;"object"==typeof r?(e.isArray(r)&&n&&(r=r.map(function(e){return e[n]})),
e.isEmptyObject(r)||(a=encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(r)))):r&&(a=encodeURIComponent(t)+"="+encodeURIComponent(r)),a&&i.push(a)}),i.join("&")},isDiff:function(e,t){return JSON.stringify(e)!==JSON.stringify(t)},isDiffSimple:function(n,i){var r,a,o,s,l,u,c;if(r=e.type(n),a=e.type(i),o=!1,r!==a)return!0;switch(r){case"boolean":case"number":case"string":return n!==i;case"array":if(!(o=n.length!==i.length))for(s=0;s<n.length;s++)if(u=n[s],c=i[s],o=t.isDiffSimple(u,c))return o;return o;case"object":for(l in n)if(n.hasOwnProperty(l)&&(o=void 0===i[l]||t.isDiff(n[l],i[l])))return o;return o}}};return t}),define("managers/GlobalSearchManager",["jquery","forms/Form","utils/keycodes","utils/jsonUtil","factories/moduleFactory"],function(e,t,n,i,r){"use strict";var a=function(n){var o,s,l,u,c,d,h,p;o=this,l=a.markup,s=e.extend({$e:null,selector:"#global-search",queryKey:"q",redirectOnSelect:!0,useResultSlug:!1,resetWhenEmpty:!1,searchEndpoint:"/search/?q={{ query }}",resetEndpoint:"/search/"},n),u={name:"GlobalSearchManager",$e:s.$e||e(s.selector),autocomplete:null,searchEndpoint:s.searchEndpoint,resetEndpoint:s.resetEndpoint,currentResultJson:null,components:{autocomplete:{selector:".autocomplete"},autocompleteControl:{selector:".autocomplete .autocomplete-control"},autocompleteCta:{selector:".autocomplete-cta"}},events:{"click @autocompleteCta":"autocompleteCtaClick"}},c={},d={init:function(){u.$e&&u.$e.length&&(new t({$e:u.$e}),c.autocomplete.data("handleAutoCompleteSelect",d.handleAutoCompleteSelect),u.autocomplete=c.autocomplete.data("autocompleteInstance"))},handleAutoCompleteSelect:function(e,t){var n,r,a;n=i.paramsToJson(location.search),r=c.autocompleteControl.val(),a=null,c.autocompleteControl.val(t),c.autocomplete.addClass(l.TAG_SELECTED),e?(u.currentResultJson=e,s.useResultSlug&&(a=e.slug)):s.resetWhenEmpty&&!r?a="":s.useResultSlug?u.currentResultJson&&u.currentResultJson.slug?a=u.currentResultJson.slug:(e=u.autocomplete.findResult(r))&&(a=e.slug):r&&!s.useResultSlug&&(a=r),null!==a?(n[s.queryKey]=a,d.doSearch(n)):s.redirectOnSelect&&e&&(window.location=e.read_url)},doSearch:function(e){var t=location.pathname;delete e.page,t.length>1&&u.searchEndpoint.indexOf(t)>-1?window.location.search=i.jsonToParams(e):window.location=d.getSearchEndpoint(e[s.queryKey])},getSearchEndpoint:function(e){var t,n;return t=location.pathname,n=u.searchEndpoint.replace("{{ query }}",e),location.search.length&&u.searchEndpoint.indexOf(t)>-1&&(n+="&"+location.search.replace(/^\?/,"").replace(/q=.*?(&|$)/,"")),n},reset:function(e){var t;e=e||{},e.removeParam?(t=i.paramsToJson(location.search),delete t[e.removeParam],window.location.search=i.jsonToParams(t)):window.location=u.resetEndpoint}},h={autocompleteCtaClick:function(){d.handleAutoCompleteSelect()}},p={reset:d.reset},r({self:o,o:s,m:l,internal:u,elements:c,fn:d,handlers:h,api:p}).create()};return a.markup={TAG_SELECTED:"state-tag-selected"},a}),define("managers/RailManager",["jquery","factories/moduleFactory","forms/widgets/DropMenu"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:".rail"},r),l={name:"RailManager",$e:o.$e||e(o.selector),components:{dropMenu:{selector:".drop-menu",constructor:n,moduleOptions:{selfToggle:!0}}},events:{}},u={},c={init:function(){}},d={},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),define("ui/Breadcrumb",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:"",targetSelector:""},i),s={name:"Breadcrumb",$e:a.$e||e(a.selector),components:{breadcrumbLink:{selector:"a"},breadcrumbArrow:{selector:".icon"},breadcrumbLabel:{selector:".breadcrumb-label"}},events:{}},l={},u={init:function(){0!==s.$e.length&&e.get("/breadcrumb/",{referrer_url:document.referrer,curr_path:location.pathname},function(e){e&&(l.breadcrumbLink.attr("href",e.url_path),l.breadcrumbArrow.css("display","block"),l.breadcrumbLabel.text(e.title))})}},c={},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("services/CSRFLoader",["jquery","factories/moduleFactory","js.cookie"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({},r),l={name:"CSRFLoader",selector:"[data-csrf]",events:{}},u={},c={init:function(){var t=e(l.selector);0!==t.length&&e.get("/csrf/",{},function(e){e&&(t.replaceWith('<input type="hidden" name="csrfmiddlewaretoken" value="'+e.token+'">'),n.set("csrftoken",e.token,{path:"/"}))})}},d={},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),function(e){!function(){if(!e.requestAnimationFrame){if(e.webkitRequestAnimationFrame)return e.requestAnimationFrame=e.webkitRequestAnimationFrame,void(e.cancelAnimationFrame=e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame);var t=0;e.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),a=e.setTimeout(function(){n(i+r)},r);return t=i+r,a},e.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),"function"==typeof define&&define("requireAnimationFrame",[],function(){return e.requestAnimationFrame})}(window),define("core",["jquery","utils/jqDomUtils","ui/Header","ui/Drawer","ui/ModuleLayout","ui/ListingLayout","services/AnchorLinkObserver","services/ExternalLinkObserver","managers/ModalsManager","managers/HeroSizeManager","managers/GlobalSearchManager","managers/RailManager","ui/Breadcrumb","services/CSRFLoader","requireAnimationFrame"],function(e,t,n,i,r,a,o,s,l,u,c,d,h,p){"use strict";var f={isIniting:!1,isInited:!1},m={constructors:[{name:"modalsManager",constructor:l,options:{selector:".global-modals"}},{multi:!0,name:"moduleLayouts",constructor:r,options:{selector:"."+r.markup.CONTAINER}},{multi:!0,name:"listingLayouts",constructor:a,options:{selector:"."+a.markup.CONTAINER}},{name:"header",constructor:n,options:{selector:".global-header"}},{name:"drawer",constructor:i,options:{selector:".global-drawer"}},{name:"anchorLinkObserver",constructor:o,options:{selector:".global-container"}},{name:"externalLinkObserver",constructor:s,options:{linksInModal:!1,selector:".global-container"}},{name:"heroSizeManager",constructor:u},{name:"globalSearchManager",constructor:c,options:{selector:"#global-search"}},{name:"railManager",constructor:d,options:{selector:".rail"}},{name:"breadcrumb",constructor:h,options:{selector:".rail-nav-breadcrumb"}},{name:"csrfLoader",constructor:p}],instances:{}};return m.init=function(t,n){f.isIniting=!0,e.each(m.constructors,function(t,i){var r=e.extend(i.options||{},(n||{})[i.name]||{});i.constructor._core=m,i.multi?(m.instances[i.name]=[],e(r.selector).each(function(){var t=e.extend({},r,{$e:e(this)});m.instances[i.name].push(new i.constructor(t,m.instances))})):m.instances[i.name]=new i.constructor(r,m.instances)}),t&&t.length&&m.runScripts(t),f.isInited=!0},m.runScripts=function(t){e.each(t,function(t,n){e.isFunction(n)&&n(m)})},m.getInstance=function(e){if(f.isInited||f.isIniting||m.init(),!m.instances[e])throw"Core: No modules available for "+e;return m.instances[e]},m}),define("ui/OpenCloseToggler",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:"",targetSelector:""},i),s={name:"OpenCloseToggler",$e:a.$e||e(a.selector),components:{target:{selector:a.targetSelector}},events:{click:"click"}},l={},u={init:function(){},toggle:function(){l.target.toggleClass(o.OPEN)}},c={click:function(e){e.preventDefault(),u.toggle()}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={},n}),define("ui/MoreText",["jquery","factories/moduleFactory","services/layout"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:".more-text"},r),l={name:"MoreText",$e:o.$e||e(o.selector),components:{moreLink:{selector:s.LINK},introText:{selector:s.INTRO},fullText:{selector:s.FULL}},events:{"click @moreLink":"moreLinkClick"}},u={},c={init:function(){c.hideFullText(!1)},showFullText:function(e){u.introText.hide(),u.fullText.show(),e&&n.trigger()},hideFullText:function(e){u.fullText.hide(),u.introText.show(),e&&n.trigger()}},d={moreLinkClick:function(e){e.preventDefault(),c.showFullText(!0)}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={LINK:"a.more-link",INTRO:".more-text-intro",FULL:".more-text-full"},i}),define("ui/blocks/EmbedBlock",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({selector:".stream-block.embed-block"},i),s={name:"UiEmbedBlock",$e:a.$e||e(a.selector),components:{primaryBlockContent:{selector:".primary-block-content"},embedContent:{selector:".embed-content"}}},l={},u={init:function(){u.setSize()},setSize:function(){var e,t;s.$e.removeClass(o.SIZED),e=l.embedContent.height()/l.embedContent.width(),t=Math.floor(100*e),l.embedContent.css({"padding-bottom":t+"%"}),s.$e.addClass(o.SIZED)}},c={},d={setSize:u.setSize},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={SIZED:"state-sized"},n}),function(e,t,n,i){"use strict";function r(e,t,n){return setTimeout(u(e,n),t)}function a(e,t,n){return!!Array.isArray(e)&&(o(e,n[t],n),!0)}function o(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==i)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function s(t,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=e.console&&(e.console.warn||e.console.log);return a&&a.call(e.console,r,i),t.apply(this,arguments)}}function l(e,t,n){var i,r=t.prototype;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&ce(i,n)}function u(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==pe?e.apply(t?t[0]||i:i,t):e}function d(e,t){return e===i?t:e}function h(e,t,n){o(g(t),function(t){e.addEventListener(t,n,!1)})}function p(e,t,n){o(g(t),function(t){e.removeEventListener(t,n,!1)})}function f(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function m(e,t){return e.indexOf(t)>-1}function g(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function y(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){for(var i=[],r=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];v(r,o)<0&&i.push(e[a]),r[a]=o,a++}return n&&(i=t?i.sort(function(e,n){return e[t]>n[t]}):i.sort()),i}function b(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<de.length;){if(n=de[o],(r=n?n+a:t)in e)return r;o++}return i}function T(){return _e++}function S(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function w(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function E(e){var t=e.options.inputClass;return new(t||(Se?j:we?H:Te?q:F))(e,C)}function C(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,a=t&xe&&i-r==0,o=t&(De|Ae)&&i-r==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,k(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function k(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=D(t)),r>1&&!n.firstMultiple?n.firstMultiple=D(t):1===r&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,l=t.center=A(i);t.timeStamp=ge(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=M(s,l),t.distance=L(s,l),x(n,t),t.offsetDirection=P(t.deltaX,t.deltaY);var u=O(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=me(u.x)>me(u.y)?u.x:u.y,t.scale=o?R(o.pointers,i):1,t.rotation=o?N(o.pointers,i):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,I(n,t);var c=e.element;f(t.srcEvent.target,c)&&(c=t.srcEvent.target),t.target=c}function x(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};t.eventType!==xe&&a.eventType!==De||(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function I(e,t){var n,r,a,o,s=e.lastInterval||t,l=t.timeStamp-s.timeStamp;if(t.eventType!=Ae&&(l>ke||s.velocity===i)){var u=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,d=O(l,u,c);r=d.x,a=d.y,n=me(d.x)>me(d.y)?d.x:d.y,o=P(u,c),e.lastInterval=t}else n=s.velocity,r=s.velocityX,a=s.velocityY,o=s.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o}function D(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:fe(e.pointers[n].clientX),clientY:fe(e.pointers[n].clientY)},n++;return{timeStamp:ge(),pointers:t,center:A(t),deltaX:e.deltaX,deltaY:e.deltaY}}function A(e){var t=e.length;if(1===t)return{x:fe(e[0].clientX),y:fe(e[0].clientY)};for(var n=0,i=0,r=0;t>r;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:fe(n/t),y:fe(i/t)}}function O(e,t,n){return{x:t/e||0,y:n/e||0}}function P(e,t){return e===t?Oe:me(e)>=me(t)?0>e?Pe:Le:0>t?Me:Ne}function L(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function M(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function N(e,t){return M(t[1],t[0],Be)+M(e[1],e[0],Be)}function R(e,t){return L(t[0],t[1],Be)/L(e[0],e[1],Be)}function F(){this.evEl=Ve,this.evWin=qe,this.pressed=!1,w.apply(this,arguments)}function j(){this.evEl=ze,this.evWin=Ye,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function U(){this.evTarget=Xe,this.evWin=Ke,this.started=!1,w.apply(this,arguments)}function B(e,t){var n=y(e.touches),i=y(e.changedTouches);return t&(De|Ae)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function H(){this.evTarget=Je,this.targetIds={},w.apply(this,arguments)}function V(e,t){var n=y(e.touches),i=this.targetIds;if(t&(xe|Ie)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,o=y(e.changedTouches),s=[],l=this.target;if(a=n.filter(function(e){return f(e.target,l)}),t===xe)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<o.length;)i[o[r].identifier]&&s.push(o[r]),t&(De|Ae)&&delete i[o[r].identifier],r++;return s.length?[_(a.concat(s),"identifier",!0),s]:void 0}function q(){w.apply(this,arguments);var e=u(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new F(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function $(e,t){e&xe?(this.primaryTouch=t.changedPointers[0].identifier,W.call(this,t)):e&(De|Ae)&&W.call(this,t)}function W(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var i=this.lastTouches,r=function(){var e=i.indexOf(n);e>-1&&i.splice(e,1)};setTimeout(r,Ze)}}function z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],a=Math.abs(t-r.x),o=Math.abs(n-r.y);if(et>=a&&et>=o)return!0}return!1}function Y(e,t){this.manager=e,this.set(t)}function G(e){if(m(e,ot))return ot;var t=m(e,st),n=m(e,lt);return t&&n?ot:t||n?t?st:lt:m(e,at)?at:rt}function X(e){this.options=ce({},this.defaults,e||{}),this.id=T(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=ct,this.simultaneous={},this.requireFail=[]}function K(e){return e&mt?"cancel":e&pt?"end":e&ht?"move":e&dt?"start":""}function Q(e){return e==Ne?"down":e==Me?"up":e==Pe?"left":e==Le?"right":""}function J(e,t){var n=t.manager;return n?n.get(e):e}function Z(){X.apply(this,arguments)}function ee(){Z.apply(this,arguments),this.pX=null,this.pY=null}function te(){Z.apply(this,arguments)}function ne(){X.apply(this,arguments),this._timer=null,this._input=null}function ie(){Z.apply(this,arguments)}function re(){Z.apply(this,arguments)}function ae(){X.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function oe(e,t){return t=t||{},t.recognizers=d(t.recognizers,oe.defaults.preset),new se(e,t)}function se(e,t){this.options=ce({},oe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=E(this),this.touchAction=new Y(this,this.options.touchAction),le(this,!0),o(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function le(e,t){var n=e.element;if(n.style){var i;o(e.options.cssProps,function(r,a){i=b(n.style,a),t?(e.oldCssProps[i]=n.style[i],n.style[i]=r):n.style[i]=e.oldCssProps[i]||""}),t||(e.oldCssProps={})}}function ue(e,n){var i=t.createEvent("Event");i.initEvent(e,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ce,de=["","webkit","Moz","MS","ms","o"],he=t.createElement("div"),pe="function",fe=Math.round,me=Math.abs,ge=Date.now;ce="function"!=typeof Object.assign?function(e){if(e===i||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==i&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var ve=s(function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===i)&&(e[r[a]]=t[r[a]]),a++;return e},"extend","Use `assign`."),ye=s(function(e,t){return ve(e,t,!0)},"merge","Use `assign`."),_e=1,be=/mobile|tablet|ip(ad|hone|od)|android/i,Te="ontouchstart"in e,Se=b(e,"PointerEvent")!==i,we=Te&&be.test(navigator.userAgent),Ee="touch",Ce="mouse",ke=25,xe=1,Ie=2,De=4,Ae=8,Oe=1,Pe=2,Le=4,Me=8,Ne=16,Re=Pe|Le,Fe=Me|Ne,je=Re|Fe,Ue=["x","y"],Be=["clientX","clientY"];w.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(S(this.element),this.evWin,this.domHandler)}};var He={mousedown:xe,mousemove:Ie,mouseup:De},Ve="mousedown",qe="mousemove mouseup";l(F,w,{handler:function(e){var t=He[e.type];t&xe&&0===e.button&&(this.pressed=!0),t&Ie&&1!==e.which&&(t=De),this.pressed&&(t&De&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Ce,srcEvent:e}))}});var $e={pointerdown:xe,pointermove:Ie,pointerup:De,pointercancel:Ae,pointerout:Ae},We={2:Ee,3:"pen",4:Ce,5:"kinect"},ze="pointerdown",Ye="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(ze="MSPointerDown",Ye="MSPointerMove MSPointerUp MSPointerCancel"),l(j,w,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=$e[i],a=We[e.pointerType]||e.pointerType,o=a==Ee,s=v(t,e.pointerId,"pointerId");r&xe&&(0===e.button||o)?0>s&&(t.push(e),s=t.length-1):r&(De|Ae)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var Ge={touchstart:xe,touchmove:Ie,touchend:De,touchcancel:Ae},Xe="touchstart",Ke="touchstart touchmove touchend touchcancel";l(U,w,{handler:function(e){var t=Ge[e.type];if(t===xe&&(this.started=!0),this.started){var n=B.call(this,e,t);t&(De|Ae)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ee,srcEvent:e})}}});var Qe={touchstart:xe,touchmove:Ie,touchend:De,touchcancel:Ae},Je="touchstart touchmove touchend touchcancel";l(H,w,{handler:function(e){var t=Qe[e.type],n=V.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:Ee,srcEvent:e})}});var Ze=2500,et=25;l(q,w,{handler:function(e,t,n){var i=n.pointerType==Ee,r=n.pointerType==Ce;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)$.call(this,t,n);else if(r&&z.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var tt=b(he.style,"touchAction"),nt=tt!==i,it="compute",rt="auto",at="manipulation",ot="none",st="pan-x",lt="pan-y",ut=function(){if(!nt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){t[i]=!n||e.CSS.supports("touch-action",i)}),t}();Y.prototype={set:function(e){e==it&&(e=this.compute()),nt&&this.manager.element.style&&ut[e]&&(this.manager.element.style[tt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return o(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),G(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=m(i,ot)&&!ut[ot],a=m(i,lt)&&!ut[lt],o=m(i,st)&&!ut[st];if(r){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}return o&&a?void 0:r||a&&n&Re||o&&n&Fe?this.preventSrc(t):void 0},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ct=1,dt=2,ht=4,pt=8,ft=pt,mt=16;X.prototype={defaults:{},set:function(e){return ce(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(a(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=J(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return a(e,"dropRecognizeWith",this)?this:(e=J(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(a(e,"requireFailure",this))return this;var t=this.requireFail;return e=J(e,this),-1===v(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(a(e,"dropRequireFailure",this))return this;e=J(e,this);var t=v(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,i=this.state;pt>i&&t(n.options.event+K(i)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),i>=pt&&t(n.options.event+K(i))},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|ct)))return!1;e++}return!0},recognize:function(e){var t=ce({},e);return c(this.options.enable,[this,t])?(this.state&(ft|mt|32)&&(this.state=ct),this.state=this.process(t),void(this.state&(dt|ht|pt|mt)&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(e){},getTouchAction:function(){},reset:function(){}},l(Z,X,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(dt|ht),r=this.attrTest(e);return i&&(n&Ae||!r)?t|mt:i||r?n&De?t|pt:t&dt?t|ht:dt:32}}),l(ee,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:je},getTouchAction:function(){var e=this.options.direction,t=[];return e&Re&&t.push(lt),e&Fe&&t.push(st),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,a=e.deltaX,o=e.deltaY;return r&t.direction||(t.direction&Re?(r=0===a?Oe:0>a?Pe:Le,n=a!=this.pX,i=Math.abs(e.deltaX)):(r=0===o?Oe:0>o?Me:Ne,n=o!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return Z.prototype.attrTest.call(this,e)&&(this.state&dt||!(this.state&dt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Q(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),l(te,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ot]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&dt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),l(ne,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[rt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(De|Ae)&&!a)this.reset();else if(e.eventType&xe)this.reset(),this._timer=r(function(){this.state=ft,this.tryEmit()},t.time,this);else if(e.eventType&De)return ft;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ft&&(e&&e.eventType&De?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ge(),this.manager.emit(this.options.event,this._input)))}}),l(ie,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ot]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&dt)}}),l(re,Z,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Re|Fe,pointers:1},getTouchAction:function(){return ee.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Re|Fe)?t=e.overallVelocity:n&Re?t=e.overallVelocityX:n&Fe&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&me(t)>this.options.velocity&&e.eventType&De},emit:function(e){var t=Q(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(ae,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&xe&&0===this.count)return this.failTimeout();if(i&&a&&n){if(e.eventType!=De)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||L(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e;if(0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=r(function(){this.state=ft,this.tryEmit()},t.interval,this),dt):ft}return 32},failTimeout:function(){return this._timer=r(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ft&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),oe.VERSION="2.0.7",oe.defaults={domEvents:!1,touchAction:it,enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[te,{enable:!1},["rotate"]],[re,{direction:Re}],[ee,{direction:Re},["swipe"]],[ae],[ae,{event:"doubletap",taps:2},["tap"]],[ne]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};se.prototype={set:function(e){return ce(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&ft)&&(r=t.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],2===t.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(dt|ht|pt)&&(r=t.curRecognizer=n),a++}},get:function(e){if(e instanceof X)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(a(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(a(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=v(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==i&&t!==i){var n=this.handlers;return o(g(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==i){var n=this.handlers;return o(g(e),function(e){t?n[e]&&n[e].splice(v(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ue(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ce(oe,{INPUT_START:xe,INPUT_MOVE:Ie,INPUT_END:De,INPUT_CANCEL:Ae,STATE_POSSIBLE:ct,STATE_BEGAN:dt,STATE_CHANGED:ht,STATE_ENDED:pt,STATE_RECOGNIZED:ft,STATE_CANCELLED:mt,STATE_FAILED:32,DIRECTION_NONE:Oe,DIRECTION_LEFT:Pe,DIRECTION_RIGHT:Le,DIRECTION_UP:Me,DIRECTION_DOWN:Ne,DIRECTION_HORIZONTAL:Re,DIRECTION_VERTICAL:Fe,DIRECTION_ALL:je,Manager:se,Input:w,TouchAction:Y,TouchInput:H,MouseInput:F,PointerEventInput:j,TouchMouseInput:q,SingleTouchInput:U,Recognizer:X,AttrRecognizer:Z,Tap:ae,Pan:ee,Swipe:re,Pinch:te,Rotate:ie,Press:ne,on:h,off:p,each:o,merge:ye,extend:ve,assign:ce,inherit:l,bindFn:u,prefixed:b}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=oe,"function"==typeof define&&define.amd?define("Hammer",[],function(){return oe}):"undefined"!=typeof module&&module.exports?module.exports=oe:e.Hammer=oe}(window,document),define("ui/blocks/TimelineBlock",["jquery","Hammer","factories/moduleFactory","services/layout","utils/keycodes"],function(e,t,n,i,r){"use strict";var a=function(o){var s,l,u,c,d,h,p,f;s=this,u=a.markup,l=e.extend({$e:null,selector:".stream-block.timeline-block"},o),c={name:"UiTimelineBlock",$e:l.$e||e(l.selector),hammer:null,components:{itemList:{selector:".timeline-items"},trackItemList:{selector:".timeline-track-items"},trackItemLabelInner:{selector:".timeline-track-items .item-label span"},navPrev:{selector:".timeline-nav-prev"},navNext:{selector:".timeline-nav-next"}},events:{"click @navPrev":"navPrevClick","click @navNext":"navNextClick","click @trackItemLabelInner":"trackItemLabelInnerClick","mouseenter @trackItemLabelInner":"trackItemLabelInnerMouseenter","mouseleave @trackItemLabelInner":"trackItemLabelInnerMouseleave",keydown:"keydown"}},d={},h={init:function(){var e;e=h.getActiveItem(),e.length?h.activateItem(e):h.activateIndex(0),i.hasTouchSupport()&&(c.hammer=new t(d.itemList[0]),c.hammer.on("swipe",p.swipe)),i.onResize(p.resize)},destroy:function(){c.hammer&&c.hammer.destroy(),i.offResize(p.resize)},activateItem:function(t){var n,i,r,a,o,s;n=t[0],i=h.getItems(),r=h.getTrackItems(),i.each(function(t){var i=e(this);n===this?(s=t,i.addClass(u.ACTIVE)):i.removeClass(u.ACTIVE)}),a=r.removeClass(u.PRE_ACTIVE).eq(s).addClass(u.ACTIVE),a.prev().addClass(u.PRE_ACTIVE),a.siblings().removeClass(u.ACTIVE),o=t.position().left,d.itemList.css("left",-1*o+"px"),d.itemList.height(t.outerHeight(!0)),d.trackItemList.css("left",-1*o/4+"px"),d.navPrev.removeClass(u.DISABLED),d.navNext.removeClass(u.DISABLED),0===s?d.navPrev.addClass(u.DISABLED):s===i.length-1&&d.navNext.addClass(u.DISABLED)},activateIndex:function(e){var t=h.getItems().eq(e);t.length&&h.activateItem(t)},getItems:function(){return d.itemList.children()},getActiveItem:function(){return h.getItems().filter("."+u.ACTIVE)},getTrackItems:function(){return d.trackItemList.children()},syncActiveItem:function(){var e=h.getActiveItem();e.length&&h.activateItem(e)},prev:function(){var e=h.getActiveItem().prev();e.length&&h.activateItem(e)},
next:function(){var e=h.getActiveItem().next();e.length&&h.activateItem(e)}},p={navPrevClick:function(){h.prev()},navNextClick:function(){h.next()},trackItemLabelInnerClick:function(){var t=e(this).closest("."+u.ITEM);h.activateIndex(t.index())},trackItemLabelInnerMouseenter:function(){e(this).closest("."+u.ITEM).addClass(u.HOVER)},trackItemLabelInnerMouseleave:function(){e(this).closest("."+u.ITEM).removeClass(u.HOVER)},keydown:function(e){e.which===r.RIGHT?h.next():e.which===r.LEFT&&h.prev()},swipe:function(e){"touch"===e.pointerType&&(2===e.direction?h.next():4===e.direction&&h.prev())},resize:function(){h.syncActiveItem()}},f={},n({self:s,o:l,m:u,internal:c,elements:d,fn:h,handlers:p,api:f}).create()};return a.markup={ITEM:"item",PRE_ACTIVE:"state-pre-active"},a}),define("ui/blocks/GalleryBlock",["jquery","factories/moduleFactory","ui/Slideshow"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({selector:".stream-block.embed-block"},r),l={name:"UiGalleryBlock",$e:o.$e||e(o.selector),components:{primaryBlockContent:{selector:".primary-block-content"},galleryBlockWrap:{selector:".gallery-block-wrap"}},events:{"click @galleryBlockWrap":"galleryBlockWrapClick"}},u={},c={init:function(){},launchSlideshow:function(t){var i,r,a;i=e(t),r=e('<div class="slideshow-wrapper" />'),i.data("images"),i.data("galleryTitle"),i.data("galleryTags"),a=o.modalsManager.launchModal({content:r}),new n({$e:r,data:e.extend({readView:!0},o.data),modal:a})}},d={galleryBlockWrapClick:function(){c.launchSlideshow()}},h={},t({self:a,o:o,m:s,internal:l,elements:u,fn:c,handlers:d,api:h}).create()};return i.markup={},i}),define("ui/GalleryManager",["jquery","ui/Slideshow","factories/moduleFactory"],function(e,t,n){"use strict";var i=function(r){var a,o,s,l,u,c,d,h;a=this,s=i.markup,o=e.extend({$e:null,selector:".gallery-manager",modalsManager:null},r),l={name:"GalleryManager",$e:o.$e||e(o.selector),components:{launchSlideshow:{selector:".launch-slideshow"}},events:{"click @launchSlideshow":"launchSlideshowClick"}},u={},c={init:function(){},launchSlideshow:function(){var n,i;i=e('<div class="slideshow-wrapper" />'),n=o.modalsManager.launchModal({content:i}),new t({$e:i,data:e.extend({readView:!0},o.data),modal:n})}},d={launchSlideshowClick:function(){c.launchSlideshow()}},h={},n({self:a,o:o,internal:l,elements:u,fn:c,handlers:d,m:s,api:h}).create()};return i.markup={},i}),define("ui/ListExpander",["jquery","factories/moduleFactory"],function(e,t){"use strict";var n=function(i){var r,a,o,s,l,u,c,d;r=this,o=n.markup,a=e.extend({$e:null,selector:"."+o.CONTAINER,$siblings:e(),index:null},i),s={name:"ListExpander",$e:a.$e||e(a.selector),isCollapsed:0!==a.index,dimensions:{listContainer:null},components:{listToggleControl:{selector:"."+o.LIST_TOGGLE_CONTROL},listContainer:{selector:"."+o.LIST_CONTAINER},listItem:{selector:"."+o.LIST_ITEM}},events:{"click @listToggleControl":"listToggleControlClick",collapse:"selfCollapse"}},l={},u={init:function(){u.toggleExpandState({initialCollapse:!0}),s.$e.removeClass(o.HIDE),l.listContainer.addClass(o.ARMED)},toggleExpandState:function(e){e=e||{},s.isCollapsed=e.forceCollapse||s.isCollapsed,l.listContainer.css("height",s.isCollapsed?0:l.listContainer[0].scrollHeight),s.$e.toggleClass(o.COLLAPSE,s.isCollapsed),s.isCollapsed||e.initialCollapse||u.collapseSiblings(),s.isCollapsed=!s.isCollapsed},collapseSiblings:function(){a.$siblings.length&&a.$siblings.trigger("collapse")}},c={listToggleControlClick:function(e){e.target.hasAttribute("href")||u.toggleExpandState()},selfCollapse:function(){u.toggleExpandState({forceCollapse:!0})}},d={},t({self:r,o:a,m:o,internal:s,elements:l,fn:u,handlers:c,api:d}).create()};return n.markup={CONTAINER:"list-expander",LIST_TOGGLE_CONTROL:"list-toggle-control",LIST_CONTAINER:"list-container",LIST_ITEM:"list-item",ARMED:"state-armed"},n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("videojs",t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojs=t()}(this,function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}function t(e,t){Pa(e).forEach(function(n){return t(e[n],n)})}function n(e){for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Object.assign?Aa.apply(void 0,[e].concat(i)):(i.forEach(function(n){n&&t(n,function(t,n){e[n]=t})}),e)}function i(e){return!!e&&"object"==typeof e}function r(e){return i(e)&&"[object Object]"===Oa.call(e)&&e.constructor===Object}function a(e,t){if(!e||!t)return"";if("function"!=typeof pa.getComputedStyle)return"";var n;try{n=pa.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}function o(e){return"string"==typeof e&&Boolean(e.trim())}function s(e){if(0<=e.indexOf(" "))throw new Error("class has illegal whitespace characters")}function l(){return _a===pa.document}function u(e){return i(e)&&1===e.nodeType}function c(){try{return pa.parent!==pa.self}catch(e){return!0}}function d(e){return function(t,n){return o(t)?(n=u(n=o(n)?_a.querySelector(n):n)?n:_a,n[e]&&n[e](t)):_a[e](null)}}function h(e,t,n,i){void 0===t&&(t={}),void 0===n&&(n={});var r=_a.createElement(e=void 0===e?"div":e);return Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Ia.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),r.setAttribute(e,n)):"textContent"===e?p(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)}),Object.getOwnPropertyNames(n).forEach(function(e){r.setAttribute(e,n[e])}),i&&P(r,i),r}function p(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function f(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function m(e,t){return s(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function g(e,t){return e.classList?e.classList.add(t):m(e,t)||(e.className=(e.className+" "+t).trim()),e}function v(e,t){return e?(e.classList?e.classList.remove(t):(s(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e):(Ia.warn("removeClass was called with an element that doesn't exist"),null)}function y(e,t,n){var i=m(e,t);if((n="boolean"!=typeof(n="function"==typeof n?n(e,t):n)?!i:n)!==i)return(n?g:v)(e,t),e}function _(e,t){Object.getOwnPropertyNames(t).forEach(function(n){var i=t[n];null===i||void 0===i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)})}function b(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,i=n.length-1;0<=i;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function T(e,t){return e.getAttribute(t)}function S(e,t,n){e.setAttribute(t,n)}function w(e,t){e.removeAttribute(t)}function E(){_a.body.focus(),_a.onselectstart=function(){return!1}}function C(){_a.onselectstart=function(){return!0}}function k(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(a(e,"height"))),n.width||(n.width=parseFloat(a(e,"width"))),n}}function x(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==_a[ba.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function I(e,t){var n={x:0,y:0};if(Qa)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r,o=a(i,"transform");/^matrix/.test(o)?(r=o.slice(7,-1).split(/,\s/).map(Number),n.x+=r[4],n.y+=r[5]):/^matrix3d/.test(o)&&(o=o.slice(9,-1).split(/,\s/).map(Number),n.x+=o[12],n.y+=o[13]),i=i.parentNode}var s={},l=x(t.target),u=x(e),c=u.width,d=u.height,e=t.offsetY-(u.top-l.top),l=t.offsetX-(u.left-l.left);return t.changedTouches&&(l=t.changedTouches[0].pageX-u.left,e=t.changedTouches[0].pageY+u.top,Qa&&(l-=n.x,e-=n.y)),s.y=1-Math.max(0,Math.min(1,e/d)),s.x=Math.max(0,Math.min(1,l/c)),s}function D(e){return i(e)&&3===e.nodeType}function A(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function O(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return u(e="function"==typeof e?e():e)||D(e)?e:"string"==typeof e&&/\S/.test(e)?_a.createTextNode(e):void 0}).filter(function(e){return e})}function P(e,t){return O(t).forEach(function(t){return e.appendChild(t)}),e}function L(e,t){return P(A(e),t)}function M(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}function N(e,t){l()&&(t&&(Ca=t),pa.setTimeout(ro,e))}function R(){io=!0,pa.removeEventListener("load",R)}function F(e){var t=_a.createElement("style");return t.className=e,t}function j(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function U(e,t){var n;lo.has(e)&&(0===(n=lo.get(e)).handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&lo.delete(e))}function B(e,t,n,i){n.forEach(function(n){e(t,n,i)})}function H(e){function t(){return!0}function n(){return!1}if(e.fixed_)return e;if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i,r,a,o=e||pa.event;for(i in e={},o)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&o.preventDefault||(e[i]=o[i]));e.target||(e.target=e.srcElement||_a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){o.preventDefault&&o.preventDefault(),e.returnValue=!1,o.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){o.stopPropagation&&o.stopPropagation(),e.cancelBubble=!0,o.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){o.stopImmediatePropagation&&o.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX&&(r=_a.documentElement,a=_a.body,e.pageX=e.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}function V(e,t,n){if(Array.isArray(t))return B(V,e,t,n);lo.has(e)||lo.set(e,{});var i=lo.get(e);i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=ao++),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=H(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(t){Ia.error(t)}}}),1===i.handlers[t].length&&(e.addEventListener?(n=!1,uo()&&-1<co.indexOf(t)&&(n={passive:!0}),e.addEventListener(t,i.dispatcher,n)):e.attachEvent&&e.attachEvent("on"+t,i.dispatcher))}function q(e,t,n){if(lo.has(e)){var i=lo.get(e);if(i.handlers){if(Array.isArray(t))return B(q,e,t,n);var r=function(e,t){i.handlers[t]=[],U(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);U(e,t)}else r(e,t)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(e,s)}}}function $(e,t,n){var i=lo.has(e)?lo.get(e):{},r=e.parentNode||e.ownerDocument;return"string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=H(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles?$.call(null,r,t,n):!r&&!t.defaultPrevented&&t.target&&t.target[t.type]&&(lo.has(t.target)||lo.set(t.target,{}),r=lo.get(t.target),t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)),!t.defaultPrevented}function W(e,t,n){function i(){q(e,t,i),n.apply(this,arguments)}if(Array.isArray(t))return B(W,e,t,n);i.guid=n.guid=n.guid||ao++,V(e,t,i)}function z(e,t,n){function i(){q(e,t,i),n.apply(this,arguments)}i.guid=n.guid=n.guid||ao++,V(e,t,i)}function Y(e,t,n){return t.guid||(t.guid=ao++),(e=t.bind(e)).guid=n?n+"_"+t.guid:t.guid,e}function G(e,t){var n=pa.performance.now();return function(){var i=pa.performance.now();t<=i-n&&(e.apply(void 0,arguments),n=i)}}function X(e,t,n,i){function r(){var r=this,o=arguments,s=function(){s=a=null,n||e.apply(r,o)};!a&&n&&e.apply(r,o),i.clearTimeout(a),a=i.setTimeout(s,t)}var a;return void 0===i&&(i=pa),r.cancel=function(){i.clearTimeout(a),a=null},r}function K(){}function Q(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_||(e.constructor&&e.constructor.name?e.constructor.name:typeof e)}function J(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function Z(e,t,n){if(!e||!e.nodeName&&!po(e))throw new Error("Invalid target for "+Q(t)+"#"+n+"; must be a DOM node or evented object.")}function ee(e,t,n){if(!J(e))throw new Error("Invalid event type for "+Q(t)+"#"+n+"; must be a non-empty string or array.")}function te(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+Q(t)+"#"+n+"; must be a function.")}function ne(e,t,n){var i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_,t=a?(i=e.eventBusEl_,3<=t.length&&t.shift(),r=t[0],t[1]):(i=t[0],r=t[1],t[2]);return Z(i,e,n),ee(r,e,n),te(t,e,n),{isTargetingSelf:a,target:i,type:r,listener:t=Y(e,t)}}function ie(e,t,n,i){Z(e,e,t),e.nodeName?ho[t](e,n,i):e[t](n,i)}function re(e,t){if(t=(t=void 0===t?{}:t).eventBusKey){if(!e[t].nodeName)throw new Error('The eventBusKey "'+t+'" does not refer to an element.');e.eventBusEl_=e[t]}else e.eventBusEl_=h("span",{className:"vjs-event-bus"});return n(e,fo),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),[e,e.el_,e.eventBusEl_].forEach(function(e){e&&lo.has(e)&&lo.delete(e)}),pa.setTimeout(function(){e.eventBusEl_=null},0)}),e}function ae(e,t){return n(e,mo),e.state=n({},e.state,t),"function"==typeof e.handleStateChanged&&po(e)&&e.on("statechanged",e.handleStateChanged),e}function oe(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})}function se(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function le(){for(var e={},n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(n){n&&t(n,function(t,n){r(t)?(r(e[n])||(e[n]={}),e[n]=le(e[n],t)):e[n]=t})}),e}function ue(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function ce(e){var t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:ue.bind(null,"start",0,e),end:ue.bind(null,"end",1,e)};return pa.Symbol&&pa.Symbol.iterator&&(t[pa.Symbol.iterator]=function(){return(e||[]).values()}),t}function de(e,t){return Array.isArray(e)?ce(e):void 0===e||void 0===t?ce():ce([[e,t]])}function he(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=de(0,0));for(var a=0;a<e.length;a++)n=e.start(a),r+=(i=t<(i=e.end(a))?t:i)-n;return r/t}function pe(e){if(e instanceof pe)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:i(e)&&("number"==typeof e.code&&(this.code=e.code),n(this,e)),this.message||(this.message=pe.defaultMessages[this.code]||"")}function fe(e){return null!=e&&"function"==typeof e.then}function me(e){fe(e)&&e.then(null,function(e){})}function ge(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,n,i){return e[n]&&(t[n]=e[n]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}function ve(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}function ye(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}function _e(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=_a.createElement("a");n.href=e;for(var i={},r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=pa.location.protocol),i.host||(i.host=pa.location.host),i}function be(e){var t;return e.match(/^https?:\/\//)||((t=_a.createElement("a")).href=e,e=t.href),e}function Te(e){return"string"==typeof e&&(e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e))?e.pop().toLowerCase():""}function Se(e,t){return void 0===t&&(t=pa.location),(":"===(e=_e(e)).protocol?t:e).protocol+e.host!==t.protocol+t.host}function we(e,t,n){var i=e;return Fo(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=Aa({},t,{uri:e}),i.callback=n,i}function Ee(e,t,n){return Ce(t=we(e,t,n))}function Ce(e){function t(){var e=void 0,e=u.response||u.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(u);if(m)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(o),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,l(e,g)}function i(){if(!a){clearTimeout(o);var n=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status,i=g,r=null;return 0!==n?(i={body:t(),statusCode:n,method:d,headers:{},url:c,rawRequest:u},u.getAllResponseHeaders&&(i.headers=Uo(u.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),l(r,i,i.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var r,a,o,s=!1,l=function(t,n,i){s||(s=!0,e.callback(t,n,i))},u=e.xhr||null,c=(u=u||new(e.cors||e.useXDR?Ee.XDomainRequest:Ee.XMLHttpRequest)).url=e.uri||e.url,d=u.method=e.method||"GET",h=e.body||e.data,p=u.headers=e.headers||{},f=!!e.sync,m=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:u};if("json"in e&&!1!==e.json&&(m=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(i,0)},u.onload=i,u.onerror=n,u.onprogress=function(){},u.onabort=function(){a=!0},u.ontimeout=n,u.open(d,c,!f,e.username,e.password),f||(u.withCredentials=!!e.withCredentials),!f&&0<e.timeout&&(o=setTimeout(function(){var e;a||(a=!0,u.abort("timeout"),(e=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",n(e))},e.timeout)),u.setRequestHeader)for(r in p)p.hasOwnProperty(r)&&u.setRequestHeader(r,p[r]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return;return 1}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(h||null),u}function ke(e,t){var n=new pa.WebVTT.Parser(pa,pa.vttjs,pa.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(pa.console&&pa.console.groupCollapsed&&pa.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return Ia.error(e)}),pa.console&&pa.console.groupEnd&&pa.console.groupEnd()),n.flush()}function xe(e,t){var n={uri:e};(e=Se(e))&&(n.cors=e),(e="use-credentials"===t.tech_.crossOrigin())&&(n.withCredentials=e),Bo(n,Y(this,function(e,n,i){return e?Ia.error(e,n):(t.loaded_=!0,void("function"!=typeof pa.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(e){return"vttjserror"!==e.type?ke(i,t):void Ia.error("vttjs failed to load, stopping trying to process "+t.src)}):ke(i,t)))}))}function Ie(){}function De(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function Ae(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}return e=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/),e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function Oe(){this.values=Yo(null)}function Pe(e,t,n,i){var r,a,o=i?e.split(i):[e];for(r in o)"string"==typeof o[r]&&2===(a=o[r].split(n)).length&&t(a[0],a[1])}function Le(e,t,n){function i(){var t=Ae(e);if(null===t)throw new De(De.Errors.BadTimeStamp,"Malformed timestamp: "+a);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(){e=e.replace(/^\s+/,"")}var a=e;if(r(),t.startTime=i(),r(),"--\x3e"!==e.substr(0,3))throw new De(De.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+a);e=e.substr(3),r(),t.endTime=i(),r(),function(e,t){var i=new Oe;Pe(e,function(e,t){switch(e){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}function Me(e,t){for(var n,i,r,a,o,s,l,u,c,d,h=e.document.createElement("div"),p=h,f=[];null!==(n=function(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/);return e=e[1]||e[2],t=t.substr(e.length),e}());)"<"!==n[0]?p.appendChild(e.document.createTextNode((o=n,Go.innerHTML=o,o=Go.textContent,Go.textContent="",o))):"/"!==n[1]?(a=Ae(n.substr(1,n.length-2)))?(i=e.document.createProcessingInstruction("timestamp",a),p.appendChild(i)):(r=n.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(u=r[1],c=r[3],d=void 0,d=Xo[u],(i=d?(d=e.document.createElement(d),(u=Qo[u])&&c&&(d[u]=c.trim()),d):null)&&(s=p,Jo[(l=i).localName]&&Jo[l.localName]!==s.localName||(r[2]&&((a=r[2].split(".")).forEach(function(e){var t=/^bg_/.test(e),e=t?e.slice(3):e;Ko.hasOwnProperty(e)&&(e=Ko[e],i.style[t?"background-color":"color"]=e)}),i.className=a.join(" ")),f.push(r[1]),p.appendChild(i),p=i))):f.length&&f[f.length-1]===n.substr(2).replace(">","")&&(f.pop(),p=p.parentNode);return h}function Ne(e){function t(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}var n=[],i="";if(!e||!e.childNodes)return"ltr";for(t(n,e);i=function e(n){if(!n||!n.length)return null;var i=n.pop(),r=i.textContent||i.innerText;if(r){var a=r.match(/^.*(\n|\r)/);return a?a[n.length=0]:r}return"ruby"===i.tagName?e(n):i.childNodes?(t(n,i),e(n)):void 0}(n);)for(var r=0;r<i.length;r++)if(function(e){for(var t=0;t<Zo.length;t++){var n=Zo[t];if(e>=n[0]&&e<=n[1])return 1}}(i.charCodeAt(r)))return"rtl";return"ltr"}function Re(){}function Fe(e,t,n){Re.call(this),this.cue=t,this.cueDiv=Me(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:Ne(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function je(e){var t,n,i,r;e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop,r=(r=e.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),e=e.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,e.height/r.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||t,this.bottom=e.bottom||i+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==r?r:e.lineHeight}function Ue(e,t,n,i){var r,a=new je(t),o=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(o),l=[];if(o.snapToLines){switch(o.vertical){case"":l=["+y","-y"],r="height";break;case"rl":l=["+x","-x"],r="width";break;case"lr":l=["-x","+x"],r="width"}var u=a.lineHeight,c=u*Math.round(s),d=n[r]+u,h=l[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),s<0&&(c+=""===o.vertical?n.height:n.width,l=l.reverse()),a.move(h,c)}else{var p=a.lineHeight/n.height*100;switch(o.lineAlign){case"center":s-=p/2;break;case"end":s-=p}switch(o.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}l=["+y","-x","+x","-y"],a=new je(t)}a=function(e,t){for(var r,a=new je(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);l<o&&(r=new je(e),o=l),e=new je(a)}return r||a}(a,l),t.move(a.toCSSCompatValues(n))}function Be(){}function He(e){return"string"==typeof e&&!!ns[e.toLowerCase()]&&e.toLowerCase()}function Ve(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,o=t,s=n,l=null,u="",c=!0,d="auto",h="start",p="auto",f="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){if(!1===(e="string"==typeof(e=e)&&!!ts[e.toLowerCase()]&&e.toLowerCase()))throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){(e=He(e))&&(h=e,this.hasBeenReset=!0)}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){(e=He(e))&&(f=e,this.hasBeenReset=!0)}},size:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(e){if(!(e=He(e)))throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=e,this.hasBeenReset=!0}}}),this.displayState=void 0}function qe(e){return"number"==typeof e&&0<=e&&e<=100}function $e(){var e=100,t=3,n=0,i=100,r=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!qe(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!qe(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!qe(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!qe(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!qe(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){!1===(e="string"==typeof(e=e)&&!!rs[e.toLowerCase()]&&e.toLowerCase())||(o=e)}}})}function We(e,t,i){e.setTimeout(function(){return function e(t,i,r,a,o,s){void 0===t&&(t={}),void 0===i&&(i=[]),void 0===o&&(o=[]),void 0===s&&(s=!1);var l=i,i=l[0],u=l.slice(1);if("string"==typeof i)e(t,ss[i],r,a,o,s);else if(i){var c=Ge(a,i);if(!c.setSource)return o.push(c),e(t,u,r,a,o,s);c.setSource(n({},t),function(n,i){return n?e(t,u,r,a,o,s):(o.push(c),void e(i,t.type===i.type?u:ss[i.type],r,a,o,s))})}else u.length?e(t,u,r,a,o,s):s?r(t,o):e(t,ss["*"],r,a,o,!0)}(t,ss[t.type],i,e)},1)}function ze(e,t,n,i){void 0===i&&(i=null);var r="call"+se(n),r=e.reduce(Ye(r),i),i=r===us,r=i?null:t[n](r);return function(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,r,i),r}function Ye(e){return function(t,n){return t===us?us:n[e]?n[e](t):t}}function Ge(e,t){var n=ls[e.id()],i=null;if(null==n)return i=t(e),ls[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],o=a[0],a=a[1];o===t&&(i=a)}return null===i&&(i=t(e),n.push([t,i])),i}function Xe(e){return e=Te(e=void 0===e?"":e),ps[e.toLowerCase()]||""}function Ke(e){var t;return e=Array.isArray(e)?(t=[],e.forEach(function(e){e=Ke(e),Array.isArray(e)?t=t.concat(e):i(e)&&t.push(e)}),t):"string"==typeof e&&e.trim()?[Qe({src:e})]:i(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Qe(e)]:[]}function Qe(e){var t;return e.type||(t=Xe(e.src))&&(e.type=t),e}function Je(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{
if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Ze(e,t,n){try{e.style[t]=n}catch(e){return}}function et(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),t=Math.floor(t/3600);return(r=0<(r=isNaN(e)||e===1/0?i=n="-":r)||0<t?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)}function tt(e,t){return ys(e,t=void 0===t?e:t)}function nt(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))}function it(e,t){return nt(e/t*100,0,100).toFixed(2)+"%"}function rt(e,t){if((e=t?t(e):e)&&"none"!==e)return e}function at(e){if((i=e.el()).hasAttribute("src"))return e.triggerSourceset(i.src),1;var t=e.$$("source"),n=[],i="";if(t.length){for(var r=0;r<t.length;r++){var a=t[r].src;a&&-1===n.indexOf(a)&&n.push(a)}return!!n.length&&(1===n.length&&(i=n[0]),e.triggerSourceset(i),!0)}}function ot(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n}function st(e){var t,n,i,r=e.el();r.resetSourceWatch_||(t={},n=ot([e.el(),pa.HTMLMediaElement.prototype,pa.Element.prototype,Ps],"innerHTML"),i=function(t){return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=t.apply(r,i);return at(e),o}},["append","appendChild","insertAdjacentHTML"].forEach(function(e){r[e]&&(t[e]=r[e],r[e]=i(t[e]))}),Object.defineProperty(r,"innerHTML",le(n,{set:i(n.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.defineProperty(r,"innerHTML",n)},e.one("sourceset",r.resetSourceWatch_))}function lt(e){var t,n,i,r;e.featuresSourceset&&((t=e.el()).resetSourceset_||(n=ot([e.el(),pa.HTMLMediaElement.prototype,Ls],"src"),i=t.setAttribute,r=t.load,Object.defineProperty(t,"src",le(n,{set:function(i){return i=n.set.call(t,i),e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,r){return r=i.call(t,n,r),/src/i.test(n)&&e.triggerSourceset(t.src),r},t.load=function(){var n=r.call(t);return at(e)||(e.triggerSourceset(""),st(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):at(e)||st(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}))}function ut(e,t,n,i){function r(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})}var a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return(i=void 0===i||i)&&(a.set=r),Object.defineProperty(e,t,a)}function ct(e){return zs.hasOwnProperty(e)}function dt(e){return ct(e)?zs[e]:void 0}function ht(e,t,n){n=(n?"before":"")+"pluginsetup",e.trigger(n,t),e.trigger(n+":"+t.name,t)}function pt(e,t){function n(){ht(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Ys(this,e),ht(this,{name:e,plugin:t,instance:n}),n}return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}function ft(e,t){return t.prototype.name=e,function(){ht(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=qs(t,[this].concat(i));return this[e]=function(){return a},ht(this,a.getEventHash()),a}}function mt(e,t,n){if(a=mt.getPlayer(e))return t&&Ia.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&a.ready(n),a;var r="string"==typeof e?eo("#"+Ks(e)):e;if(!u(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Ia.warn("The element supplied is not included in the DOM"),t=t||{},ma("beforesetup").forEach(function(e){e=e(r,le(t)),i(e)&&!Array.isArray(e)?t=le(t,e):Ia.error("please return an object in beforesetup hooks")});var a=new(yo.getComponent("Player"))(r,t,n);return ma("setup").forEach(function(e){return e(a)}),a}function gt(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=pa.location&&pa.location.href||"");var n="function"==typeof pa.URL,i=/^\/\//.test(e),r=!pa.location&&!/\/\//i.test(e);return n?e=new pa.URL(e,pa.location||Js):/\/\//i.test(e)||(e=Qs.buildAbsoluteURL(pa.location&&pa.location.href||"",e)),n?(n=new URL(t,e),r?n.href.slice(Js.length):i?n.href.slice(n.protocol.length):n.href):Qs.buildAbsoluteURL(e,t)}function vt(e){for(var t=el(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function yt(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),e={};return t[1]&&(e.length=parseInt(t[1],10)),t[2]&&(e.offset=parseInt(t[2],10)),e}function _t(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i}function bt(e){var t={};return Object.keys(e).forEach(function(n){t[n.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})]=e[n]}),t}function Tt(e){var t,n,i,r,a=e.serverControl,o=e.targetDuration,s=e.partTargetDuration;a&&(t="#EXT-X-SERVER-CONTROL",n="holdBack",i="partHoldBack",r=o&&3*o,e=s&&2*s,o&&!a.hasOwnProperty(n)&&(a[n]=r,this.trigger("info",{message:t+" defaulting HOLD-BACK to targetDuration * 3 ("+r+")."})),r&&a[n]<r&&(this.trigger("warn",{message:t+" clamping HOLD-BACK ("+a[n]+") to targetDuration * 3 ("+r+")"}),a[n]=r),s&&!a.hasOwnProperty(i)&&(a[i]=3*s,this.trigger("info",{message:t+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+a[i]+")."})),s&&a[i]<e&&(this.trigger("warn",{message:t+" clamping PART-HOLD-BACK ("+a[i]+") to partTargetDuration * 2 ("+e+")."}),a[i]=e))}function St(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})}function wt(e){var e=(e=void 0===e?"":e).split(","),t=[];return e.forEach(function(e){var n;e=e.trim(),ol.forEach(function(i){var r,a=al[i].exec(e.toLowerCase());!a||a.length<=1||(n=i,r=e.substring(0,a[1].length),a=e.replace(r,""),t.push({type:r,details:a,mediaType:i}))}),n||t.push({type:e,details:"",mediaType:"unknown"})}),t}function Et(e){return al.audio.test((e=void 0===e?"":e).trim().toLowerCase())}function Ct(e){if(e&&"string"==typeof e){var t=e.toLowerCase().split(",").map(function(e){return St(e.trim())}),n="video";1===t.length&&Et(t[0])?n="audio":1===t.length&&(i=t[0],al.text.test((i=void 0===i?"":i).trim().toLowerCase()))&&(n="application");var i="mp4";return t.every(function(e){return al.mp4.test(e)})?i="mp4":t.every(function(e){return al.webm.test(e)})?i="webm":t.every(function(e){return al.ogg.test(e)})&&(i="ogg"),n+"/"+i+';codecs="'+e+'"'}}function kt(e){return void 0===e&&(e=""),pa.MediaSource&&pa.MediaSource.isTypeSupported&&pa.MediaSource.isTypeSupported(Ct(e))||!1}function xt(e){return(e=void 0===e?"":e).toLowerCase().split(",").every(function(e){e=e.trim();for(var t=0;t<sl.length;t++)if(al["muxer"+sl[t]].test(e))return!0;return!1})}function It(e){return ul.test(e)?"hls":cl.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}function Dt(e,t){return(t=void 0===t?Object:t)&&"function"==typeof t.freeze?t.freeze(e):e}function At(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,At)}function Ot(){}function Pt(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function Lt(e,t,n){for(var i=e.tagName,r=null,a=e.length;a--;){var o=e[a],s=o.qName,l=o.value,s=0<(c=s.indexOf(":"))?(u=o.prefix=s.slice(0,c),d=s.slice(c+1),"xmlns"===u&&d):(u=null,"xmlns"===(d=s)&&"");o.localName=d,!1!==s&&(null==r&&(r={},Mt(n,n={})),n[s]=r[s]=l,o.uri=ml.XMLNS,t.startPrefixMapping(s,l))}for(var u,a=e.length;a--;)(u=(o=e[a]).prefix)&&("xml"===u&&(o.uri=ml.XML),"xmlns"!==u&&(o.uri=n[u||""]));var c,d=0<(c=i.indexOf(":"))?(u=e.prefix=i.slice(0,c),e.localName=i.slice(c+1)):(u=null,e.localName=i),h=e.uri=n[u||""];if(t.startElement(h,d,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,1;if(t.endElement(h,d,i),r)for(u in r)t.endPrefixMapping(u)}function Mt(e,t){for(var n in e)t[n]=e[n]}function Nt(){this.attributeNames={}}function Rt(e){return""!==e}function Ft(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function jt(e){return e?(e=(e=e)?e.split(/[\t\n\f\r ]+/).filter(Rt):[],Object.keys(e.reduce(Ft,{}))):[]}function Ut(e,t){for(var n in e)t[n]=e[n]}function Bt(e,t){var n,i=e.prototype;i instanceof t||((n=function(){}).prototype=t.prototype,Ut(i,n=new n),e.prototype=i=n),i.constructor!=e&&(i.constructor=e)}function Ht(e,t){var n;return t instanceof Error?n=t:(n=this,Error.call(this,Dl[e]),this.message=Dl[e],Error.captureStackTrace&&Error.captureStackTrace(this,Ht)),n.code=e,t&&(this.message=this.message+": "+t),n}function Vt(){}function qt(e,t){this._node=e,this._refresh=t,$t(this)}function $t(e){var t,n=e._node._inc||e._node.ownerDocument._inc;e._inc!=n&&(t=e._refresh(e._node),Sn(e,"length",t.length),Ut(t,e),e._inc=n)}function Wt(){}function zt(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function Yt(e,t,n,i){i?t[zt(t,i)]=n:t[t.length++]=n,!e||(t=(n.ownerElement=e).ownerDocument)&&(i&&en(t,e,i),e=e,n=n,(t=t)&&t._inc++,n.namespaceURI===yl.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value))}function Gt(e,t,n){var i=zt(t,n);if(!(0<=i))throw Ht(8,new Error(e.tagName+"@"+n));for(var r,a=t.length-1;i<a;)t[i]=t[++i];t.length=a,!e||(r=e.ownerDocument)&&(en(r,e,n),n.ownerElement=null)}function Xt(){}function Kt(){}function Qt(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function Jt(e,t){if(t(e))return 1;if(e=e.firstChild)do{if(Jt(e,t))return 1}while(e=e.nextSibling)}function Zt(){}function en(e,t,n){e&&e._inc++,n.namespaceURI===yl.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function tn(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)r=(i[a++]=r).nextSibling;i.length=a}}}function nn(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,tn(e.ownerDocument,e),t}function rn(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===Il){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;for(i=n?n.previousSibling:e.lastChild,r.previousSibling=i,a.nextSibling=n,i?i.nextSibling=r:e.firstChild=r,null==n?e.lastChild=a:n.previousSibling=a;r.parentNode=e,r!==a&&(r=r.nextSibling););return tn(e.ownerDocument||e,e),t.nodeType==Il&&(t.firstChild=t.lastChild=null),t}function an(){this._nsMap={}}function on(){}function sn(){}function ln(){}function un(){}function cn(){}function dn(){}function hn(){}function pn(){}function fn(){}function mn(){}function gn(){}function vn(){}function yn(e,t){var n,i=[],r=9==this.nodeType&&this.documentElement||this,a=r.prefix,o=r.namespaceURI;return Tn(this,i,e,t,n=o&&null==a&&null==(a=r.lookupPrefix(o))?[{namespace:o,prefix:null}]:n),i.join("")}function _n(e,t,n){var i=e.prefix||"",r=e.namespaceURI;if(r&&("xml"!==i||r!==yl.XML)&&r!==yl.XMLNS){for(var a=n.length;a--;){var o=n[a];if(o.prefix===i)return o.namespace!==r}return 1}}function bn(e,t,n){e.push(" ",t,'="',n.replace(/[<&"]/g,Qt),'"')}function Tn(e,t,n,i,r){if(r=r||[],i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case _l:var a=e.attributes,o=a.length,s=e.firstChild,l=e.tagName,u=l;if(!(n=yl.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var c,d=0;d<a.length;d++)if("xmlns"===a.item(d).name){c=a.item(d).value;break}if(c!==e.namespaceURI)for(var h=r.length-1;0<=h;h--){var p=r[h];if(p.namespace===e.namespaceURI){p.prefix&&(u=p.prefix+":"+l);break}}}t.push("<",u);for(var f=0;f<o;f++)"xmlns"==(m=a.item(f)).prefix?r.push({prefix:m.localName,namespace:m.value}):"xmlns"==m.nodeName&&r.push({prefix:"",namespace:m.value});for(var m,g,v,f=0;f<o;f++)_n(m=a.item(f),0,r)&&(bn(t,(g=m.prefix||"")?"xmlns:"+g:"xmlns",v=m.namespaceURI),r.push({prefix:g,namespace:v})),Tn(m,t,n,i,r);if(l===u&&_n(e,0,r)&&(bn(t,(g=e.prefix||"")?"xmlns:"+g:"xmlns",v=e.namespaceURI),r.push({prefix:g,namespace:v})),s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;s;)s.data?t.push(s.data):Tn(s,t,n,i,r.slice()),s=s.nextSibling;else for(;s;)Tn(s,t,n,i,r.slice()),s=s.nextSibling;t.push("</",u,">")}else t.push("/>");return;case kl:case Il:for(s=e.firstChild;s;)Tn(s,t,n,i,r.slice()),s=s.nextSibling;return;case bl:return bn(t,e.name,e.value),0;case Tl:return t.push(e.data.replace(/[<&]/g,Qt).replace(/]]>/g,"]]&gt;"));case Sl:return t.push("<![CDATA[",e.data,"]]>");case Cl:return t.push("\x3c!--",e.data,"--\x3e");case xl:var y=e.publicId,_=e.systemId;return t.push("<!DOCTYPE ",e.name),void(y?(t.push(" PUBLIC ",y),_&&"."!=_&&t.push(" ",_),t.push(">")):_&&"."!=_?t.push(" SYSTEM ",_,">"):((_=e.internalSubset)&&t.push(" [",_,"]"),t.push(">")));case El:return t.push("<?",e.target," ",e.data,"?>");case wl:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function Sn(e,t,n){e[t]=n}function wn(e){return!!e&&"object"==typeof e}function En(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return"object"!=typeof t||Object.keys(t).forEach(function(n){Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=e[n].concat(t[n]):wn(e[n])&&wn(t[n])?e[n]=En(e[n],t[n]):e[n]=t[n]}),e},{})}function Cn(e){return e.reduce(function(e,t){return e.concat(t)},[])}function kn(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function xn(e){var t=e.baseUrl,n=void 0===(i=e.source)?"":i,i=void 0===(i=e.range)?"":i,e=void 0===(e=e.indexRange)?"":e,n={uri:n,resolvedUri:gt((void 0===t?"":t)||"",n)};return(i||e)&&(i=(i||e).split("-"),e=parseInt(i[0],10),i=parseInt(i[1],10),n.byterange={length:i-e+1,offset:e}),n}function In(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e}function Dn(e){var t,n=e.type,i=e.duration,r=e.timescale,a=void 0===r?1:r,o=e.periodDuration,s=e.sourceDuration,e=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}((r=Ul[n](e)).start,r.end).map((t=e,function(e,n){var i=t.duration,r=t.timescale,a=t.periodIndex,o=t.startNumber;return{number:(void 0===o?1:o)+e,duration:i/(void 0===r?1:r),timeline:a,time:n*i}}));return"static"===n&&(e[n=e.length-1].duration=("number"==typeof o?o:s)-i/a*n),e}function An(e){var t=e.baseUrl,n=void 0===(r=e.initialization)?{}:r,i=e.sourceDuration,r=void 0===(a=e.indexRange)?"":a,a=e.duration;if(!t)throw new Error(Rl);return n=xn({baseUrl:t,source:n.sourceURL,range:n.range}),(r=xn({baseUrl:t,source:t,indexRange:r})).map=n,a?(e=Dn(e)).length&&(r.duration=e[0].duration,r.timeline=e[0].timeline):i&&(r.duration=i,r.timeline=0),r.number=0,[r]}function On(e,t,n){for(var i=e.sidx.map||null,r=e.sidx.duration,a=e.timeline||0,o=(o=e.sidx.byterange).offset+o.length,s=t.timescale,l=t.references.filter(function(e){return 1!==e.referenceType}),u=[],c=e.endList?"static":"dynamic",d=o+t.firstOffset,h=0;h<l.length;h++){var p=t.references[h],f=p.referencedSize,p=p.subsegmentDuration,p=An({baseUrl:n,timescale:s,timeline:a,periodIndex:a,duration:p,sourceDuration:r,indexRange:d+"-"+(d+f-1),type:c})[0];i&&(p.map=i),u.push(p),d+=f}return e.segments=u,e}function Pn(e){return e&&e.uri+"-"+(t=e.byterange,e=t.offset+t.length-1,t.offset+"-"+e);var t}function Ln(e){var t;return(t=e.reduce(function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");return e[i]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t,e},{}),Object.keys(t).map(function(e){return t[e]})).map(function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce(function(e,t,i){return t[n]&&e.push(i),e},[])),e})}function Mn(e,t){var n=Pn(e.sidx);return(n=n&&t[n]&&t[n].sidx)&&On(e,n,e.sidx.resolvedUri),e}function Nn(e,t,n){var i;return void 0===t&&(t={}),void 0===n&&(n=!1),e=e.reduce(function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",s=r.attributes.label||"main";e[s=o&&!r.attributes.label?r.attributes.lang+(a?" ("+a+")":""):s]||(e[s]={language:o,autoselect:!0,default:"main"===a,playlists:[],uri:""});var l,u,c,d,d=Mn((u=n,c=(l=r).attributes,d=l.segments,o=l.sidx,d={attributes:((l={NAME:c.id,BANDWIDTH:c.bandwidth,CODECS:c.codecs})["PROGRAM-ID"]=1,l),uri:"",endList:"static"===c.type,timeline:c.periodIndex,resolvedUri:"",targetDuration:c.duration,segments:d,mediaSequence:d.length?d[0].number:1},c.contentProtection&&(d.contentProtection=c.contentProtection),o&&(d.sidx=o),u&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d),t);return e[s].playlists.push(d),void 0===i&&"main"===a&&((i=r).default=!0),e},{}),i||(e[Object.keys(e)[0]].default=!0),e}function Rn(e){var t=e.attributes,n=e.segments,i=e.sidx,n={attributes:((e={NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,e),uri:"",endList:"static"===t.type,timeline:t.periodIndex,resolvedUri:"",targetDuration:t.duration,segments:n,mediaSequence:n.length?n[0].number:1};return t.contentProtection&&(n.contentProtection=t.contentProtection),i&&(n.sidx=i),n}function Fn(e){return"video/mp4"===(e=e.attributes).mimeType||"video/webm"===e.mimeType||"video"===e.contentType}function jn(e){return"audio/mp4"===(e=e.attributes).mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType}function Un(e){return"text/vtt"===(e=e.attributes).mimeType||"text"===e.contentType}function Bn(e,t,n){if(void 0===n&&(n={}),!e.length)return{};var i=(c=e[0].attributes).sourceDuration,r=c.type,a=c.suggestedPresentationDelay,o=c.minimumUpdatePeriod,s=Ln(e.filter(Fn)).map(Rn),l=Ln(e.filter(jn)),u=e.filter(Un),c=e.map(function(e){return e.attributes.captionServices}).filter(Boolean),s={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:((e={AUDIO:{},VIDEO:{}})["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:i,playlists:function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Mn(e[n],t);return e}(s,n)};0<=o&&(s.minimumUpdatePeriod=1e3*o),t&&(s.locations=t),"dynamic"===r&&(s.suggestedPresentationDelay=a);var d,a=0===s.playlists.length;return l.length&&(s.mediaGroups.AUDIO.audio=Nn(l,n,a)),u.length&&(s.mediaGroups.SUBTITLES.subs=(void 0===(d=n)&&(d={}),u.reduce(function(e,t){var n=t.attributes.lang||"text";return e[n]||(e[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),e[n].playlists.push(Mn(function(e){var t=e.attributes,n=e.segments;return void 0===n&&(n=[{uri:t.baseUrl,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",duration:t.sourceDuration,number:0}],t.duration=t.sourceDuration),(e={NAME:t.id,BANDWIDTH:t.bandwidth})["PROGRAM-ID"]=1,t.codecs&&(e.CODECS=t.codecs),{attributes:e,uri:"",endList:"static"===t.type,timeline:t.periodIndex,resolvedUri:t.baseUrl||"",targetDuration:t.duration,segments:n,mediaSequence:n.length?n[0].number:1}}(t),d)),e},{}))),c.length&&(s.mediaGroups["CLOSED-CAPTIONS"].cc=c.reduce(function(e,t){return t&&t.forEach(function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])}),e},{})),s}function Hn(e,t){for(var n,i,r,a,o,s,l=e.type,u=e.minimumUpdatePeriod,c=void 0===u?0:u,d=void 0===(u=e.media)?"":u,h=e.sourceDuration,p=void 0===(u=e.timescale)?1:u,f=void 0===(u=e.startNumber)?1:u,m=e.periodIndex,g=[],v=-1,y=0;y<t.length;y++){var _=t[y],b=_.d,T=_.r||0,S=_.t||0;v<0&&(v=S),S&&v<S&&(v=S);var w,E=void 0;E=T<0?(w=y+1)===t.length?"dynamic"===l&&0<c&&0<d.indexOf("$Number$")?(n=v,i=b,_=s=o=a=r=void 0,r=(S=e).NOW,a=S.clientOffset,o=S.availabilityStartTime,s=S.timescale,_=S.start,S=S.minimumUpdatePeriod,Math.ceil((((r+a)/1e3+(void 0===S?0:S)-(o+(void 0===_?0:_)))*(void 0===s?1:s)-n)/i)):(h*p-v)/b:(t[w].t-v)/b:T+1;for(var C=f+g.length+E,k=f+g.length;k<C;)g.push({number:k,duration:b/p,time:v,timeline:m}),v+=b,k++}return g}function Vn(e,t){return e.replace(Bl,(n=t,function(e,t,i,r){return"$$"===e?"$":void 0===n[t]?e:(e=""+n[t],"RepresentationID"===t||(r=i?parseInt(r,10):1)<=e.length?e:new Array(r-e.length+1).join("0")+e)}));var n}function qn(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=void 0===(i=e.initialization)?{sourceURL:"",range:""}:i,r=xn({baseUrl:e.baseUrl,source:Vn(i.sourceURL,n),range:i.range});return(i=t,(t=e).duration||i?t.duration?Dn(t):Hn(t,i):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]).map(function(t){n.Number=t.number,n.Time=t.time;var i=Vn(e.media||"",n),a=e.timescale||1,o=e.presentationTimeOffset||0,a=e.periodStart+(t.time-o)/a;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:gt(e.baseUrl||"",i),map:r,number:t.number,presentationTime:a}})}function $n(e,t){var n=e.duration,i=void 0===(i=e.segmentUrls)?[]:i,r=e.periodStart;if(!n&&!t||n&&t)throw new Error(Fl);var a,o=i.map(function(t){return i=t,t=(n=e).baseUrl,n=n.initialization,n=xn({baseUrl:t,source:(n=void 0===n?{}:n).sourceURL,range:n.range}),(i=xn({baseUrl:t,source:i.media,range:i.mediaRange})).map=n,i;var n,i});return n&&(a=Dn(e)),(a=t?Hn(e,t):a).map(function(t,n){if(o[n]){var i=o[n],a=e.timescale||1,n=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=r+(t.time-n)/a,i}}).filter(function(e){return e})}function Wn(e){var t,n=e.attributes,i=e.segmentInfo;i.template?(a=qn,t=En(n,i.template)):i.base?(a=An,t=En(n,i.base)):i.list&&(a=$n,t=En(n,i.list));var r={attributes:n};if(!a)return r;var a,e=a(t,i.segmentTimeline);return t.duration?(n=t.duration,a=t.timescale,t.duration=n/(void 0===a?1:a)):e.length?t.duration=e.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0,r.attributes=t,r.segments=e,i.base&&t.indexRange&&(r.sidx=e[0],r.segments=[]),r}function zn(e,t){return kn(e.childNodes).filter(function(e){return e.tagName===t})}function Yn(e){return e.textContent.trim()}function Gn(e){if(!(r=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e)))return 0;var t=(a=r.slice(1))[0],n=a[1],i=a[2],e=a[3],r=a[4],a=a[5];return 31536e3*parseFloat(t||0)+2592e3*parseFloat(n||0)+86400*parseFloat(i||0)+3600*parseFloat(e||0)+60*parseFloat(r||0)+parseFloat(a||0)}function Xn(e){return e&&e.attributes?kn(e.attributes).reduce(function(e,t){var n=Hl[t.name]||Hl.DEFAULT;return e[t.name]=n(t.value),e},{}):{}}function Kn(e,t){return t.length?Cn(e.map(function(e){return t.map(function(t){return gt(e,Yn(t))})})):e}function Qn(e){var t=zn(e,"SegmentTemplate")[0],n=zn(e,"SegmentList")[0],i=n&&zn(n,"SegmentURL").map(function(e){return En({tag:"SegmentURL"},Xn(e))}),r=zn(e,"SegmentBase")[0],e=(a=n||t)&&zn(a,"SegmentTimeline")[0],a=(a=n||r||t)&&zn(a,"Initialization")[0];(t=t&&Xn(t))&&a?t.initialization=a&&Xn(a):t&&t.initialization&&(t.initialization={sourceURL:t.initialization});var o={template:t,segmentTimeline:e&&zn(e,"S").map(Xn),list:n&&En(Xn(n),{segmentUrls:i,initialization:Xn(a)}),base:r&&En(Xn(r),{initialization:Xn(a)})};return Object.keys(o).forEach(function(e){o[e]||delete o[e]}),o}function Jn(e,t,n){return function(i){var r=Xn(i),a=Kn(t,zn(i,"BaseURL")),o=zn(i,"Role")[0],o={role:Xn(o)},r=En(e,r,o),o=zn(i,"Accessibility")[0],o="urn:scte:dash:cc:cea-608:2015"===(o=Xn(o)).schemeIdUri?o.value.split(";").map(function(e){var t,n,i;return/^CC\d=/.test(i=e)?(n=(t=e.split("="))[0],i=t[1]):/^CC\d$/.test(e)&&(n=e),{channel:n,language:i}}):"urn:scte:dash:cc:cea-708:2015"===o.schemeIdUri?o.value.split(";").map(function(e){var t,n,i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};return/=/.test(e)?(t=(n=e.split("="))[0],n=void 0===(n=n[1])?"":n,i.channel=t,i.language=e,n.split(",").forEach(function(e){var t=e.split(":"),e=t[0],t=t[1];"lang"===e?i.language=t:"er"===e?i.easyReader=Number(t):"war"===e?i.aspectRatio=Number(t):"3D"===e&&(i["3D"]=Number(t))})):i.language=e,i.channel&&(i.channel="SERVICE"+i.channel),i}):void 0;o&&(r=En(r,{captionServices:o})),(o=zn(i,"Label")[0])&&o.childNodes.length&&(s=o.childNodes[0].nodeValue.trim(),r=En(r,{label:s}));var s=zn(i,"ContentProtection").reduce(function(e,t){var n=Xn(t),i=Vl[n.schemeIdUri];return i&&(e[i]={attributes:n},(t=zn(t,"cenc:pssh")[0])&&(t=(t=Yn(t))&&vt(t),e[i].pssh=t)),e},{});Object.keys(s).length&&(r=En(r,{contentProtection:s}));var l,u,c,s=Qn(i),i=zn(i,"Representation"),s=En(n,s);return Cn(i.map((l=r,u=a,c=s,function(e){var t=zn(e,"BaseURL"),t=Kn(u,t),n=En(l,Xn(e)),i=Qn(e);return t.map(function(e){return{segmentInfo:En(c,i),attributes:En(n,{baseUrl:e})}})})))}}function Zn(e,t){var n=t=void 0===t?{}:t,i=void 0===(a=n.manifestUri)?"":a,t=void 0===(r=n.NOW)?Date.now():r,r=void 0===(a=n.clientOffset)?0:a;if(!(n=zn(e,"Period")).length)throw new Error(Ll);var a=zn(e,"Location"),o=Xn(e),e=Kn([i],zn(e,"BaseURL"));o.type=o.type||"static",o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=t,o.clientOffset=r,a.length&&(o.locations=a.map(Yn));var s,l,u=[];return n.forEach(function(e,t){var n,i=Xn(e),r=u[t-1];i.start=(n={attributes:i,priorPeriodAttributes:r?r.attributes:null,mpdType:o.type},t=n.attributes,r=n.priorPeriodAttributes,n=n.mpdType,"number"==typeof t.start?t.start:r&&"number"==typeof r.start&&"number"==typeof r.duration?r.start+r.duration:r||"static"!==n?null:0),u.push({node:e,attributes:i})}),{locations:o.locations,representationInfo:Cn(u.map((s=o,l=e,function(e,t){var n=Kn(l,zn(e.node,"BaseURL")),i=parseInt(e.attributes.id,10),t=pa.isNaN(i)?t:i,i=En(s,{periodIndex:t,periodStart:e.attributes.start});return"number"==typeof e.attributes.duration&&(i.periodDuration=e.attributes.duration),t=zn(e.node,"AdaptationSet"),e=Qn(e.node),Cn(t.map(Jn(i,n,e)))})))}}function ei(e){if(""===e)throw new Error(Ml);var t,n,i=new Pl;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(Nl);return n}function ti(e,t){void 0===t&&(t={});var n=Zn(ei(e),t),e=n.representationInfo.map(Wn);return Bn(e,n.locations,t.sidxMapping)}function ni(e){return function(e){if(!(e=zn(e,"UTCTiming")[0]))return null;var t=Xn(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(jl)}return t}(ei(e))}function ii(e){return e instanceof Uint8Array?e:(Array.isArray(e)||(t=e,ArrayBuffer.isView(t))||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0));var t}function ri(e,t){var n=void 0!==(t=(void 0===t?{}:t).le)&&t;e=Wl(e="bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e?0:e);for(var i=(t=e,Math.ceil(t.toString(2).length/8)),r=new Uint8Array(new ArrayBuffer(i)),a=0;a<i;a++){var o=n?a:Math.abs(a+1-r.length);r[o]=Number(e/zl[a]&Wl(255)),e<0&&(r[o]=Math.abs(~r[o]),r[o]-=0===a?1:2)}return r}function ai(e,t){if("string"!=typeof(e="string"!=typeof e&&e&&"function"==typeof e.toString?e.toString():e))return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}function oi(e,t,n){var i=void 0===n?{}:n,r=void 0===(n=i.offset)?0:n,a=void 0===(i=i.mask)?[]:i;return e=ii(e),i=(t=ii(t)).every||Array.prototype.every,t.length&&e.length-r>=t.length&&i.call(t,function(t,n){return t===(a[n]?a[n]&e[r+n]:e[r+n])})}function si(e,t){return void 0===t&&(t=0),(e=ii(e)).length-t<10||!oi(e,Yl,{offset:t})?t:si(e,t+=function(e,t){void 0===t&&(t=0);var n=(e=ii(e))[t+5],t=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?20+t:10+t}(e,t))}function li(e){return"string"==typeof e?ai(e):e}function ui(e,t,n){var i;void 0===n&&(n=!1),i=t,t=Array.isArray(i)?i.map(li):[li(i)],e=ii(e);var r=[];if(!t.length)return r;for(var a=0;a<e.length;){var o=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,s=e.subarray(a+4,a+8);if(0==o)break;var l=a+o;if(l>e.length){if(n)break;l=e.length}o=e.subarray(a+8,l),oi(s,t[0])&&(1===t.length?r.push(o):r.push.apply(r,ui(o,t.slice(1),n))),a=l}return r}function ci(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<Xl.length&&!(e&Xl[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=Xl[r-1]),{length:r,value:function(e,t){var n=void 0===t?{}:t,t=n.signed,t=void 0!==t&&t,n=n.le,i=void 0!==n&&n;return e=ii(e),n=i?"reduce":"reduceRight",n=(e[n]||Array.prototype[n]).call(e,function(t,n,r){return r=i?r:Math.abs(r+1-e.length),t+Wl(n)*zl[r]},Wl(0)),!t||(t=zl[e.length]/Wl(2)-Wl(1))<(n=Wl(n))&&(n-=t,n-=t,n-=Wl(2)),Number(n)}(a,{signed:i}),bytes:a}}function di(e){return"string"==typeof e?e.match(/.{1,2}/g).map(di):"number"==typeof e?ri(e):e}function hi(e,t,n){if(n>=t.length)return t.length;var i=ci(t,n,!1);if(oi(e.bytes,i.bytes))return n;var r=ci(t,n+i.length);return hi(e,t,n+r.length+r.value+i.length)}function pi(e,t){var n;n=t,t=Array.isArray(n)?n.map(di):[di(n)],e=ii(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var a=ci(e,r,!1),o=ci(e,r+a.length),s=r+a.length+o.length;127===o.value&&(o.value=hi(a,e,s),o.value!==e.length&&(o.value-=s));var l=s+o.value>e.length?e.length:s+o.value,l=e.subarray(s,l);oi(t[0],a.bytes)&&(1===t.length?i.push(l):i=i.concat(pi(l,t.slice(1)))),r+=a.length+o.length+l.length}return i}function fi(e,t,n,i){void 0===i&&(i=1/0),e=ii(e),n=[].concat(n);for(var r,a=0,o=0;a<e.length&&(o<i||r);){var s=void 0;if(oi(e.subarray(a),Kl)?s=4:oi(e.subarray(a),Ql)&&(s=3),s){if(o++,r)return function(e){for(var t=[],n=1;n<e.length-2;)oi(e.subarray(n,n+3),Jl)&&(t.push(n+2),n++),n++;if(0===t.length)return e;for(var i=e.length-t.length,r=new Uint8Array(i),a=0,n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r}(e.subarray(r,a));var l=void 0;"h264"===t?l=31&e[a+s]:"h265"===t&&(l=e[a+s]>>1&63),-1!==n.indexOf(l)&&(r=a+s),a+=s+("h264"===t?1:2)}else a++}return e.subarray(0,0)}function mi(e){e=ii(e);for(var t=0;t<tu.length;t++){var n=tu[t];if(iu[n](e))return n}return""}function gi(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t}function vi(e){return mt.log.debug?mt.log.debug.bind(mt,"VHS:",e+" >"):function(){}}function yi(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return mt.createTimeRanges(i)}function _i(e,t){return yi(e,function(e,n){return e-.1<=t&&t<=n+.1})}function bi(e,t){return yi(e,function(e){return t<=e-au})}function Ti(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")}function Si(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function wi(e){if(e&&e.length&&e.end)return e.end(e.length-1)}function Ei(e){return(e.segments||[]).reduce(function(e,t,n){return t.parts?t.parts.forEach(function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})}):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e},[])}function Ci(e){return(e=e.segments&&e.segments.length&&e.segments[e.segments.length-1])&&e.parts||[]}function ki(e){var t=e.preloadSegment;if(t)return e=t.parts,
t=(t.preloadHints||[]).reduce(function(e,t){return e+("PART"===t.type?1:0)},0),t+=e&&e.length?e.length:0}function xi(e,t){return t.endList?0:e&&e.suggestedPresentationDelay?e.suggestedPresentationDelay:(e=0<Ci(t).length)&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:e&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0}function Ii(e,t,n){if((t=void 0===t?e.mediaSequence+e.segments.length:t)<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);return i.precise?i.result:(t=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?t.result:i.result+n}function Di(e,t,n){if(!e)return 0;if(void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return pa.Infinity}return Ii(e,t,n="number"!=typeof n?0:n)}function Ai(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(r<i&&(i=(e=[r,i])[0],r=e[1]),i<0){for(var o=i;o<Math.min(0,r);o++)a+=t;i=0}for(var s=i;s<r;s++)a+=n[s].duration;return a}function Oi(e,t,n,i){return e&&e.segments?e.endList?Di(e):null===t?null:(t=Ii(e,e.mediaSequence+e.segments.length,t=t||0),n&&(t-=i="number"==typeof i?i:xi(null,e)),Math.max(0,t)):null}function Pi(e){return e.excludeUntil&&e.excludeUntil>Date.now()}function Li(e){return e.excludeUntil&&e.excludeUntil===1/0}function Mi(e){var t=Pi(e);return!e.disabled&&!t}function Ni(e,t){return t.attributes&&t.attributes[e]}function Ri(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Mi(e)&&(e.attributes.BANDWIDTH||0)<n}).length}function Fi(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))}function ji(e,t){var n,i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(n in i){for(var a in i[n])if(r=t(i[n][a]))break;if(r)break}return!!r}function Ui(e){if(!e||!e.playlists||!e.playlists.length)return ji(e,function(e){return e.playlists&&e.playlists.length||e.uri});for(var t=0;t<e.playlists.length;t++){var n=function(t){var n=e.playlists[t],t=n.attributes&&n.attributes.CODECS;return t&&t.split(",").every(Et)||ji(e,function(e){return Fi(n,e)})?"continue":{v:!1}}(t);if("continue"!==n&&"object"==typeof n)return n.v}return!0}function Bi(e,t){return e+"-"+t}function Hi(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}})}function Vi(e){var t=e.playlist,n=e.uri,e=e.id;t.id=e,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}}function qi(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)e.playlists[n].uri||(e.playlists[n].uri="placeholder-uri-"+n);var i,r=Ui(e);Hi(e,function(t,n,i,a){var o="placeholder-uri-"+n+"-"+i+"-"+a;if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===n&&!t.uri)for(var s=0;s<e.playlists.length;s++){var l=e.playlists[s];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===i)return}t.playlists=[Aa({},t)]}t.playlists.forEach(function(t,n){var i=Bi(n,o);t.uri?t.resolvedUri=t.resolvedUri||ru(e.uri,t.uri):(t.uri=0===n?o:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t})}),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Vi({playlist:n,id:Bi(t,n.uri)}),n.resolvedUri=ru(e.uri,n.uri),e.playlists[n.id]=n,(e.playlists[n.uri]=n).attributes.BANDWIDTH||lu.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),Hi(i=e,function(e){e.uri&&(e.resolvedUri=ru(i.uri,e.uri))})}function $i(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,o=[],s=0;s<r.length;s++){var l=i[s+n],u=r[s];l?(a=l.map||a,o.push(function(e,t){if(!e)return t;var n=uu(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=uu(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n}(l,u))):(a&&!u.map&&(u.map=a),o.push(u))}return o}function Wi(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=ru(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ru(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ru(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=ru(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(e){e.resolvedUri||(e.resolvedUri=ru(t,e.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(e){e.resolvedUri||(e.resolvedUri=ru(t,e.uri))})}function zi(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t}function Yi(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence}function Gi(e,t,n){void 0===n&&(n=Yi);var i=uu(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=zi(t);var a=uu(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=$i(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach(function(e){Wi(e,a.resolvedUri)});for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===t.id&&(i.playlists[s]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Hi(e,function(e,n,i,r){if(e.playlists)for(var a=0;a<e.playlists.length;a++)t.id===e.playlists[a].id&&(e.playlists[a]=t)}),i}function Xi(e,t){var n=(i=e.segments[e.segments.length-1])&&i.parts&&i.parts[i.parts.length-1],i=n&&n.duration||i&&i.duration;return t&&i?1e3*i:500*(e.partTargetDuration||e.targetDuration||10)}function Ki(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),i(t=t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode?t:new Error("XHR Failed with a response of: "+(e&&(r||e.responseText))),e)}function Qi(){function e(t,n){t=hu({timeout:45e3},t);var i=e.beforeRequest||mt.Vhs.xhr.beforeRequest;!i||"function"!=typeof i||(i=i(t))&&(t=i);var r=(!0===mt.Vhs.xhr.original?du:mt.Vhs.xhr)(t,function(e,t){return Ki(r,e,t,n)}),a=r.abort;return r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=t.uri,r.requestTime=Date.now(),r}return e.original=!0,e}function Ji(e){var t,n={};return e.byterange&&(n.Range=(t=e.byterange,e=t.offset+t.length-1,"bytes="+t.offset+"-"+e)),n}function Zi(e,t){return e=e.toString(16),"00".substring(0,2-e.length)+e+(t%2?" ":"")}function er(e){return 32<=e&&e<126?String.fromCharCode(e):"."}function tr(e){var t={};return Object.keys(e).forEach(function(n){var i=e[n];ArrayBuffer.isView(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i}),t}function nr(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}function ir(e){return e.resolvedUri}function rr(e){for(var t=Array.prototype.slice.call(e),n="",i=0;i<t.length/16;i++)n+=t.slice(16*i,16*i+16).map(Zi).join("")+" "+t.slice(16*i,16*i+16).map(er).join("")+"\n";return n}function ar(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n;if(!(n=e.callback))throw new Error("getProgramTime: callback must be provided");return t&&void 0!==i?(e=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(i<e){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t))?"estimate"===e.type?n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:e.estimatedStart}):(t={mediaSeconds:i},(e=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,n=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*n)}(i,e.segment))&&(t.programDateTime=e.toISOString()),n(null,t)):n({message:"valid programTime was not found"}):n({message:"getProgramTime: playlist and time must be provided"})}function or(e){var t=e.programTime,n=e.playlist,i=e.retryCount,r=void 0===i?2:i,a=e.seekTo,o=e.pauseAfterSeek,s=void 0===o||o,l=e.tech,u=e.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");return void 0!==t&&n&&a?n.endList||l.hasStarted_?function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(n)?(i=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;if(n<(r=t.segments[0]).dateTimeObject)return null;for(var i=0;i<t.segments.length-1;i++){var r=t.segments[i];if(n<t.segments[i+1].dateTimeObject)break}var a,o=t.segments[t.segments.length-1],e=o.dateTimeObject,a=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return new Date(e.getTime()+1e3*a)<n?null:{segment:r=e<n?o:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:su.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"}}(t,n))?(o=i.segment,e=function(e,t){var n;try{i=new Date(e),n=new Date(t)}catch(e){}var i=i.getTime();return(n.getTime()-i)/1e3}(o.dateTimeObject,t),"estimate"===i.type?0===r?u({message:t+" is not buffered yet. Try again"}):(a(i.estimatedStart+e),void l.one("seeked",function(){or({programTime:t,playlist:n,retryCount:r-1,seekTo:a,pauseAfterSeek:s,tech:l,callback:u})})):(e=o.start+e,l.one("seeked",function(){return u(null,l.currentTime())}),s&&l.pause(),void a(e))):u({message:t+" was not found in the stream"}):u({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri}):u({message:"player must be playing a live stream to start buffering"}):u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}function sr(e,t){if(4===e.readyState)return t()}function lr(e,t,n){function i(e,t,i,r){return t.abort(),s=!0,n(e,t,i,r)}function r(e,t){if(!s){if(e)return i(e,t,"",o);var n=t.responseText.substring(o&&o.byteLength||0,t.responseText.length);return o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter(function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})).length<=1)return ii(t[0]);var i=t.reduce(function(e,t,n){return e+(t.byteLength||t.length)},0),r=new Uint8Array(i),a=0;return t.forEach(function(e){e=ii(e),r.set(e,a),a+=e.byteLength}),r}(o,ai(n,!0)),(a=a||si(o),o.length<10||a&&o.length<a+2)?sr(t,function(){return i(e,t,"",o)}):(n=mi(o),"ts"===n&&o.length<188||!n&&o.length<376?sr(t,function(){return i(e,t,"",o)}):i(null,t,n,o))}}var a,o=[],s=!1,l=t({uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",function(t){return t.total,t.loaded,Ki(e,null,{statusCode:e.status},r)})}},function(e,t){return Ki(l,e,t,r)});return l}function ur(e,t){if(!Yi(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){if(i=i.byterange,r=r.byterange,i&&!r||!i&&r)return!1;if(i.offset!==r.offset||i.length!==r.length)return!1}}return!0}function cr(e,t){var n,i={};for(n in e){var r=e[n].sidx;if(r){var a=Pn(r);if(!t[a])break;var o=t[a].sidxInfo;o=o,r=r,(Boolean(!o.map&&!r.map)||Boolean(o.map&&r.map&&o.map.byterange.offset===r.map.byterange.offset&&o.map.byterange.length===r.map.byterange.length))&&o.uri===r.uri&&o.byterange.offset===r.byterange.offset&&o.byterange.length===r.byterange.length&&(i[a]=t[a])}}return i}function dr(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e}function hr(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,l=e.onAudioTimingInfo,u=e.onVideoTimingInfo,c=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,h=e.onId3,p=e.onCaptions,f=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},_=v;t.onmessage=function(n){var i;t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,o=i.captions,s=i.captionStreams,l=i.metadata,u=i.videoFrameDtsTime,i=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:l}),e=e.data.segment.boxes||{data:e.data.segment.data},a={type:r,data:new Uint8Array(e.data,e.data.byteOffset,e.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)},void 0!==u&&(a.videoFrameDtsTime=u),void 0!==i&&(a.videoFramePtsTime=i),n(a)}(n,y,o),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&(y.gopInfo=n.data.gopInfo),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&d(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,n=(i={transmuxedData:y,callback:f}).transmuxedData,i=i.callback,n.buffer=[],i(n),vu(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength&&(r=n instanceof ArrayBuffer?n:n.buffer,a=n instanceof ArrayBuffer?0:n.byteOffset,t.postMessage({action:"push",data:r,byteOffset:a,byteLength:n.byteLength},[r])),v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})}function pr(e,t){e.postMessage({action:t}),vu(e)}function fr(e,t){if(!t.currentTransmux)return t.currentTransmux=e,pr(t,e),0;t.transmuxQueue.push(pr.bind(null,t,e))}function mr(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void hr(e);e.transmuxer.transmuxQueue.push(e)}function gr(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=Aa({},e,{endAction:null,transmuxer:null,callback:null}),a=function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))};t.addEventListener("message",a),e.data?(a=e.data instanceof ArrayBuffer,r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength,a=[a?e.data:e.data.buffer],t.postMessage(r,a)):t.postMessage(r)}function vr(e){e.forEach(function(e){e.abort()})}function yr(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Tu,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Su,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:bu,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:bu,xhr:t}:null}function _r(e,t,n){return function(i,r){var a=r.response,i=yr(i,r);if(i)return n(i,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:bu,xhr:r},e);for(var a=new DataView(a),o=new Uint32Array([a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)]),s=0;s<t.length;s++)t[s].bytes=o;return n(null,e)}}function br(e,t){var n=mi(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:bu})}gr({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,n=n.data;return e.map.bytes=n,i.forEach(function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||"number"==typeof(e.map.tracks[t.type]=t).id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale)}),t(null)}})}function Tr(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){return(e=yr(e,r))?n(e,t):(e="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response,t.stats={bandwidth:(r=r).bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0},t.key?t.encryptedBytes=new Uint8Array(e):t.bytes=new Uint8Array(e),n(null,t))}}function Sr(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,e=t.map&&t.map.tracks||{},f=Boolean(e.audio&&e.video),m=r.bind(null,t,"audio","start"),g=r.bind(null,t,"audio","end"),v=r.bind(null,t,"video","start"),y=r.bind(null,t,"video","end");gr({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data,e=e.result,e&&(i(t,{hasAudio:e.hasAudio,hasVideo:e.hasVideo,isMuxed:f}),i=null,e.hasAudio&&!f&&m(e.audioStart),e.hasVideo&&v(e.videoStart),v=m=null),mr({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:f,onData:function(e){e.type="combined"===e.type?"video":e.type,d(t,e)},onTrackInfo:function(e){i&&(f&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),g&&void 0!==e.end&&g(e.end)},onVideoTimingInfo:function(e){v&&void 0!==e.start&&(v(e.start),v=null),y&&void 0!==e.end&&y(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){l(t,[e])},isEndOfTimeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})}function wr(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=new Uint8Array(n);if(0<ui(f,["moof"]).length){t.isFmp4=!0;var m=t.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),i(t,g);var v=function(e){d(t,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&l(t,e),h(null,t,{})};gr({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data,e=e.startTime;n=i.buffer,t.bytes=f=i,g.hasAudio&&!g.isMuxed&&r(t,"audio","start",e),g.hasVideo&&r(t,"video","start",e),m.video&&i.byteLength&&t.transmuxer?gr({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach(function(e){p(mt.mergeOptions(e,{stream:"mp4CaptionParser"}))}),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=mi(f)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),h(null,t,{}),0;Sr({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})}function Er(e,t){var n=e.id,i=e.key,r=e.encryptedBytes,a=e.decryptionWorker,e=function e(i){i.data.source===n&&(a.removeEventListener("message",e),i=i.data.decrypted,t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength)))};a.addEventListener("message",e),e=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),a.postMessage(tr({source:n,encrypted:r,key:e,iv:i.iv}),[r.buffer,e.buffer])}function Cr(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,f=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,vr(t),h(e,g);if((f+=1)===t.length){var v=function(){if(g.encryptedBytes)return t=(e={decryptionWorker:n,segment:g,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p}).decryptionWorker,f=e.segment,m=e.trackInfoFn,v=e.timingInfoFn,y=e.videoSegmentTimingInfoFn,_=e.audioSegmentTimingInfoFn,b=e.id3Fn,T=e.captionsFn,S=e.isEndOfTimeline,w=e.endedTimelineFn,E=e.dataFn,C=e.doneFn,k=e.onTransmuxerLog,void Er({id:f.requestId,key:f.key,encryptedBytes:f.encryptedBytes,decryptionWorker:t},function(e){f.bytes=e,wr({segment:f,bytes:f.bytes,trackInfoFn:m,timingInfoFn:v,videoSegmentTimingInfoFn:y,audioSegmentTimingInfoFn:_,id3Fn:b,captionsFn:T,isEndOfTimeline:S,endedTimelineFn:w,dataFn:E,doneFn:C,onTransmuxerLog:k})});var e,t,f,m,v,y,_,b,T,S,w,E,C,k;wr({segment:g,bytes:g.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Er({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},function(e){g.map.bytes=e,br(g,function(e){return e?(vr(t),h(e,g)):void v()})});v()}}}}function kr(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){var i,r=e.target;if(!r.aborted)return t.stats=mt.mergeOptions(t.stats,(r=(i=e).target,(r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=i.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}function xr(e){var t,n,i,r=e.xhr,a=e.xhrOptions,o=e.decryptionWorker,s=e.segment,l=e.abortFn,u=e.progressFn,c=e.trackInfoFn,d=e.timingInfoFn,h=e.videoSegmentTimingInfoFn,p=e.audioSegmentTimingInfoFn,f=e.id3Fn,m=e.captionsFn,g=e.isEndOfTimeline,v=e.endedTimelineFn,y=e.dataFn,_=e.doneFn,e=e.onTransmuxerLog,b=[],_=Cr({activeXhrs:b,decryptionWorker:o,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:v,dataFn:y,doneFn:_,onTransmuxerLog:e});s.key&&!s.key.bytes&&(e=[s.key],s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&e.push(s.map.key),e=r(mt.mergeOptions(a,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),_r(s,e,_)),b.push(e)),s.map&&!s.map.bytes&&(!s.map.key||s.key&&s.key.resolvedUri===s.map.key.resolvedUri||(t=r(mt.mergeOptions(a,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),_r(s,[s.map.key],_)),b.push(t)),t=r(mt.mergeOptions(a,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:Ji(s.map)}),(n=(t={segment:s,finishProcessingFn:_}).segment,i=t.finishProcessingFn,function(e,t){return(e=yr(e,t))?i(e,n):(e=new Uint8Array(t.response),n.map.key?(n.map.encryptedBytes=e,i(null,n)):(n.map.bytes=e,void br(n,function(e){return e?(e.xhr=t,e.status=t.status,i(e,n)):void i(null,n)})))})),b.push(t)),a=mt.mergeOptions(a,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:Ji(s)}),(a=r(a,Tr({segment:s,finishProcessingFn:_,responseType:a.responseType}))).addEventListener("progress",kr({segment:s,progressFn:u,trackInfoFn:c,timingInfoFn:d,videoSegmentTimingInfoFn:h,audioSegmentTimingInfoFn:p,id3Fn:f,captionsFn:m,isEndOfTimeline:g,endedTimelineFn:v,dataFn:y})),b.push(a);var T={};return b.forEach(function(e){var t,n;e.addEventListener("loadend",(t=(e={loadendState:T,abortFn:l}).loadendState,n=e.abortFn,function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}))}),function(){return vr(b)}}function Ir(e,t){return t=t.attributes||{},e&&e.mediaGroups&&e.mediaGroups.AUDIO&&t.AUDIO&&e.mediaGroups.AUDIO[t.AUDIO]}function Dr(e){var t={};return e.forEach(function(e){var n=e.mediaType,i=e.type,e=e.details;t[n]=t[n]||[],t[n].push(St(""+i+e))}),Object.keys(t).forEach(function(e){return 1<t[e].length?(wu("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null)):void(t[e]=t[e][0])}),t}function Ar(e){var t=0;return e.audio&&t++,e.video&&t++,t}function Or(e,t){var n,i=t.attributes||{},r=Dr(function(e){if(e=e.attributes||{},e.CODECS)return wt(e.CODECS)}(t)||[]);return Ir(e,t)&&!r.audio&&!function(e,t){if(!Ir(e,t))return!0;var n,t=t.attributes||{},i=e.mediaGroups.AUDIO[t.AUDIO];for(n in i)if(!i[n].uri&&!i[n].playlists)return!0;return!1}(e,t)&&(n=Dr(function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n,i=e.mediaGroups.AUDIO[t];if(!i)return null;for(n in i){var r=i[n];if(r.default&&r.playlists)return wt(r.playlists[0].attributes.CODECS)}return null}(e,i.AUDIO)||[])).audio&&(r.audio=n.audio),r}function Pr(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}}function Lr(e,t){return(e=e&&pa.getComputedStyle(e))?e[t]:""}function Mr(e,t){var n=e.slice();e.sort(function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r})}function Nr(e,t){var n,i;return(n=(n=e.attributes.BANDWIDTH?e.attributes.BANDWIDTH:n)||pa.Number.MAX_VALUE)-(i=(i=t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:i)||pa.Number.MAX_VALUE)}function Rr(e,t,n,i,r,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},s=e.playlists;su.isAudioOnly(e)&&(s=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=s.map(function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||pa.Number.MAX_VALUE,width:t,height:n,playlist:e}});Mr(l,function(e,t){return e.bandwidth-t.bandwidth});var u=(l=l.filter(function(e){return!su.isIncompatible(e.playlist)})).filter(function(e){return su.isEnabled(e.playlist)}),e=(u=u.length?u:l.filter(function(e){return!su.isDisabled(e.playlist)})).filter(function(e){return e.bandwidth*mu.BANDWIDTH_VARIANCE<t}),c=e[e.length-1],s=e.filter(function(e){return e.bandwidth===c.bandwidth})[0];if(!1===r){var d=s||u[0]||l[0];return d&&d.playlist?(r=s?"bandwidthBestRep":"sortedPlaylistReps",u[0]&&(r="enabledPlaylistReps"),Eu("choosing "+Pr(d)+" using "+r+" with options",o),d.playlist):(Eu("could not choose a playlist with options",o),null)}d=e.filter(function(e){return e.width&&e.height}),Mr(d,function(e,t){return e.width-t.width});var h,p,f,e=d.filter(function(e){return e.width===n&&e.height===i}),c=e[e.length-1],e=e.filter(function(e){return e.bandwidth===c.bandwidth})[0];e||(p=(h=d.filter(function(e){return e.width>n||e.height>i})).filter(function(e){return e.width===h[0].width&&e.height===h[0].height}),c=p[p.length-1],p=p.filter(function(e){return e.bandwidth===c.bandwidth})[0]),a.experimentalLeastPixelDiffSelector&&(m=d.map(function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e}),Mr(m,function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff}),f=m[0]);var m=f||p||e||s||u[0]||l[0];return m&&m.playlist?(l="sortedPlaylistReps",f?l="leastPixelDiffRep":p?l="resolutionPlusOneRep":e?l="resolutionBestRep":s?l="bandwidthBestRep":u[0]&&(l="enabledPlaylistReps"),Eu("choosing "+Pr(m)+" using "+l+" with options",o),m.playlist):(Eu("could not choose a playlist with options",o),null)}}function Fr(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=pa.WebKitDataCue||pa.VTTCue,o=t.metadataTrack_;if(o&&(n.forEach(function(e){var t=e.cueTime+i;!("number"!=typeof t||pa.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach(function(e){var n,i=new a(t,t,e.value||e.url||e.data||"");i.frame=e,i.value=e,n=i,Object.defineProperties(n.frame,{id:{get:function(){return mt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get:function(){return mt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get:function(){return mt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}}),o.addCue(i)})}),o.cues&&o.cues.length)){for(var s=o.cues,l=[],u=0;u<s.length;u++)s[u]&&l.push(s[u]);var c=l.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),d=Object.keys(c).sort(function(e,t){return Number(e)-Number(t)});d.forEach(function(e,t){var e=c[e],n=Number(d[t+1])||r;e.forEach(function(e){e.endTime=n})})}}}function jr(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)}function Ur(e){return"number"==typeof e&&isFinite(e)}function Br(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,o=a.mediaSequence,s=a.id,l=a.segments,u=e.mediaIndex,c=e.partIndex,d=e.timeline,h=(void 0===l?[]:l).length-1,p="mediaIndex/partIndex increment";return e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),a="number"==typeof c,l=e.segment.uri?"segment":"pre-segment",e=a?ki({preloadSegment:i})-1:0,l+" ["+(o+u)+"/"+(o+h)+"]"+(a?" part ["+c+"/"+e+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(a?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+d+"] selected by ["+p+"] playlist ["+s+"]"}function Hr(e){return e+"TimingInfo"}function Vr(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,e=e.audioDisabled;if(n!==i){if("audio"===r)return!(n=t.lastTimelineChange({type:"main"}))||n.to!==i;if("main"===r&&e)return!(t=t.pendingTimelineChange({type:"audio"}))||t.to!==i}}function qr(e){var t=e.segmentDuration,e=e.maxDuration
;return!!t&&Math.round(t)>e+au}function $r(e,t){if("hls"!==t)return null;var n=function(e,t){return e=e&&"number"==typeof e.start&&"number"==typeof e.end?e.end-e.start:0,t=t&&"number"==typeof t.start&&"number"==typeof t.end?t.end-t.start:0,Math.max(e,t)}(e.audioTimingInfo,e.videoTimingInfo);if(!n)return null;var i=e.playlist.targetDuration,r=qr({segmentDuration:n,maxDuration:2*i}),t=qr({segmentDuration:n,maxDuration:i}),i="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+n+" when the reported duration is "+e.duration+" and the target duration is "+i+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||t?{severity:r?"warn":"info",message:i}:null}function Wr(){}function zr(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})}function Yr(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]}function Gr(e,t){if(0!==t.queue.length){var n=0,i=t.queue[n];if("mediaSource"!==i.type){if("mediaSource"!==e&&t.ready()&&"closed"!==t.mediaSource.readyState&&!Yr(e,t)){if(i.type!==e){if(null===(n=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(e,t.queue)))return;i=t.queue[n]}t.queue.splice(n,1),(t.queuePending[e]=i).action(e,t),i.doneFn||(t.queuePending[e]=null,Gr(e,t))}}else t.updating()||"closed"===t.mediaSource.readyState||(t.queue.shift(),i.action(t),i.doneFn&&i.doneFn(),Gr("audio",t),Gr("video",t))}}function Xr(e,t){var n=t[e+"Buffer"],i=zr(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)}function Kr(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)}function Qr(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,e=e.name;n.queue.push({type:t,action:i,doneFn:r,name:e}),Gr(t,n)}function Jr(e,t){return function(n){var i;t.queuePending[e]&&(i=t.queuePending[e].doneFn,t.queuePending[e]=null,i&&i(t[e+"Error_"])),Gr(e,t)}}function Zr(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}function ea(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}function ta(e,t){(t.activePlaylistLoader=e).load()}function na(e,t){for(var n=0;n<e.length;n++){if(Fi(t,e[n]))return!0;if(e[n].playlists&&na(e[n].playlists,t))return!0}return!1}function ia(e){function t(){i.AUDIO.onTrackChanged(),a.trigger({type:"usage",name:"vhs-audio-change"}),a.trigger({type:"usage",name:"hls-audio-change"})}["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){zu[t](t,e)});var n,i=e.mediaTypes,r=e.masterPlaylistLoader,a=e.tech,o=e.vhs,s=e.segmentLoaders,l=s.AUDIO,u=s.main;for(n in["AUDIO","SUBTITLES"].forEach(function(t){var n,r,a,o,s,l,u,c,d,h;i[t].activeGroup=(n=t,r=e,function(e){var t=r.masterPlaylistLoader,i=r.mediaTypes[n].groups,a=t.media();if(!a)return null;var o=null;a.attributes[n]&&(o=i[a.attributes[n]]);var s=Object.keys(i);if(!o)if("AUDIO"===n&&1<s.length&&Ui(r.master))for(var l=0;l<s.length;l++){var u=i[s[l]];if(na(u,a)){o=u;break}}else i.main?o=i.main:1===s.length&&(o=i[s[0]]);return void 0===e?o:null!==e&&o&&o.filter(function(t){return t.id===e.id})[0]||null}),i[t].activeTrack=Yu[t](t,e),i[t].onGroupChanged=(a=t,o=e,function(){var e=o.segmentLoaders,t=e[a],n=e.main,i=o.mediaTypes[a],r=i.activeTrack(),s=i.getActiveGroup(),l=i.activePlaylistLoader,e=i.lastGroup_;s&&e&&s.id===e.id||(i.lastGroup_=s,i.lastTrack_=r,ea(t,i),s&&!s.isMasterPlaylist&&(s.playlistLoader?(t.resyncLoader(),ta(s.playlistLoader,i)):l&&n.resetEverything()))}),i[t].onGroupChanging=(s=t,l=e,function(){var e=l.segmentLoaders[s];l.mediaTypes[s].lastGroup_=null,e.abort(),e.pause()}),i[t].onTrackChanged=(u=t,c=e,function(){var e=c.masterPlaylistLoader,t=c.segmentLoaders,n=t[u],i=t.main,r=c.mediaTypes[u],a=r.activeTrack(),o=r.getActiveGroup(),s=r.activePlaylistLoader,l=r.lastTrack_;if((!l||!a||l.id!==a.id)&&(r.lastGroup_=o,r.lastTrack_=a,ea(n,r),o)){if(o.isMasterPlaylist){if(!a||!l||a.id===l.id)return;var d=c.vhs.masterPlaylistController_,t=d.selectPlaylist();return d.media()===t?void 0:(r.logger_("track change. Switching master audio from "+l.id+" to "+a.id),e.pause(),i.resetEverything(),void d.fastQualityChange_(t))}if("AUDIO"===u){if(!o.playlistLoader)return i.setAudio(!0),void i.resetEverything();n.setAudio(!0),i.setAudio(!1)}s!==o.playlistLoader&&(n.track&&n.track(a),n.resetEverything()),ta(o.playlistLoader,r)}}),i[t].getActiveGroup=(d=t,h=e.mediaTypes,function(){var e=h[d].activeTrack();return e?h[d].activeGroup(e):null})}),(s=i.AUDIO.activeGroup())&&(s=(s.filter(function(e){return e.default})[0]||s[0]).id,i.AUDIO.tracks[s].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged(),i.AUDIO.getActiveGroup().playlistLoader?(u.setAudio(!1),l.setAudio(!0)):u.setAudio(!0)),r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanging()})}),a.audioTracks().addEventListener("change",t),a.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),o.on("dispose",function(){a.audioTracks().removeEventListener("change",t),a.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),a.clearTracks("audio"),i.AUDIO.tracks)a.audioTracks().addTrack(i.AUDIO.tracks[n])}function ra(e,t,n){var i,r,a,o,s=e.masterPlaylistController_,l=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);t.attributes&&(i=t.attributes.RESOLUTION,this.width=i&&i.width,this.height=i&&i.height,this.bandwidth=t.attributes.BANDWIDTH),this.codecs=Or(s.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,a=t.id,o=l,function(e){var t=r.master.playlists[a],n=Li(t),i=Mi(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(o(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})}function aa(e,t){function n(){s&&e.currentTime(s)}function i(t){null!=t&&(s=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",n),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function r(){return Date.now()-o<1e3*l.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):l.getSource&&"function"==typeof l.getSource?(o=Date.now(),l.getSource.call(e,i)):void mt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}function a(){e.off("loadedmetadata",n),e.off("error",r),e.off("dispose",a)}var o=0,s=0,l=mt.mergeOptions(Ju,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})}),e.on("error",r),e.on("dispose",a),e.reloadSourceOnError=function(t){a(),aa(e,t)}}function oa(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})}function sa(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,e=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var r,e=(e=e=i?e.concat([i]):e,r=Object.keys(n),e.reduce(function(e,t){if(!t.contentProtection)return e;var n=r.reduce(function(e,n){var i=t.contentProtection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e},{});return Object.keys(n).length&&e.push(n),e},[])),a=[],o=[];return e.forEach(function(e){o.push(new Promise(function(e,n){t.tech_.one("keysessioncreated",e)})),a.push(new Promise(function(n,i){t.eme.initializeMediaKeys({keySystems:e},function(e){e?i(e):n()})}))}),Promise.race([Promise.all(a),Promise.race(o)])}function la(e){var t=e.player;return!(!(e=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Dr(wt(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r,a=Ct(i.video),o=Ct(i.audio),s={};for(r in e)s[r]={},o&&(s[r].audioContentType=o),a&&(s[r].videoContentType=a),t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(s[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(s[r].url=e[r]);return mt.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=e)&&!t.eme&&(mt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))}function ua(){if(!pa.localStorage)return null;var e=pa.localStorage.getItem(ec);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}for(var ca,da="7.15.4",ha="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},pa="undefined"!=typeof window?window:void 0!==ha?ha:"undefined"!=typeof self?self:{},fa={},ma=function(e,t){return fa[e]=fa[e]||[],t&&(fa[e]=fa[e].concat(t)),fa[e]},ga=function(e,t){return!((t=ma(e).indexOf(t))<=-1||(fa[e]=fa[e].slice(),fa[e].splice(t,1),0))},va=void 0!==ha?ha:"undefined"!=typeof window?window:{},ya="undefined"!=typeof document?document:(ya=va["__GLOBAL_DOCUMENT_CACHE@4"])||(va["__GLOBAL_DOCUMENT_CACHE@4"]={}),_a=ya,ba={prefixed:!0},Ta=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Sa=Ta[0],wa=0;wa<Ta.length;wa++)if(Ta[wa][1]in _a){ca=Ta[wa];break}if(ca){for(var Ea=0;Ea<ca.length;Ea++)ba[Sa[Ea]]=ca[Ea];ba.prefixed=ca[0]!==Sa[0]}var Ca,ka=[],xa=function(e,t){return function(n,i,r){var a,o=t.levels[i],i=new RegExp("^("+o+")$");"log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),ka&&(ka.push([].concat(r)),a=ka.length-1e3,ka.splice(0,0<a?a:0)),!pa.console||(a=(a=pa.console[n])||"debug"!==n?a:pa.console.info||pa.console.log)&&o&&i.test(n)&&a[Array.isArray(r)?"apply":"call"](pa.console,r)}},Ia=function e(t){function n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r("log",i,t)}var i="info",r=xa(t,n);return n.createLogger=function(n){return e(t+": "+n)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},n.level=function(e){if("string"==typeof e){if(!n.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(n.history=function(){return ka?[].concat(ka):[]}).filter=function(e){return(ka||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})},n.history.clear=function(){ka&&(ka.length=0)},n.history.disable=function(){null!==ka&&(ka.length=0,ka=null)},n.history.enable=function(){null===ka&&(ka=[])},n.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",i,t)},n.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",i,t)},n.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("debug",i,t)},n}("VIDEOJS"),Da=Ia.createLogger,Aa=e(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,i=arguments[t];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},t.apply(this,arguments)}e.exports=t}),Oa=Object.prototype.toString,Pa=function(e){return i(e)?Object.keys(e):[]},La=pa.navigator&&pa.navigator.userAgent||"",Ma=/AppleWebKit\/([\d.]+)/i.exec(La),Na=Ma?parseFloat(Ma.pop()):null,Ra=/iPod/i.test(La),Fa=(Ro=La.match(/OS (\d+)_/i))&&Ro[1]?Ro[1]:null,ja=/Android/i.test(La),Ua=function(){var e=La.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Ba=ja&&Ua<5&&Na<537,Ha=/Firefox/i.test(La),Va=/Edg/i.test(La),qa=!Va&&(/Chrome/i.test(La)||/CriOS/i.test(La)),$a=(Vo=La.match(/(Chrome|CriOS)\/(\d+)/))&&Vo[2]?parseFloat(Vo[2]):null,Wa=qo=!(qo=(qo=/MSIE\s(\d+)\.\d/.exec(La))&&parseFloat(qo[1]))&&/Trident\/7.0/i.test(La)&&/rv:11.0/.test(La)?11:qo,za=/Safari/i.test(La)&&!qa&&!ja&&!Va,Ya=/Windows/i.test(La),Ga=Boolean(l()&&("ontouchstart"in pa||pa.navigator.maxTouchPoints||pa.DocumentTouch&&pa.document instanceof pa.DocumentTouch)),Xa=/iPad/i.test(La)||za&&Ga&&!/iPhone/i.test(La),Ka=/iPhone/i.test(La)&&!Xa,Qa=Ka||Xa||Ra,Ja=(za||Qa)&&!qa,Za=Object.freeze({__proto__:null,IS_IPOD:Ra,IOS_VERSION:Fa,IS_ANDROID:ja,ANDROID_VERSION:Ua,IS_NATIVE_ANDROID:Ba,IS_FIREFOX:Ha,IS_EDGE:Va,IS_CHROME:qa,CHROME_VERSION:$a,IE_VERSION:Wa,IS_SAFARI:za,IS_WINDOWS:Ya,TOUCH_ENABLED:Ga,IS_IPAD:Xa,IS_IPHONE:Ka,IS_IOS:Qa,IS_ANY_SAFARI:Ja}),eo=d("querySelector"),to=d("querySelectorAll"),no=Object.freeze({__proto__:null,isReal:l,isEl:u,isInFrame:c,createEl:h,textContent:p,prependTo:f,hasClass:m,addClass:g,removeClass:v,toggleClass:y,setAttributes:_,getAttributes:b,getAttribute:T,setAttribute:S,removeAttribute:w,blockTextSelection:E,unblockTextSelection:C,getBoundingClientRect:k,findPosition:x,getPointerPosition:I,isTextNode:D,emptyEl:A,normalizeContent:O,appendContent:P,insertContent:L,isSingleLeftClick:M,$:eo,$$:to}),io=!1,ro=function(){if(!1!==Ca.options.autoSetup){var e=Array.prototype.slice.call(_a.getElementsByTagName("video")),t=Array.prototype.slice.call(_a.getElementsByTagName("audio")),n=Array.prototype.slice.call(_a.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&0<i.length)for(var r=0,a=i.length;r<a;r++){var o=i[r];if(!o||!o.getAttribute){N(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&Ca(o)}else io||N(1)}};l()&&("complete"===_a.readyState?R():pa.addEventListener("load",R));var ao=3;pa.WeakMap||(vs=function(){function e(){this.vdata="vdata"+Math.floor(pa.performance&&pa.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||ao++;return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];Ia("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var oo,so,lo=new(pa.WeakMap?WeakMap:vs),uo=function(){if("boolean"!=typeof oo){oo=!1;try{var e=Object.defineProperty({},"passive",{get:function(){oo=!0}});pa.addEventListener("test",null,e),pa.removeEventListener("test",null,e)}catch(e){}}return oo},co=["touchstart","touchmove"],ho=Object.freeze({__proto__:null,fixEvent:H,on:V,off:q,trigger:$,one:W,any:z});K.prototype.allowedEvents_={},K.prototype.addEventListener=K.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},V(this,e,t),this.addEventListener=n},K.prototype.removeEventListener=K.prototype.off=function(e,t){q(this,e,t)},K.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},W(this,e,t),this.addEventListener=n},K.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},z(this,e,t),this.addEventListener=n},K.prototype.dispatchEvent=K.prototype.trigger=function(e){var t=e.type||e;e=H(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),$(this,e)},K.prototype.queueTrigger=function(e){var t=this;so=so||new Map;var n=e.type||e,i=so.get(this);i||(i=new Map,so.set(this,i));var r=i.get(n);i.delete(n),pa.clearTimeout(r),r=pa.setTimeout(function(){0===i.size&&(i=null,so.delete(t)),t.trigger(e)},0),i.set(n,r)};var po=function(e){return e instanceof K||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return"function"==typeof e[t]})},fo={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,a=ne(this,n,"on"),o=a.isTargetingSelf,s=a.target,l=a.type,u=a.listener;ie(s,"on",l,u),o||((r=function(){return e.off(s,l,u)}).guid=u.guid,(o=function(){return e.off("dispose",r)}).guid=u.guid,ie(this,"on","dispose",r),ie(s,"on","dispose",o))},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=ne(this,n,"one"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;a?ie(o,"one",s,l):((a=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)}).guid=l.guid,ie(o,"one",s,a))},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=ne(this,n,"any"),a=r.isTargetingSelf,o=r.target,s=r.type,l=r.listener;a?ie(o,"any",s,l):((a=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)}).guid=l.guid,ie(o,"any",s,a))},off:function(e,t,n){!e||J(e)?q(this.eventBusEl_,e,t):(t=t,Z(e=e,this,"off"),ee(t,this,"off"),te(n,this,"off"),n=Y(this,n),this.off("dispose",n),e.nodeName?(q(e,t,n),q(e,"dispose",n)):po(e)&&(e.off(t,n),e.off("dispose",n)))},trigger:function(e,t){Z(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!J(n)){if(n="Invalid event type for "+Q(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.",!e)throw new Error(n);(this.log||Ia).error(n)}return $(this.eventBusEl_,e,t)}},mo={state:{},setState:function(e){var n,i=this;return t(e="function"==typeof e?e():e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&po(this)&&this.trigger({changes:n,type:"statechanged"}),n}},go=pa.Map||function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),vo=pa.Set||function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),yo=function(){function e(e,t,n){!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=le({},this.options_),t=this.options_=le(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+ao++),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(re(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ae(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new vo,this.setIntervalIds_=new vo,this.rafIds_=new vo,this.namedRafs_=new go,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e&&(this.options_=le(this.options_,e)),this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return h(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],i=i&&i.split("-")[0],i=r&&r[i],n=n;return a&&a[e]?n=a[e]:i&&i[e]&&(n=i[e]),n=t?n.replace(/\{(\d+)\}/g,function(e,n){return n=t[n-1],void 0===n?e:n}):n},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var t=t.reduce(function(e,t){return e.concat(t)},[]),i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},t.addChild=function(t,n,i){if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof t){var r=se(t),a=n.componentClass||r;n.name=r;var o=e.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;o=new o(this.player_||this,n)}else o=t;return o.parentComponent_&&o.parentComponent_.removeChild(o),this.children_.splice(i,0,o),o.parentComponent_=this,"function"==typeof o.id&&(this.childIndex_[o.id()]=o),(r=r||o.name&&se(o.name()))&&(this.childNameIndex_[r]=o,this.childNameIndex_[oe(r)]=o),"function"==typeof o.el&&o.el()&&(r=null,this.children_[i+1]&&(this.children_[i+1].el_?r=this.children_[i+1].el_:u(this.children_[i+1])&&(r=this.children_[i+1])),this.contentEl().insertBefore(o.el(),r)),o},t.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,i=this.children_.length-1;0<=i;i--)if(this.children_[i]===e){n=!0,this.children_.splice(i,1);break}n&&(e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[se(e.name())]=null,this.childNameIndex_[oe(e.name())]=null,(t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el()))}},t.initChildren=function(){var t,n,i,r=this,a=this.options_.children;a&&(t=this.options_,n=e.getComponent("Tech"),(i=Array.isArray(a)?a:Object.keys(a)).concat(Object.keys(this.options_).filter(function(e){return!i.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var t,e="string"==typeof e?a[t=e]||r.options_[t]||{}:(t=e.name,e);return{name:t,opts:e}}).filter(function(t){return(t=e.getComponent(t.opts.componentClass||se(t.name)))&&!n.isTech(t)}).forEach(function(e){var n=e.name,e=e.opts;!1!==(e=void 0!==t[n]?t[n]:e)&&((e=!0===e?{}:e).playerOptions=r.options_.playerOptions,(e=r.addChild(n,e))&&(r[n]=e))}))},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(e,t){return eo(e,t||this.contentEl())},t.$$=function(e,t){return to(e,t||this.contentEl())},t.hasClass=function(e){return m(this.el_,e)},t.addClass=function(e){g(this.el_,e)},t.removeClass=function(e){v(this.el_,e)},t.toggleClass=function(e,t){y(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return T(this.el_,e)},t.setAttribute=function(e,t){S(this.el_,e,t)},t.removeAttribute=function(e){w(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){return void 0!==t?(-1!==(""+(t=null===t||t!=t?0:t)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"))):this.el_?(t=this.el_.style[e],n=t.indexOf("px"),-1!==n?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+se(e)],10)):0},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return t=a(this.el_,e),0!==(t=parseFloat(t))&&!isNaN(t)||(e="offset"+se(e),t=this.el_[e]),t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){function e(){t=!1}var t,n=0,i=null;this.on("touchstart",function(e){1===e.touches.length&&(i={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},n=pa.performance.now(),t=!0)}),this.on("touchmove",function(e){var n;1<e.touches.length?t=!1:i&&(n=e.touches[0].pageX-i.pageX,e=e.touches[0].pageY-i.pageY,10<Math.sqrt(n*n+e*e)&&(t=!1))}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(i=null)===t&&pa.performance.now()-n<200&&(e.preventDefault(),this.trigger("tap"))})},t.enableTouchActivity=function(){var e,t,n;this.player()&&this.player().reportUserActivity&&(e=Y(this.player(),this.player().reportUserActivity),this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},t.setTimeout=function(e,t){var n,i=this;return e=Y(this,e),this.clearTimersOnDispose_(),n=pa.setTimeout(function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()},t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),pa.clearTimeout(e)),e},t.setInterval=function(e,t){return e=Y(this,e),this.clearTimersOnDispose_(),t=pa.setInterval(e,t),this.setIntervalIds_.add(t),t},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),pa.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Y(this,e),t=pa.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Y(this,t);var i=this.requestAnimationFrame(function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),pa.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var n=t[0],i=t[1];e[n].forEach(function(t,n){return e[i](n)})}),e.clearingTimersOnDispose_=!1}))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i=e.getComponent("Tech"),r=i&&i.isTech(n),i=e===n||e.prototype.isPrototypeOf(n.prototype);if(r||!i){var a=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass";throw new Error('Illegal component, "'+t+'"; '+a+".")}if(t=se(t),e.components_||(e.components_={}),a=e.getComponent("Player"),"Player"===t&&a&&a.players){var o=a.players,a=Object.keys(o);if(o&&0<a.length&&a.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[oe(t)]=n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();yo.prototype.supportsRaf_="function"==typeof pa.requestAnimationFrame&&"function"==typeof pa.cancelAnimationFrame,yo.registerComponent("Component",yo);var _o=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},bo=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t};pe.prototype.code=0,pe.prototype.message="",pe.prototype.status=null,pe.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],pe.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var To=0;To<pe.errorTypes.length;To++)pe[pe.errorTypes[To]]=To,pe.prototype[pe.errorTypes[To]]=To;var So=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]},wo=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=ge(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(ge))},Eo=function(e,t){return e.forEach(function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return n.addCue(e)})}),t.textTracks()},Co=e(function(e,t){function n(e){if(!e||"object"!=typeof e||(t=e.which||e.keyCode||e.charCode)&&(e=t),"number"==typeof e)return s[e];var t=String(e),e=i[t.toLowerCase()];return e||((e=r[t.toLowerCase()])?e:1===t.length?t.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){if(e=i[t.toLowerCase()])return e===n;if(e=r[t.toLowerCase()])return e===n}else if("number"==typeof t)return t===n;return!1}};for(var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91},a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var o,s=t.names=t.title={};for(a in i)s[i[a]]=a;for(o in r)i[o]=r[o]});Co.code,Co.codes,Co.aliases,Co.names,Co.title;var ko="vjs-modal-dialog",xo=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleKeyDown_=function(e){
return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=h("div",{className:ko+"-content"},{role:"document"}),i.descEl_=h("p",{className:ko+"-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),p(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return ko+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){var e;this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0)},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){var e;this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose())},n.closeable=function(e){var t,n;return"boolean"==typeof e&&(t=this.closeable_=!!e,n=this.getChild("closeButton"),t&&!n&&(e=this.contentEl_,this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=e,this.on(n,"close",this.close_)),!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())),this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),L(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t),(t=this.getChild("closeButton"))&&n.appendChild(t.el_)},n.empty=function(){this.trigger("beforemodalempty"),A(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=_a.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),Co.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Co.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}_a.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof pa.HTMLAnchorElement||e instanceof pa.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof pa.HTMLInputElement||e instanceof pa.HTMLSelectElement||e instanceof pa.HTMLTextAreaElement||e instanceof pa.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof pa.HTMLIFrameElement||e instanceof pa.HTMLObjectElement||e instanceof pa.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},t}(yo);xo.prototype.options_={pauseOnOpen:!0,temporary:!0},yo.registerComponent("ModalDialog",xo);var Io,Do=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(_o(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}bo(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},po(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(K);for(Io in Do.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},Do.prototype.allowedEvents_)Do.prototype["on"+Io]=null;var Ao=function(e){function t(t){for(var n,i=(t=void 0===t?[]:t).length-1;0<=i;i--)if(t[i].enabled){ve(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}bo(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&ve(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,ve(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(Do),ha=function(e){function t(t){for(var n,i=(t=void 0===t?[]:t).length-1;0<=i;i--)if(t[i].selected){ye(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(_o(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}bo(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&ye(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,ye(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(Do),va=function(e){function t(){return e.apply(this,arguments)||this}bo(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Do),ya=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),Oo=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var n=this.length||0,i=0,r=e.length;if(this.cues_=e,this.length_=e.length,n<r)for(i=n;i<r;i++)t.call(this,i)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),Po={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Lo={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Mo={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},No={disabled:"disabled",hidden:"hidden",showing:"showing"},Ma=function(e){function t(t){void 0===t&&(t={});var n,i=e.call(this)||this,r={id:t.id||"vjs_track_"+ao++,kind:t.kind||"",language:t.language||""},a=t.label||"";for(n in r)!function(e){Object.defineProperty(_o(i),e,{get:function(){return r[e]},set:function(){}})}(n);return Object.defineProperty(_o(i),"label",{get:function(){return a},set:function(e){e!==a&&(a=e,this.trigger("labelchange"))}}),i}return bo(t,e),t}(K),Ro=Object.freeze({__proto__:null,parseUrl:_e,getAbsoluteURL:be,getFileExtension:Te,isCrossOrigin:Se}),Fo=function(e){if(!e)return!1;var t=jo.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},jo=Object.prototype.toString;Ee.httpHandler=function(e,t){return void 0===t&&(t=!1),function(n,i,r){if(n)e(n);else if(400<=i.statusCode&&i.statusCode<=599){if(n=r,t)if(pa.TextDecoder){i=function(e){return void 0===e&&(e=""),e.toLowerCase().split(";").reduce(function(e,t){var n=t.split("="),t=n[0],n=n[1];return"charset"===t.trim()?n.trim():e},"utf-8")}(i.headers&&i.headers["content-type"]);try{n=new TextDecoder(i).decode(r)}catch(n){}}else n=String.fromCharCode.apply(null,new Uint8Array(r));e({cause:n})}else e(null,r)}};var Uo=function(e){var t={};return e&&e.trim().split("\n").forEach(function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),n=e.slice(n+1).trim();void 0===t[i]?t[i]=n:Array.isArray(t[i])?t[i].push(n):t[i]=[t[i],n]}),t},Bo=Ee,Na=Ee;Ee.XMLHttpRequest=pa.XMLHttpRequest||function(){},Ee.XDomainRequest="withCredentials"in new Ee.XMLHttpRequest?Ee.XMLHttpRequest:pa.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)!function(e){Ee["delete"===e?"del":e]=function(t,n,i){return(n=we(t,n,i)).method=e.toUpperCase(),Ce(n)}}(e[n])}(["get","put","post","patch","head","delete"]),Bo.default=Na;var Ho=function(e){function t(t){var n;if(!(t=void 0===t?{}:t).tech)throw new Error("A tech was not provided.");var t=le(t,{kind:Mo[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=No[t.mode]||"disabled",r=t.default;"metadata"!==t.kind&&"chapters"!==t.kind||(i="hidden"),(n=e.call(this,t)||this).tech_=t.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var a=new Oo(n.cues_),o=new Oo(n.activeCues_),s=!1,l=Y(_o(n),function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,s&&(this.trigger("cuechange"),s=!1))});return n.tech_.one("dispose",function(){n.tech_.off("timeupdate",l)}),"disabled"!==i&&n.tech_.on("timeupdate",l),Object.defineProperties(_o(n),{default:{get:function(){return r},set:function(){}},mode:{get:function(){return i},set:function(e){No[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||xe(this.src,this),this.tech_.off("timeupdate",l),"disabled"!==i&&this.tech_.on("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(s=!1,t.length!==this.activeCues_.length)s=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(s=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),t.src?(n.src=t.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==t.kind&&"captions"!==t.kind)&&xe(n.src,_o(n))):n.loaded_=!0,n}bo(t,e);var n=t.prototype;return n.addCue=function(e){var t=e;if(pa.vttjs&&!(e instanceof pa.vttjs.VTTCue)){for(var n in t=new pa.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(Ma);Ho.prototype.allowedEvents_={cuechange:"cuechange"};var Vo=function(e){function t(t){var n=le(t=void 0===t?{}:t,{kind:Lo[t.kind]||""}),t=e.call(this,n)||this,i=!1;return Object.defineProperty(_o(t),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return bo(t,e),t}(Ma),qo=function(e){function t(t){var n=le(t=void 0===t?{}:t,{kind:Po[t.kind]||""}),t=e.call(this,n)||this,i=!1;return Object.defineProperty(_o(t),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return bo(t,e),t}(Ma),Ra=function(e){function t(t){var n;void 0===t&&(t={});var i=e.call(this)||this,r=new Ho(t);return i.kind=r.kind,i.src=r.src,i.srclang=r.language,i.label=r.label,i.default=r.default,Object.defineProperties(_o(i),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=0,r.addEventListener("loadeddata",function(){n=2,i.trigger({type:"load",target:_o(i)})}),i}return bo(t,e),t}(K);Ra.prototype.allowedEvents_={load:"load"},Ra.NONE=0,Ra.LOADING=1,Ra.LOADED=2,Ra.ERROR=3;var $o={audio:{ListClass:Ao,TrackClass:Vo,capitalName:"Audio"},video:{ListClass:ha,TrackClass:qo,capitalName:"Video"},text:{ListClass:va,TrackClass:Ho,capitalName:"Text"}};Object.keys($o).forEach(function(e){$o[e].getterName=e+"Tracks",$o[e].privateName=e+"Tracks_"});var Wo={remoteText:{ListClass:va,TrackClass:Ho,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ya,TrackClass:Ra,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},zo=Aa({},$o,Wo);Wo.names=Object.keys(Wo),$o.names=Object.keys($o),zo.names=[].concat(Wo.names).concat($o.names);var Yo=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return Ie.prototype=e,new Ie};((De.prototype=Yo(Error.prototype)).constructor=De).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Oe.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var Go=_a.createElement&&_a.createElement("textarea"),Xo={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ko={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Qo={v:"title",lang:"lang"},Jo={rt:"ruby"},Zo=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Re.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},Re.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(Fe.prototype=Yo(Re.prototype)).constructor=Fe,je.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},je.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},je.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},je.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},je.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},je.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},je.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},je.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},Be.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Be.convertCueToDOMTree=function(e,t){return e&&t?Me(e,t):null},Be.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1}(t)){var r=[],a=je.getSimpleBoxPosition(i),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,l=0;l<t.length;l++)s=t[l],n=new Fe(e,s,o),i.appendChild(n.div),Ue(0,n,a,r),s.displayState=n.div,r.push(je.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)i.appendChild(t[s].displayState)},(Be.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof De))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i,r=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new De(De.Errors.BadSignature);n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:i=t(),n.state){case"HEADER":/:/.test(i)?function(e){e.match(/X-TIMESTAMP-MAP/)?Pe(e,function(e,t){var i;"X-TIMESTAMP-MAP"===e&&(t=t,i=new Oe,Pe(t,function(e,t){switch(e){case"MPEGT":i.integer(e+"S",t);break;case"LOCA":i.set(e+"L",Ae(t))}},/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")}))},/=/):Pe(e,function(e,t){var i;"Region"===e&&(t=t,i=new Oe,Pe(t,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new Oe;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id")&&((t=new(n.vttjs.VTTRegion||n.window.VTTRegion)).width=i.get("width",100),t.lines=i.get("lines",3),t.regionAnchorX=i.get("regionanchorX",0),t.regionAnchorY=i.get("regionanchorY",100),t.viewportAnchorX=i.get("viewportanchorX",0),t.viewportAnchorY=i.get("viewportanchorY",100),t.scroll=i.get("scroll",""),n.onregion&&n.onregion(t),n.regionList.push({id:i.get("id"),region:t})))},/:/)}(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{Le(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),!e.cue&&"HEADER"!==e.state||(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new De(De.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var es=Be,ts={"":1,lr:1,rl:1},ns={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};Ve.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var is=Ve,rs={"":!0,up:!0},as=e(function(e){e=e.exports={WebVTT:es,VTTCue:is,VTTRegion:$e},pa.vttjs=e,pa.WebVTT=e.WebVTT;var t=e.VTTCue,n=e.VTTRegion,i=pa.VTTCue,r=pa.VTTRegion;e.shim=function(){pa.VTTCue=t,pa.VTTRegion=n},e.restore=function(){pa.VTTCue=i,pa.VTTRegion=r},pa.VTTCue||e.shim()});as.WebVTT,as.VTTCue,as.VTTRegion;var os=function(e){function t(t,n){var i;return void 0===n&&(n=function(){}),(t=void 0===t?{}:t).reportTouchActivity=!1,(i=e.call(this,null,t,n)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),zo.names.forEach(function(e){e=zo[e],t&&t[e.getterName]&&(i[e.privateName]=t[e.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new zo.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}bo(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Y(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return de(0,0)},n.bufferedPercent=function(){return he(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks($o.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach(function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}})},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new pe(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?de(0,0):de()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;$o.names.forEach(function(t){function n(){e.trigger(t+"trackchange")}var i=$o[t],r=e[i.getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),e.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},n.addWebVttScript_=function(){var e,t=this;pa.WebVTT||(_a.body.contains(this.el())?!this.options_["vtt.js"]&&r(as)&&0<Object.keys(as).length?this.trigger("vttjsloaded"):((e=_a.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){e.onload=null,e.onerror=null}),pa.WebVTT=!0,this.el().parentNode.appendChild(e)):this.ready(this.addWebVttScript_))},n.emulateTextTracks=function(){function e(e){return a.addTrack(e.track)}function t(e){return a.removeTrack(e.track)}function n(){return r.trigger("texttrackchange")}function i(){n();for(var e=0;e<a.length;e++){var t=a[e];t.removeEventListener("cuechange",n),"showing"===t.mode&&t.addEventListener("cuechange",n)}}var r=this,a=this.textTracks(),o=this.remoteTextTracks();o.on("addtrack",e),o.on("removetrack",t),this.addWebVttScript_(),i(),a.addEventListener("change",i),a.addEventListener("addtrack",i),a.addEventListener("removetrack",i),this.on("dispose",function(){o.off("addtrack",e),o.off("removetrack",t),a.removeEventListener("change",i),a.removeEventListener("addtrack",i),a.removeEventListener("removetrack",i);for(var r=0;r<a.length;r++)a[r].removeEventListener("cuechange",n)})},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();return r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e,r=new zo.text.TrackClass(r),a.addTrack(r),r}(this,e,t,n)},n.createRemoteTextTrack=function(e){return e=le(e,{tech:this}),new Wo.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(e,t){var n=this,i=this.createRemoteTextTrack(e=void 0===e?{}:e);return!0!==t&&!1!==t&&(Ia.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||pa.Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){
return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=se(e),t.techs_[e]=n,t.techs_[oe(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=se(e),pa&&pa.videojs&&pa.videojs[e]?(Ia.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),pa.videojs[e]):void 0)},t}(yo);zo.names.forEach(function(e){var t=zo[e];os.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),os.prototype.featuresVolumeControl=!0,os.prototype.featuresMuteControl=!0,os.prototype.featuresFullscreenResize=!1,os.prototype.featuresPlaybackRate=!1,os.prototype.featuresProgressEvents=!1,os.prototype.featuresSourceset=!1,os.prototype.featuresTimeupdateEvents=!1,os.prototype.featuresNativeTextTracks=!1,os.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=(i=e.sourceHandlers)||(e.sourceHandlers=[]);void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:Ia.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},yo.registerComponent("Tech",os),os.registerTech("Tech",os),os.defaultTechOrder_=[];var ss={},ls={},us={},cs={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ds={setCurrentTime:1,setMuted:1,setVolume:1},hs={play:1,pause:1},ps={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};Fa=function(e){function t(t,n,i){var r=le({createEl:!1},n),i=e.call(this,t,r,i)||this;if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var a=0,o=n.playerOptions.techOrder;a<o.length;a++){var s=se(o[a]),l=os.getTech(s);if((l=s?l:yo.getComponent(s))&&l.isSupported()){t.loadTech_(s);break}}return i}return bo(t,e),t}(yo),yo.registerComponent("MediaLoader",Fa),za=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}bo(t,e);var i=t.prototype;return i.createEl=function(e,t,i){return void 0===e&&(e="div"),void 0===t&&(t={}),void 0===i&&(i={}),t=n({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&Ia.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),i=n({role:"button"},i),this.tabIndex_=t.tabIndex,i=h(e,t,i),i.appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},i.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=h("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,p(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},i.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(t){Co.isEventKey(t,"Space")||Co.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(yo),yo.registerComponent("ClickableComponent",za),yo.registerComponent("PosterImage",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.update(),i.update_=function(e){return i.update(e)},t.on("posterchange",i.update_),i}bo(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return h("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){this.el_.style.backgroundImage=e?'url("'+e+'")':""},n.handleClick=function(e){var t;this.player_.controls()&&(t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length,!this.player_.tech(!0)||(Wa||Va)&&t||this.player_.tech(!0).focus(),this.player_.paused()?me(this.player_.play()):this.player_.pause())},t}(za));var fs="#222",ms={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};yo.registerComponent("TextTrackDisplay",function(e){function t(t,n,i){function r(e){return a.updateDisplay(e)}var a=e.call(this,t,n,i)||this;return t.on("loadstart",function(e){return a.toggleDisplay(e)}),t.on("texttrackchange",r),t.on("loadedmetadata",function(e){return a.preselectTrack(e)}),t.ready(Y(_o(a),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",r),t.on("playerresize",r),pa.addEventListener("orientationchange",r),t.on("dispose",function(){return pa.removeEventListener("orientationchange",r)});for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}})),a}bo(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in i?n=s.kind!==a.kind&&n||s:a&&!a.enabled?t=e=n=null:s.default&&("descriptions"!==s.kind||e?s.kind in i&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof pa.WebVTT&&pa.WebVTT.processCues(pa,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var l=e[s];"showing"===l.mode&&("descriptions"===l.kind?a=l:o=l)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r,a=n[i];a&&(r=a.displayState,t.color&&(r.firstChild.style.color=t.color),t.textOpacity&&Ze(r.firstChild,"color",Je(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(r.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Ze(r.firstChild,"backgroundColor",Je(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Ze(r,"backgroundColor",Je(t.windowColor,t.windowOpacity)):r.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?r.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+fs:"raised"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+fs:"depressed"===t.edgeStyle?r.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+fs:"uniform"===t.edgeStyle&&(r.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+fs)),t.fontPercent&&1!==t.fontPercent&&(a=pa.parseFloat(r.style.fontSize),r.style.fontSize=a*t.fontPercent+"px",r.style.height="auto",r.style.top="auto"),t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?r.firstChild.style.fontVariant="small-caps":r.firstChild.style.fontFamily=ms[t.fontFamily]))}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof pa.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);pa.WebVTT.processCues(pa,t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var l=o.activeCues[s].displayState;g(l,"vjs-text-track-cue"),g(l,"vjs-text-track-cue-"+(o.language||a))}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(yo)),yo.registerComponent("LoadingSpinner",function(e){function t(){return e.apply(this,arguments)||this}return bo(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),t=h("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),n=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return n.appendChild(t),n},t}(yo));var gs=function(e){function t(){return e.apply(this,arguments)||this}bo(t,e);var i=t.prototype;return i.createEl=function(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),i=h("button",t=n({className:this.buildCSSClass()},t),i=n({type:"button"},i)),i.appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},i.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return Ia.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),yo.prototype.addChild.call(this,e,t)},i.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(t){Co.isEventKey(t,"Space")||Co.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(za);yo.registerComponent("Button",gs),Xa=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.mouseused_=!1,i.on("mousedown",function(e){return i.handleMouseDown(e)}),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&0<this.player_.eme.sessions.length;return me(t),void(!this.player_.tech(!0)||(Wa||Va)&&n||this.player_.tech(!0).focus())}var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");i?(n=function(){return i.focus()},fe(t)?t.then(n,function(){}):this.setTimeout(n,1)):this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(gs),Xa.prototype.controlText_="Play Video",yo.registerComponent("BigPlayButton",Xa),yo.registerComponent("CloseButton",function(e){function t(t,n){return t=e.call(this,t,n)||this,t.controlText(n&&n.controlText||t.localize("Close")),t}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){Co.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(gs));var vs=function(e){function t(t,n){var i=e.call(this,t,n=void 0===n?{}:n)||this;return n.replay=void 0===n.replay||n.replay,i.on(t,"play",function(e){return i.handlePlay(e)}),i.on(t,"pause",function(e){return i.handlePause(e)}),n.replay&&i.on(t,"ended",function(e){return i.handleEnded(e)}),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?me(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(e){return t.handleSeeked(e)})},t}(gs);vs.prototype.controlText_="Play",yo.registerComponent("PlayToggle",vs);var ys=et;Na=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,["timeupdate","ended"],function(e){return i.updateContent(e)}),i.updateTextNode_(),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),i=h("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+" "},{role:"presentation"});return n.appendChild(i),this.contentEl_=h("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;e=tt(e=void 0===e?0:e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){var e;t.contentEl_&&((e=t.textNode_)&&t.contentEl_.firstChild!==e&&(e=null,Ia.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=_a.createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_)))}))},n.updateContent=function(e){},t}(yo),Na.prototype.labelText_="Time",Na.prototype.controlText_="Time",yo.registerComponent("TimeDisplay",Na),Ma=function(e){function t(){return e.apply(this,arguments)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateTextNode_(t)},t}(Na),Ma.prototype.labelText_="Current Time",Ma.prototype.controlText_="Current Time",yo.registerComponent("CurrentTimeDisplay",Ma),Ao=function(e){function t(t,n){var i=e.call(this,t,n)||this,n=function(e){return i.updateContent(e)};return i.on(t,"durationchange",n),i.on(t,"loadstart",n),i.on(t,"loadedmetadata",n),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(Na),Ao.prototype.labelText_="Duration",Ao.prototype.controlText_="Duration",yo.registerComponent("DurationDisplay",Ao),yo.registerComponent("TimeDivider",function(e){function t(){return e.apply(this,arguments)||this}return bo(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),i=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),t.appendChild(n),t},t}(yo)),ha=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"durationchange",function(e){return i.updateContent(e)}),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(h("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(Na),ha.prototype.labelText_="Remaining Time",ha.prototype.controlText_="Remaining Time",yo.registerComponent("RemainingTimeDisplay",ha),yo.registerComponent("LiveDisplay",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.updateShowing(),i.on(i.player(),"durationchange",function(e){return i.updateShowing(e)}),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=h("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(h("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+" "})),this.contentEl_.appendChild(_a.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(yo)),va=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=h("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(gs),va.prototype.controlText_="Seek to live, currently playing live",yo.registerComponent("SeekToLive",va),ya=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}bo(t,e);var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){var e;this.enabled()&&(e=this.bar.el_.ownerDocument,this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1)},i.createEl=function(t,i,r){return void 0===r&&(r={}),(i=void 0===i?{}:i).className=i.className+" vjs-slider",i=n({tabIndex:0},i),r=n({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,i,r)},i.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||qa||e.preventDefault(),E(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;C(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_?t:(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}),t)}},i.getProgress=function(){return Number(nt(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){return e=I(this.el_,e),this.vertical()?e.y:e.x},i.handleKeyDown=function(t){Co.isEventKey(t,"Left")||Co.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Co.isEventKey(t,"Right")||Co.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(yo),yo.registerComponent("Slider",ya),yo.registerComponent("LoadProgressBar",function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.partEls_=[],i.on(t,"progress",function(e){return i.update(e)}),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=h("span",{className:"vjs-control-text"}),i=h("span",{textContent:this.localize("Loaded")}),r=_a.createTextNode(": ");return this.percentageEl_=h("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=t.player_.liveTracker,n=t.player_.buffered(),e=e&&e.isLive()?e.seekableEnd():t.player_.duration(),i=t.player_.bufferedEnd(),r=t.partEls_,e=it(i,e);t.percent_!==e&&(t.el_.style.width=e,p(t.percentageEl_,e),t.percent_=e);for(var a=0;a<n.length;a++){var o=n.start(a),s=n.end(a),l=r[a];l||(l=t.el_.appendChild(h()),r[a]=l),l.dataset.start===o&&l.dataset.end===s||(l.dataset.start=o,l.dataset.end=s,l.style.left=it(o,i),l.style.width=it(s-o,i))}for(var u=r.length;u>n.length;u--)t.el_.removeChild(r[u-1]);r.length=n.length})},t}(yo)),yo.registerComponent("TimeTooltip",function(e){function t(t,n){return n=e.call(this,t,n)||this,n.update=G(Y(_o(n),n.update),30),n}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=x(this.el_),r=k(this.player_.el()),a=e.width*t;r&&i&&(t=e.left-r.left+a,r=e.width-a+(r.right-e.right),t<(e=i.width/2)?e+=e-t:r<e&&(e=r),e<0?e=0:e>i.width&&(e=i.width),e=Math.round(e),this.el_.style.right="-"+e+"px",this.write(n))},n.write=function(e){p(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var a,o,s=r.player_.duration();s=r.player_.liveTracker&&r.player_.liveTracker.isLive()?((o=(a=r.player_.liveTracker.liveWindow())-t*a)<1?"":"-")+tt(o,a):tt(n,s),r.update(e,t,s),i&&i()})},t}(yo)),Ra=function(e){function t(t,n){return n=e.call(this,t,n)||this,n.update=G(Y(_o(n),n.update),30),n}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n,i=this.getChild("timeTooltip");i&&(n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),i.updateTime(e,t,n))},t}(yo),Ra.prototype.options_={children:[]},Qa||ja||Ra.prototype.options_.children.push("timeTooltip"),yo.registerComponent("PlayProgressBar",Ra),Fa=function(e){function t(t,n){return n=e.call(this,t,n)||this,n.update=G(Y(_o(n),n.update),30),n}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,function(){n.el_.style.left=e.width*t+"px"})},t}(yo),Fa.prototype.options_={children:["timeTooltip"]},yo.registerComponent("MouseTimeDisplay",Fa),Xa=function(e){function t(t,n){return n=e.call(this,t,n)||this,n.setEventHandlers_(),n}bo(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Y(this,this.update),this.update=G(this.update_,30),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in _a&&"visibilityState"in _a&&this.on(_a,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===_a.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,30))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==_a.visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[tt(e,r),tt(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(k(n.el()),n.getProgress())}),i}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){M(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e){if(M(e)){var t=this.calculateDistance(e),n=this.player_.liveTracker;if(n&&n.isLive()){if(.99<=t)return void n.seekToLiveEdge();var i,r=n.seekableStart(),e=n.liveCurrentTime();if((i=(i=e<=(i=r+t*n.liveWindow())?e:i)<=r?r+.1:i)===1/0)return}else(i=t*this.player_.duration())===this.player_.duration()&&(i-=.1);this.userSeek_(i)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?me(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n,i=this.player_.liveTracker;Co.isEventKey(t,"Space")||Co.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.handleAction(t)):Co.isEventKey(t,"Home")?(t.preventDefault(),
t.stopPropagation(),this.userSeek_(0)):Co.isEventKey(t,"End")?(t.preventDefault(),t.stopPropagation(),i&&i.isLive()?this.userSeek_(i.liveCurrentTime()):this.userSeek_(this.player_.duration())):/^[0-9]$/.test(Co(t))?(t.preventDefault(),t.stopPropagation(),n=10*(Co.codes[Co(t)]-Co.codes[0])/100,i&&i.isLive()?this.userSeek_(i.seekableStart()+i.liveWindow()*n):this.userSeek_(this.player_.duration()*n)):Co.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Co.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in _a&&"visibilityState"in _a&&this.off(_a,"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(ya),Xa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Qa||ja||Xa.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),yo.registerComponent("SeekBar",Xa),vs=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.handleMouseMove=G(Y(_o(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=G(Y(_o(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t,n,i,r,a=this.getChild("seekBar");a&&(t=a.getChild("playProgressBar"),n=a.getChild("mouseTimeDisplay"),(t||n)&&(r=x(i=a.el()),e=I(i,e).x,e=nt(e,0,1),n&&n.update(r,e),t&&t.update(r,a.getProgress())))},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){var e;this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing()&&(e=this.getChild("seekBar"),this.player_.scrubbing(!1),e.videoWasPlaying&&me(this.player_.play())))},n.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(yo),vs.prototype.options_={children:["seekBar"]},yo.registerComponent("ProgressControl",vs),Ma=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,["enterpictureinpicture","leavepictureinpicture"],function(e){return i.handlePictureInPictureChange(e)}),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],function(e){return i.handlePictureInPictureEnabledChange(e)}),i.disable(),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){_a.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(gs),Ma.prototype.controlText_="Picture-in-Picture",yo.registerComponent("PictureInPictureToggle",Ma),Ao=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"fullscreenchange",function(e){return i.handleFullscreenChange(e)}),!1===_a[t.fsApi_.fullscreenEnabled]&&i.disable(),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(gs),Ao.prototype.controlText_="Fullscreen",yo.registerComponent("FullscreenToggle",Ao),yo.registerComponent("VolumeLevel",function(e){function t(){return e.apply(this,arguments)||this}return bo(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(yo)),yo.registerComponent("VolumeLevelTooltip",function(e){function t(t,n){return n=e.call(this,t,n)||this,n.update=G(Y(_o(n),n.update),30),n}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,i){if(!n){var r=k(this.el_),a=k(this.player_.el()),n=e.width*t;if(!a||!r)return;t=e.left-a.left+n,a=e.width-n+(a.right-e.right),e=r.width/2,t<e?e+=e-t:a<e&&(e=a),e<0?e=0:e>r.width&&(e=r.width),this.el_.style.right="-"+e+"px"}this.write(i+"%")},n.write=function(e){p(this.el_,e)},n.updateVolume=function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){a.update(e,t,n,i.toFixed(0)),r&&r()})},t}(yo)),Na=function(e){function t(t,n){return n=e.call(this,t,n)||this,n.update=G(Y(_o(n),n.update),30),n}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,function(){n?i.el_.style.bottom=e.height*t+"px":i.el_.style.left=e.width*t+"px"})},t}(yo),Na.prototype.options_={children:["volumeLevelTooltip"]},yo.registerComponent("MouseVolumeLevelDisplay",Na),ha=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on("slideractive",function(e){return i.updateLastVolume_(e)}),i.on(t,"volumechange",function(e){return i.updateARIAAttributes(e)}),t.ready(function(){return i.updateARIAAttributes()}),i}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){M(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t,n,i,r=this.getChild("mouseVolumeLevelDisplay");r&&(t=k(i=this.el()),n=this.vertical(),i=I(i,e),i=n?i.y:i.x,i=nt(i,0,1),r.update(t,i,n)),M(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},t}(ya),ha.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Qa||ja||ha.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ha.prototype.playerEvent="volumechange",yo.registerComponent("VolumeBar",ha),va=function(e){function t(t,n){var i,a,o;return(n=void 0===n?{}:n).vertical=n.vertical||!1,void 0!==n.volumeBar&&!r(n.volumeBar)||(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=e.call(this,t,n)||this,a=_o(i),(o=t).tech_&&!o.tech_.featuresVolumeControl&&a.addClass("vjs-hidden"),a.on(o,"loadstart",function(){o.tech_.featuresVolumeControl?a.removeClass("vjs-hidden"):a.addClass("vjs-hidden")}),i.throttledHandleMouseMove=G(Y(_o(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",function(e){return i.handleMouseDown(e)}),i.on("touchstart",function(e){return i.handleMouseDown(e)}),i.on("mousemove",function(e){return i.handleMouseMove(e)}),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","sliderinactive"],function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")}),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(yo),va.prototype.options_={children:["volumeBar"]},yo.registerComponent("VolumeControl",va),Ra=function(e){function t(t,n){var i,r,a=e.call(this,t,n)||this;return i=_o(a),(r=t).tech_&&!r.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){r.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),a.on(t,["loadstart","volumechange"],function(e){return a.update(e)}),a}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();0===t?(this.player_.volume(n<.1?.1:n),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;Qa&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)v(this.el_,"vjs-vol-"+n);g(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(gs),Ra.prototype.controlText_="Mute",yo.registerComponent("MuteToggle",Ra),Fa=function(e){function t(t,n){var i;return void 0!==(n=void 0===n?{}:n).inline?n.inline=n.inline:n.inline=!0,void 0!==n.volumeControl&&!r(n.volumeControl)||(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(t,["loadstart"],function(e){return i.volumePanelState_(e)}),i.on(i.muteToggle,"keyup",function(e){return i.handleKeyPress(e)}),i.on(i.volumeControl,"keyup",function(e){return i.handleVolumeControlKeyUp(e)}),i.on("keydown",function(e){return i.handleKeyPress(e)}),i.on("mouseover",function(e){return i.handleMouseOver(e)}),i.on("mouseout",function(e){return i.handleMouseOut(e)}),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}bo(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Co.isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),V(_a,"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),q(_a,"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){Co.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(yo),Fa.prototype.options_={children:["muteToggle","volumeControl"]},yo.registerComponent("VolumePanel",Fa);var _s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",function(e){return i.handleKeyDown(e)}),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}bo(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof yo&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof yo&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){(e=this.addChild(e))&&this.addEventListenerForItem(e)},n.createEl=function(){var t=this.options_.contentElType||"ul";return this.contentEl_=h(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),t=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"}),t.appendChild(this.contentEl_),V(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||_a.activeElement;this.children().some(function(e){return e.el()===t})||(e=this.menuButton_)&&e.buttonPressed_&&t!==e.el().firstChild&&e.unpressButton()},n.handleTapClick=function(e){var t;this.menuButton_&&(this.menuButton_.unpressButton(),t=this.children(),!Array.isArray(t)||(t=t.filter(function(t){return t.el()===e.target})[0])&&"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())},n.handleKeyDown=function(e){Co.isEventKey(e,"Left")||Co.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Co.isEventKey(e,"Right")||Co.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},t}(yo);yo.registerComponent("Menu",_s),Xa=function(e){function t(t,n){var i;return(i=e.call(this,t,n=void 0===n?{}:n)||this).menuButton_=new gs(t,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true"),n=gs.prototype.buildCSSClass(),i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,n=function(e){return i.handleClick(e)},i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",n),i.on(i.menuButton_,"click",n),i.on(i.menuButton_,"keydown",function(e){return i.handleKeyDown(e)}),i.on(i.menuButton_,"mouseenter",function(){i.addClass("vjs-hover"),i.menu.show(),V(_a,"keyup",i.handleMenuKeyUp_)}),i.on("mouseleave",function(e){return i.handleMouseLeave(e)}),i.on("keydown",function(e){return i.handleSubmenuKeyDown(e)}),i}bo(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var e,t=new _s(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title&&(e=h("li",{className:"vjs-menu-title",textContent:se(this.options_.title),tabIndex:-1}),e=new yo(this.player_,{el:e}),t.addItem(e)),this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+gs.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),q(_a,"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Co.isEventKey(e,"Esc")||Co.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Co.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Co.isEventKey(e,"Up")||Co.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Co.isEventKey(e,"Esc")||Co.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Co.isEventKey(e,"Esc")||Co.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Co.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Qa&&c()||this.menu.focus())},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(yo),yo.registerComponent("MenuButton",Xa),vs=function(e){function t(t,n){var i=n.tracks,n=e.call(this,t,n)||this;if(n.items.length<=1&&n.hide(),!i)return _o(n);var r=Y(_o(n),n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),n.player_.on("ready",r),n.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)}),n}return bo(t,e),t}(Xa),yo.registerComponent("TrackButton",vs);var bs=["Tab","Esc","Up","Down","Right","Left"],Ma=function(e){function t(t,n){return t=e.call(this,t,n)||this,t.selectable=n.selectable,t.isSelected_=n.selected||!1,t.multiSelectable=n.multiSelectable,t.selected(t.isSelected_),t.selectable?t.multiSelectable?t.el_.setAttribute("role","menuitemcheckbox"):t.el_.setAttribute("role","menuitemradio"):t.el_.setAttribute("role","menuitem"),t}bo(t,e);var i=t.prototype;return i.createEl=function(t,i,r){return this.nonIconControl=!0,r=e.prototype.createEl.call(this,"li",n({className:"vjs-menu-item",tabIndex:-1},i),r),r.replaceChild(h("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},i.handleKeyDown=function(t){bs.some(function(e){return Co.isEventKey(t,e)})||e.prototype.handleKeyDown.call(this,t)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(za);yo.registerComponent("MenuItem",Ma);var Ts=function(e){function t(t,n){function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleTracksChange.apply(_o(a),t)}function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.handleSelectedLanguageChange.apply(_o(a),t)}var a,o=n.track,s=t.textTracks();n.label=o.label||o.language||"Unknown",n.selected="showing"===o.mode,(a=e.call(this,t,n)||this).track=o,a.kinds=(n.kinds||[n.kind||a.track.kind]).filter(Boolean);var l;return t.on(["loadstart","texttrackchange"],i),s.addEventListener("change",i),s.addEventListener("selectedlanguagechange",r),a.on("dispose",function(){t.off(["loadstart","texttrackchange"],i),s.removeEventListener("change",i),s.removeEventListener("selectedlanguagechange",r)}),void 0===s.onchange&&a.on(["tap","click"],function(){if("object"!=typeof pa.Event)try{l=new pa.Event("change")}catch(e){}l||(l=_a.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(l)}),a.handleTracksChange(),a}bo(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){var t;"showing"===this.track.mode&&((t=this.player_.cache_.selectedLanguage)&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Ma);yo.registerComponent("TextTrackMenuItem",Ts);var Ss=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}bo(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Ts);yo.registerComponent("OffTextTrackMenuItem",Ss),Ao=function(e){function t(t,n){return(n=void 0===n?{}:n).tracks=t.textTracks(),e.call(this,t,n)||this}return bo(t,e),t.prototype.createItems=function(e,t){var n;void 0===t&&(t=Ts),this.label_&&(n=this.label_+" off"),(e=void 0===e?[]:e).push(new Ss(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a,o=i[r];-1<this.kinds_.indexOf(o.kind)&&((a=new t(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1})).addClass("vjs-"+o.kind+"-menu-item"),e.push(a))}return e},t}(vs),yo.registerComponent("TextTrackButton",Ao);var ws=function(e){function t(t,n){var i=n.track,r=n.cue,a=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=r.text,n.selected=r.startTime<=a&&a<r.endTime,(n=e.call(this,t,n)||this).track=i,n.cue=r,i.addEventListener("cuechange",Y(_o(n),n.update)),n}bo(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(Ma);yo.registerComponent("ChaptersTrackMenuItem",ws),Na=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){var t;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=e,this.track_&&(this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&e.addEventListener("load",this.updateHandler_)))},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(se(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],r=new ws(this.player_,{track:this.track_,cue:r});e.push(r)}return e},t}(Ao),Na.prototype.kind_="chapters",Na.prototype.controlText_="Chapters",yo.registerComponent("ChaptersButton",Na),ya=function(e){function t(t,n,i){var i=e.call(this,t,n,i)||this,r=t.textTracks(),a=Y(_o(i),i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}bo(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ao),ya.prototype.kind_="descriptions",ya.prototype.controlText_="Descriptions",yo.registerComponent("DescriptionsButton",ya),ha=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Ao),ha.prototype.kind_="subtitles",ha.prototype.controlText_="Subtitles",yo.registerComponent("SubtitlesButton",ha);var Es=function(e){function t(t,n){return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(t=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),t.controlText(", opens "+n.kind+" settings dialog"),t}return bo(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Ts);yo.registerComponent("CaptionSettingsMenuItem",Es),va=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Es(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Ao),va.prototype.kind_="captions",va.prototype.controlText_="Captions",yo.registerComponent("CaptionsButton",va);var Cs=function(e){function t(){return e.apply(this,arguments)||this}return bo(t,e),t.prototype.createEl=function(t,n,i){return n=e.prototype.createEl.call(this,t,n,i),i=n.querySelector(".vjs-menu-item-text"),"captions"===this.options_.track.kind&&(i.appendChild(h("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),i.appendChild(h("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),n},t}(Ts);yo.registerComponent("SubsCapsMenuItem",Cs),Ra=function(e){function t(t,n){return(n=e.call(this,t,n=void 0===n?{}:n)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(se(n.label_)),n}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Es(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,Cs)},t}(Ao),Ra.prototype.kinds_=["captions","subtitles"],Ra.prototype.controlText_="Subtitles",yo.registerComponent("SubsCapsButton",Ra);var ks=function(e){function t(t,n){function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(_o(r),t)}var r,a=n.track,o=t.audioTracks();return n.label=a.label||a.language||"Unknown",n.selected=a.enabled,(r=e.call(this,t,n)||this).track=a,r.addClass("vjs-"+a.kind+"-menu-item"),o.addEventListener("change",i),r.on("dispose",function(){o.removeEventListener("change",i)}),r}bo(t,e);var n=t.prototype;return n.createEl=function(t,n,i){return n=e.prototype.createEl.call(this,t,n,i),i=n.querySelector(".vjs-menu-item-text"),"main-desc"===this.options_.track.kind&&(i.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{
"aria-hidden":!0})),i.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),n},n.handleClick=function(t){e.prototype.handleClick.call(this,t),this.track.enabled=!0},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Ma);yo.registerComponent("AudioTrackMenuItem",ks),Fa=function(e){function t(t,n){return(n=void 0===n?{}:n).tracks=t.audioTracks(),e.call(this,t,n)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new ks(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}(vs),Fa.prototype.controlText_="Audio Track",yo.registerComponent("AudioTrackButton",Fa);var xs=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",function(e){return i.update(e)}),i}bo(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Ma);xs.prototype.contentElType="button",yo.registerComponent("PlaybackRateMenuItem",xs),za=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(t,"loadstart",function(e){return i.updateVisibility(e)}),i.on(t,"ratechange",function(e){return i.updateLabel(e)}),i.on(t,"playbackrateschange",function(e){return i.handlePlaybackRateschange(e)}),i}bo(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=h("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;0<=n;n--)t.push(new xs(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>t){i=n[r];break}this.player().playbackRate(i)},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(Xa),za.prototype.controlText_="Playback Rate",yo.registerComponent("PlaybackRateMenuButton",za),Na=function(e){function t(){return e.apply(this,arguments)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,i){return void 0===t&&(t="div"),void 0===i&&(i={}),(n=void 0===n?{}:n).className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,i)},t}(yo),yo.registerComponent("Spacer",Na),yo.registerComponent("CustomControlSpacer",function(e){function t(){return e.apply(this,arguments)||this}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:" "})},t}(Na)),ya=function(e){function t(){return e.apply(this,arguments)||this}return bo(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(yo),ya.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in _a&&ya.prototype.options_.children.splice(ya.prototype.options_.children.length-1,0,"pictureInPictureToggle"),yo.registerComponent("ControlBar",ya),ha=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.on(t,"error",function(e){return i.open(e)}),i}bo(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(xo),ha.prototype.options_=Aa({},xo.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),yo.registerComponent("ErrorDisplay",ha);var Is="vjs-text-track-settings",va=["#000","Black"],Ao=["#00F","Blue"],Ra=["#0FF","Cyan"],vs=["#0F0","Green"],Fa=["#F0F","Magenta"],Ma=["#F00","Red"],Xa=["#FFF","White"],za=["#FF0","Yellow"],Na=["1","Opaque"],ya=["0.5","Semi-Transparent"],ha=["0","Transparent"],Ds={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[va,Xa,Ma,vs,Ao,za,Fa,Ra]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Na,ya,ha]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Xa,va,Ma,vs,Ao,za,Fa,Ra]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Na,ya]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ha,ya,Na]}};Ds.windowColor.options=Ds.backgroundColor.options,yo.registerComponent("TextTrackSettings",function(e){function n(n,i){var r;return i.temporary=!1,(r=e.call(this,n,i)||this).updateDisplay=r.updateDisplay.bind(_o(r)),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=h("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===i.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),t(Ds,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}bo(n,e);var i=n.prototype;return i.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},i.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var e=Ds[e],r=e.id.replace("%s",this.id_),a=[t,r].join(" ").trim();return["<"+n+' id="'+r+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(e.label),"</"+n+">",'<select aria-labelledby="'+a+'">'].concat(e.options.map(function(e){var t=r+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+a+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return h("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return h("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return h("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r,t=(r=i.$(t.selector),t=t.parser,rt(r.options[r.options.selectedIndex].value,t));return void 0!==t&&(e[n]=t),e},void 0===(n={})&&(n=0),Pa(e=Ds).reduce(function(n,i){return t(n,e[i],i)},n)},i.setValues=function(e){var n=this;t(Ds,function(t,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(rt(e.options[i].value,n)===t){e.selectedIndex=i;break}}(n.$(t.selector),e[i],t.parser)})},i.setDefaults=function(){var e=this;t(Ds,function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n})},i.restoreSettings=function(){var e;try{e=JSON.parse(pa.localStorage.getItem(Is))}catch(e){Ia.warn(e)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?pa.localStorage.setItem(Is,JSON.stringify(e)):pa.localStorage.removeItem(Is)}catch(e){Ia.warn(e)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,e=e&&e.captionsButton;t?t.focus():e&&e.focus()},n}(xo)),yo.registerComponent("ResizeManager",function(e){function t(t,n){var i,r=n.ResizeObserver||pa.ResizeObserver,a=le({createEl:!(r=null!==n.ResizeObserver&&r),reportTouchActivity:!1},n);return(i=e.call(this,t,a)||this).ResizeObserver=n.ResizeObserver||pa.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=X(function(){i.resizeHandler()},100,!1,_o(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){var e,t;i.el_&&i.el_.contentWindow&&(e=i.debouncedHandler_,t=i.unloadListener_=function(){q(this,"resize",e),q(this,"unload",t),t=null},V(i.el_.contentWindow,"unload",t),V(i.el_.contentWindow,"resize",e))},i.one("load",i.loadListener_)),i}bo(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(yo));var As={trackingThreshold:30,liveTolerance:15};yo.registerComponent("LiveTracker",function(e){function t(t,n){var n=le(As,n,{createEl:!1}),i=e.call(this,t,n)||this;return i.handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",function(e){return i.handleDurationchange(e)}),i.one(i.player_,"canplay",function(){return i.toggleTracking()}),Wa&&"hidden"in _a&&"visibilityState"in _a&&i.on(_a,"visibilitychange",i.handleVisibilityChange_),i}bo(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(_a.hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e,t=this.player_.seekable();t&&t.length&&(e=Number(pa.performance.now().toFixed(4)),t=-1===this.lastTime_?0:(e-this.lastTime_)/1e3,this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+t,e=this.liveCurrentTime(),t=this.player_.currentTime(),t=this.player_.paused()||this.seekedBehindLive_||Math.abs(e-t)>this.options_.liveTolerance,(t=!(!this.timeupdateSeen_||e===1/0)&&t)!==this.behindLiveEdge_&&(this.behindLiveEdge_=t,this.trigger("liveedgechange")))},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,30),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&2<e,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(_a,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(yo));var Os,Ps=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=_a.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=_a.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",pa.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ls=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?be(pa.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return pa.Element.prototype.setAttribute.call(this,"src",e),e}}),Ms=function(e){function t(t,n){var i=e.call(this,t,n)||this,n=t.source,r=!1;if(n&&(i.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var a=i.el_.childNodes,o=a.length,s=[];o--;){var l=a[o];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),r||i.el_.hasAttribute("crossorigin")||!Se(l.src)||(r=!0)):s.push(l))}for(var u=0;u<s.length;u++)i.el_.removeChild(s[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&r&&Ia.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(Ga||Ka||Ba)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}bo(t,e);var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){lt(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){n=[];for(var e=0;e<i.length;e++){var t=i[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}}function t(){for(var e=0;e<n.length;e++){var r=n[e];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}i.removeEventListener("change",t)}var n,i=this.textTracks();e(),i.addEventListener("change",e),this.on("dispose",function(){return i.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",e),i.removeEventListener("change",t),i.addEventListener("change",t)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",e),i.addEventListener("change",e),i.removeEventListener("change",t)})},i.overrideNative_=function(e,t){var n,i=this;t===this["featuresNative"+e+"Tracks"]&&(this[(n=e.toLowerCase())+"TracksListeners_"]&&Object.keys(this[n+"TracksListeners_"]).forEach(function(e){i.el()[n+"Tracks"].removeEventListener(e,i[n+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[n+"TracksListeners_"]=null,this.proxyNativeTracksForType_(n))},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var t,n,i=this,r=$o[e],a=this.el()[r.getterName],o=this[r.getterName]();this["featuresNative"+r.capitalName+"Tracks"]&&a&&a.addEventListener&&(n=function(){for(var e=[],t=0;t<o.length;t++){for(var n=!1,i=0;i<a.length;i++)if(a[i]===o[t]){n=!0;break}n||e.push(o[t])}for(;e.length;)o.removeTrack(e.shift())},this[r.getterName+"Listeners_"]=t={change:function(t){var n={type:"change",target:o,currentTarget:o,srcElement:o};o.trigger(n),"text"===e&&i[Wo.remoteText.getterName]().trigger(n)},addtrack:function(e){o.addTrack(e.track)},removetrack:function(e){o.removeTrack(e.track)}},Object.keys(t).forEach(function(e){var n=t[e];a.addEventListener(e,n),i.on("dispose",function(t){return a.removeEventListener(e,n)})}),this.on("loadstart",n),this.on("dispose",function(e){return i.off("loadstart",n)}))},i.proxyNativeTracks_=function(){var e=this;$o.names.forEach(function(t){e.proxyNativeTracksForType_(t)})},i.createEl=function(){var e,i=this.options_.tag;i&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(i?(e=i.cloneNode(!0),i.parentNode&&i.parentNode.insertBefore(e,i),t.disposeMediaElement(i),i=e):(i=_a.createElement("video"),e=le({},this.options_.tag&&b(this.options_.tag)),Ga&&!0===this.options_.nativeControlsForTouch||delete e.controls,_(i,n(e,{id:this.options_.techId,class:"vjs-tech"}))),i.playerId=this.options_.playerId),void 0!==this.options_.preload&&S(i,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(i.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var o=r[a],s=this.options_[o];void 0!==s&&(s?S(i,o,o):w(i,o),i[o]=s)}return i},i.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Ja?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){Ia(e,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;return this.el_.duration===1/0&&ja&&qa&&0===this.el_.currentTime?(this.on("timeupdate",function t(){0<e.el_.currentTime&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))}),NaN):this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))},this.on("webkitbeginfullscreen",t),this.on("dispose",function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)}))},i.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=pa.navigator&&pa.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)me(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},i.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},i.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=_a.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},i.addRemoteTextTrack=function(t,n){return n=e.prototype.addRemoteTextTrack.call(this,t,n),this.featuresNativeTextTracks&&this.el().appendChild(n),n},i.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},i.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),pa.performance&&"function"==typeof pa.performance.now?e.creationTime=pa.performance.now():pa.performance&&pa.performance.timing&&"number"==typeof pa.performance.timing.navigationStart&&(e.creationTime=pa.Date.now()-pa.performance.timing.navigationStart),e},t}(os);ut(Ms,"TEST_VID",function(){if(l()){var e=_a.createElement("video"),t=_a.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}}),Ms.isSupported=function(){try{Ms.TEST_VID.volume=.5}catch(e){return!1}return!(!Ms.TEST_VID||!Ms.TEST_VID.canPlayType)},Ms.canPlayType=function(e){return Ms.TEST_VID.canPlayType(e)},Ms.canPlaySource=function(e,t){return Ms.canPlayType(e.type)},Ms.canControlVolume=function(){try{var e=Ms.TEST_VID.volume;return Ms.TEST_VID.volume=e/2+.1,e!==Ms.TEST_VID.volume}catch(e){return!1}},Ms.canMuteVolume=function(){try{var e=Ms.TEST_VID.muted;return Ms.TEST_VID.muted=!e,Ms.TEST_VID.muted?S(Ms.TEST_VID,"muted","muted"):w(Ms.TEST_VID,"muted"),e!==Ms.TEST_VID.muted}catch(e){return!1}},Ms.canControlPlaybackRate=function(){if(ja&&qa&&$a<58)return!1;try{var e=Ms.TEST_VID.playbackRate;return Ms.TEST_VID.playbackRate=e/2+.1,e!==Ms.TEST_VID.playbackRate}catch(e){return!1}},Ms.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(_a.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(_a.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(_a.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(_a.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ms.supportsNativeTextTracks=function(){return Ja||Qa&&qa},Ms.supportsNativeVideoTracks=function(){return!(!Ms.TEST_VID||!Ms.TEST_VID.videoTracks)},Ms.supportsNativeAudioTracks=function(){return!(!Ms.TEST_VID||!Ms.TEST_VID.audioTracks)},Ms.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],n=e[1];ut(Ms.prototype,t,function(){return Ms[n]()},!0)}),Ms.prototype.movingMediaElementInDOM=!Qa,Ms.prototype.featuresFullscreenResize=!0,Ms.prototype.featuresProgressEvents=!0,Ms.prototype.featuresTimeupdateEvents=!0,Ms.patchCanPlayType=function(){4<=Ua&&!Ha&&!qa&&(Os=Ms.TEST_VID&&Ms.TEST_VID.constructor.prototype.canPlayType,Ms.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Os.call(this,e)})},Ms.unpatchCanPlayType=function(){var e=Ms.TEST_VID.constructor.prototype.canPlayType;return Os&&(Ms.TEST_VID.constructor.prototype.canPlayType=Os),e},Ms.patchCanPlayType(),Ms.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ms.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Ms.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){Ms.prototype["set"+se(e)]=function(t){(this.el_[e]=t)?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){Ms.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){Ms.prototype["set"+se(e)]=function(t){this.el_[e]=t}}),["pause","load","play"].forEach(function(e){Ms.prototype[e]=function(){return this.el_[e]()}}),os.withSourceHandlers(Ms),Ms.nativeSourceHandler={},Ms.nativeSourceHandler.canPlayType=function(e){try{return Ms.TEST_VID.canPlayType(e)}catch(e){return""}},Ms.nativeSourceHandler.canHandleSource=function(e,t){return e.type?Ms.nativeSourceHandler.canPlayType(e.type):e.src?(e=Te(e.src),Ms.nativeSourceHandler.canPlayType("video/"+e)):""},
Ms.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ms.nativeSourceHandler.dispose=function(){},Ms.registerSourceHandler(Ms.nativeSourceHandler),os.registerTech("Html5",Ms);var Ns=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Rs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Fs=["tiny","xsmall","small","medium","large","xlarge","huge"],js={};Fs.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;js[e]="vjs-layout-"+t});var Us={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Bs=function(e){function t(i,r,a){var o,s;if(i.id=i.id||r.id||"vjs_video_"+ao++,(r=n(t.getTagSettings(i),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof i.closest){var l=i.closest("[lang]");l&&l.getAttribute&&(r.language=l.getAttribute("lang"))}else for(var u=i;u&&1===u.nodeType;){if(b(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}if((o=e.call(this,null,r,a)||this).boundDocumentFullscreenChange_=function(e){return o.documentFullscreenChange_(e)},o.boundFullWindowOnEscKey_=function(e){return o.fullWindowOnEscKey(e)},o.boundUpdateStyleEl_=function(e){return o.updateStyleEl_(e)},o.boundApplyInitTime_=function(e){return o.applyInitTime_(e)},o.boundUpdateCurrentBreakpoint_=function(e){return o.updateCurrentBreakpoint_(e)},o.boundHandleTechClick_=function(e){return o.handleTechClick_(e)},o.boundHandleTechDoubleClick_=function(e){return o.handleTechDoubleClick_(e)},o.boundHandleTechTouchStart_=function(e){return o.handleTechTouchStart_(e)},o.boundHandleTechTouchMove_=function(e){return o.handleTechTouchMove_(e)},o.boundHandleTechTouchEnd_=function(e){return o.handleTechTouchEnd_(e)},o.boundHandleTechTap_=function(e){return o.handleTechTap_(e)},o.isFullscreen_=!1,o.log=Da(o.id_),o.fsApi_=ba,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");return o.tag=i,o.tagAttributes=i&&b(i),o.language(o.options_.language),r.languages?(s={},Object.getOwnPropertyNames(r.languages).forEach(function(e){s[e.toLowerCase()]=r.languages[e]}),o.languages_=s):o.languages_=t.prototype.options_.languages,o.resetCache_(),o.poster_=r.poster||"",o.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],i.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(e){if("function"!=typeof o[e])throw new Error('plugin "'+e+'" does not exist')}),o.scrubbing_=!1,o.el_=o.createEl(),re(_o(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(V(_a,o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_),a=le(o.options_),r.plugins&&Object.keys(r.plugins).forEach(function(e){o[e](r.plugins[e])}),r.debug&&o.debug(!0),o.options_.playerOptions=a,o.middleware_=[],o.playbackRates(r.playbackRates),o.initChildren(),o.isAudio("audio"===i.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),Ga&&o.addClass("vjs-touch-enabled"),Qa||o.addClass("vjs-workinghover"),t.players[o.id_]=_o(o),i=da.split(".")[0],o.addClass("vjs-v"+i),o.userActive(!0),o.reportUserActivity(),o.one("play",function(e){return o.listenForUserActivity_(e)}),o.on("stageclick",function(e){return o.handleStageClick_(e)}),o.on("keydown",function(e){return o.handleKeyDown(e)}),o.on("languagechange",function(e){return o.handleLanguagechange(e)}),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o}bo(t,e);var r=t.prototype;return r.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),q(_a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),q(_a,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ls[this.id()]=null,zo.names.forEach(function(e){e=zo[e],e=n[e.getterName](),e&&e.off&&e.off()}),e.prototype.dispose.call(this)},r.createEl=function(){var t,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=n.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a,o,s=b(n);if(r){for(t=this.el_=n,n=this.tag=_a.createElement("video");t.children.length;)n.appendChild(t.firstChild);m(t,"video-js")||g(t,"video-js"),t.appendChild(n),i=this.playerElIngest_=t,Object.keys(t).forEach(function(e){try{n[e]=t[e]}catch(e){}})}n.setAttribute("tabindex","-1"),s.tabindex="-1",(Wa||qa&&Ya)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(e){r&&"class"===e||t.setAttribute(e,s[e]),r&&n.setAttribute(e,s[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",(n.player=t.player=this).addClass("vjs-paused"),!0!==pa.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=F("vjs-styles-dimensions"),a=eo(".vjs-styles-defaults"),(o=eo("head")).insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)),this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=n.getElementsByTagName("a"),u=0;u<l.length;u++){var c=l.item(u);g(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(t,n),f(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t},r.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):Ia.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},r.width=function(e){return this.dimension("width",e)},r.height=function(e){return this.dimension("height",e)},r.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?Ia.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},r.fluid=function(e){var t,n=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,po(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),t=function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)},po(e=this)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){var e,t,n,i;!0!==pa.VIDEOJS_NO_DYNAMIC_STYLE?(i=(n=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),j(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")):(t="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,(i=this.tech_&&this.tech_.el())&&(0<=t&&(i.width=t),0<=n&&(i.height=n)))},r.loadTech_=function(e,t){var i=this;this.tech_&&this.unloadTech_();var r=se(e),a=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(os.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var o=this.autoplay(),s={source:t,autoplay:o=!("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};if(zo.names.forEach(function(e){e=zo[e],s[e.getterName]=i[e.privateName]}),n(s,this.options_[r]),n(s,this.options_[a]),n(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(s.startTime=this.cache_.currentTime),!(e=os.getTech(e)))throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new e(s),this.tech_.ready(Y(this,this.handleTechReady_),!0),Eo(this.textTracksJson_||[],this.tech_),Ns.forEach(function(e){i.on(i.tech_,e,function(t){return i["handleTech"+se(e)+"_"](t)})}),Object.keys(Rs).forEach(function(e){i.on(i.tech_,e,function(t){0===i.tech_.playbackRate()&&i.tech_.seeking()?i.queuedCallbacks_.push({callback:i["handleTech"+Rs[e]+"_"].bind(i),event:t}):i["handleTech"+Rs[e]+"_"](t)})}),this.on(this.tech_,"loadstart",function(e){return i.handleTechLoadStart_(e)}),this.on(this.tech_,"sourceset",function(e){return i.handleTechSourceset_(e)}),this.on(this.tech_,"waiting",function(e){return i.handleTechWaiting_(e)}),this.on(this.tech_,"ended",function(e){return i.handleTechEnded_(e)}),this.on(this.tech_,"seeking",function(e){return i.handleTechSeeking_(e)}),this.on(this.tech_,"play",function(e){return i.handleTechPlay_(e)}),this.on(this.tech_,"firstplay",function(e){return i.handleTechFirstPlay_(e)}),this.on(this.tech_,"pause",function(e){return i.handleTechPause_(e)}),this.on(this.tech_,"durationchange",function(e){return i.handleTechDurationChange_(e)}),this.on(this.tech_,"fullscreenchange",function(e,t){return i.handleTechFullscreenChange_(e,t)}),this.on(this.tech_,"fullscreenerror",function(e,t){return i.handleTechFullscreenError_(e,t)}),this.on(this.tech_,"enterpictureinpicture",function(e){return i.handleTechEnterPictureInPicture_(e)}),this.on(this.tech_,"leavepictureinpicture",function(e){return i.handleTechLeavePictureInPicture_(e)}),this.on(this.tech_,"error",function(e){return i.handleTechError_(e)}),this.on(this.tech_,"posterchange",function(e){return i.handleTechPosterChange_(e)}),this.on(this.tech_,"textdata",function(e){return i.handleTechTextData_(e)}),this.on(this.tech_,"ratechange",function(e){return i.handleTechRateChange_(e)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||f(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var e=this;zo.names.forEach(function(t){t=zo[t],e[t.privateName]=e[t.getterName]()}),this.textTracksJson_=wo(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(e){return void 0===e&&Ia.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){function e(){t.muted(n)}var n=t.muted();t.muted(!0),t.playTerminatedQueue_.push(e);var i=t.play();if(fe(i))return i.catch(function(t){throw e(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))})};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():fe(n=this.play())&&(n=n.catch(i)),fe(n))return n.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},r.updateSourceCaches_=function(e){var t=e=void 0===e?"":e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Xe(t)}(this,t)),this.cache_.source=le({},e,{src:t,type:n});for(var n=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),i=[],r=this.$$("source"),a=[],o=0;o<r.length;o++){var s=b(r[o]);i.push(s),s.src&&s.src===t&&a.push(s.src)}a.length&&!n.length?this.cache_.sources=i:n.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},r.handleTechSourceset_=function(e){var t,n,i,r=this;this.changingSrc_||(t=function(e){return r.updateSourceCaches_(e)},n=this.currentSource().src,i=e.src,n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(this.lastSource_&&(this.lastSource_.tech===i||this.lastSource_.player===n)||(t=function(){})),t(i),e.src||this.tech_.any(["sourceset","loadstart"],function(e){"sourceset"!==e.type&&(e=r.techGet("currentSrc"),r.lastSource_.tech=e,r.updateSourceCaches_(e))})),this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},r.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))})},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(Ia.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(e){this.controls_&&(this.paused()?me(this.play()):this.pause())},r.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(t){return t.contains(e.target)})||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(e){var t=e.target.player;t&&t!==this||(e=this.el(),!(t=_a[this.fsApi_.fullscreenElement]===e)&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t))},r.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},r.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var e=this.tech_.error();this.error(e)},r.handleTechTextData_=function(){this.trigger("textdata",1<arguments.length?arguments[1]:null)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(e,t){this.ready(function(){if(e in ds)return n=this.middleware_,i=this.tech_,r=t,i[i=e](n.reduce(Ye(i),r));if(e in hs)return ze(this.middleware_,this.tech_,e,t);var n,i,r;try{this.tech_&&this.tech_[e](t)}catch(n){throw Ia(n),n}},!0)},r.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in cs)return t=this.middleware_,n=this.tech_,i=e,t.reduceRight(Ye(i),n[i]());if(e in hs)return ze(this.middleware_,this.tech_,e);var t,n,i;try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Ia("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw Ia("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw Ia(t),t}}},r.play=function(){var e=this,t=this.options_.Promise||pa.Promise;return t?new t(function(t){e.play_(t)}):this.play_()},r.play_=function(e){var t=this;if(this.playCallbacks_.push(e=void 0===e?me:e),e=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!e)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(e||!Ja&&!Qa||this.load());e=this.techGet_("play"),null===e?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(e)},r.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},r.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(t){t(e)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return!1!==this.techGet_("paused")},r.played=function(){return this.techGet_("played")||de(0,0)},r.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var e;return e=(e=this.techGet_("buffered"))&&e.length?e:de(0,0)},r.bufferedPercent=function(){return he(this.buffered(),this.duration())},r.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},r.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},r.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},r.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(e){if(void 0===e)return this.isFullscreen_;var t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_()},r.requestFullscreen=function(e){var t=this.options_.Promise||pa.Promise;if(t){var n=this;return new t(function(t,i){function r(){n.off("fullscreenerror",o),n.off("fullscreenchange",a)}function a(){r(),t()}function o(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",o);var s=n.requestFullscreenHelper_(e);s&&(s.then(r,r),s.then(t,i))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(e){var t=this;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(n=e)),this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](n);return n&&n.then(function(){return t.isFullscreen(!0)},function(){return t.isFullscreen(!1)}),n}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var e=this.options_.Promise||pa.Promise;if(e){var t=this;return new e(function(e,n){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){i(),e()}function a(e,t){i(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var o=t.exitFullscreenHelper_();o&&(o.then(i,i),o.then(e,n))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=_a[this.fsApi_.exitFullscreen]();return t&&me(t.then(function(){return e.isFullscreen(!1)})),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=_a.documentElement.style.overflow,V(_a,"keydown",this.boundFullWindowOnEscKey_),_a.documentElement.style.overflow="hidden",g(_a.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(e){Co.isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,q(_a,"keydown",this.boundFullWindowOnEscKey_),_a.documentElement.style.overflow=this.docOrigOverflow,v(_a.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in _a&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in _a)return _a.exitPictureInPicture()},r.handleKeyDown=function(e){var t=this.options_.userActions;t&&t.hotkeys&&(function(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))}(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e)))},r.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=t.muteKey,i=void 0===i?function(e){return Co.isEventKey(e,"m")}:i,t=t.playPauseKey,t=void 0===t?function(e){return Co.isEventKey(e,"k")||Co.isEventKey(e,"Space")}:t;(void 0===n?function(e){return Co.isEventKey(e,"f")}:n).call(this,e)?(e.preventDefault(),e.stopPropagation(),n=yo.getComponent("FullscreenToggle"),!1!==_a[this.fsApi_.fullscreenEnabled]&&n.prototype.handleClick.call(this,e)):i.call(this,e)?(e.preventDefault(),e.stopPropagation(),yo.getComponent("MuteToggle").prototype.handleClick.call(this,e)):t.call(this,e)&&(e.preventDefault(),e.stopPropagation(),yo.getComponent("PlayToggle").prototype.handleClick.call(this,e))},r.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=os.getTech(r);if(a=a||yo.getComponent(r)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else Ia.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},r.selectSource=function(e){function t(e,t,n){var i;return e.some(function(e){return t.some(function(t){if(i=n(e,t))return!0})}),i}var n,i=this,r=this.options_.techOrder.map(function(e){return[e,os.getTech(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(Ia.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),a=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}},a=this.options_.sourceOrder?t(e,r,(n=a,function(e,t){return n(t,e)})):t(r,e,a);return a||!1},r.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i,r,a=Ke(e);a.length?(this.changingSrc_=!0,t||(this.cache_.sources=a),this.updateSourceCaches_(a[0]),We(this,a[0],function(e,i){var r;return n.middleware_=i,t||(n.cache_.sources=a),n.updateSourceCaches_(e),n.src_(e)?1<a.length?n.handleSrc_(a.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void n.triggerReady()):(i=i,r=n.tech_,void i.forEach(function(e){return e.setTech&&e.setTech(r)}))}),this.options_.retryOnError&&1<a.length&&(r=function(){n.off("error",i)},this.one("error",i=function(){n.error(null),n.handleSrc_(a.slice(1),!0)}),this.one("playing",r),this.resetRetryOnError_=function(){n.off("error",i),n.off("playing",r)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},r.src=function(e){return this.handleSrc_(e,!1)},r.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,se(t)!==se(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){i.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1)},r.load=function(){this.techCall_("load")},r.reset=function(){var e=this,t=this.options_.Promise||pa.Promise;this.paused()||!t?this.doReset_():me(this.play().then(function(){return e.doReset_()}))},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),po(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,e=e.remainingTimeDisplay;t&&t.updateContent(),e&&e.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){
var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},r.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},r.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},r.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},r.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){var e;this.poster_&&!this.options_.techCanOverridePoster||!this.tech_||!this.tech_.poster||(e=this.tech_.poster()||"")!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))},r.controls=function(e){if(void 0===e)return!!this.controls_;this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;this.usingNativeControls_!==(e=!!e)&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(ma("beforeerror").forEach(function(n){n=n(t,e),i(n)&&!Array.isArray(n)||"string"==typeof n||"number"==typeof n||null===n?e=n:t.log.error("please return a value that MediaError expects in beforeerror hooks")}),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",function(){this.off(["click","touchstart"],n)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new pe(e),this.addClass("vjs-error"),Ia.error("(CODE:"+this.error_.code+" "+pe.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ma("error").forEach(function(e){return e(t,t.error_)})},r.reportUserActivity=function(e){this.userActivity_=!0},r.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var e,t,n,i=Y(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",function(){i(),this.clearInterval(e),e=this.setInterval(i,250)}),this.on("mousemove",function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())}),this.on("mouseup",r),this.on("mouseleave",r);var a,r=this.getChild("controlBar");!r||Qa||ja||(r.on("mouseenter",function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),r.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a),(e=this.options_.inactivityTimeout)<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e)))},250)},r.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},r.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},r.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},r.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},r.removeRemoteTextTrack=function(e){var t=(t=(e=void 0===e?{}:e).track)||e;if(this.tech_)return this.tech_.removeRemoteTextTrack(t)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),po(this)&&this.trigger("languagechange"))},r.languages=function(){return le(t.prototype.options_.languages,this.languages_)},r.toJSON=function(){var e=le(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=le(i)).player=void 0,e.tracks[n]=i}return e},r.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new xo(this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},r.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Fs.length;n++){var i=Fs[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(js[e]),this.addClass(js[i]),this.breakpoint_=i;break}}},r.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},r.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=n({},Us,e),this.updateCurrentBreakpoint_()),n(this.breakpoints_)},r.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return js[this.breakpoint_]||""},r.loadMedia=function(e,t){var n,i,r,a=this;e&&"object"==typeof e&&(this.reset(),this.cache_.media=le(e),n=(r=this.cache_.media).artwork,i=r.poster,e=r.src,r=r.textTracks,!n&&i&&(this.cache_.media.artwork=[{src:i,type:Xe(i)}]),e&&this.src(e),i&&this.poster(i),Array.isArray(r)&&r.forEach(function(e){return a.addRemoteTextTrack(e,!1)}),this.ready(t))},r.getMedia=function(){if(this.cache_.media)return le(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Xe(t.poster)}]),t},t.getTagSettings=function(e){var t,i={sources:[],tracks:[]},r=b(e),a=r["data-setup"];if(m(e,"vjs-fill")&&(r.fill=!0),m(e,"vjs-fluid")&&(r.fluid=!0),null!==a&&(a=(t=So(a||"{}"))[0],t=t[1],a&&Ia.error(a),n(r,t)),n(i,r),e.hasChildNodes())for(var o=e.childNodes,s=0,l=o.length;s<l;s++){var u=o[s],c=u.nodeName.toLowerCase();"source"===c?i.sources.push(b(u)):"track"===c&&i.tracks.push(b(u))}return i},r.flexNotSupported_=function(){var e=_a.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},r.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(e){return"number"==typeof e})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(yo);zo.names.forEach(function(e){var t=zo[e];Bs.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Bs.prototype.crossorigin=Bs.prototype.crossOrigin,Bs.players={},Na=pa.navigator,Bs.prototype.options_={techOrder:os.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Na&&(Na.languages&&Na.languages[0]||Na.userLanguage||Na.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Bs.prototype[e]=function(){return this.techGet_(e)}}),Ns.forEach(function(e){Bs.prototype["handleTech"+se(e)+"_"]=function(){return this.trigger(e)}}),yo.registerComponent("Player",Bs);var Hs=e(function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,i)}e.exports=t}),Vs=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}},qs=e(function(e){function t(n,i,r){return Vs()?e.exports=t=Reflect.construct:e.exports=t=function(e,t,n){var i=[null];return i.push.apply(i,t),i=new(Function.bind.apply(e,i)),n&&Hs(i,n.prototype),i},t.apply(null,arguments)}e.exports=t}),$s="plugin",Ws="activePlugins_",zs={},Ys=function(e,t){e[Ws]=e[Ws]||{},e[Ws][t]=!0},Gs=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),re(this),delete this.trigger,ae(this,this.constructor.defaultState),Ys(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return(e=void 0===e?{}:e).name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return $(this.eventBusEl_,e,this.getEventHash(t=void 0===t?{}:t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Ws][e]=!1,this.player=this.state=null,t[e]=ft(e,zs[e])},e.isBasic=function(t){return"function"==typeof(t="string"==typeof t?dt(t):t)&&!e.prototype.isPrototypeOf(t.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(ct(t))Ia.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Bs.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return zs[t]=n,t!==$s&&(e.isBasic(n)?Bs.prototype[t]=pt(t,n):Bs.prototype[t]=ft(t,n)),n},e.deregisterPlugin=function(e){if(e===$s)throw new Error("Cannot de-register base plugin.");ct(e)&&(delete zs[e],delete Bs.prototype[e])},e.getPlugins=function(e){var t;return(e=void 0===e?Object.keys(zs):e).forEach(function(e){var n=dt(e);n&&((t=t||{})[e]=n)}),t},e.getPluginVersion=function(e){return(e=dt(e))&&e.VERSION||""},e}();Gs.getPlugin=dt,Gs.BASE_PLUGIN_NAME=$s,Gs.registerPlugin($s,Gs),Bs.prototype.usingPlugin=function(e){return!!this[Ws]&&!0===this[Ws][e]},Bs.prototype.hasPlugin=function(e){return!!ct(e)};var Xs=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hs(e,t)},Ks=function(e){return 0===e.indexOf("#")?e.slice(1):e};mt.hooks_=fa,mt.hooks=ma,mt.hook=function(e,t){ma(e,t)},mt.hookOnce=function(e,t){ma(e,[].concat(t).map(function(t){return function n(){return ga(e,n),t.apply(void 0,arguments)}}))},mt.removeHook=ga,!0!==pa.VIDEOJS_NO_DYNAMIC_STYLE&&l()&&((Zs=eo(".vjs-styles-defaults"))||(Zs=F("vjs-styles-defaults"),(Na=eo("head"))&&Na.insertBefore(Zs,Na.firstChild),j(Zs,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "))),N(1,mt),mt.VERSION=da,mt.options=Bs.prototype.options_,mt.getPlayers=function(){return Bs.players},mt.getPlayer=function(e){var t=Bs.players;if("string"==typeof e){var n=Ks(e),i=t[n];if(i)return i;n=eo("#"+n)}else n=e;if(u(n)&&(e=n.player,n=n.playerId,e||t[n]))return e||t[n]},mt.getAllPlayers=function(){return Object.keys(Bs.players).map(function(e){return Bs.players[e]}).filter(Boolean)},mt.players=Bs.players,mt.getComponent=yo.getComponent,mt.registerComponent=function(e,t){os.isTech(t)&&Ia.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),yo.registerComponent.call(yo,e,t)},mt.getTech=os.getTech,mt.registerTech=os.registerTech,mt.use=function(e,t){ss[e]=ss[e]||[],ss[e].push(t)},Object.defineProperty(mt,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(mt.middleware,"TERMINATOR",{value:us,writeable:!1,enumerable:!0}),mt.browser=Za,mt.TOUCH_ENABLED=Ga,mt.extend=function(e,t){var n,i=function(){e.apply(this,arguments)},r={};for(n in"object"==typeof(t=void 0===t?{}:t)?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):"function"==typeof t&&(i=t),Xs(i,e),e&&(i.super_=e),r)r.hasOwnProperty(n)&&(i.prototype[n]=r[n]);return i},mt.mergeOptions=le,mt.bind=Y,mt.registerPlugin=Gs.registerPlugin,mt.deregisterPlugin=Gs.deregisterPlugin,mt.plugin=function(e,t){return Ia.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Gs.registerPlugin(e,t)},mt.getPlugins=Gs.getPlugins,mt.getPlugin=Gs.getPlugin,mt.getPluginVersion=Gs.getPluginVersion,mt.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),mt.options.languages=le(mt.options.languages,((n={})[e]=t,n)),mt.options.languages[e]},mt.log=Ia,mt.createLogger=Da,mt.createTimeRange=mt.createTimeRanges=de,mt.formatTime=tt,mt.setFormatTime=function(e){ys=e},mt.resetFormatTime=function(){ys=et},mt.parseUrl=_e,mt.isCrossOrigin=Se,mt.EventTarget=K,mt.on=V,mt.one=W,mt.off=q,mt.trigger=$,mt.xhr=Bo,mt.TextTrack=Ho,mt.AudioTrack=Vo,mt.VideoTrack=qo,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){mt[e]=function(){return Ia.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),no[e].apply(null,arguments)}}),mt.computedStyle=a,mt.dom=no,mt.url=Ro,mt.defineLazyProperty=ut,mt.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Qs=e(function(e,t){var n,i,r,a,o;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=o.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}if(!(r=o.parseURL(t)))throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=o.normalizePath(r.path),o.buildURLFromParts(r)):t;if(!(t=o.parseURL(e)))throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(a=i.exec(t.path),t.netLoc=a[1],t.path=a[2]),t.netLoc&&!t.path&&(t.path="/");var a,e={scheme:t.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};return r.netLoc||(e.netLoc=t.netLoc,"/"!==r.path[0]&&(r.path?(a=(a=t.path).substring(0,a.lastIndexOf("/")+1)+r.path,e.path=o.normalizePath(a)):(e.path=t.path,r.params||(e.params=t.params,r.query||(e.query=t.query))))),null===e.path&&(e.path=n.alwaysNormalize?o.normalizePath(r.path):r.path),o.buildURLFromParts(e)},parseURL:function(e){return e=n.exec(e),e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o}),Js="http://example.com",Zs=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),el=function(e){return pa.atob?pa.atob(e):Buffer.from(e,"base64").toString("binary")},tl=function(e){function t(){var t=e.call(this)||this;return t.buffer="",t}return bo(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Zs),nl=String.fromCharCode(9),il=function(e){function t(){var t=e.call(this)||this;return t.customParsers=[],t.tagMappers=[],t}bo(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce(function(t,n){return n=n(e),n===e?t:t.concat([n])},[e]).forEach(function(e){for(var r,a,o=0;o<i.customParsers.length;o++)if(i.customParsers[o].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=Aa(yt(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e))return n={type:"tag",tagType:"map"},t[1]&&((r=_t(t[1])).URI&&(n.uri=r.URI),r.BYTERANGE&&(n.byterange=yt(r.BYTERANGE))),void i.trigger("data",n);if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))return n={type:"tag",tagType:"stream-inf"},t[1]&&(n.attributes=_t(t[1]),n.attributes.RESOLUTION&&(a={},(r=n.attributes.RESOLUTION.split("x"))[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),n.attributes.RESOLUTION=a),n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=_t(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(t=/^#EXT-X-DISCONTINUITY/.exec(e)))return(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n)):(t=/^#EXT-X-KEY:?(.*)$/.exec(e))?(n={type:"tag",tagType:"key"},t[1]&&(n.attributes=_t(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n)):(t=/^#EXT-X-START:?(.*)$/.exec(e))?(n={type:"tag",tagType:"start"},t[1]&&(n.attributes=_t(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n)):(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n)):(t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"skip"}).attributes=_t(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(nl)),void i.trigger("data",n)):(t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"part"}).attributes=_t(t[1]),["DURATION"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["INDEPENDENT","GAP"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=yt(n.attributes.BYTERANGE)),void i.trigger("data",n)):(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"server-control"}).attributes=_t(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))}),void i.trigger("data",n)):(t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"part-inf"}).attributes=_t(t[1]),["PART-TARGET"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))}),void i.trigger("data",n)):(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"preload-hint"}).attributes=_t(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(e){var t;n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10),t="BYTERANGE-LENGTH"===e?"length":"offset",n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e])}),void i.trigger("data",n)):(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1]?((n={type:"tag",tagType:"rendition-report"}).attributes=_t(t[1]),["LAST-MSN","LAST-PART"].forEach(function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))}),void i.trigger("data",n)):void i.trigger("data",{type:"tag",data:e.slice(4)});i.trigger("data",{type:"tag",tagType:"discontinuity"})}}else i.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0})},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push(function(e){return t.test(e)?n(e):e})},t}(Zs),rl=function(e){function t(){var t=e.call(this)||this;t.lineStream=new tl,t.parseStream=new il,t.lineStream.pipe(t.parseStream);var n,i,r=_o(t),a=[],o={},s=!1,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0,d=0;return t.on("end",function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&n&&(o.map=n),!o.key&&i&&(o.key=i),o.timeline||"number"!=typeof u||(o.timeline=u),t.manifest.preloadSegment=o)}),t.parseStream.on("data",function(e){var t,h;({tag:function(){(({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&((o.byterange=t).length=e.length,"offset"in e||(e.offset=c)),"offset"in e&&((o.byterange=t).offset=e.offset),c=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<e.duration&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:vt(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(o.attributes||(o.attributes={}),Aa(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){var n;this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME?((n=this.manifest.mediaGroups[e.attributes.TYPE])[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h):this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,Tt.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data},skip:function(){this.manifest.skip=bt(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var n=this.manifest.segments.length,i=bt(e.attributes);o.parts=o.parts||[],o.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=d),d=i.byterange.offset+i.byterange.length);var r=o.parts.length-1
;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var t=this.manifest.serverControl=bt(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),Tt.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=bt(e.attributes),i=n.type&&"PART"===n.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?d:0,i&&(d=n.byterange.offset+n.byterange.length)));var r=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<o.preloadHints.length-1;a++){var s=o.preloadHints[a];s.type&&s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a})}},"rendition-report":function(){var t=bt(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,t=["LAST-MSN","URI"];s&&t.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,t)},"part-inf":function(){this.manifest.partInf=bt(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),Tt.call(this,this.manifest)}})[e.tagType]||function(){}).call(r)},uri:function(){o.uri=e.uri,a.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),i&&(o.key=i),o.timeline=u,n&&(o.map=n),d=0,o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)}),t}bo(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var i=[];n.forEach(function(e){t.hasOwnProperty(e)||i.push(e)}),i.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+i.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Zs),al={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},ol=["video","audio","text"],sl=["Video","Audio","Text"],ll="mp4a.40.2",ul=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,cl=/^application\/dash\+xml/i,dl=Dt({HTML:"text/html",isHTML:function(e){return e===dl.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),hl=Dt({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===hl.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"}),pl={freeze:Dt,MIME_TYPE:dl,NAMESPACE:hl},fl=e(function(e,t){var n=pl.freeze;t.XML_ENTITIES=n({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=n({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}),t.entityMap=t.HTML_ENTITIES});fl.XML_ENTITIES,fl.HTML_ENTITIES,fl.entityMap;var ml=pl.NAMESPACE,Za=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Vo=new RegExp("[\\-\\.0-9"+Za.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),gl=new RegExp("^"+Za.source+Vo.source+"*(?::"+Za.source+Vo.source+"*)?$");(At.prototype=new Error).name=At.name,Ot.prototype={parse:function(e,t,n){var i=this.domBuilder;i.startDocument(),Mt(t,t={}),function(e,t,n,i,r){function a(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(r.error("entity not found:"+e),e)}function o(t){var n;f<t&&(n=e.substring(f,t).replace(/&#?\w+;/g,a),d&&s(f),i.characters(n,0,t-f),f=t)}function s(t,n){for(;u<=t&&(n=c.exec(e));)l=n.index,u=l+n[0].length,d.lineNumber++;d.columnNumber=t-l+1}for(var l=0,u=0,c=/.*(?:\r\n?|\n)|.*$/g,d=i.locator,h=[{currentNSMap:t}],p={},f=0;;){try{var m,g,v=e.indexOf("<",f);if(v<0)return e.substr(f).match(/^\s*$/)||(m=i.doc,g=m.createTextNode(e.substr(f)),m.appendChild(g),i.currentElement=g);switch(f<v&&o(v),e.charAt(v+1)){case"/":var y=e.indexOf(">",v+3),_=e.substring(v+2,y).replace(/[ \t\n\r]+$/g,""),b=h.pop();y<0?(_=e.substring(v+2).replace(/[\s<].*/,""),r.error("end tag name: "+_+" is not complete:"+b.tagName),y=v+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),r.error("end tag name: "+_+" maybe not complete"),y=v+1+_.length);var T=b.localNSMap,S=b.tagName==_;if(S||b.tagName&&b.tagName.toLowerCase()==_.toLowerCase()){if(i.endElement(b.uri,b.localName,_),T)for(var w in T)i.endPrefixMapping(w);S||r.fatalError("end tag name: "+_+" is not match the current start tagName:"+b.tagName)}else h.push(b);y++;break;case"?":d&&s(v),y=function(e,t,n){var i=e.indexOf("?>",t);return i?(t=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/),t?(t[0].length,n.processingInstruction(t[1],t[2]),i+2):-1):-1}(e,v,i);break;case"!":d&&s(v),y=function(e,t,n,i){if("-"===e.charAt(t+2)){if("-"!==e.charAt(t+3))return-1;var r=e.indexOf("--\x3e",t+4);return t<r?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1)}if("CDATA["==e.substr(t+3,6))return r=e.indexOf("]]>",t+9),n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3;var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),i=a.length;return 1<i&&/!doctype/i.test(a[0][0])?(r=a[1][0],e=!1,t=!1,3<i&&(/^public$/i.test(a[2][0])?(e=a[3][0],t=4<i&&a[4][0]):/^system$/i.test(a[2][0])&&(t=a[3][0])),i=a[i-1],n.startDTD(r,e,t),n.endDTD(),i.index+i[0].length):-1}(e,v,i,r);break;default:d&&s(v);var E=new Nt,C=h[h.length-1].currentNSMap,y=function(e,t,n,i,r,a){function o(e,t,i){e in n.attributeNames&&a.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,i)}for(var s,l=++t,u=0;;){var c=e.charAt(l);switch(c){case"=":if(1===u)s=e.slice(t,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(a.warning('attribute value must after "="'),s=e.slice(t,l)),t=l+1,!(0<(l=e.indexOf(c,t))))throw new Error("attribute value no end '"+c+"' match");d=e.slice(t,l).replace(/&#?\w+;/g,r),o(s,d,t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');d=e.slice(t,l).replace(/&#?\w+;/g,r),o(s,d,t),a.warning('attribute "'+s+'" missed start quot('+c+")!!"),t=l+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,l)),l;case">":switch(u){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=e.slice(t,l)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case 2:2===u&&(d=s),4==u?(a.warning('attribute "'+d+'" missed quot(")!'),o(s,d.replace(/&#?\w+;/g,r),t)):(ml.isHTML(i[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),o(d,d,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"":c=" ";default:if(c<=" ")switch(u){case 0:n.setTagName(e.slice(t,l)),u=6;break;case 1:s=e.slice(t,l),u=2;break;case 4:var d=e.slice(t,l).replace(/&#?\w+;/g,r);a.warning('attribute "'+d+'" missed quot(")!!'),o(s,d,t);case 5:u=6}else switch(u){case 2:n.tagName,ml.isHTML(i[""])&&s.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),o(s,s,t),t=l,u=1;break;case 5:a.warning('attribute space is required"'+s+'"!!');case 6:u=1,t=l;break;case 3:u=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}(e,v,E,C,a,r),k=E.length;if(!E.closed&&function(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}(e,y,E.tagName,p)&&(E.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),d&&k){for(var x=Pt(d,{}),I=0;I<k;I++){var D=E[I];s(D.offset),D.locator=Pt(d,{})}i.locator=x,Lt(E,i,C)&&h.push(E),i.locator=d}else Lt(E,i,C)&&h.push(E);ml.isHTML(E.uri)&&!E.closed?y=function(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),e=e.substring(t+1,a);if(/[&<]/.test(e))return/^script$/i.test(n)||(e=e.replace(/&#?\w+;/g,i)),r.characters(e,0,e.length),a}return t+1}(e,y,E.tagName,a,i):y++}}catch(t){if(t instanceof At)throw t;r.error("element parse error: "+t),y=-1}f<y?f=y:o(Math.max(v,f)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},Nt.prototype={setTagName:function(e){if(!gl.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!gl.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};var vl={XMLReader:Ot,ParseError:At},yl=pl.NAMESPACE,qo={},_l=qo.ELEMENT_NODE=1,bl=qo.ATTRIBUTE_NODE=2,Tl=qo.TEXT_NODE=3,Sl=qo.CDATA_SECTION_NODE=4,wl=qo.ENTITY_REFERENCE_NODE=5,El=(qo.ENTITY_NODE=6,qo.PROCESSING_INSTRUCTION_NODE=7),Cl=qo.COMMENT_NODE=8,kl=qo.DOCUMENT_NODE=9,xl=qo.DOCUMENT_TYPE_NODE=10,Il=qo.DOCUMENT_FRAGMENT_NODE=11,Ro=(qo.NOTATION_NODE=12,{}),Dl={};Ro.INDEX_SIZE_ERR=(Dl[1]="Index size error",1),Ro.DOMSTRING_SIZE_ERR=(Dl[2]="DOMString size error",2),Ro.HIERARCHY_REQUEST_ERR=(Dl[3]="Hierarchy request error",3),Ro.WRONG_DOCUMENT_ERR=(Dl[4]="Wrong document",4),Ro.INVALID_CHARACTER_ERR=(Dl[5]="Invalid character",5),Ro.NO_DATA_ALLOWED_ERR=(Dl[6]="No data allowed",6),Ro.NO_MODIFICATION_ALLOWED_ERR=(Dl[7]="No modification allowed",7),Ro.NOT_FOUND_ERR=(Dl[8]="Not found",8),Ro.NOT_SUPPORTED_ERR=(Dl[9]="Not supported",9);var Al;Ro.INUSE_ATTRIBUTE_ERR=(Dl[10]="Attribute in use",10),Ro.INVALID_STATE_ERR=(Dl[11]="Invalid state",11),Ro.SYNTAX_ERR=(Dl[12]="Syntax error",12),Ro.INVALID_MODIFICATION_ERR=(Dl[13]="Invalid modification",13),Ro.NAMESPACE_ERR=(Dl[14]="Invalid namespace",14),Ro.INVALID_ACCESS_ERR=(Dl[15]="Invalid access",15),Ht.prototype=Error.prototype,Ut(Ro,Ht),Vt.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)Tn(this[i],n,e,t);return n.join("")}},qt.prototype.item=function(e){return $t(this),this[e]},Bt(qt,Vt),Wt.prototype={length:0,item:Vt.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Ht(10);return t=this.getNamedItem(e.nodeName),Yt(this._ownerElement,this,e,t),t},setNamedItemNS:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new Ht(10);return t=this.getNamedItemNS(e.namespaceURI,e.localName),Yt(this._ownerElement,this,e,t),t},removeNamedItem:function(e){return e=this.getNamedItem(e),Gt(this._ownerElement,this,e),e},removeNamedItemNS:function(e,t){return t=this.getNamedItemNS(e,t),Gt(this._ownerElement,this,t),t},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},Xt.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new Zt;return i.implementation=this,i.childNodes=new Vt,i.doctype=n||null,n&&i.appendChild(n),t&&(t=i.createElementNS(e,t),i.appendChild(t)),i},createDocumentType:function(e,t,n){var i=new dn;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},Kt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return rn(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return nn(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,n,i){var r=new n.constructor;for(var a in n){var o=n[a];"object"!=typeof o&&o!=r[a]&&(r[a]=o)}switch(n.childNodes&&(r.childNodes=new Vt),r.ownerDocument=t,r.nodeType){case _l:var s=n.attributes,l=r.attributes=new Wt,u=s.length;l._ownerElement=r;for(var c=0;c<u;c++)r.setAttributeNode(e(t,s.item(c),!0));break;case bl:i=!0}if(i)for(var d=n.firstChild;d;)r.appendChild(e(t,d,i)),d=d.nextSibling;return r}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==Tl&&e.nodeType==Tl?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return 0<this.attributes.length},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==bl?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==bl?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},Ut(qo,Kt),Ut(qo,Kt.prototype),Zt.prototype={nodeName:"#document",nodeType:kl,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType!=Il)return null==this.documentElement&&e.nodeType==_l&&(this.documentElement=e),rn(this,e,t),e.ownerDocument=this,e;for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),nn(this,e)},importNode:function(e,t){return function e(t,n,i){var r;switch(n.nodeType){case _l:(r=n.cloneNode(!1)).ownerDocument=t;case Il:break;case bl:i=!0}if(r=r||n.cloneNode(!1),r.ownerDocument=t,r.parentNode=null,i)for(var a=n.firstChild;a;)r.appendChild(e(t,a,i)),a=a.nextSibling;return r}(this,e,t)},getElementById:function(e){var t=null;return Jt(this.documentElement,function(n){if(n.nodeType==_l&&n.getAttribute("id")==e)return t=n,!0}),t},getElementsByClassName:function(e){var t=jt(e);return new qt(this,function(n){var i=[];return 0<t.length&&Jt(n.documentElement,function(r){var a,o,s;r===n||r.nodeType!==_l||(a=r.getAttribute("class"))&&((o=e===a)||(a=jt(a),o=t.every((s=a,function(e){return s&&-1!==s.indexOf(e)}))),o&&i.push(r))}),i})},createElement:function(e){var t=new an;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new Vt,(t.attributes=new Wt)._ownerElement=t},createDocumentFragment:function(){var e=new mn;return e.ownerDocument=this,e.childNodes=new Vt,e},createTextNode:function(e){var t=new ln;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new un;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new cn;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new gn;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new on;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new fn;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new an,i=t.split(":"),r=n.attributes=new Wt;return n.childNodes=new Vt,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n},createAttributeNS:function(e,t){var n=new on,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},Bt(Zt,Kt),Zt.prototype.getElementsByTagName=(an.prototype={nodeType:_l,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){return(e=this.getAttributeNode(e))&&e.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){e=this.ownerDocument.createAttribute(e),e.value=e.nodeValue=""+t,this.setAttributeNode(e)},removeAttribute:function(e){(e=this.getAttributeNode(e))&&this.removeAttributeNode(e)},appendChild:function(e){return e.nodeType===Il?this.insertBefore(e,null):function(e,t){var n=t.parentNode;n&&(i=e.lastChild,n.removeChild(t),i=e.lastChild);var i=e.lastChild;return t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,tn(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){(t=this.getAttributeNodeNS(e,t))&&this.removeAttributeNode(t)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){return(t=this.getAttributeNodeNS(e,t))&&t.value||""},setAttributeNS:function(e,t,n){t=this.ownerDocument.createAttributeNS(e,t),t.value=t.nodeValue=""+n,this.setAttributeNode(t)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new qt(this,function(t){var n=[];return Jt(t,function(i){i===t||i.nodeType!=_l||"*"!==e&&i.tagName!=e||n.push(i)}),n})},getElementsByTagNameNS:function(e,t){return new qt(this,function(n){var i=[];return Jt(n,function(r){r===n||r.nodeType!==_l||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)}),i})}}).getElementsByTagName,Zt.prototype.getElementsByTagNameNS=an.prototype.getElementsByTagNameNS,Bt(an,Kt),on.prototype.nodeType=bl,Bt(on,Kt),sn.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(Dl[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var i=this.data.substring(0,e),t=this.data.substring(e+t);this.nodeValue=this.data=n=i+n+t,this.length=n.length}},Bt(sn,Kt),ln.prototype={nodeName:"#text",nodeType:Tl,splitText:function(e){var t=(n=this.data).substring(e),n=n.substring(0,e);return this.data=this.nodeValue=n,this.length=n.length,t=this.ownerDocument.createTextNode(t),this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling),t}},Bt(ln,sn),un.prototype={nodeName:"#comment",nodeType:Cl},Bt(un,sn),cn.prototype={nodeName:"#cdata-section",nodeType:Sl},Bt(cn,sn),dn.prototype.nodeType=xl,Bt(dn,Kt),hn.prototype.nodeType=12,Bt(hn,Kt),pn.prototype.nodeType=6,Bt(pn,Kt),fn.prototype.nodeType=wl,Bt(fn,Kt),mn.prototype.nodeName="#document-fragment",mn.prototype.nodeType=Il,Bt(mn,Kt),gn.prototype.nodeType=El,Bt(gn,Kt),vn.prototype.serializeToString=function(e,t,n){return yn.call(e,t,n)},Kt.prototype.toString=yn;try{Object.defineProperty&&(Al=function e(t){switch(t.nodeType){case _l:case Il:var n=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&n.push(e(t)),t=t.nextSibling;return n.join("");default:return t.nodeValue}},Object.defineProperty(qt.prototype,"length",{get:function(){return $t(this),this.$$length}}),Object.defineProperty(Kt.prototype,"textContent",{get:function(){return Al(this)},set:function(e){switch(this.nodeType){case _l:case Il:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Sn=function(e,t,n){e["$$"+t]=n})}catch(ha){}var Ol={DocumentType:dn,DOMException:Ht,DOMImplementation:Xt,Element:an,Node:Kt,NodeList:Vt,XMLSerializer:vn},Zs=e(function(e,t){function n(e){this.options=e||{locator:{}}}function i(){this.cdata=!1}function r(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function o(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function s(e,t){(e.currentElement||e.doc).appendChild(t)}var l=pl.NAMESPACE;n.prototype.parseFromString=function(e,t){var n=this.options,r=new u,o=n.domBuilder||new i,s=n.errorHandler,c=n.locator,d=n.xmlns||{},h=/\/x?html?$/.test(t),t=h?fl.HTML_ENTITIES:fl.XML_ENTITIES;return c&&o.setDocumentLocator(c),r.errorHandler=function(e,t,n){function r(t){var i=e[t];!i&&s&&(i=2==e.length?function(n){e(t,n)}:e),o[t]=i?function(e){i("[xmldom "+t+"]\t"+e+a(n))}:function(){}}if(!e){if(t instanceof i)return t;e=t}var o={},s=e instanceof Function;return n=n||{},r("warning"),r("error"),r("fatalError"),o}(s,o,c),r.domBuilder=n.domBuilder||o,h&&(d[""]=l.HTML),d.xml=d.xml||l.XML,e&&"string"==typeof e?r.parse(e,d,t):r.errorHandler.error("invalid doc source"),o.doc},i.prototype={startDocument:function(){this.doc=(new d).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var a=this.doc,o=a.createElementNS(e,n||t),l=i.length;s(this,o),this.currentElement=o,this.locator&&r(this.locator,o);for(var u=0;u<l;u++){var e=i.getURI(u),c=i.getValue(u),n=i.getQName(u),d=a.createAttributeNS(e,n);this.locator&&r(i.getLocator(u),d),d.value=d.nodeValue=c,o.setAttributeNode(d)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){t=this.doc.createProcessingInstruction(e,t),this.locator&&r(this.locator,t),s(this,t)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){var i;(e=o.apply(this,arguments))&&(i=this.cdata?this.doc.createCDATASection(e):this.doc.createTextNode(e),this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&r(this.locator,i))},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=o.apply(this,arguments),e=this.doc.createComment(e),this.locator&&r(this.locator,e),s(this,e)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;i&&i.createDocumentType&&(n=i.createDocumentType(e,t,n),this.locator&&r(this.locator,n),s(this,n))},warning:function(e){},error:function(e){},fatalError:function(e){throw new c(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){i.prototype[e]=function(){return null}});var u=vl.XMLReader,c=vl.ParseError,d=t.DOMImplementation=Ol.DOMImplementation;t.XMLSerializer=Ol.XMLSerializer,t.DOMParser=n,t.__DOMHandler=i});Zs.DOMImplementation,Zs.XMLSerializer;var Pl=Zs.DOMParser;Zs.__DOMHandler;var Ll="INVALID_NUMBER_OF_PERIOD",Ml="DASH_EMPTY_MANIFEST",Nl="DASH_INVALID_XML",Rl="NO_BASE_URL",Fl="SEGMENT_TIME_UNSPECIFIED",jl="UNSUPPORTED_UTC_TIMING_SCHEME",Ul={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration,n=e.periodDuration,e=In(e.endNumber),i=t/i;return"number"==typeof e?{start:0,end:e}:"number"==typeof n?{start:0,end:n/i}:{start:0,end:r/i}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,o=e.duration,s=e.start,l=void 0===s?0:s,r=e.minimumUpdatePeriod,s=void 0===r?0:r,r=e.timeShiftBufferDepth,r=void 0===r?1/0:r,e=In(e.endNumber),n=(t+n)/1e3,l=i+l,s=Math.ceil((n+s-l)*a/o),r=Math.floor((n-l-r)*a/o),o=Math.floor((n-l)*a/o);return{start:Math.max(0,r),end:"number"==typeof e?e:Math.min(s,o)}}},Bl=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Hl={mediaPresentationDuration:Gn,availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=e)&&(e+="Z"),Date.parse(e)/1e3},minimumUpdatePeriod:Gn,suggestedPresentationDelay:Gn,type:function(e){return e},timeShiftBufferDepth:Gn,start:Gn,width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Gn(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Vl={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},ql=Math.pow(2,32),$l=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=t.getUint32(i)*ql+t.getUint32(i+4),n.firstOffset=t.getUint32(i+8)*ql+t.getUint32(i+12),i+=16);var r=t.getUint16(i+=2);for(i+=2;0<r;i+=12,r--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n},Wl=pa.BigInt||Number,zl=[Wl("0x1"),Wl("0x100"),Wl("0x10000"),Wl("0x1000000"),Wl("0x100000000"),Wl("0x10000000000"),Wl("0x1000000000000"),Wl("0x100000000000000"),Wl("0x10000000000000000")],Yl=ii([73,68,51]),Gl={EBML:ii([26,69,223,163]),DocType:ii([66,130]),Segment:ii([24,83,128,103]),SegmentInfo:ii([21,73,169,102]),Tracks:ii([22,84,174,107]),Track:ii([174]),TrackNumber:ii([215]),DefaultDuration:ii([35,227,131]),TrackEntry:ii([174]),TrackType:ii([131]),FlagDefault:ii([136]),CodecID:ii([134]),CodecPrivate:ii([99,162]),VideoTrack:ii([224]),AudioTrack:ii([225]),Cluster:ii([31,67,182,117]),Timestamp:ii([231]),TimestampScale:ii([42,215,177]),BlockGroup:ii([160]),BlockDuration:ii([155]),Block:ii([161]),SimpleBlock:ii([163])},Xl=[128,64,32,16,8,4,2,1],Kl=ii([0,0,0,1]),Ql=ii([0,0,1]),Jl=ii([0,0,3]),Zl={webm:ii([119,101,98,109]),matroska:ii([109,97,116,114,111,115,107,97]),flac:ii([102,76,97,67]),ogg:ii([79,103,103,83]),ac3:ii([11,119]),riff:ii([82,73,70,70]),avi:ii([65,86,73]),wav:ii([87,65,86,69]),"3gp":ii([102,116,121,112,51,103]),mp4:ii([102,116,121,112]),fmp4:ii([115,116,121,112]),mov:ii([102,116,121,112,113,116]),moov:ii([109,111,111,118]),moof:ii([109,111,111,102])},eu={aac:function(e){return oi(e,[255,16],{offset:si(e),mask:[255,22]})},mp3:function(e){return oi(e,[255,2],{offset:si(e),mask:[255,6]})},webm:function(e){return e=pi(e,[Gl.EBML,Gl.DocType])[0],oi(e,Zl.webm)},mkv:function(e){return e=pi(e,[Gl.EBML,Gl.DocType])[0],oi(e,Zl.matroska)},mp4:function(e){return!eu["3gp"](e)&&!eu.mov(e)&&(!(!oi(e,Zl.mp4,{offset:4})&&!oi(e,Zl.fmp4,{offset:4}))||!(!oi(e,Zl.moof,{offset:4})&&!oi(e,Zl.moov,{offset:4}))||void 0)},mov:function(e){return oi(e,Zl.mov,{offset:4})},"3gp":function(e){return oi(e,Zl["3gp"],{offset:4})},ac3:function(e){var t=si(e);return oi(e,Zl.ac3,{offset:t})},ts:function(e){if(e.length<189&&1<=e.length)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=si(e);return oi(e,Zl.flac,{offset:t})},ogg:function(e){return oi(e,Zl.ogg)},avi:function(e){return oi(e,Zl.riff)&&oi(e,Zl.avi,{offset:8})},wav:function(e){return oi(e,Zl.riff)&&oi(e,Zl.wav,{offset:8})},h264:function(e){return fi(e,"h264",7,3).length},h265:function(e){return fi(e,"h265",[32,33],3).length}},tu=Object.keys(eu).filter(function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e}).concat(["ts","h264","h265"]);tu.forEach(function(e){var t=eu[e];eu[e]=function(e){return t(ii(e))}});var nu,iu=eu,ru=gt,au=1/30,ou=mt.createTimeRange,su={liveEdgeDelay:xi,duration:Di,seekable:function(e,t,n){var i=t||0,n=Oi(e,t,!0,n);return null===n?ou():ou(i,n)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,s=n-a,l=Ei(t),u=0,c=0;c<l.length;c++){var d=l[c]
;if(i===d.segmentIndex&&("number"!=typeof r||"number"!=typeof d.partIndex||r===d.partIndex)){u=c;break}}if(s<0){if(0<u)for(var h=u-1;0<=h;h--){var p=l[h];if(s+=p.duration,o){if(s<0)continue}else if(s+au<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-Ai({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(u<0){for(var f=u;f<0;f++)if((s-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};u=0}for(var m=u;m<l.length;m++){var g=l[m];if(s-=g.duration,o){if(0<s)continue}else if(0<=s-au)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+Ai({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:m})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:n}},isEnabled:Mi,isDisabled:function(e){return e.disabled},isBlacklisted:Pi,isIncompatible:Li,playlistEnd:Oi,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:Ni,estimateSegmentRequestTime:function(e,t,n,i){return Ni("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*(i=void 0===i?0:i))/t:NaN},isLowestEnabledRendition:Ri,isAudioOnly:Ui,playlistMatch:Fi},lu=mt.log,uu=mt.mergeOptions,Za=mt.EventTarget,cu=function(e){function t(t,n,i){var r;if(void 0===i&&(i={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=vi("PlaylistLoader");var a=i.withCredentials,a=void 0!==a&&a,i=i.handleManifestRedirects,i=void 0!==i&&i;return r.src=t,r.vhs_=n,r.withCredentials=a,r.handleManifestRedirects=i,n=n.options_,r.customTagParsers=n&&n.customTagParsers||[],r.customTagMappers=n&&n.customTagMappers||[],r.experimentalLLHLS=n&&n.experimentalLLHLS||!1,r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(_o(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}bo(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e,t,n=this;"HAVE_METADATA"===this.state&&(e=this.media(),t=ru(this.master.uri,e.uri),this.experimentalLLHLS&&(t=function(e,t){if(t.endList)return e;var n,i,r,a=[];return t.serverControl&&t.serverControl.canBlockReload&&(r=t.preloadSegment,n=t.mediaSequence+t.segments.length,r&&(i=r.parts||[],-1<(r=ki(t)-1)&&r!=i.length-1&&a.push("_HLS_part="+r),(-1<r||i.length)&&n--),a.unshift("_HLS_msn="+n)),t.serverControl&&t.serverControl.canSkipUntil&&a.unshift("_HLS_skip="+(t.serverControl.canSkipDateranges?"v2":"YES")),a.forEach(function(t,n){e+=(0===n?"?":"&")+t}),e}(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},function(e,t){if(n.request)return e?n.playlistRequestError(n.request,n.media(),"HAVE_METADATA"):void n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})}))},n.playlistRequestError=function(e,t,n){var i=t.uri,t=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,r=e.customTagMappers,r=void 0===r?[]:r,e=e.experimentalLLHLS,o=new rl;t&&o.on("warn",t),n&&o.on("info",n),a.forEach(function(e){return o.addParser(e)}),r.forEach(function(e){return o.addTagMapper(e)}),o.push(i),o.end();var s=o.manifest;e||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(e){s.hasOwnProperty(e)&&delete s[e]}),s.segments&&s.segments.forEach(function(e){["parts","preloadHints"].forEach(function(t){e.hasOwnProperty(t)&&delete e[t]})})),s.targetDuration||(l=10,s.segments&&s.segments.length&&(l=s.segments.reduce(function(e,t){return Math.max(e,t.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+l),s.targetDuration=l);var l=Ci(s);return l.length&&!s.partTargetDuration&&(l=l.reduce(function(e,t){return Math.max(e,t.duration)},0),t&&(t("manifest has no partTargetDuration defaulting to "+l),lu.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),s.partTargetDuration=l),s}({onwarn:function(e){return e=e.message,t.logger_("m3u8-parser warn for "+n+": "+e)},oninfo:function(e){return e=e.message,t.logger_("m3u8-parser info for "+n+": "+e)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,e=e.id;this.request=null,this.state="HAVE_METADATA",t=n||this.parseManifest_({url:i,manifestString:t}),t.lastRequest=Date.now(),Vi({playlist:t,uri:i,id:e}),i=Gi(this.master,t),this.targetDuration=t.partTargetDuration||t.targetDuration,i?(this.master=i,this.media_=this.master.playlists[e]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Xi(this.media(),!!i)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),pa.clearTimeout(this.mediaUpdateTimeout),pa.clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(pa.clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=pa.setTimeout(this.media.bind(this,e,!1),i)}else{var r=this.state,t=!this.media_||e.id!==this.media_.id,i=this.master.playlists[e.id];if(i&&i.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(t&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Xi(e,!0)),t){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=gi(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,r);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}})}}},n.pause=function(){this.mediaUpdateTimeout&&(pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();e?(e=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3,this.mediaUpdateTimeout=pa.setTimeout(function(){t.mediaUpdateTimeout=null,t.load()},e)):this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=pa.setTimeout(function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)},e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=pa.location.href),this.src.resolvedUri=this.src.uri,void setTimeout(function(){e.setupInitialPlaylist(e.src)},0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=gi(e.handleManifestRedirects,e.src,n),n=e.parseManifest_({manifestString:n.responseText,url:e.src}),e.setupInitialPlaylist(n)}})},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,qi(this.master,this.srcUri()),e.playlists.forEach(function(e){e.segments=zi(e),e.segments.forEach(function(t){Wi(t,e.resolvedUri)})}),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t,n,i,r=this.srcUri()||pa.location.href;this.master=(n=Bi(0,t=r),(i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:pa.location.href,resolvedUri:pa.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]}).playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i),this.haveMetadata({playlistObject:e,url:r,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Za),du=mt.xhr,hu=mt.mergeOptions,Vo=Object.freeze({__proto__:null,createTransferableMessage:tr,initSegmentId:nr,segmentKeyId:ir,hexDump:rr,tagDump:function(e){return e=e.bytes,rr(e)},textRanges:function(e){for(var t,n,i="",r=0;r<e.length;r++)i+=(n=r,(t=e).start(n)+"-"+t.end(n)+" ");return i}}),Ro=mt.EventTarget,pu=mt.mergeOptions,fu=function(e){function t(t,n,i,r){var a;if(void 0===i&&(i={}),(a=e.call(this)||this).masterPlaylistLoader_=r||_o(a),r||(a.isMaster_=!0),r=i.withCredentials,r=void 0!==r&&r,i=i.handleManifestRedirects,i=void 0!==i&&i,a.vhs_=n,a.withCredentials=r,a.handleManifestRedirects=i,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",function(){a.refreshXml_()}),a.on("mediaupdatetimeout",function(){a.refreshMedia_(a.media().id)}),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=vi("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}bo(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var i,r,a=this,o=e.sidx&&Pn(e.sidx);e.sidx&&o&&!this.masterPlaylistLoader_.sidxMapping_[o]?(i=gi(this.handleManifestRedirects,e.sidx.resolvedUri),r=function(i,r){if(!a.requestErrored_(i,r,t)){var s,i=a.masterPlaylistLoader_.sidxMapping_;try{s=$l(ii(r.response).subarray(8))}catch(i){return void a.requestErrored_(i,r,t)}return i[o]={sidxInfo:e.sidx,sidx:s},On(e,s,e.sidx.resolvedUri),n(!0)}},this.request=lr(i,this.vhs_.xhr,function(t,n,o,s){if(t)return r(t,n);if(!o||"mp4"!==o)return r({status:n.status,message:"Unsupported "+(o||"unknown")+" container type for sidx segment at URL: "+i,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var l=e.sidx.byterange,o=l.offset,l=l.length;if(s.length>=l+o)return r(t,{response:s.subarray(o,o+l),status:n.status,uri:n.uri});a.request=a.vhs_.xhr({uri:i,responseType:"arraybuffer",headers:Ji({byterange:e.sidx.byterange})},r)})):this.mediaRequest_=pa.setTimeout(function(){return n(!1)},0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},pa.clearTimeout(this.minimumUpdatePeriodTimeout_),pa.clearTimeout(this.mediaRequest_),pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){var e;this.request&&(e=this.request,this.request=null,e.onreadystatechange=null,e.abort())},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,function(i){t.haveMetadata({startingState:n,playlist:e})}))},n.haveMetadata=function(e){var t=e.startingState,e=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[e.id]=e,this.mediaRequest_=null,this.refreshMedia_(e.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(pa.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;pa.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();e?(e=n?n.targetDuration/2*1e3:5e3,this.mediaUpdateTimeout=pa.setTimeout(function(){return t.load()},e)):this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_(function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])}):this.mediaRequest_=pa.setTimeout(function(){return e.haveMaster_()},0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=gi(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,i),r?(t.handleMaster_(),void t.syncClientServerClock_(function(){return e(i,r)})):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)})},n.syncClientServerClock_=function(e){var t=this,n=ni(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:ru(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},function(i,r){if(t.request){if(i)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();r="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=r-Date.now(),e()}}))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,t=(i={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_},e=i.masterXml,n=i.srcUrl,t=i.clientOffset,i=i.sidxMapping,i=ti(e,{manifestUri:n,clientOffset:t,sidxMapping:i}),qi(i,n),i),n=this.masterPlaylistLoader_.master;n&&(t=function(e,t,n){for(var i=!0,r=pu(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),a=0;a<t.playlists.length;a++){var o,s=t.playlists[a];s.sidx&&(o=Pn(s.sidx),n&&n[o]&&n[o].sidx&&On(s,n[o].sidx,s.sidx.resolvedUri)),s=Gi(r,s,ur),s&&(r=s,i=!1)}return Hi(t,function(e,t,n,a){var o;e.playlists&&e.playlists.length&&(o=e.playlists[0].id,(e=Gi(r,e.playlists[0],ur))&&((r=e).mediaGroups[t][n][a].playlists[0]=r.playlists[o],i=!1))}),(i=t.minimumUpdatePeriod===e.minimumUpdatePeriod&&i)?null:r}(n,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||n;var i=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return i&&i!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=i),(!n||t&&t.minimumUpdatePeriod!==n.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(pa.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=pa.setTimeout(function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)},n.refreshXml_=function(){var e=this;this.requestMaster_(function(t,n){var i,r;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(n=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,r=cr(n.playlists,i),Hi(n,function(e,t,n,a){e.playlists&&e.playlists.length&&(e=e.playlists,r=pu(r,cr(e,i)))}),r),e.addSidxSegments_(e.media(),e.state,function(t){e.refreshMedia_(e.media().id)}))})},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[e];i?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=pa.setTimeout(function(){t.trigger("mediaupdatetimeout"),e()},Xi(t.media(),Boolean(i))))}(),this.trigger("loadedplaylist")},t}(Ro),mu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},qo=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=dr(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},Zs=function(e){return"var browserWorkerPolyFill = "+dr.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},Za=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},gu=qo(Zs(Za(function(){function e(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n}function t(e){for(var t=[];e--;)t.push(0);return t}function n(){var e,n;return he||(e={96e3:[Te,[227,64],t(154),[56]],88200:[Te,[231],t(170),[56]],64e3:[Te,[248,192],t(240),[56]],48e3:[Te,[255,192],t(268),[55,148,128],t(54),[112]],44100:[Te,[255,192],t(268),[55,163,128],t(84),[112]],32e3:[Te,[255,192],t(268),[55,234],t(226),[112]],24e3:[Te,[255,192],t(268),[55,255,128],t(268),[111,112],t(126),[224]],16e3:[Te,[255,192],t(268),[55,255,128],t(268),[111,255],t(269),[223,108],t(195),[1,192]],12e3:[Se,t(268),[3,127,248],t(268),[6,255,240],t(268),[13,255,224],t(268),[27,253,128],t(259),[56]],11025:[Se,t(268),[3,127,248],t(268),[6,255,240],t(268),[13,255,224],t(268),[27,255,192],t(268),[55,175,128],t(108),[112]],8e3:[Se,t(268),[3,121,16],t(47),[7]]},n=e,he=Object.keys(n).reduce(function(e,t){return e[t]=new Uint8Array(n[t].reduce(function(e,t){return e.concat(t)},[])),e},{})),he}function i(e){return 32<=e&&e<=127||160<=e&&e<=255}function r(e){this.windowNum=e,this.reset()}function a(e){this.serviceNum=e,this.text="",this.currentWindow=new r(-1),this.windows=[]}function o(e){return null===e?"":(e=ze[e]||e,String.fromCharCode(e))}function s(){for(var e=[],t=15;t--;)e.push("");return e}function l(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function u(e,t,n){for(var i="",r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}function c(e,t,n){return decodeURIComponent(u(e,t,n))}function d(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}function h(e,t){var n=0<=(n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9])?n:0;return(16&e[t+5])>>4?n+20:n+10}function p(e,t){return e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)?t:p(e,t+=h(e,t))}function f(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}function m(e,t){var n;if(e.length===t.length){for(n=0;n<e.length;n++)if(e[n]!==t[n])return;return 1}}function g(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}}function v(e,t){var n=It(e,["moof","traf"]),e=It(e,["mdat"]),i={},r=[];return e.forEach(function(e,t){t=n[t],r.push({mdat:e,traf:t})}),r.forEach(function(e){var n,r,a,o,s,l=e.mdat,u=e.traf,c=It(u,["tfhd"]),d=Lt(c[0]),e=d.trackId,c=It(u,["tfdt"]),c=0<c.length?At(c[0]).baseMediaDecodeTime:0,u=It(u,["trun"]);t===e&&0<u.length&&(u=u,n=c,r=(d=d).defaultSampleDuration||0,a=d.defaultSampleSize||0,o=d.trackId,s=[],u.forEach(function(e){e=Pt(e).samples,e.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=n,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=n+e.compositionTimeOffset,n+=e.duration}),s=s.concat(e)}),l=function(e,t,n){for(var i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={logs:[],seiNals:[]},s=0;s+4<e.length;s+=i)if(i=a.getUint32(s),s+=4,!(i<=0))switch(31&e[s]){case 6:var l=e.subarray(s+1,s+1+i),u=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null}(s,t),l={nalUnitType:"sei_rbsp",size:i,data:l,escapedRBSP:Mt(l),trackId:n};if(u)l.pts=u.pts,l.dts=u.dts,r=u;else{if(!r){o.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+s+" for trackId "+n+". See mux.js#223."});break}l.pts=r.pts,l.dts=r.dts}o.seiNals.push(l)}return o}(l,s,e),i[e]||(i[e]={seiNals:[],logs:[]}),i[e].seiNals=i[e].seiNals.concat(l.seiNals),i[e].logs=i[e].logs.concat(l.logs))}),i}function y(e){var t=31&e[1];return t<<=8,t|=e[2]}function _(e){return!!(64&e[1])}function b(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function T(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}function S(e,t,n){for(var i,r,a,o,s=0,l=188,u=!1;l<=e.byteLength;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s++,l++;else{if(i=e.subarray(s,l),"pes"===qt.ts.parseType(i,t.pid)&&(r=qt.ts.parsePesType(i,t.table),a=qt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=qt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0)),u)break;s+=188,l+=188}for(s=(l=e.byteLength)-188,u=!1;0<=s;)if(71!==e[s]||71!==e[l]&&l!==e.byteLength)s--,l--;else{if(i=e.subarray(s,l),"pes"===qt.ts.parseType(i,t.pid)&&(r=qt.ts.parsePesType(i,t.table),a=qt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=qt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),u=!0)),u)break;s-=188,l-=188}}function w(e){var t,n={pid:null,table:null},i={};for(t in function(e,t){for(var n,i=0,r=188;r<e.byteLength;)if(71!==e[i]||71!==e[r])i++,r++;else{switch(n=e.subarray(i,r),qt.ts.parseType(n,t.pid)){case"pat":t.pid=qt.ts.parsePat(n);break;case"pmt":var a=qt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach(function(e){t.table[e]=a[e]})}i+=188,r+=188}}(e,n),n.table)if(n.table.hasOwnProperty(t))switch(n.table[t]){case Ke.H264_STREAM_TYPE:i.video=[],function(e,t,n){for(var i,r,a,o,s,l,u,c,d=0,h=188,p=!1,f={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{if(i=e.subarray(d,h),"pes"===qt.ts.parseType(i,t.pid)&&(r=qt.ts.parsePesType(i,t.table),a=qt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!p&&(o=qt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0),!n.firstKeyFrame))){if(a&&0!==f.size){for(s=new Uint8Array(f.size),l=0;f.data.length;)u=f.data.shift(),s.set(u,l),l+=u.byteLength;!qt.ts.videoPacketContainsKeyFrame(s)||(c=qt.ts.parsePesTime(s))&&(n.firstKeyFrame=c,n.firstKeyFrame.type="video"),f.size=0}f.data.push(i),f.size+=i.byteLength}if(p&&n.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,p=!1;0<=d;)if(71!==e[d]||71!==e[h])d--,h--;else{if(i=e.subarray(d,h),"pes"===qt.ts.parseType(i,t.pid)&&(r=qt.ts.parsePesType(i,t.table),a=qt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(o=qt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0)),p)break;d-=188,h-=188}}(e,n,i),0===i.video.length&&delete i.video;break;case Ke.ADTS_STREAM_TYPE:i.audio=[],S(e,n,i),0===i.audio.length&&delete i.audio}return i}var E=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){return!!e[t]&&(n=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(n,1),-1<n)},this.trigger=function(t){var n,i,r,a=e[t];if(a)if(2===arguments.length)for(i=a.length,n=0;n<i;++n)a[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(i=a.length,n=0;n<i;++n)a[n].apply(this,r)}},this.dispose=function(){e={}}}};E.prototype.pipe=function(e){return this.on("data",function(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),this.on("partialdone",function(t){e.partialFlush(t)}),this.on("endedtimeline",function(t){e.endTimeline(t)}),this.on("reset",function(t){e.reset(t)}),e},E.prototype.push=function(e){this.trigger("data",e)},E.prototype.flush=function(e){this.trigger("done",e)},E.prototype.partialFlush=function(e){this.trigger("partialdone",e)},E.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},E.prototype.reset=function(e){this.trigger("reset",e)};var C,k,x,I,D,A,O,P,L,M,N,R,F,j,U,B,H,V,q,$,W,z,Y,G,X,K,Q,J,Z,ee,te,ne,ie,re,ae,oe,se,le,ue,ce=E,de=Math.pow(2,32)-1;!function(){if(W={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var e in W)W.hasOwnProperty(e)&&(W[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);z=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),G=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Y=new Uint8Array([0,0,0,1]),X=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),K=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Q={video:X,audio:K},ee=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Z=new Uint8Array([0,0,0,0,0,0,0,0]),te=new Uint8Array([0,0,0,0,0,0,0,0]),ne=te,ie=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),re=te,J=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),C=function(e){for(var t,n=[],i=0,r=1;r<arguments.length;r++)n.push(arguments[r]);for(r=n.length;r--;)i+=n[r].byteLength;for(t=new Uint8Array(i+8),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(0,t.byteLength),t.set(e,4),r=0,i=8;r<n.length;r++)t.set(n[r],i),i+=n[r].byteLength;return t},k=function(){return C(W.dinf,C(W.dref,ee))},x=function(e){return C(W.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},j=function(e){return C(W.hdlr,Q[e])},F=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),C(W.mdhd,t)},R=function(e){return C(W.mdia,F(e),j(e.type),A(e))},D=function(e){return C(W.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},A=function(e){return C(W.minf,"video"===e.type?C(W.vmhd,J):C(W.smhd,Z),k(),B(e))},Qe=function(e,t){for(var n=[],i=t.length;i--;)n[i]=V(t[i]);return C.apply(null,[W.moof,D(e)].concat(n))},O=function(e){for(var t=e.length,n=[];t--;)n[t]=M(e[t]);return C.apply(null,[W.moov,L(4294967295)].concat(n).concat(P(e)))},P=function(e){for(var t=e.length,n=[];t--;)n[t]=q(e[t]);return C.apply(null,[W.mvex].concat(n))},L=function(e){return e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]),C(W.mvhd,e)},U=function(e){for(var t,n=e.samples||[],i=new Uint8Array(4+n.length),r=0;r<n.length;r++)t=n[r].flags,i[r+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return C(W.sdtp,i)},B=function(e){return C(W.stbl,H(e),C(W.stts,re),C(W.stsc,ne),C(W.stsz,ie),C(W.stco,te))},H=function(e){return C(W.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===e.type?ae:oe)(e))},ae=function(e){for(var t,n,i=e.sps||[],r=e.pps||[],a=[],o=[],s=0;s<i.length;s++)a.push((65280&i[s].byteLength)>>>8),a.push(255&i[s].byteLength),a=a.concat(Array.prototype.slice.call(i[s]));for(s=0;s<r.length;s++)o.push((65280&r[s].byteLength)>>>8),o.push(255&r[s].byteLength),o=o.concat(Array.prototype.slice.call(r[s]));return t=[W.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C(W.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[r.length],o))),C(W.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],
e.sarRatio&&(n=e.sarRatio[0],e=e.sarRatio[1],t.push(C(W.pasp,new Uint8Array([(4278190080&n)>>24,(16711680&n)>>16,(65280&n)>>8,255&n,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e])))),C.apply(null,t)},oe=function(e){return C(W.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),x(e))},N=function(e){return e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]),C(W.tkhd,e)},V=function(e){var t,n=C(W.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(e.baseMediaDecodeTime/(1+de)),r=Math.floor(e.baseMediaDecodeTime%(1+de)),i=C(W.tfdt,new Uint8Array([1,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r]));return"audio"===e.type?(t=$(e,92),C(W.traf,n,i,t)):(r=U(e),t=$(e,r.length+92),C(W.traf,n,i,t,r))},M=function(e){return e.duration=e.duration||4294967295,C(W.trak,N(e),R(e))},q=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),C(W.trex,t)},se=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},le=function(e,t){var n,i,r,a,o=e.samples||[];for(t+=20+16*o.length,t=se(o,t),(i=new Uint8Array(t.length+16*o.length)).set(t),n=t.length,a=0;a<o.length;a++)r=o[a],i[n++]=(4278190080&r.duration)>>>24,i[n++]=(16711680&r.duration)>>>16,i[n++]=(65280&r.duration)>>>8,i[n++]=255&r.duration,i[n++]=(4278190080&r.size)>>>24,i[n++]=(16711680&r.size)>>>16,i[n++]=(65280&r.size)>>>8,i[n++]=255&r.size,i[n++]=r.flags.isLeading<<2|r.flags.dependsOn,i[n++]=r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,i[n++]=61440&r.flags.degradationPriority,i[n++]=15&r.flags.degradationPriority,i[n++]=(4278190080&r.compositionTimeOffset)>>>24,i[n++]=(16711680&r.compositionTimeOffset)>>>16,i[n++]=(65280&r.compositionTimeOffset)>>>8,i[n++]=255&r.compositionTimeOffset;return C(W.trun,i)},ue=function(e,t){var n,i,r,a,o=e.samples||[];for(t+=20+8*o.length,t=se(o,t),(n=new Uint8Array(t.length+8*o.length)).set(t),i=t.length,a=0;a<o.length;a++)r=o[a],n[i++]=(4278190080&r.duration)>>>24,n[i++]=(16711680&r.duration)>>>16,n[i++]=(65280&r.duration)>>>8,n[i++]=255&r.duration,n[i++]=(4278190080&r.size)>>>24,n[i++]=(16711680&r.size)>>>16,n[i++]=(65280&r.size)>>>8,n[i++]=255&r.size;return C(W.trun,n)},$=function(e,t){return("audio"===e.type?ue:le)(e,t)},I=function(){return C(W.ftyp,z,Y,z,G)};var he,pe=function(e){return C(W.mdat,e)},fe=Qe,me=function(e){var t=I(),n=O(e),e=new Uint8Array(t.byteLength+n.byteLength);return e.set(t),e.set(n,t.byteLength),e},ge=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},ve=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},ye=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},_e=function(t,n){for(var i,r,a,o=n||0,s=[],l=0;l<t.length;l++)for(r=t[l],i=0;i<r.length;i++)a=r[i],o+=(a=e(a,o)).size,s.push(a);return s},be=function(e){for(var t,n,i,r,a,o=0,s=e.byteLength,l=e.nalCount,u=new Uint8Array(s+4*l),c=new DataView(u.buffer),d=0;d<e.length;d++)for(i=e[d],t=0;t<i.length;t++)for(r=i[t],n=0;n<r.length;n++)a=r[n],c.setUint32(o,a.data.byteLength),u.set(a.data,o+=4),o+=a.data.byteLength;return u},Te=[33,16,5,32,164,27],Se=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],we=function(e){return 9e4*e},Ee=function(e,t){return e*t},Ce=function(e){return e/9e4},ke=function(e,t){return e/t},xe=we,Ie=Ce,De=function(e,t){return we(ke(e,t))},Ae=function(e,t){return Ee(Ce(e),t)},Oe=function(e,t,n){return Ce(n?e:e-t)},Pe=function(e,t,i,r){var a,o,s,l,u,c,d=0,h=0;if(t.length&&(a=De(e.baseMediaDecodeTime,e.samplerate),o=Math.ceil(9e4/(e.samplerate/1024)),i&&r&&(s=a-Math.max(i,r),h=(d=Math.floor(s/o))*o),!(d<1||45e3<h))){for(l=(l=n()[e.samplerate])||t[0].data,u=0;u<d;u++)c=t[0],t.splice(0,0,{data:l,dts:c.dts-o,pts:c.pts-o});return e.baseMediaDecodeTime-=Math.floor(Ae(h,e.samplerate)),h}},Le=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},Me=function(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i],n.push({size:t.data.byteLength,duration:1024});return n},Ne=function(e){for(var t,n=0,i=new Uint8Array(function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].data.byteLength;return t}(e)),r=0;r<e.length;r++)t=e[r],i.set(t.data,n),n+=t.data.byteLength;return i},Re=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Fe=function(e,t){var n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/9e4,t=Math.floor(t)),t},je=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ue=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,r=i=0}return n},Be=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},He=function(e,t){var n,i,r,a,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[2+r]&&(a.ccData=t[3+r]<<8|t[4+r],o.push(a));return o},Ve=function(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;for(var r=t-n.length,a=new Uint8Array(r),o=0,i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a},qe=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ge(0,0),new Ge(0,1),new Ge(1,0),new Ge(1,1)],this.parse708captions_&&(this.cc708Stream_=new We),this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(qe.prototype=new ce).push=function(e){var t,n;if("sei_rbsp"===e.nalUnitType&&(t=Ue(e.escapedRBSP)).payload&&4===t.payloadType&&(n=Be(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(--this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=He(e.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},qe.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return"flush"===e?t.flush():t.partialFlush()},this)},qe.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},qe.prototype.flush=function(){return this.flushStream("flush")},qe.prototype.partialFlush=function(){return this.flushStream("partialFlush")},qe.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},qe.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},qe.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},qe.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},qe.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},qe.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var $e={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600};r.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},r.prototype.getText=function(){return this.rows.join("\n")},r.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},r.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),0<this.rows.length&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},r.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},r.prototype.addText=function(e){this.rows[this.rowIdx]+=e},r.prototype.backspace=function(){var e;this.isEmpty()||(e=this.rows[this.rowIdx],this.rows[this.rowIdx]=e.substr(0,e.length-1))},a.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new r(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},a.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]};var We=function e(){e.prototype.init.call(this);var t=this;this.current708Packet=null,this.services={},this.push=function(e){(3===e.type||null===t.current708Packet)&&t.new708Packet(),t.add708Bytes(e)}};We.prototype=new ce,We.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},We.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,t=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(t)},We.prototype.push708Packet=function(){var e,t=this.current708Packet,n=t.data,i=null,r=0,a=n[r++];for(t.seq=a>>6,t.sizeCode=63&a;r<n.length;r++)e=31&(a=n[r++]),7==(i=a>>5)&&0<e&&(i=n[r++]),this.pushServiceBlock(i,r,e),0<e&&(r+=e-1)},We.prototype.pushServiceBlock=function(e,t,n){for(var r,a=t,o=this.current708Packet.data,s=(s=this.services[e])||this.initService(e,a);a<t+n&&a<o.length;a++)r=o[a],i(r)?a=this.handleText(a,s):16===r?a=this.extendedCommands(a,s):128<=r&&r<=135?a=this.setCurrentWindow(a,s):152<=r&&r<=159?a=this.defineWindow(a,s):136===r?a=this.clearWindows(a,s):140===r?a=this.deleteWindows(a,s):137===r?a=this.displayWindows(a,s):138===r?a=this.hideWindows(a,s):139===r?a=this.toggleWindows(a,s):151===r?a=this.setWindowAttributes(a,s):144===r?a=this.setPenAttributes(a,s):145===r?a=this.setPenColor(a,s):146===r?a=this.setPenLocation(a,s):143===r?s=this.reset(a,s):8===r?s.currentWindow.backspace():12===r?s.currentWindow.clearText():13===r?s.currentWindow.pendingNewLine=!0:14===r?s.currentWindow.clearText():141===r&&a++},We.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return e=i(n)?this.handleText(e,t,!0):e},We.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},We.prototype.initService=function(e,t){var n=this;return this.services[e]=new a(e),this.services[e].init(this.getPts(t),function(t){n.flushDisplayed(t,n.services[e])}),this.services[e]},We.prototype.handleText=function(e,t,n){var i=this.current708Packet.data[e],i=(i=$e[n=(n?4096:0)|i]||n,4096&n&&n===i?"":String.fromCharCode(i)),t=t.currentWindow;return t.pendingNewLine&&!t.isEmpty()&&t.newLine(this.getPts(e)),t.pendingNewLine=!1,t.addText(i),e},We.prototype.setCurrentWindow=function(e,t){var n=this.current708Packet.data[e];return t.setCurrentWindow(7&n),e},We.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e];return t.setCurrentWindow(7&i),t=t.currentWindow,i=n[++e],t.visible=(32&i)>>5,t.rowLock=(16&i)>>4,t.columnLock=(8&i)>>3,t.priority=7&i,i=n[++e],t.relativePositioning=(128&i)>>7,t.anchorVertical=127&i,i=n[++e],t.anchorHorizontal=i,i=n[++e],t.anchorPoint=(240&i)>>4,t.rowCount=15&i,i=n[++e],t.columnCount=63&i,i=n[++e],t.windowStyle=(56&i)>>3,t.penStyle=7&i,t.virtualRowCount=t.rowCount+1,e},We.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],t=t.currentWindow.winAttr,i=n[++e];return t.fillOpacity=(192&i)>>6,t.fillRed=(48&i)>>4,t.fillGreen=(12&i)>>2,t.fillBlue=3&i,i=n[++e],t.borderType=(192&i)>>6,t.borderRed=(48&i)>>4,t.borderGreen=(12&i)>>2,t.borderBlue=3&i,i=n[++e],t.borderType+=(128&i)>>5,t.wordWrap=(64&i)>>6,t.printDirection=(48&i)>>4,t.scrollDirection=(12&i)>>2,t.justify=3&i,i=n[++e],t.effectSpeed=(240&i)>>4,t.effectDirection=(12&i)>>2,t.displayEffect=3&i,e},We.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},We.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},We.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},We.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},We.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},We.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},We.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},We.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],t=t.currentWindow.penAttr,i=n[++e];return t.textTag=(240&i)>>4,t.offset=(12&i)>>2,t.penSize=3&i,i=n[++e],t.italics=(128&i)>>7,t.underline=(64&i)>>6,t.edgeType=(56&i)>>3,t.fontStyle=7&i,e},We.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],t=t.currentWindow.penColor,i=n[++e];return t.fgOpacity=(192&i)>>6,t.fgRed=(48&i)>>4,t.fgGreen=(12&i)>>2,t.fgBlue=3&i,i=n[++e],t.bgOpacity=(192&i)>>6,t.bgRed=(48&i)>>4,t.bgGreen=(12&i)>>2,t.bgBlue=3&i,i=n[++e],t.edgeRed=(48&i)>>4,t.edgeGreen=(12&i)>>2,t.edgeBlue=3&i,e},We.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},We.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var ze={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ye=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ge=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a=32639&e.ccData;a!==this.lastControlCode_?(4096==(61440&a)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null),t=a>>>8,n=255&a,a===this.PADDING_||(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),r=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=r,this.startPts_=e.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(e.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(e.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(e.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(e.pts),this.displayed_=s()):a===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=s():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=s()),this.mode_="paintOn",this.startPts_=e.pts):this.isSpecialCharacter(t,n)?(i=o((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isExtCharacter(t,n)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=o((t=(3&t)<<8)|n),this[this.mode_](e.pts,i),this.column_++):this.isMidRowCode(t,n)?(this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&n)&&this.addFormatting(e.pts,["i"]),1==(1&n)&&this.addFormatting(e.pts,["u"])):this.isOffsetControlCode(t,n)?this.column_+=3&n:this.isPAC(t,n)?(r=Ye.indexOf(7968&a),"rollUp"===this.mode_&&(r-this.rollUpRows_+1<0&&(r=this.rollUpRows_-1),this.setRollUp(e.pts,r)),r!==this.row_&&(this.clearFormatting(e.pts),this.row_=r),1&n&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&a)&&(this.column_=4*((14&a)>>1)),this.isColorPAC(n)&&14==(14&n)&&this.addFormatting(e.pts,["i"])):this.isNormalChar(t)&&(0===n&&(n=null),i=o(t),i+=o(n),this[this.mode_](e.pts,i),this.column_+=i.length))):this.lastControlCode_=null}};Ge.prototype=new ce,Ge.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}},this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=s(),this.nonDisplayed_=s(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ge.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ge.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Ge.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Ge.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Ge.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Ge.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Ge.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Ge.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Ge.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=s(),this.displayed_=s()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ge.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t),t=t.reduce(function(e,t){return e+"<"+t+">"},""),this[this.mode_](e,t)},Ge.prototype.clearFormatting=function(e){var t;this.formatting_.length&&(t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},""),this.formatting_=[],this[this.mode_](e,t))},Ge.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=t},Ge.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t},Ge.prototype.shiftRowsUp_=function(){for(var e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ge.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=t};var Xe={CaptionStream:qe,Cea608Stream:Ge,Cea708Stream:We},Ke={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},E=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=l(e.dts,i),e.pts=l(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};E.prototype=new ce;var Qe=E,qe=l,Je={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=c(e.data,1,t),e.value=c(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=c(e.data,1,t),e.url=c(e.data,t+1,e.data.length);break}},PRIV:function(e){for(var t,n=0;n<e.data.length;n++)if(0===e.data[n]){e.owner=(t=e.data,unescape(u(t,0,n)));break}e.privateData=e.data.subarray(n+1),e.data=e.privateData}},Ze=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(Ze.prototype.init.call(this),this.dispatchType=Ke.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,l,u,c;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=d(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},s=0;s<i;)t.data.set(r[0].data.subarray(0,i-s),s),s+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=d(t.data.subarray(10,14)),i-=d(t.data.subarray(16,20)));do{if((o=d(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."})}while((c={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=c.id,Je[c.id]&&(Je[c.id](c),"com.apple.streaming.transportStreamTimestamp"===c.owner&&(u=(1&(l=c.data)[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2,u*=4,u+=3&l[7],c.timeStamp=u,void 0===t.pts&&void 0===t.dts&&(t.pts=c.timeStamp,t.dts=c.timeStamp),this.trigger("timestamp",c))),t.frames.push(c),n+=10,(n+=o)<i);this.trigger("data",t)}}};Ze.prototype=new ce;var et,tt,E=Ze,Qe=Qe,nt=function(){var e=new Uint8Array(188),t=0;nt.prototype.init.call(this),this.push=function(n){var i,r=0,a=188;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=188,a+=188);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}};nt.prototype=new ce,(et=function(){var e,t,n,i;et.prototype.init.call(this),(i=this).packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),("pat"===i.type?t:n)(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],o=(31&e[r+1])<<8|e[r+2];a===Ke.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=o:a===Ke.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=o:a===Ke.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][o]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],1<(48&t[3])>>>4&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Ke.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Ke.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new ce,et.STREAM_TYPES={h264:27,adts:15},(tt=function(){function e(e,t,i){var r,a,o,s,l=new Uint8Array(e.size),u={type:t},c=0,d=0;if(e.data.length&&!(e.size<9)){for(u.trackId=e.data[0].pid,c=0;c<e.data.length;c++)r=e.data[c],l.set(r.data,d),d+=r.data.byteLength;o=u,s=(a=l)[0]<<16|a[1]<<8|a[2],o.data=new Uint8Array,1==s&&(o.packetLength=6+(a[4]<<8|a[5]),o.dataAlignmentIndicator=0!=(4&a[6]),192&(s=a[7])&&(o.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,o.pts*=4,o.pts+=(6&a[13])>>>1,o.dts=o.pts,64&s&&(o.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,o.dts*=4,o.dts+=(6&a[18])>>>1)),o.data=a.subarray(9+a[8])),t="video"===t||u.packetLength<=e.size,(i||t)&&(e.size=0,e.data.length=0),t&&n.trigger("data",u)}}var t,n=this,i=!1,r={data:[],size:0},a={data:[],size:0},o={data:[],size:0};tt.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,n;switch(s.streamType){case Ke.H264_STREAM_TYPE:t=r,n="video";break;case Ke.ADTS_STREAM_TYPE:t=a,n="audio";break;case Ke.METADATA_STREAM_TYPE:t=o,n="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&e(t,n,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),i=!0,n.trigger("data",e)}})[s.type]()},this.reset=function(){r.size=0,r.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){e(r,"video"),e(a,"audio"),e(o,"timed-metadata")},this.flush=function(){var e;!i&&t&&(e={type:"metadata",tracks:[]},null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),n.trigger("data",e)),i=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new ce;var it,rt={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:nt,TransportParseStream:et,ElementaryStream:tt,TimestampRolloverStream:Qe,CaptionStream:Xe.CaptionStream,Cea608Stream:Xe.Cea608Stream,Cea708Stream:Xe.Cea708Stream,
MetadataStream:E};for(it in Ke)Ke.hasOwnProperty(it)&&(rt[it]=Ke[it]);var at=rt,ot=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],st=function(e){var t,n=0;st.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(i){var r,a,o,s,l,u,c=0;if(e||(n=0),"audio"===i.type){for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+i.data.byteLength)).set(o),t.set(i.data,o.byteLength)):t=i.data;c+7<t.length;)if(255===t[c]&&240==(246&t[c+1])){if("number"==typeof u&&(this.skipWarn_(u,c),u=null),a=2*(1&~t[c+1]),r=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,l=9e4*(s=1024*(1+(3&t[c+6])))/ot[(60&t[c+2])>>>2],t.byteLength-c<r)break;this.trigger("data",{pts:i.pts+n*l,dts:i.dts+n*l,sampleCount:s,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:ot[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+a,c+r)}),n++,c+=r}else"number"!=typeof u&&(u=c),c++;"number"==typeof u&&(this.skipWarn_(u,c),u=null),t=t.subarray(c)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}};st.prototype=new ce;var lt,ut,ct=st,dt=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),n=new DataView(a.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;e<i||(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord()),n<<=e,i-=e},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return 0<(i-=r)?n<<=r:0<t&&this.loadWord(),0<(r=e-r)?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){for(var e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},ht=function(){var e,t,n=0;ht.prototype.init.call(this),this.push=function(i){for(var r,a=(t=t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),r):i.data).byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}for(n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));1!==t[++e]&&e<a;);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&3<t.byteLength&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};ht.prototype=new ce,ut={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(lt=function(){var e,t,n,i,r,a,o,s=new ht;lt.prototype.init.call(this),(e=this).push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",function(o){var s={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)}),s.on("done",function(){e.trigger("done")}),s.on("partialdone",function(){e.trigger("partialdone")}),s.on("reset",function(){e.trigger("reset")}),s.on("endedtimeline",function(){e.trigger("endedtimeline")}),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){for(var n=8,i=8,r=0;r<e;r++)n=0===(i=0!==i?(n+t.readExpGolomb()+256)%256:i)?n:i},r=function(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;for(var r=t-n.length,a=new Uint8Array(r),o=0,i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a},a=function(e){var t,n,i,r,a,s=0,l=0,u=0,c=0,d=[1,1],h=new dt(e),p=h.readUnsignedByte(),f=h.readUnsignedByte(),m=h.readUnsignedByte();if(h.skipUnsignedExpGolomb(),ut[p]&&(3===(n=h.readUnsignedExpGolomb())&&h.skipBits(1),h.skipUnsignedExpGolomb(),h.skipUnsignedExpGolomb(),h.skipBits(1),h.readBoolean()))for(r=3!==n?8:12,a=0;a<r;a++)h.readBoolean()&&o(a<6?16:64,h);if(h.skipUnsignedExpGolomb(),0===(i=h.readUnsignedExpGolomb()))h.readUnsignedExpGolomb();else if(1===i)for(h.skipBits(1),h.skipExpGolomb(),h.skipExpGolomb(),t=h.readUnsignedExpGolomb(),a=0;a<t;a++)h.skipExpGolomb();if(h.skipUnsignedExpGolomb(),h.skipBits(1),e=h.readUnsignedExpGolomb(),n=h.readUnsignedExpGolomb(),0===(i=h.readBits(1))&&h.skipBits(1),h.skipBits(1),h.readBoolean()&&(s=h.readUnsignedExpGolomb(),l=h.readUnsignedExpGolomb(),u=h.readUnsignedExpGolomb(),c=h.readUnsignedExpGolomb()),h.readBoolean()&&h.readBoolean()){switch(h.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[h.readUnsignedByte()<<8|h.readUnsignedByte(),h.readUnsignedByte()<<8|h.readUnsignedByte()]}d&&(d[0],d[1])}return{profileIdc:p,levelIdc:m,profileCompatibility:f,width:16*(e+1)-2*s-2*l,height:(2-i)*(n+1)*16-2*u-2*c,sarRatio:d}}}).prototype=new ce;var Qe={H264Stream:lt,NalByteStream:ht},pt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ft={isLikelyAacData:function(e){var t=p(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:h,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return pt[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n=10;64&e[5]&&(n+=4,n+=f(e.subarray(10,14)));do{if((t=f(e.subarray(n+4,n+8)))<1)return null;if("PRIV"===String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]))for(var i=e.subarray(n+10,n+t+10),r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){for(var i="",r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(i,0,r)))break;var a=i.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return o*=4,o+=3&a[7]}}while(n+=10,(n+=t)<e.byteLength);return null}},mt=function(){var e=new Uint8Array,t=0;mt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a=0,o=0;for(e.length?(r=e.length,(e=new Uint8Array(n.byteLength+r)).set(e.subarray(0,r)),e.set(n,r)):e=n;3<=e.length-o;)if(e[o]!=="I".charCodeAt(0)||e[o+1]!=="D".charCodeAt(0)||e[o+2]!=="3".charCodeAt(0))if(255!=(255&e[o])||240!=(240&e[o+1]))o++;else{if(e.length-o<7)break;if(o+(a=ft.parseAdtsSize(e,o))>e.length)break;i={type:"audio",data:e.subarray(o,o+a),pts:t,dts:t},this.trigger("data",i),o+=a}else{if(e.length-o<10)break;if(o+(a=ft.parseId3TagSize(e,o))>e.length)break;i={type:"timed-metadata",data:e.subarray(o,o+a)},this.trigger("data",i),o+=a}n=e.length-o,e=0<n?e.subarray(o):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}};mt.prototype=new ce;var gt,vt,yt,_t=mt,bt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Tt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],St=Qe.H264Stream,wt=ft.isLikelyAacData,Et=function(e,t){var n=[],i=0,r=0,a=1/0,o=(t=t||{}).firstSequenceNumber||0;Et.prototype.init.call(this),this.push=function(t){je(e,t),e&&bt.forEach(function(n){e[n]=t[n]}),n.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){a=e},this.setAudioAppendStart=function(e){r=e},this.flush=function(){var s,l,u,c,d;0!==n.length&&(s=Le(n,e,i),e.baseMediaDecodeTime=Fe(e,t.keepOriginalTimestamps),d=Pe(e,s,r,a),e.samples=Me(s),l=pe(Ne(s)),n=[],c=fe(o,[e]),u=new Uint8Array(c.byteLength+l.byteLength),o++,u.set(c),u.set(l,c.byteLength),Re(e),c=Math.ceil(9216e4/e.samplerate),s.length&&(c=s.length*c,this.trigger("segmentTimingInfo",g(De(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+c,s[0].pts+c,d||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+c})),this.trigger("data",{track:e,boxes:u})),this.trigger("done","AudioSegmentStream")},this.reset=function(){Re(e),n=[],this.trigger("reset")}};Et.prototype=new ce,(gt=function(e,t){var n,i,r=[],a=[],o=(t=t||{}).firstSequenceNumber||0;gt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){je(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],Tt.forEach(function(t){e[t]=n[t]},this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),r.push(t)},this.flush=function(){for(var n,i,s,l=0;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=ge(r),(i=ve(n))[0][0].keyFrame||((s=this.getGopForFusion_(r[0],e))?(l=s.duration,i.unshift(s),i.byteLength+=s.byteLength,i.nalCount+=s.nalCount,i.pts=s.pts,i.dts=s.dts,i.duration+=s.duration):i=ye(i)),a.length){var u=t.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i);if(!u)return this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Re(e),i=u}je(e,i),e.samples=_e(i),n=pe(be(i)),e.baseMediaDecodeTime=Fe(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),s=i[0],u=i[i.length-1],this.trigger("segmentTimingInfo",g(e.baseMediaDecodeTime,s.dts,s.pts,u.dts+u.duration,u.pts+u.duration,l)),this.trigger("timingInfo",{start:i[0].pts,end:i[i.length-1].pts+i[i.length-1].duration}),this.gopCache_.unshift({gop:i.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),l=fe(o,[e]),i=new Uint8Array(l.byteLength+n.byteLength),o++,i.set(l),i.set(n,l.byteLength),this.trigger("data",{track:e,boxes:i}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),r=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){Re(e),i=n=void 0},this.getGopForFusion_=function(t){for(var n,i,r,a=1/0,o=0;o<this.gopCache_.length;o++)i=(r=this.gopCache_[o]).gop,e.pps&&m(e.pps[0],r.pps[0])&&e.sps&&m(e.sps[0],r.sps[0])&&(i.dts<e.timelineStartInfo.dts||-1e4<=(i=t.dts-i.dts-i.duration)&&i<=45e3&&(!n||i<a)&&(n=r,a=i));return n?n.gop:null},this.alignGopsAtStart_=function(e){for(var t,n,i,r,o=e.byteLength,s=e.nalCount,l=e.duration,u=t=0;u<a.length&&t<e.length&&(n=a[u],i=e[t],n.pts!==i.pts);)i.pts>n.pts?u++:(t++,o-=i.byteLength,s-=i.nalCount,l-=i.duration);return 0===t?e:t===e.length?null:((r=e.slice(t)).byteLength=o,r.duration=l,r.nalCount=s,r.pts=r[0].pts,r.dts=r[0].dts,r)},this.alignGopsAtEnd_=function(e){for(var t,n,i=a.length-1,r=e.length-1,o=null,s=!1;0<=i&&0<=r;){if(t=a[i],n=e[r],t.pts===n.pts){s=!0;break}t.pts>n.pts?i--:(i===a.length-1&&(o=r),r--)}if(!s&&null===o)return null;if(0===(u=s?r:o))return e;var l=e.slice(u),u=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){a=e}}).prototype=new ce,(yt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,yt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new ce,yt.prototype.flush=function(e){var t,n,i,r=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Tt.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,bt.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,e=me(this.pendingTracks),a.initSegment=new Uint8Array(e.byteLength),a.initSegment.set(e),a.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)a.data.set(this.pendingBoxes[i],r),r+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=Oe(t.startPts,o,this.keepOriginalTimestamps),t.endTime=Oe(t.endPts,o,this.keepOriginalTimestamps),a.captionStreams[t.stream]=!0,a.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=Oe(n.pts,o,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),i=0;i<a.captions.length;i++)t=a.captions[i],this.trigger("caption",t);for(i=0;i<a.metadata.length;i++)n=a.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},yt.prototype.setRemux=function(e){this.remuxTracks=e},(vt=function(e){var t,n,i=this,r=!0;vt.prototype.init.call(this),this.baseMediaDecodeTime=(e=e||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};(this.transmuxPipeline_=r).type="aac",r.metadataStream=new at.MetadataStream,r.aacStream=new _t,r.audioTimestampRolloverStream=new at.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new at.TimestampRolloverStream("timed-metadata"),r.adtsStream=new ct,r.coalesceStream=new yt(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",function(e){r.aacStream.setTimestamp(e.timeStamp)}),r.aacStream.on("data",function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Et(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};(this.transmuxPipeline_=r).type="ts",r.metadataStream=new at.MetadataStream,r.packetStream=new at.TransportPacketStream,r.parseStream=new at.TransportParseStream,r.elementaryStream=new at.ElementaryStream,r.timestampRolloverStream=new at.TimestampRolloverStream,r.adtsStream=new ct,r.h264Stream=new St,r.captionStream=new at.CaptionStream(e),r.coalesceStream=new yt(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new gt(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))}),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new Et(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}}),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)}),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Re(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Re(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=wt(e);if(t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),this.transmuxPipeline_)for(var n=Object.keys(this.transmuxPipeline_),i=0;i<n.length;i++){var a=n[i];"headOfPipeline"!==a&&this.transmuxPipeline_[a].on&&this.transmuxPipeline_[a].on("log",this.getLogTrigger_(a))}r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new ce;var Ct={Transmuxer:vt,VideoSegmentStream:gt,AudioSegmentStream:Et,AUDIO_PROPERTIES:bt,VIDEO_PROPERTIES:Tt,generateSegmentTimingInfo:g},E=function(e){return e>>>0},kt=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},xt=E,It=function e(t,n){var i,r,a,o=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=xt(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=kt(t.subarray(i+4,i+8)),r=1<r?i+r:t.byteLength,a===n[0]&&(1===n.length?o.push(t.subarray(i+8,r)):(a=e(t.subarray(i+8,r),n.slice(1))).length&&(o=o.concat(a))),i=r;return o},Dt=E,At=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:Dt(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=Dt(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},Ot=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Pt=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],l=4&n.flags[1],u=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Ot(e.subarray(d,d+4))},d+=4,o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),l&&(t.flags=Ot(e.subarray(d,d+4)),d+=4),u&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},Lt=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},i=1&n.flags[2],r=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],s=32&n.flags[2],l=65536&n.flags[0],u=131072&n.flags[0],e=8;return i&&(e+=4,n.baseDataOffset=t.getUint32(12),e+=4),r&&(n.sampleDescriptionIndex=t.getUint32(e),e+=4),a&&(n.defaultSampleDuration=t.getUint32(e),e+=4),o&&(n.defaultSampleSize=t.getUint32(e),e+=4),s&&(n.defaultSampleFlags=t.getUint32(e)),l&&(n.durationIsEmpty=!0),!i&&u&&(n.baseDataOffsetIsMoof=!0),n},Mt=Ve,Nt=Xe.CaptionStream,Rt=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new Nt,o=!0,a=!!t&&t.isPartial,e.on("data",function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0}),e.on("log",function(e){r.logs.push(e)})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,a,o){if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],i=o[n];else if(null===n||!i)return t.push(e),null;for(;0<t.length;){var s=t.shift();this.parse(s,a,o)}return(e=function(e,t,n){return null===t?null:(t=v(e,t)[t]||{},{seiNals:t.seiNals,logs:t.logs,timescale:n})}(e,n,i))&&e.logs&&(r.logs=r.logs.concat(e.logs)),null!==e&&e.seiNals?(this.pushNals(e.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach(function(t){e.push(t)})},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],i=n=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ft=E,jt=function(e){return("00"+e.toString(16)).slice(-2)},Qe=function(e){return It(e,["moov","trak"]).reduce(function(e,t){var n,i,r=It(t,["tkhd"])[0];return r?(n=r[0],r=Ft(r[i=0===n?12:20]<<24|r[1+i]<<16|r[2+i]<<8|r[3+i]),(t=It(t,["mdia","mdhd"])[0])?(n=t[0],e[r]=Ft(t[i=0===n?12:20]<<24|t[1+i]<<16|t[2+i]<<8|t[3+i]),e):null):null},{})},ce=function(e,t){var t=It(t,["moof","traf"]),t=[].concat.apply([],t.map(function(t){return It(t,["tfhd"]).map(function(n){var i=Ft(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),n=e[i]||9e4,i=It(t,["tfdt"]).map(function(e){var t=e[0],n=Ft(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);return 1===t&&(n*=Math.pow(2,32),n+=Ft(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0];return(i="number"!=typeof i||isNaN(i)?1/0:i)/n})})),t=Math.min.apply(null,t);return isFinite(t)?t:0},Ve=function(e,t){var n,i,r=It(t,["moof","traf"]),a=0,o=0;return r&&r.length&&(n=It(r[0],["tfhd"])[0],t=It(r[0],["trun"])[0],r=It(r[0],["tfdt"])[0],n&&(i=Lt(n).trackId),r&&(a=At(r).baseMediaDecodeTime),!t||(t=Pt(t)).samples&&t.samples.length&&(o=t.samples[0].compositionTimeOffset||0)),(a+o)/(e[i]||9e4)},Ut=function(e){var t=0===e[0]?12:20;return Ft(e[t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])},E=function(e){var e=It(e,["moov","trak"]),t=[];return e.forEach(function(e){var n={},i=It(e,["tkhd"])[0];i&&(i=(r=new DataView(i.buffer,i.byteOffset,i.byteLength)).getUint8(0),n.id=0===i?r.getUint32(12):r.getUint32(20));var r=It(e,["mdia","hdlr"])[0];r&&(o=kt(r.subarray(8,12)),n.type="vide"===o?"video":"soun"===o?"audio":o);var a,o=It(e,["mdia","minf","stbl","stsd"])[0];o&&(o=o.subarray(8),n.codec=kt(o.subarray(4,8)),(o=It(o,[n.codec])[0])&&(/^[a-z]vc[1-9]$/i.test(n.codec)?(a=o.subarray(78),"avcC"===kt(a.subarray(4,8))&&11<a.length?(n.codec+=".",n.codec+=jt(a[9]),n.codec+=jt(a[10]),n.codec+=jt(a[11])):n.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(n.codec)?(a=o.subarray(28),"esds"===kt(a.subarray(4,8))&&20<a.length&&0!==a[19]?(n.codec+="."+jt(a[19]),n.codec+="."+jt(a[20]>>>2&63).replace(/^0/,"")):n.codec="mp4a.40.2"):n.codec=n.codec.toLowerCase())),e=It(e,["mdia","mdhd"])[0],e&&(n.timescale=Ut(e)),t.push(n)}),t},Bt=ce,Ht=E,Vt=qe,qt={};qt.ts={parseType:function(e,t){return e=y(e),0===e?"pat":e===t?"pmt":t?"pes":null},parsePat:function(e){var t=_(e),n=4+b(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=_(e),i=4+b(e);if(n&&(i+=e[i]+1),1&e[i+5]){for(var r=3+((15&e[i+1])<<8|e[i+2])-4,a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var o=i+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:_,parsePesType:function(e,t){switch(t[y(e)]){case Ke.H264_STREAM_TYPE:return"video";case Ke.ADTS_STREAM_TYPE:return"audio";case Ke.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!_(e))return null;var t=4+b(e);if(t>=e.byteLength)return null;var n=null,i=e[t+7];return 192&i&&((n={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,n.pts*=4,n.pts+=(6&e[t+13])>>>1,n.dts=n.pts,64&i&&(n.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,n.dts*=4,n.dts+=(6&e[t+18])>>>1)),n},videoPacketContainsKeyFrame:function(e){for(var t=4+b(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===T(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===T(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,a=!!(n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===T(31&n[r+3]))||a}},qt.aac=ft;var $t=function(e,t){var n,i,r=(qt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,o=0,s=0;3<=e.length-s;){switch(qt.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=qt.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=qt.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=qt.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=qt.aac.parseSampleRate(t)),i++,s+=o;break;default:s++}if(n)return null}if(null===r||null===a)return null;var l=9e4/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}:w)(e);return r&&(r.audio||r.video)?(e=t,(t=r).audio&&t.audio.length&&(void 0!==(n=e)&&!isNaN(n)||(n=t.audio[0].dts),t.audio.forEach(function(e){e.dts=Vt(e.dts,n),e.pts=Vt(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})),t.video&&t.video.length&&(void 0!==(i=e)&&!isNaN(i)||(i=t.video[0].dts),t.video.forEach(function(e){e.dts=Vt(e.dts,i),e.pts=Vt(e.pts,i),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),t.firstKeyFrame&&((t=t.firstKeyFrame).dts=Vt(t.dts,i),t.pts=Vt(t.pts,i),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4)),r):null},Wt=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){var e,t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ct.Transmuxer(this.options),e=this.self,(t=this.transmuxer).on("data",function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength},n=t.data,t.data=n.buffer,e.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.on("done",function(t){e.postMessage({action:"done"})}),t.on("gopInfo",function(t){e.postMessage({action:"gopInfo",gopInfo:t})}),t.on("videoSegmentTimingInfo",function(t){var n={start:{decode:Ie(t.start.dts),presentation:Ie(t.start.pts)},end:{decode:Ie(t.end.dts),presentation:Ie(t.end.pts)},baseMediaDecodeTime:Ie(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=Ie(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})}),t.on("audioSegmentTimingInfo",function(t){var n={start:{decode:Ie(t.start.dts),presentation:Ie(t.start.pts)},end:{decode:Ie(t.end.dts),presentation:Ie(t.end.pts)},baseMediaDecodeTime:Ie(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=Ie(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})}),t.on("id3Frame",function(t){e.postMessage({action:"id3Frame",id3Frame:t})}),t.on("caption",function(t){e.postMessage({action:"caption",caption:t})}),t.on("trackinfo",function(t){e.postMessage({action:"trackinfo",trackInfo:t})}),t.on("audioTimingInfo",function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{
start:Ie(t.start),end:Ie(t.end)}})}),t.on("videoTimingInfo",function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ie(t.start),end:Ie(t.end)}})}),t.on("log",function(t){e.postMessage({action:"log",log:t})})},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Rt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),e=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:e&&e.captions||[],logs:e&&e.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,e=e.data,t=Bt(t,e);this.self.postMessage({action:"probeMp4StartTime",startTime:t,data:e},[e.buffer])},t.probeMp4Tracks=function(e){var t=e.data,e=Ht(t);this.self.postMessage({action:"probeMp4Tracks",tracks:e,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,e="number"!=typeof n||isNaN(n)?void 0:9e4*n,n=$t(t,e),e=null;n&&((e={hasVideo:n.video&&2===n.video.length||!1,hasAudio:n.audio&&2===n.audio.length||!1}).hasVideo&&(e.videoStart=n.video[0].ptsTime),e.hasAudio&&(e.audioStart=n.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:e,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){e=new Uint8Array(e.data,e.byteOffset,e.byteLength),this.transmuxer.push(e)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){e=e.timestampOffset||0,this.transmuxer.setBaseMediaDecodeTime(Math.round(xe(e)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(xe(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Wt(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Wt(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),vu=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():hr(e.currentTransmux))},yu=function(e){fr("reset",e)},_u=function(e){var t=new gu;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},bu=2,Tu=-101,Su=-102,wu=vi("CodecUtils"),Eu=vi("PlaylistSelector"),Ro=function(){var e=this.useDevicePixelRatio&&pa.devicePixelRatio||1;return Rr(this.playlists.master,this.systemBandwidth,parseInt(Lr(this.tech_.el(),"width"),10)*e,parseInt(Lr(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Cu=function(e){function t(t,n){var i=e.call(this)||this;if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=11<=mt.browser.IE_VERSION,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",function(){i.isEndOfStream_()||(i.ended_=!1)}),i.fetchAtBuffer_=!1,i.logger_=vi("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(_o(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()}),i}bo(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return _u({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&pa.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,pa.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&yu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return mt.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,e=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!e)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=nr(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=ir(e),i=this.keyCache_[n];return this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes}),e={resolvedUri:(i||e).resolvedUri},i&&(e.bytes=i.bytes),e},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");t=e.mediaSequence-n.mediaSequence,this.logger_("live window shift ["+t+"]"),null!==this.mediaIndex&&(this.mediaIndex-=t,this.mediaIndex<0?(this.mediaIndex=null,this.partIndex=null):(r=this.playlist_.segments[this.mediaIndex],!this.partIndex||r.parts&&r.parts.length&&r.parts[this.partIndex]||(r=this.mediaIndex,this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=r))),i&&(i.mediaIndex-=t,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(0<=i.mediaIndex&&(i.segment=e.segments[i.mediaIndex]),0<=i.partIndex&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(pa.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&yu(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),(t=t===1/0?this.duration_():t)<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r,a=1,o=function(){0==--a&&n()};for(r in!i&&this.audioDisabled_||(a++,this.sourceUpdater_.removeAudio(e,t,o)),!i&&"main"!==this.loaderType_||(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),i=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return i;for(var s=o+1;s--&&!(e[s].pts<=r););return s=Math.max(s,0),i.splice(s,o-s+1),i}(this.gopBuffer_,e,t,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,t,o)),this.inbandTextTracks_)jr(e,t,this.inbandTextTracks_[r]);jr(e,t,this.segmentMetadataTrack_),o()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&pa.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=pa.setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&pa.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=pa.setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){var e;this.sourceUpdater_.updating()||(e=this.chooseNextRequest_())&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var i="number"==typeof e&&t.segments[e],e=e+1===t.segments.length,i=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&e&&i},n.chooseNextRequest_=function(){var e=wi(this.buffered_())||0,t=Math.max(0,e-this.currentTime_()),n=!this.hasPlayed_()&&1<=t,i=t>=this.goalBufferLength_(),r=this.playlist_.segments;if(!r.length||n||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()),t={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)},t.isSyncRequest?t.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),n<(r+=o.duration)))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,r,e):null!==this.mediaIndex?(n=r[this.mediaIndex],i="number"==typeof this.partIndex?this.partIndex:-1,t.startOfSegment=n.end||e,n.parts&&n.parts[i+1]?(t.mediaIndex=this.mediaIndex,t.partIndex=i+1):t.mediaIndex=this.mediaIndex+1):(e=(o=su.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?e:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time})).segmentIndex,a=o.startTime,o=o.partIndex,t.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",t.mediaIndex=e,t.startOfSegment=a,t.partIndex=o);var a=r[t.mediaIndex],o=a&&"number"==typeof t.partIndex&&a.parts&&a.parts[t.partIndex];return!a||"number"==typeof t.partIndex&&!o?null:("number"!=typeof t.partIndex&&a.parts&&(t.partIndex=0),a=this.mediaSource_&&"ended"===this.mediaSource_.readyState,t.mediaIndex>=r.length-1&&a&&!this.seeking_()?null:this.generateSegmentInfo_(t))},n.generateSegmentInfo_=function(e){var t=e.playlist,n=e.mediaIndex,i=e.startOfSegment,r=e.isSyncRequest,a=e.partIndex,o=e.forceTimestampOffset,s=e.getMediaInfoForTime,l=t.segments[n],e="number"==typeof a&&l.parts[a],s={requestId:"segment-loader-"+Math.random(),uri:e&&e.resolvedUri||l.resolvedUri,mediaIndex:n,partIndex:e?a:null,isSyncRequest:r,startOfSegment:i,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:e&&e.duration||l.duration,segment:l,part:e,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:s},o=void 0!==o?o:this.isPendingTimestampOffset_;return s.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:o}),o=wi(this.sourceUpdater_.audioBuffered()),"number"==typeof o&&(s.audioAppendStart=o-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(s.gopsToAlignWith=function(e,t,n){if(void 0===t||null===t||!e.length)return[];for(var i=Math.ceil(9e4*(t-n+3)),r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),s},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,i=t.currentTimeline,r=t.startOfSegment,e=t.buffered,t.overrideCheck||n!==i?n<i||!e.length?r:e.end(e.length-1):null;var t,n,i,r},n.earlyAbortWhenNeeded_=function(e){var t,n,i,r,a,o,s,l,u,c,d,h,p;!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3||(t=this.currentTime_(),r=e.bandwidth,a=this.pendingSegment_.duration,p=su.estimateSegmentRequestTime(a,r,this.playlist_,e.bytesReceived),n=this.buffered_(),i=t,void 0===(e=this.vhs_.tech_.playbackRate())&&(e=1),p<=(e=((n.length?n.end(n.length-1):0)-i)/e-1)||(r={master:this.vhs_.playlists.master,currentTime:t,bandwidth:r,duration:this.duration_(),segmentDuration:a,timeUntilRebuffer:e,currentTimeline:this.currentTimeline_,syncController:this.syncController_},a=r.master,o=r.currentTime,s=r.bandwidth,l=r.duration,u=r.segmentDuration,c=r.timeUntilRebuffer,d=r.currentTimeline,h=r.syncController,a=(r=(a=(a=(r=a.playlists.filter(function(e){return!su.isIncompatible(e)})).filter(su.isEnabled)).length?a:r.filter(function(e){return!su.isDisabled(e)})).filter(su.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=h.getSyncPoint(e,l,d,o)?1:2;return{playlist:e,rebufferingImpact:su.estimateSegmentRequestTime(u,s,e)*t-c}})).filter(function(e){return e.rebufferingImpact<=0}),Mr(a,function(e,t){return Nr(t.playlist,e.playlist)}),(r=a.length?a[0]:(Mr(r,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),r[0]||null))&&(p=p-e-r.rebufferingImpact,!r.playlist||r.playlist.uri===this.playlist_.uri||p<(e<=au?1:.5)||(this.bandwidth=r.playlist.attributes.BANDWIDTH*mu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))))))},n.handleAbort_=function(e){this.logger_("Aborting "+Br(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t=t||{})||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,i){var r;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||((r=this.pendingSegment_)[e=Hr(t)]=r[e]||{},r[e][n]=i,this.logger_("timinginfo: "+t+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_())},n.handleCaptions_=function(e,t){var n,i,r=this;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(0!==t.length?this.pendingSegment_.hasAppendedData_?(n=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={},t.forEach(function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+n),t.endTime=Math.max(t.endTime,e.endTime+n),t.captions.push(e)}),Object.keys(i).forEach(function(e){var t,a,o,s,l,u,c,d,h,p,f=i[e],m=f.startTime,g=f.endTime,v=f.captions,y=r.inbandTextTracks_;r.logger_("adding cues from "+m+" -> "+g+" for "+e),t=y,a=r.vhs_.tech_,t[o=e]||(a.trigger({type:"usage",name:"vhs-608"}),a.trigger({type:"usage",name:"hls-608"}),/^cc708_/.test(s=o)&&(s="SERVICE"+o.split("_")[1]),(c=a.textTracks().getTrackById(s))?t[o]=c:(u=l=o,f=!1,(c=(a.options_.vhs&&a.options_.vhs.captionServices||{})[s])&&(l=c.label,u=c.language,f=c.default),t[o]=a.addRemoteTextTrack({kind:"captions",id:s,default:f,label:l,language:u},!1).track)),jr(m,g,y[e]),h=(v={captionArray:v,inbandTextTracks:y,timestampOffset:n}).inbandTextTracks,y=v.captionArray,p=v.timestampOffset,y&&(d=pa.WebKitDataCue||pa.VTTCue,y.forEach(function(e){var t=e.stream;h[t].addCue(new d(e.startTime+p,e.endTime+p,e.text))}))}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})):this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t)):this.logger_("SegmentLoader received no captions from a caption event"))},n.handleId3_=function(e,t,n){var i,r,a,o;this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||(this.pendingSegment_.hasAppendedData_?(i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r=this.inbandTextTracks_,a=n,o=this.vhs_.tech_,r.metadataTrack_||(r.metadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,r.metadataTrack_.inBandMetadataTrackDispatchType=a),Fr({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})):this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n)))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(e){return e()})},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(e){return e()})},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Vr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return(e=void 0===e?this.pendingSegment_:e)&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,t=t.isMuxed;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!t&&!e.audioTimingInfo||Vr({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n,i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4?(this.trigger("fmp4"),i.timingInfo.start=i[Hr(t.type)].start):(n=this.getCurrentMediaInfo_(),(n="main"===this.loaderType_&&n&&n.hasVideo)&&(r=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:n,firstVideoFrameTimeForData:r,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})),this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:"main"===this.loaderType_});var r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){if(e=nr(i),this.activeInitSegmentId_===e)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=e}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,o=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();1<o.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Si(o).join(", ")),1<s.length&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Si(s).join(", "));var l=o.length?o.start(0):0,u=o.length?o.end(o.length-1):0,c=s.length?s.start(0):0,e=s.length?s.end(s.length-1):0;if(u-l<=1&&e-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+Si(o).join(", ")+", video buffer: "+Si(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a})),a=this.currentTime_()-1,this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+a),this.remove(0,a,function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=pa.setTimeout(function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()},1e3)},!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,i=e.type,e=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(i+" append of "+e.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:e}))},n.appendToSourceBuffer_=function(e){var t,n,i=e.segmentInfo,r=e.type,a=e.initSegment,o=e.data,s=e.bytes;s||(e=[o],o=o.byteLength,a&&(e.unshift(a),o+=a.byteLength),n=0,(e={bytes:o,segments:e}).bytes&&(t=new Uint8Array(e.bytes),e.segments.forEach(function(e){t.set(e,n),n+=e.byteLength})),s=t),this.sourceUpdater_.appendBuffer({segmentInfo:i,type:r,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:i,type:r,bytes:s}))},n.handleSegmentTimingInfo_=function(e,t,n){this.pendingSegment_&&t===this.pendingSegment_.requestId&&((t=this.pendingSegment_.segment)[e+="TimingInfo"]||(t[e]={}),t[e].transmuxerPrependedSeconds=n.prependedContentDuration||0,t[e].transmuxedPresentationStart=n.start.presentation,t[e].transmuxedDecodeStart=n.start.decode,t[e].transmuxedPresentationEnd=n.end.presentation,t[e].transmuxedDecodeEnd=n.end.decode,t[e].baseMediaDecodeTime=n.baseMediaDecodeTime)},n.appendData_=function(e,t){var n=t.type,i=t.data;i&&i.byteLength&&("audio"===n&&this.audioDisabled_||(t=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null}),this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:t,data:i})))},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push(function(){var n=Aa({},e,{forceTimestampOffset:!0});Aa(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)})},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&0<e.timeline,a=i||r&&a;this.logger_("Requesting "+Br(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=xr({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,n=n.stream;t.logger_(Br(e)+" logged from transmuxer stream "+n+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(e){var t,n,i,r,r=(t=this.seekable_(),n=this.currentTime_(),i=this.playlist_.targetDuration||10,r=n-mu.BACK_BUFFER_LENGTH,t.length&&(r=Math.max(r,t.start(0))),Math.min(n-i,r));0<r&&this.remove(0,r)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,i={resolvedUri:(n||t).resolvedUri,byterange:(n||t).byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},n=e.playlist.segments[e.mediaIndex-1];return n&&n.timeline===t.timeline&&(n.videoTimingInfo?i.baseStartTime=n.videoTimingInfo.transmuxedDecodeEnd:n.audioTimingInfo&&(i.baseStartTime=n.audioTimingInfo.transmuxedDecodeEnd)),t.key&&(e=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]),i.key=this.segmentKey(t.key),i.key.iv=e),t.map&&(i.map=this.initSegmentForMap(t.map)),i},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<1/60?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record "+1/60):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Su?void 0:(this.pause(),e.code===Tu?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));e=this.pendingSegment_,this.saveBandwidthRelatedStats_(e.duration,t.stats),e.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice()
;for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(e)}},n.setTimeMapping_=function(e){null!==(e=this.syncController_.mappingForTimeline(e))&&(this.timeMapping_=e)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,e=e.audioTimingInfo;return void 0!==t?t:o?(n=n.segments[i-1],0!==i&&n&&void 0!==n.start&&n.end===r+a?s.start:r):e.start},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,t=t.isMuxed,i="main"===this.loaderType_&&i,t=!this.audioDisabled_&&n&&!t;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);i&&e.waitingOnAppends++,t&&e.waitingOnAppends++,i&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),t&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||0===--e.waitingOnAppends&&this.handleAppendsDone_()},n.checkForIllegalMediaSwitch=function(e){var t,n,e=(t=this.loaderType_,n=this.getCurrentMediaInfo_(),e=e,"main"===t&&n&&e?e.hasAudio||e.hasVideo?n.hasVideo&&!e.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!n.hasVideo&&e.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);return!!e&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){var t;null===e.timestampOffset||"number"!=typeof e.timingInfo.start||e.changedTimestampOffset||"main"!==this.loaderType_||(t=!1,e.timestampOffset-=e.timingInfo.start,e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset"))},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),t="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=$r(e,this.sourceType_);t&&("warn"===t.severity?mt.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)?(this.logger_("Appended "+Br(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),(t=e.segment).end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_())):this.logger_("Throwing away un-appended sync request "+Br(e))},n.recordThroughput_=function(e){var t,n;e.duration<1/60?this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record "+1/60):(t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,n=Math.floor(e.byteLength/n*8*1e3),this.throughput.rate+=(n-t)/++this.throughput.count)},n.addSegmentMetadataCue_=function(e){var t,n,i,r;this.segmentMetadataTrack_&&(n=(t=e.segment).start,r=t.end,Ur(n)&&Ur(r)&&(jr(n,r,this.segmentMetadataTrack_),i=pa.WebKitDataCue||pa.VTTCue,e={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},(r=new i(n,r,JSON.stringify(e))).value=e,this.segmentMetadataTrack_.addCue(r)))},t}(mt.EventTarget),ku=["video","audio"],xu=function(e,t,n){return function(i,r){var a=r[i+"Buffer"];if(Kr(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(a){r.logger_("Error with code "+a.code+" "+(22===a.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(a)}}}},Iu=function(e,t){return function(n,i){var r=i[n+"Buffer"];if(Kr(i.mediaSource,r)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{r.remove(e,t)}catch(r){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},Du=function(e){return function(t,n){var i=n[t+"Buffer"];Kr(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},Au=function(e){return function(t,n){e()}},Ou=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(t){mt.log.warn("Failed to call media source endOfStream",t)}}}},Pu=function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(t){mt.log.warn("Failed to set media source duration",t)}}},Lu=function(){return function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(Kr(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){mt.log.warn("Failed to abort on "+e+"Buffer",t)}}}}},Mu=function(e,t){return function(n){var i=zr(e),r=Ct(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource"),r=n.mediaSource.addSourceBuffer(r),r.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),r.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=r}},Nu=function(e){return function(t){var n=t[e+"Buffer"];if(Xr(e,t),Kr(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){mt.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},Ru=function(e){return function(t,n){var i=n[t+"Buffer"],r=Ct(e);Kr(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(r),n.codecs[t]=e)}},Fu=function(e){function t(t){var n=e.call(this)||this;return n.mediaSource=t,n.sourceopenListener_=function(){return Gr("mediaSource",_o(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=vi("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=Jr("video",_o(n)),n.onAudioUpdateEnd_=Jr("audio",_o(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}bo(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){Qr({type:"mediaSource",sourceUpdater:this,action:Mu(e,t),name:"addSourceBuffer"})},n.abort=function(e){Qr({type:e,sourceUpdater:this,action:Lu(),name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Qr({type:"mediaSource",sourceUpdater:this,action:Nu(e),name:"removeSourceBuffer"}):mt.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!mt.browser.IE_VERSION&&!mt.browser.IS_FIREFOX&&pa.MediaSource&&pa.MediaSource.prototype&&"function"==typeof pa.MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return pa.SourceBuffer&&pa.SourceBuffer.prototype&&"function"==typeof pa.SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?Qr({type:e,sourceUpdater:this,action:Ru(t),name:"changeType"}):mt.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)})},n.appendBuffer=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");Qr({type:r,sourceUpdater:this,action:xu(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r&&(this.videoAppendQueued_=!0,this.delayedAudioAppendQueue_.length&&(r=this.delayedAudioAppendQueue_.slice(),this.logger_("queuing delayed audio "+r.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,r.forEach(function(e){n.appendBuffer.apply(n,e)})))},n.audioBuffered=function(){return Kr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered||mt.createTimeRange()},n.videoBuffered=function(){return Kr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered||mt.createTimeRange()},n.buffered=function(){var e=Kr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Kr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],o=[];if(!(e&&e.length&&t&&t.length))return mt.createTimeRange();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),s=0;s<a.length;s++)"start"===a[s].type?2==++r&&(n=a[s].time):"end"===a[s].type&&1==--r&&(i=a[s].time),null!==n&&null!==i&&(o.push([n,i]),i=n=null);return mt.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){void 0===t&&(t=Wr),Qr({type:"mediaSource",sourceUpdater:this,action:Pu(e),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===t&&(t=Wr),Qr({type:"mediaSource",sourceUpdater:this,action:Ou(e="string"!=typeof(e=void 0===e?null:e)?void 0:e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=Wr),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Qr({type:"audio",sourceUpdater:this,action:Iu(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=Wr),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Qr({type:"video",sourceUpdater:this,action:Iu(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!Yr("audio",this)&&!Yr("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Qr({type:"audio",sourceUpdater:this,action:Du(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Qr({type:"video",sourceUpdater:this,action:Du(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&Qr({type:"audio",sourceUpdater:this,action:Au(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&Qr({type:"video",sourceUpdater:this,action:Au(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),ku.forEach(function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"](function(){return Xr(t,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(mt.EventTarget),ju=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),Uu=function(e){function t(t,n){return(n=e.call(this,t,n=void 0===n?{}:n)||this).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=t.featuresNativeTextTracks,n.shouldSaveSegmentTimingInfo_=!1,n}bo(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return mt.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,e=e[e.length-1].startTime;return mt.createTimeRanges([[t,e]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=nr(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(t=ju.byteLength+e.bytes.byteLength,(t=new Uint8Array(t)).set(e.bytes),t.set(ju,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:t}),i||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){jr(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Tu&&this.handleTimeout_(),e.code===Su?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof pa.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",s),i.stopForError({message:"Error loading vtt.js"})},s=function(){i.subtitlesTrack_.tech_.off("vttjserror",o),i.segmentRequestFinished_(e,t,n)};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",o)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new pa.VTTCue(e.startTime,e.endTime,e.text):e)}),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&1<++r&&i.push(t[a]);i.length&&i.forEach(function(t){return e.removeCue(t)})}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t=!1;"function"==typeof pa.TextDecoder?n=new pa.TextDecoder("utf8"):(n=pa.WebVTT.StringDecoder(),t=!0);var n=new pa.WebVTT.Parser(pa,pa.vttjs,n);e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},n.oncue=e.cues.push.bind(e.cues),n.ontimestampmap=function(t){e.timestampmap=t},n.onparsingerror=function(e){mt.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map&&(i=e.segment.map.bytes,t&&(i=Zr(i)),n.parse(i));var i=e.bytes;t&&(i=Zr(i)),n.parse(i),n.flush()},n.updateTimeMapping_=function(e,t,n){var i,r,a=e.segment;t&&(e.cues.length?(r=e.timestampmap,i=r.MPEGTS/9e4-r.LOCAL+t.mapping,e.cues.forEach(function(e){e.startTime+=i,e.endTime+=i}),n.syncInfo||(r=e.cues[0].startTime,t=e.cues[e.cues.length-1].startTime,n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(r,t-a.duration)})):a.empty=!0)},t}(Cu),Bu=[{name:"VOD",run:function(e,t,n,i,r){return n===1/0?null:{time:0,segmentIndex:0,partIndex:null}}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,s=Ei(t);r=r||0;for(var l=0;l<s.length;l++){var u=s[t.endList||0===r?l:s.length-(l+1)],c=u.segment,d=e.timelineToDatetimeMappings[c.timeline];if(d&&c.dateTimeObject){var h=c.dateTimeObject.getTime()/1e3+d;if(c.parts&&"number"==typeof u.partIndex)for(var p=0;p<u.partIndex;p++)h+=c.parts[p].duration;if(d=Math.abs(r-h),null!==o&&(0===d||o<d))break;o=d,a={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,o=null;r=r||0;for(var s=Ei(t),l=0;l<s.length;l++){var u=s[t.endList||0===r?l:s.length-(l+1)],c=u.segment,d=u.part&&u.part.start||c&&c.start;if(c.timeline===i&&void 0!==d){if(c=Math.abs(r-d),null!==o&&o<c)break;(!a||null===o||c<=o)&&(o=c,a={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var l=t.discontinuityStarts[s],u=t.discontinuitySequence+s+1,c=e.discontinuities[u];if(c){if(u=Math.abs(r-c.time),null!==o&&o<u)break;(!a||null===o||u<=o)&&(o=u,a={time:c.time,segmentIndex:l,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Hu=function(e){function t(t){var n=e.call(this)||this;return n.timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=vi("SyncController"),n}bo(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,i){return n=this.runStrategies_(e,t,n,i),n.length?this.selectSyncPoint_(n,{key:"time",value:i}):null},n.getExpiredTime=function(e,t){return e&&e.segments?(t=this.runStrategies_(e,t,e.discontinuitySequence,0),t.length?(t=this.selectSyncPoint_(t,{key:"segmentIndex",value:0}),0<t.segmentIndex&&(t.time*=-1),Math.abs(t.time+Ai({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.segmentIndex,endIndex:0}))):null):null},n.runStrategies_=function(e,t,n,i){for(var r=[],a=0;a<Bu.length;a++){var o=Bu[a],s=o.run(this,e,t,n,i);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){var t;this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject&&(e=(t=e.segments[0]).dateTimeObject.getTime()/1e3,this.timelineToDatetimeMappings[t.timeline]=-e)},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),e=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:e.start})),t=e.dateTimeObject,e.discontinuity&&n&&t&&(this.timelineToDatetimeMappings[e.timeline]=-t.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var i,r,a=e.segment,o=e.part,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),i=e.startOfSegment,r=t.end+s.mapping;else{if(!s)return!1;i=t.start+s.mapping,r=t.end+s.mapping}return o&&(o.start=i,o.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r,a=t.discontinuityStarts[i],o=t.discontinuitySequence+i+1,s=a-e.mediaIndex,l=Math.abs(s);(!this.discontinuities[o]||this.discontinuities[o].accuracy>l)&&(r=void 0,r=s<0?n.start-Ai({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:a}):n.end+Ai({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[o]={time:r,accuracy:l})}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(mt.EventTarget),Vu=function(e){function t(){var t=e.call(this)||this;return t.pendingTimelineChanges_={},t.lastTimelineChanges_={},t}bo(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,e=e.to;return"number"==typeof n&&"number"==typeof e&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:e},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,e=e.to;return"number"==typeof n&&"number"==typeof e&&(this.lastTimelineChanges_[t]={type:t,from:n,to:e},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(mt.EventTarget),qu=qo(Zs(Za(function(){function e(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var t=e(function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0}),n=e(function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0}),i=e(function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0}),r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){return!!this.listeners[e]&&(t=this.listeners[e].indexOf(t),this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(t,1),-1<t)},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",function(t){e.push(t)})},e}(),a=null,o=function(){function e(e){var t,n,i;a=a||function(){for(var e,t,n,i,r,a,o,s=[[[],[],[],[],[]],[[],[],[],[],[]]],l=s[0],u=s[1],c=l[4],d=u[4],h=[],p=[],f=0;f<256;f++)p[(h[f]=f<<1^283*(f>>7))^f]=f;for(e=t=0;!c[e];e^=n||1,t=p[t]||1)for(o=16843009*h[i=h[n=h[d[c[e]=r=(r=t^t<<1^t<<2^t<<3^t<<4)>>8^255&r^99]=e]]]^65537*i^257*n^16843008*e,a=257*h[r]^16843008*r,f=0;f<4;f++)l[f][e]=a=a<<24^a>>>8,u[f][r]=o=o<<24^o>>>8;for(f=0;f<5;f++)l[f]=l[f].slice(0),u[f]=u[f].slice(0);return s}(),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var r=this._tables[0][4],o=this._tables[1],s=e.length,l=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var u=e.slice(0),c=[];for(this._key=[u,c],t=s;t<4*s+28;t++)i=u[t-1],(t%s==0||8===s&&t%s==4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%s==0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),u[t]=u[t-s]^i;for(n=0;t;n++,t--)i=u[3&n?t:t-4],c[n]=t<=4||n<4?i:o[0][r[i>>>24]]^o[1][r[i>>16&255]]^o[2][r[i>>8&255]]^o[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,a){for(var o,s,l,u=this._key[1],c=e^u[0],d=i^u[1],h=n^u[2],p=t^u[3],f=u.length/4-2,m=4,t=this._tables[1],g=t[0],v=t[1],y=t[2],_=t[3],b=t[4],T=0;T<f;T++)o=g[c>>>24]^v[d>>16&255]^y[h>>8&255]^_[255&p]^u[m],s=g[d>>>24]^v[h>>16&255]^y[p>>8&255]^_[255&c]^u[m+1],l=g[h>>>24]^v[p>>16&255]^y[c>>8&255]^_[255&d]^u[m+2],p=g[p>>>24]^v[c>>16&255]^y[d>>8&255]^_[255&h]^u[m+3],m+=4,c=o,d=s,h=l;for(T=0;T<4;T++)r[(3&-T)+a]=b[c>>>24]<<24^b[d>>16&255]<<16^b[h>>8&255]<<8^b[255&p]^u[m++],o=c,c=d,d=h,h=p,p=o},e}(),s=function(e){function t(){var t=e.call(this,r)||this;return t.jobs=[],t.delay=1,t.timeout_=null,t}i(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(r),l=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},u=function(){function e(t,n,i,r){var a=e.STEP,o=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+a),n,i,u)),c=a;c<o.length;c+=a)i=new Uint32Array([l(o[c-4]),l(o[c-3]),l(o[c-2]),l(o[c-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(c,c+a),n,i,u));this.asyncStream_.push(function(){var e;r(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))})}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=function(e,t,n){for(var i,r,a,s,u=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),c=new o(Array.prototype.slice.call(t)),e=new Uint8Array(e.byteLength),d=new Int32Array(e.buffer),h=n[0],p=n[1],f=n[2],m=n[3],g=0;g<u.length;g+=4)i=l(u[g]),r=l(u[g+1]),a=l(u[g+2]),s=l(u[g+3]),c.decrypt(i,r,a,s,d,g),d[g]=l(d[g]^h),d[g+1]=l(d[g+1]^p),d[g+2]=l(d[g+2]^f),d[g+3]=l(d[g+3]^m),h=i,p=r,f=a,m=s;return e}(e,t,n);i.set(r,e.byteOffset)}},t(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}();self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),e=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new u(n,i,e,function(e,n){var i,r;self.postMessage((i={source:t.source,decrypted:n},r={},Object.keys(i).forEach(function(e){var t=i[e];ArrayBuffer.isView(t)?r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:r[e]=t}),r),[n.buffer])})}}))),$u={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;ea(n,i);var a=i.activeTrack(),n=i.activeGroup(),n=(n.filter(function(e){return e.default})[0]||n[0]).id,o=i.tracks[n];if(a!==o){for(var s in mt.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[s].enabled=i.tracks[s]===o;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];mt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),ea(n,i),n=i.activeTrack(),n&&(n.mode="disabled"),i.onTrackChanged()}}},Wu={AUDIO:function(e,t,n){var i,r,a;t&&(i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",$u[e](e,n)))},SUBTITLES:function(e,t,n){
var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",$u[e](e,n))}},zu={AUDIO:function(e,t){var n,i,r=t.vhs,a=t.sourceType,o=t.segmentLoaders[e],s=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,d=u.tracks,h=u.logger_,p=t.masterPlaylistLoader,f=Ui(p.master);for(n in l[e]&&0!==Object.keys(l[e]).length||(l[e]={main:{default:{default:!0}}},f&&(l[e].main.default.playlists=p.master.playlists)),l[e])for(var m in c[n]||(c[n]=[]),l[e][n]){var g=l[e][n][m],v=void 0,v=f?(h("AUDIO group '"+n+"' label '"+m+"' is a master playlist"),g.isMasterPlaylist=!0,null):"vhs-json"===a&&g.playlists?new cu(g.playlists[0],r,s):g.resolvedUri?new cu(g.resolvedUri,r,s):g.playlists&&"dash"===a?new fu(g.playlists[0],r,s,p):null,g=mt.mergeOptions({id:m,playlistLoader:v},g);Wu[e](e,g.playlistLoader,t),c[n].push(g),void 0===d[m]&&(g=new mt.AudioTrack({id:m,kind:(i=void 0,i=(v=g).default?"main":"alternative",i=v.characteristics&&0<=v.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":i),enabled:!1,language:g.language,default:g.default,label:m}),d[m]=g)}o.on("error",$u[e](e,t))},SUBTITLES:function(e,t){var n,i=t.tech,r=t.vhs,a=t.sourceType,o=t.segmentLoaders[e],s=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,d=u.tracks,h=t.masterPlaylistLoader;for(n in l[e])for(var p in c[n]||(c[n]=[]),l[e][n])if(!l[e][n][p].forced){var f=l[e][n][p],m=void 0;if("hls"===a)m=new cu(f.resolvedUri,r,s);else if("dash"===a){if(!f.playlists.filter(function(e){return e.excludeUntil!==1/0}).length)return;m=new fu(f.playlists[0],r,s,h)}else"vhs-json"===a&&(m=new cu(f.playlists?f.playlists[0]:f.resolvedUri,r,s));f=mt.mergeOptions({id:p,playlistLoader:m},f),Wu[e](e,f.playlistLoader,t),c[n].push(f),void 0===d[p]&&(f=i.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track,d[p]=f)}o.on("error",$u[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n,i=t.tech,r=t.master.mediaGroups,t=t.mediaTypes[e],a=t.groups,o=t.tracks;for(n in r[e])for(var s in a[n]||(a[n]=[]),r[e][n]){var l,u,c=r[e][n][s];/^(?:CC|SERVICE)/.test(c.instreamId)&&(void 0===(u=(l=i.options_.vhs&&i.options_.vhs.captionServices||{})[(u={label:s,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect}).instreamId]?mt.mergeOptions(u,l[u.instreamId]):u).default&&delete u.default,a[n].push(mt.mergeOptions({id:s},c)),void 0===o[s]&&(u=i.addRemoteTextTrack({id:u.instreamId,kind:"captions",default:u.default,language:u.language,label:u.label},!1).track,o[s]=u))}}},Yu={AUDIO:function(e,t){return function(){var n,i=t.mediaTypes[e].tracks;for(n in i)if(i[n].enabled)return i[n];return null}},SUBTITLES:function(e,t){return function(){var n,i=t.mediaTypes[e].tracks;for(n in i)if("showing"===i[n].mode||"hidden"===i[n].mode)return i[n];return null}}},Gu=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Xu=function(e){function t(t){var n=e.call(this)||this,i=t.src,r=t.handleManifestRedirects,a=t.withCredentials,o=t.tech,s=t.bandwidth,l=t.externVhs,u=t.useCueTags,c=t.blacklistDuration,d=t.enableLowInitialPlaylist,h=t.sourceType,p=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR,m=t.experimentalLeastPixelDiffSelector;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var g,v=t.maxPlaylistRetries;return null!==v&&void 0!==v||(v=1/0),nu=l,n.experimentalBufferBasedABR=Boolean(f),n.experimentalLeastPixelDiffSelector=Boolean(m),n.withCredentials=a,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=h,n.useCueTags_=u,n.blacklistDuration=c,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=d,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(g={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){g[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Wr,activeTrack:Wr,getActiveGroup:Wr,onGroupChanged:Wr,onTrackChanged:Wr,lastTrack_:null,logger_:vi("MediaGroups["+e+"]")}}),g),n.mediaSource=new pa.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(_o(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(_o(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(_o(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=mt.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new Hu(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new qu,n.sourceUpdater_=new Fu(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new Vu,p={vhs:n.vhs_,parse708captions:t.parse708captions,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:p,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings},n.masterPlaylistLoader_=new("dash"===n.sourceType_?fu:cu)(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Cu(mt.mergeOptions(p,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new Cu(mt.mergeOptions(p,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new Uu(mt.mergeOptions(p,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",function(){return n.startABRTimer_()}),n.tech_.on("pause",function(){return n.stopABRTimer_()}),n.tech_.on("play",function(){return n.startABRTimer_()})),Gu.forEach(function(e){n[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(_o(n),e)}),n.logger_=vi("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1,t="none"===n.tech_.preload()?"play":"loadstart",n.tech_.one(t,function(){var e=Date.now();n.tech_.one("loadeddata",function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends})}),n}bo(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),i=e.id||e.uri;r&&r!==i&&(this.logger_("switch media "+r+" -> "+i+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=pa.setInterval(function(){return e.checkABR_()},250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(pa.clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a,o=i.main||r.length&&i[r[0]];for(a in o)if(o[a].default){n={label:a};break}}if(!n)return t;var s,l=[];for(s in i)if(i[s][n.label]){var u=i[s][n.label];if(u.playlists&&u.playlists.length)l.push.apply(l,u.playlists);else if(u.uri)l.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===s&&l.push(d)}}return l.length?l:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ri(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),ia({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t,n=e.masterPlaylistLoader_.media();if(!n){if(e.excludeUnsupportedVariants_(),!(t=(t=e.enableLowInitialPlaylist?e.selectInitialPlaylist():t)||e.selectPlaylist())||!e.shouldSwitchToMedia_(t))return;if(e.initialMedia_=t,e.switchMedia_(e.initialMedia_,"initial"),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ri(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n,i=e.mediaGroups||{},r=!0,e=Object.keys(i.AUDIO);for(n in i.AUDIO)for(var a in i.AUDIO[n])i.AUDIO[n][a].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(i.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),nu.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),e.length&&1<Object.keys(i.AUDIO[e[0]]).length&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media(),n=this.tech_.buffered();return function(e){var t=e.currentPlaylist,n=e.nextPlaylist,i=e.forwardBuffer,r=e.bufferLowWaterLine,a=e.bufferHighWaterLine,o=e.duration,s=e.experimentalBufferBasedABR,l=e.log;if(!n)return mt.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(t&&t.id||"null")+" -> "+n.id;return t?n.id!==t.id&&(t.endList?(e=s?mu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:mu.MAX_BUFFER_LOW_WATER_LINE,o<e?(l(u+" as duration < max low water line ("+o+" < "+e+")"),!0):(e=n.attributes.BANDWIDTH,n=t.attributes.BANDWIDTH,e<n&&(!s||i<a)?(t=u+" as next bandwidth < current bandwidth ("+e+" < "+n+")",s&&(t+=" and forwardBuffer < bufferHighWaterLine ("+i+" < "+a+")"),l(t),!0):(!s||n<e)&&r<=i?(r=u+" as forwardBuffer >= bufferLowWaterLine ("+i+" >= "+r+")",s&&(r+=" and next bandwidth > current bandwidth ("+e+" > "+n+")"),l(r),!0):(l("not "+u+" as no switching criteria met"),!1))):(l(u+" as current playlist is live"),!0)):(l(u+" as current playlist is not set"),!0)}({currentPlaylist:t,nextPlaylist:e,forwardBuffer:n.length?n.end(n.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){function e(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)}var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();t.shouldSwitchToMedia_(e)&&t.switchMedia_(e,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(e){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}),this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;(e=void 0===e?this.selectPlaylist():e)!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){mt.browser.IE_VERSION||mt.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())})):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(mt.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){var e;this.tryToCreateSourceBuffers_(),!this.tech_.autoplay()||void 0!==(e=this.tech_.play())&&"function"==typeof e.then&&e.then(null,function(e){}),this.trigger("sourceopen")},n.handleSourceEnded_=function(){var e,t;!this.inbandTextTracks_.metadataTrack_||(e=this.inbandTextTracks_.metadataTrack_.cues)&&e.length&&(t=this.duration(),e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t)},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e,t=this.mainSegmentLoader_.ended_;(t=this.mediaTypes_.AUDIO.activePlaylistLoader?((e=this.mainSegmentLoader_.getCurrentMediaInfo_())&&!e.hasVideo||t)&&this.audioSegmentLoader_.ended_:t)&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=nu.Playlist.playlistEnd(e,t),e=this.tech_.currentTime(),t=this.tech_.buffered();return t.length?(t=t.end(t.length-1))-e<=.1&&n-t<=.1:n-e<=.1},n.blacklistCurrentPlaylist=function(e,t){var n=(e=void 0===e?{}:e).playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(Mi),o=1===a.length&&a[0]===n;return 1===r.length&&t!==1/0?(mt.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o)):(o&&(i=!1,r.forEach(function(e){var t;e===n||void 0!==(t=e.excludeUntil)&&t!==1/0&&(i=!0,delete e.excludeUntil)}),i&&(mt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))),a=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=a,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),(r=this.selectPlaylist())?(t=e.internal?this.logger_:mt.log.warn,a=e.message?" "+e.message:"",t((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+a+" Switching to playlist "+r.id+"."),r.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),r.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]),a=r.targetDuration/2*1e3||5e3,a="number"==typeof r.lastRequest&&Date.now()-r.lastRequest<=a,this.switchMedia_(r,"exclude",o||a)):(this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error")))},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,i=[],r="all"===e;!r&&"main"!==e||i.push(this.masterPlaylistLoader_);var a=[];!r&&"audio"!==e||a.push("AUDIO"),!r&&"subtitle"!==e||(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(function(e){(e=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader)&&i.push(e)}),["main","audio","subtitle"].forEach(function(t){var r=n[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||i.push(r)}),i.forEach(function(e){return t.forEach(function(t){"function"==typeof e[t]&&e[t]()})})},n.setCurrentTime=function(e){var t=_i(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:nu.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i,r,a=this.masterPlaylistLoader_.master,o=nu.Playlist.seekable(t,n,nu.Playlist.liveEdgeDelay(a,t));if(0!==o.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=nu.Playlist.seekable(t,n,nu.Playlist.liveEdgeDelay(a,t))).length)return}this.seekable_&&this.seekable_.length&&(i=this.seekable_.end(0),r=this.seekable_.start(0)),!e||e.start(0)>o.end(0)||o.start(0)>e.end(0)?this.seekable_=o:this.seekable_=mt.createTimeRanges([[(e.start(0)>o.start(0)?e:o).start(0),(e.end(0)<o.end(0)?e:o).end(0)]]),this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===i&&this.seekable_.start(0)===r||(this.logger_("seekable updated ["+Ti(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();return t.length?void((isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))):void 0}e=this.tech_.buffered(),t=nu.Playlist.duration(this.masterPlaylistLoader_.media()),0<e.length&&(t=Math.max(t,e.end(e.length-1))),this.mediaSource.duration!==t&&this.sourceUpdater_.setDuration(t)},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(t){var n,i=e.mediaTypes_[t].groups;for(n in i)i[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),e=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return t&&e},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=Or(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(i.video+=","+(n.audio||t.main.audioCodec||ll)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||ll,t.audio.isFmp4=(t.main.hasAudio&&!t.main.isMuxed?t.main:t.audio).isFmp4),i.audio||i.video){var a,o,s={};if(["video","audio"].forEach(function(e){var n,r;i.hasOwnProperty(e)&&(n=t[e].isFmp4,r=i[e],!(n?kt:xt)(r))&&(r=t[e].isFmp4?"browser":"muxer",s[r]=s[r]||[],s[r].push(i[e]),"audio"===e&&(a=r))}),r&&a&&this.media().attributes.AUDIO&&(o=this.media().attributes.AUDIO,this.master().playlists.forEach(function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)}),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+i.audio+'"')),!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach(function(t){var n=(wt(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(wt(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&l.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')}),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}r=Object.keys(s).reduce(function(e,t){return e&&(e+=", "),e+=t+' does not support codec(s): "'+s[t].join(",")+'"'},"")+".",this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:r,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){var e;"open"!==this.mediaSource.readyState||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_()||(e=this.getCodecsOrExclude_())&&(this.sourceUpdater_.createSourceBuffers(e),e=[e.video,e.audio].filter(Boolean).join(","),this.excludeIncompatibleVariants_(e))},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach(function(i){var r,a=t[i];-1===n.indexOf(a.id)&&(n.push(a.id),r=[],!(i=Or(e.master,a)).audio||xt(i.audio)||kt(i.audio)||r.push("audio codec "+i.audio),!i.video||xt(i.video)||kt(i.video)||r.push("video codec "+i.video),i.text&&"stpp.ttml.im1t"===i.text&&r.push("text codec "+i.text),r.length&&(a.excludeUntil=1/0,e.logger_("excluding "+a.id+" for unsupported: "+r.join(", "))))})},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],i=this.master().playlists,e=Dr(wt(e)),r=Ar(e),a=e.video&&wt(e.video)[0]||null,o=e.audio&&wt(e.audio)[0]||null;Object.keys(i).forEach(function(e){var s,l,u=i[e];-1===n.indexOf(u.id)&&u.excludeUntil!==1/0&&(n.push(u.id),s=[],l=Or(t.masterPlaylistLoader_.master,u),e=Ar(l),(l.audio||l.video)&&(e!==r&&s.push('codec count "'+e+'" !== "'+r+'"'),t.sourceUpdater_.canChangeType()||(e=l.video&&wt(l.video)[0]||null,l=l.audio&&wt(l.audio)[0]||null,e&&a&&e.type.toLowerCase()!==a.type.toLowerCase()&&s.push('video codec "'+e.type+'" !== "'+a.type+'"'),l&&o&&l.type.toLowerCase()!==o.type.toLowerCase()&&s.push('audio codec "'+l.type+'" !== "'+o.type+'"')),s.length&&(u.excludeUntil=1/0,t.logger_("blacklisting "+u.id+": "+s.join(" && ")))))})},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var i=n,r=0;r<e.segments.length;r++){var a,o,s,l=e.segments[r];if(s=s||function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null}(t,i+l.duration/2)){if("cueIn"in l){s.endTime=i,s.adEndTime=i,i+=l.duration,s=null;continue}if(i<s.endTime){i+=l.duration;continue}s.endTime+=l.duration}else"cueOut"in l&&((s=new pa.VTTCue(i,i+l.duration,l.cueOut)).adStartTime=i,s.adEndTime=i+parseFloat(l.cueOut),t.addCue(s)),"cueOutCont"in l&&(a=(o=l.cueOutCont.split("/").map(parseFloat))[0],o=o[1],(s=new pa.VTTCue(i,i+l.duration,"")).adStartTime=i-a,s.adEndTime=s.adStartTime+o,t.addCue(s));i+=l.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=mu.GOAL_BUFFER_LENGTH,n=mu.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,mu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=mu.BUFFER_LOW_WATER_LINE,n=mu.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,mu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,mu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return mu.BUFFER_HIGH_WATER_LINE},t}(mt.EventTarget),Ku=["seeking","seeked","pause","playing","error"],Qu=function(){function e(e){function t(){return o.monitorCurrentTime_()}function n(){return o.monitorCurrentTime_()}function i(){return o.techWaiting_()}function r(){return o.cancelTimer_()}function a(){return o.fixesBadSeeks_()}var o=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=vi("PlaybackWatcher"),this.logger_("initialize");var s=this.masterPlaylistController_,l=["main","subtitle","audio"],u={};l.forEach(function(e){u[e]={reset:function(){return o.resetSegmentDownloads_(e)},updateend:function(){return o.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",u[e].reset),o.tech_.on(["seeked","seeking"],u[e].reset)}),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(Ku,r),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=function(){o.logger_("dispose"),o.tech_.off("seekablechanged",a),o.tech_.off("waiting",i),o.tech_.off(Ku,r),o.tech_.off("canplay",n),o.tech_.off("play",t),l.forEach(function(e){s[e+"SegmentLoader_"].off("appendsdone",u[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",u[e].reset),o.tech_.off(["seeked","seeking"],u[e].reset)}),o.checkCurrentTimeTimeout_&&pa.clearTimeout(o.checkCurrentTimeTimeout_),o.cancelTimer_()}}var t=e.prototype
;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&pa.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=pa.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];0<this[e+"StalledDownloads_"]&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],i);this[e+"Buffered_"]=i,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:Si(i)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),void 0!==(e=this.beforeSeekableWindow_(t,n)?(r=t.start(0))+(r===t.end(0)?0:.1):e))return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Ti(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;var i,r,a=this.tech_.buffered();return i={buffered:a,targetDuration:this.media().targetDuration,currentTime:n},r=i.buffered,t=i.targetDuration,i=i.currentTime,!(!r.length||r.end(0)-r.start(0)<2*t||i>r.start(0))&&r.start(0)-i<t&&(e=a.start(0)+.1,this.logger_("Buffered region starts ("+a.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){var e,t;this.techWaiting_()||(e=this.tech_.currentTime(),t=this.tech_.buffered(),(t=_i(t,e)).length&&e+3<=t.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+t.start(0)+" -> "+t.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}return e=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,n=this.tech_.buffered(),this.videoUnderflow_({audioBuffered:e.audioBuffered(),videoBuffered:e.videoBuffered(),currentTime:t})?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):(e=bi(n,t),0<e.length&&(n=e.start(0)-t,this.logger_("Stopped at "+t+", setting timer for "+n+", seeking to "+e.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*n,t),!0))},t.afterSeekableWindow_=function(e,t,n,i){if(void 0===i&&(i=!1),!e.length)return!1;var r=e.end(e.length-1)+.1;return(r=!n.endList&&i?e.end(e.length-1)+3*n.targetDuration:r)<t},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t,n,i=e.videoBuffered,r=e.audioBuffered,a=e.currentTime;if(i)return i.length&&r.length?(n=_i(i,a-3),e=_i(i,a),(r=_i(r,a)).length&&!e.length&&n.length&&(t={start:n.end(0),end:r.end(0)})):bi(i,a).length||(t=this.gapFromVideoUnderflow_(i,a)),!!t&&(this.logger_("Encountered a gap in video from "+t.start+" to "+t.end+". Seeking to current time "+a),!0)},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),t=bi(t,n);this.cancelTimer_(),0!==t.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",t.start(0)),this.tech_.setCurrentTime(t.start(0)+au),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return mt.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return mt.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null},e}(),Ju={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Za=function(e){aa(this,e)},Zu={PlaylistLoader:cu,Playlist:su,utils:Vo,STANDARD_PLAYLIST_SELECTOR:Ro,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(su.isEnabled);return Mr(t,Nr),t.filter(function(t){return!!Or(e.playlists.master,t).video})[0]||null},lastBandwidthSelector:Ro,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||1<e)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&pa.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),0<this.systemBandwidth&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Rr(this.playlists.master,t,parseInt(Lr(this.tech_.el(),"width"),10)*i,parseInt(Lr(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Nr,comparePlaylistResolution:function(e,t){var n,i;return(n=(n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width?e.attributes.RESOLUTION.width:n)||pa.Number.MAX_VALUE)===(i=(i=t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:i)||pa.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:Qi()};Object.keys(mu).forEach(function(e){Object.defineProperty(Zu,e,{get:function(){return mt.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),mu[e]},set:function(t){mt.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?mt.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):mu[e]=t}})});var ec="videojs-vhs";Zu.canPlaySource=function(){return mt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Zu.supportsNativeHls=function(){if(!_a||!_a.createElement)return!1;var e=_a.createElement("video");return!!mt.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}(),Zu.supportsNativeDash=!!(_a&&_a.createElement&&mt.getTech("Html5").isSupported())&&/maybe|probably/i.test(_a.createElement("video").canPlayType("application/dash+xml")),Zu.supportsTypeNatively=function(e){return"hls"===e?Zu.supportsNativeHls:"dash"===e&&Zu.supportsNativeDash},Zu.isSupported=function(){return mt.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var tc=function(e){function t(t,n,i){var r=e.call(this,n,mt.mergeOptions(i.hls,i.vhs))||this;if(i.hls&&Object.keys(i.hls).length&&mt.log.warn("Using hls options is deprecated. Use vhs instead."),"number"==typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=vi("VhsHandler"),n.options_&&n.options_.playerId&&((i=mt(n.options_.playerId)).hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return mt.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),_o(r)},configurable:!0}),i.hasOwnProperty("vhs")||Object.defineProperty(i,"vhs",{get:function(){return mt.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),_o(r)},configurable:!0}),i.hasOwnProperty("dash")||Object.defineProperty(i,"dash",{get:function(){return mt.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),_o(r)},configurable:!0}),r.player_=i),r.tech_=n,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(_a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=_a.fullscreenElement||_a.webkitFullscreenElement||_a.mozFullScreenElement||_a.msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()}),r.on(r.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),r.on(r.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),r.on(r.tech_,"play",r.play),r}bo(t,e);var n=t.prototype;return n.setOptions_=function(){var e,t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage&&((e=ua())&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=mu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===mu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;e&&(this.setOptions_(),this.options_.src=0===(e=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e,this.options_.tech=this.tech_,this.options_.externVhs=Zu,this.options_.sourceType=It(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&mt.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Xu(this.options_),t=mt.mergeOptions({liveRangeSafeTimeDelta:.1},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}),this.playbackWatcher_=new Qu(t),this.masterPlaylistController_.on("error",function(){var e=mt.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}),t=this.options_.experimentalBufferBasedABR?Zu.movingAverageBandwidthSelector(.55):Zu.STANDARD_PLAYLIST_SELECTOR,this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||t).bind(this),this.masterPlaylistController_.selectInitialPlaylist=Zu.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=0<this.throughput?1/this.throughput:0;return Math.floor(1/(e+t))},set:function(){mt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Si(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Si(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(pa.localStorage){var t=(t=ua())?mt.mergeOptions(t,e):e;try{pa.localStorage.setItem(ec,JSON.stringify(t))}catch(e){return}}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),t=Ui(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return t?t.filter(function(e){return!Li(e)}).map(function(t,n){return new ra(e,t,t.id)}):[]}}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){n.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=pa.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_)))},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=la({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",function(t){"output-restricted"===t.status&&e.masterPlaylistController_.blacklistCurrentPlaylist({playlist:e.masterPlaylistController_.media(),message:"DRM keystatus changed to "+t.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})}),11!==mt.browser.IE_VERSION&&n?(this.logger_("waiting for EME key session creation"),sa({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})):this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=mt.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach(function(e){t.addQualityLevel(e)}),oa(t,n.playlists)}),this.playlists.on("mediachange",function(){oa(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":"2.10.2","mux.js":"5.13.0","mpd-parser":"0.19.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return Fu.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&pa.URL.revokeObjectURL&&(pa.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return ar({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),or({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(mt.getComponent("Component")),nc={name:"videojs-http-streaming",VERSION:"2.10.2",canHandleSource:function(e,t){return t=mt.mergeOptions(mt.options,t=void 0===t?{}:t),nc.canPlayType(e.type,t)},handleSource:function(e,t,n){return n=mt.mergeOptions(mt.options,n=void 0===n?{}:n),t.vhs=new tc(e,t,n),mt.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return mt.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Qi(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){return t=mt.mergeOptions(mt.options,t=void 0===t?{}:t).vhs.overrideNative,t=void 0===t?!mt.browser.IS_ANY_SAFARI:t,e=It(e),!e||Zu.supportsTypeNatively(e)&&!t?"":"maybe"}};return kt("avc1.4d400d,mp4a.40.2")&&mt.getTech("Html5").registerSourceHandler(nc,0),mt.VhsHandler=tc,Object.defineProperty(mt,"HlsHandler",{get:function(){return mt.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),tc},configurable:!0}),mt.VhsSourceHandler=nc,Object.defineProperty(mt,"HlsSourceHandler",{get:function(){return mt.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),nc},configurable:!0}),mt.Vhs=Zu,Object.defineProperty(mt,"Hls",{get:function(){return mt.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Zu},configurable:!0}),mt.use||(mt.registerComponent("Hls",Zu),mt.registerComponent("Vhs",Zu)),mt.options.vhs=mt.options.vhs||{},mt.options.hls=mt.options.hls||{},mt.registerPlugin?mt.registerPlugin("reloadSourceOnError",Za):mt.plugin("reloadSourceOnError",Za),mt}),define("videojs_modules/VideoTrackMenuItem",["jquery","videojs"],function(e,t){"use strict";var n=t.getComponent("MenuItem");return t.extend(n,{constructor:function(e,t){var i,r=t.track;return t.label=r.label||"Unknown",i=n.call(this,e,t),i.track=r,i},handleClick:function(e){var t,i,r=this.player_.videoTracks();if(n.prototype.handleClick.call(this,e),r)for(t=0;t<r.length;t++)(i=r[t])===this.track&&(i.selected=!0)},selected:function(t){t&&(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),e(this.contentEl()).siblings().removeClass("vjs-selected"))}})}),define("videojs_modules/VideoTrackButton",["jquery","videojs","videojs_modules/VideoTrackMenuItem"],function(e,t,n){"use strict";var i=t.getComponent("MenuButton");return t.extend(i,{createItems:function(){var e=this.player_;return e.videoTracks().tracks_.map(function(t,i){return new n(e,{track:t,selected:0===i})})},buildCSSClass:function(){return"vjs-video-tracks-button "+i.prototype.buildCSSClass.call(this)},buildWrapperCSSClass:function(){return"vjs-video-tracks-button "+i.prototype.buildWrapperCSSClass.call(this)}})}),define("managers/VideoPlayerManager",["jquery","videojs","videojs_modules/VideoTrackButton","utils/jsonUtil","factories/moduleFactory"],function(e,t,n,i,r){"use strict";var a=function(o){var s,l,u,c,d,h,p,f,m;s=this,l=a.markup,u=e.extend({$e:null,selector:".video-player-content",playerOptions:{controls:!0,preload:"metadata",autoplay:!1,controlBar:{remainingTimeDisplay:!1,chaptersButton:!1,descriptionsButton:!1,subtitlesButton:!1,audioTrackButton:!1,fullscreenToggle:!0,volumePanel:{volumeControl:{volumeBar:{mouseVolumeLevelDisplay:!1}}},progressControl:{seekBar:{playProgressBar:{timeTooltip:!1},mouseTimeDisplay:!1}}}},videoChapterSelector:".video-chapter-selector",defaultVolume:.8},o),c={name:"VideoPlayerManager",$e:u.$e||e(u.selector),player:null,chapters:{},hasStarted:!1,templates:{videoPlayer:{selector:"!.video-player-template"},videoIcons:{selector:"!.video-player-icons-template"},keyframeMarker:{selector:"!.keyframe-marker-template"}},components:{globalPage:{selector:"^.global-page"},videoPlayer:{selector:".video-player"},contentBodyTitle:{selector:"!.video-content-body-title"},progressHolder:{selector:".vjs-progress-holder"},playControl:{selector:".vjs-play-control"},volumeControl:{selector:".vjs-mute-control"},fullscreenControl:{selector:".vjs-fullscreen-control"},captionsControl:{selector:"div.vjs-subs-caps-button"},videoChapterSelector:{selector:"!"+u.videoChapterSelector},videoChapter:{selector:"!"+u.videoChapterSelector+" .video-chapter"},startVideoButton:{selector:"!.start-video-button"},videoSources:{selector:".video-player source"},nextVideo:{selector:".next-video"}},events:{"click !videoChapter":"videoChapterClick","click !startVideoButton":"startVideoButtonClick"}},d={},h={},p={init:function(){"true"===i.paramsToJson(location.search).autoplay&&p.startVideo()},startVideo:function(){c.$e.prepend(h.videoPlayer()),p.getComponents(),p.initPlayer(),p.togglePageState(),p.processChapters(),p.showContentBodyTitle(),d.nextVideo&&(p.getComponents(),d.nextVideo.appendTo(d.videoPlayer)),c.hasStarted=!0},initPlayer:function(){c.player=t("hero-video",u.playerOptions),c.player.ready(p.playerReady)},playerReady:function(){p.initVideoTracks(),c.player.controlBar.addChild(new n(c.player)),c.player.volume(u.defaultVolume),p.getComponents(),p.setupIcons(),c.player.on("loadeddata",function(){p.initChapters()}),c.hasStarted&&c.player.play()},setupIcons:function(){var t;t=e(h.videoIcons()),t.filter(".icon-play, .icon-pause").appendTo(d.playControl),t.filter(".icon-mute, .icon-vol").appendTo(d.volumeControl),t.filter(".icon-minimize, .icon-maximize").appendTo(d.fullscreenControl),t.filter(".icon-cc").prependTo(d.captionsControl),t.filter(".icon-livetrans").prependTo(e("div.vjs-video-tracks-button"))},initVideoTracks:function(){var n=c.player.videoTracks();e.each(d.videoSources,function(i,r){var a=new t.VideoTrack({id:r.id,language:e(r).data("lang"),label:e(r).data("langLabel"),selected:0===i});n.addTrack(a)}),n.addEventListener("change",function(){var e,t,i,r;(e=n.tracks_.find(function(e){return e.selected}))&&(i=c.player.paused(),r=c.player.currentTime(),t=d.videoSources.filter("#"+e.id),c.player.src({src:t.attr("src"),type:t.attr("type")}),c.player.ready(function(){c.player.currentTime(r),i||c.player.play()}))})},initChapters:function(){u.chapters&&u.chapters.length&&e.each(c.chapters,function(e,t){p.appendChapterKeyframe(t)})},appendChapterKeyframe:function(t){var n,i;n=p.getFramePercent(t.starttimeInSeconds),i=e(h.keyframeMarker(t)),i.css({left:n+"%"}),d.progressHolder.append(i)},showContentBodyTitle:function(){d.contentBodyTitle.show()},getChapterStarttimeInSeconds:function(e){var t,n,i,r;return t=e.start_time.split(":"),n=parseInt(t[0]),i=parseInt(t[1]),r=parseInt(t[2]),60*n*60+60*i+r},getFramePercent:function(e){return e/c.player.duration()*100},togglePageState:function(){d.globalPage.addClass("state-showing-video")},processChapters:function(){u.chapters&&u.chapters.length&&u.chapters.forEach(function(t){c.chapters[t.start_time]=e.extend({starttimeInSeconds:p.getChapterStarttimeInSeconds(t)},t)})},skipToChapter:function(e){var t;c.hasStarted||p.startVideo(),t=c.chapters[e],c.player.currentTime(t.starttimeInSeconds)}},f={videoChapterClick:function(){p.skipToChapter(e(this).data("startTime"))},startVideoButtonClick:function(){this.hasAttribute("href")||p.startVideo()}},m={},r({self:s,o:u,m:l,internal:c,elements:d,templates:h,fn:p,handlers:f,api:m}).create()};return a.markup={},a}),define("services/ieHandler",["jquery","utils/globalElements"],function(e,t){"use strict";var n={},i={SVG_REQUIRES_SHIM:"shim-svgs",SVG_SHIM_HOLDER:"shimmed-svg-holder"},r={shimSVG:function(t){var n=t[0].viewBox.baseVal,r=e('<canvas width="'+n.width+'" height="'+n.height+'"></canvas>');t.parent().addClass(i.SVG_SHIM_HOLDER),t.before(r)},shimSVGs:function(t){e("."+i.SVG_REQUIRES_SHIM+" svg",t).each(function(){r.shimSVG(e(this))})}};return n.init=function(){r.shimSVGs(t.body)},n}),define("managers/SearchFiltersManager",["jquery","forms/Form","utils/jsonUtil","factories/moduleFactory"],function(e,t,n,i){"use strict";var r=function(a){var o,s,l,u,c,d,h,p;o=this,l=r.markup,s=e.extend({$e:null,selector:".search-filters",paramMapKey:"pk",override_url:null},a),u={name:"SearchFiltersManager",$e:s.$e||e(s.selector),form:null,searchJson:{},validFilters:!0,components:{dateRangeSelects:{selector:".date-range-selects"},dateRangeValidationMessage:{selector:".date-range-selects .validation-message"},field:{selector:".field"}},events:{formReady:"formReady",change:"filterChange"}},c={},d={init:function(){u.form=new t({$e:u.$e})},cacheFilters:function(){u.searchJson=n.paramsToJson(location.search),e.extend(u.searchJson,u.form.getData()),delete u.searchJson.page},doSearch:function(){var t,i,r;i=e.extend({},u.searchJson),t=e.extend({},u.searchJson,u.form.getData()),n.isDiff(i,t)&&(r=n.jsonToParams(t,s.paramMapKey),s.override_url?window.location=s.override_url+"?"+r:location.search=r)},validate:function(){var e,t,n,i;e=!0,t=u.form.getData(),n=parseInt(t.start_year,10),i=parseInt(t.end_year,10),e=n<=i,c.dateRangeSelects.toggleClass(l.INVALID,n>i),u.validFilters=e},isValid:function(){return d.validate(),u.validFilters}},h={formReady:function(){u.form=u.$e.data("formInstance"),d.cacheFilters()},filterChange:function(){u.form&&u.form.isReady()&&d.isValid()&&d.doSearch()}},p={},i({self:o,o:s,m:l,internal:u,elements:c,fn:d,handlers:h,api:p}).create()};return r.markup={},r}),require(["Sentry","core","js.cookie","ui/OpenCloseToggler","ui/MoreText","ui/blocks/EmbedBlock","ui/blocks/TimelineBlock","ui/blocks/GalleryBlock","ui/Breadcrumb","ui/GalleryManager","ui/ListExpander","managers/VideoPlayerManager","services/ieHandler","managers/SearchFiltersManager"]),define("bundles/common",function(){});